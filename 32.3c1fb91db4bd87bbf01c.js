(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{FPrQ:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var o=n("vdWK"),r=n("FSKZ"),i=n("fXoL"),a=n("xDUJ"),s=n("1kSV"),c=n("kmKP"),l=n("Jn3s"),m=n("ofXK"),d=n("3Pt+");function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"p",13),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("Choose the form you'd like to associate with this stage ",e.pageTitle,".")}}function p(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",13),i["\u0275\u0275text"](1,"Choose the form you'd like to associate with this stage Section."),i["\u0275\u0275elementEnd"]())}function u(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",13),i["\u0275\u0275text"](1," Select the form you'd like reviewers to complete when assessing this application. "),i["\u0275\u0275elementEnd"]())}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",13),i["\u0275\u0275text"](1," Please first select the form you'd like applicants to complete. "),i["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",14),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("ngValue",e.formID),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.formName)}}function S(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275elementStart"](1,"label",15),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onAddNewForm()}),i["\u0275\u0275text"](2,"Add New Form"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}const v=function(){return{standalone:!0}};let I=(()=>{class e{constructor(e,t,n,r){this.formService=e,this.ngbModal=t,this.userService=n,this.ngbActiveModal=r,this.forms=[],this.form=new o.c,this.returnForm=[],this.companyID=this.userService.user.getValue().companyID}onAddNewForm(){const e=this.ngbModal.open(r.a);e.componentInstance.referenceID=this.referenceID,e.componentInstance.formCategoryID=this.formCategoryID,e.componentInstance.companyID=this.companyID,this.ngbActiveModal.close(),e.result.then(e=>{})}ngOnInit(){this.fillForms()}fillForms(){this.loading=!0,this.formService.getForms(this.companyID,0,0).subscribe(e=>{this.forms=e,this.loading=!1})}setFormSelected(){this.returnForm=this.form.formID?this.forms.filter(e=>e.formID===this.form.formID):[]}onSubmit(){this.ngbActiveModal.close(this.returnForm)}dismiss(){this.ngbActiveModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](s.p),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-selector"]],decls:21,vars:13,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],["class","lead",4,"ngIf"],[1,"form-group"],["id","formID","name","formID",1,"form-control",3,"ngModelOptions","ngModel","change","ngModelChange"],["value","0"],[3,"ngValue",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"action-row","d-flex"],[1,"btn","btn-primary","ml-auto","mr-0",3,"disabled","click"],[1,"lead"],[3,"ngValue"],[1,"label-options","cursor-pointer",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"h5",1),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",2),i["\u0275\u0275listener"]("click",function(){return t.dismiss()}),i["\u0275\u0275elementStart"](4,"span",3),i["\u0275\u0275text"](5,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275template"](7,f,2,1,"p",5),i["\u0275\u0275template"](8,p,2,0,"p",5),i["\u0275\u0275template"](9,u,2,0,"p",5),i["\u0275\u0275template"](10,g,2,0,"p",5),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275elementStart"](12,"select",7),i["\u0275\u0275listener"]("change",function(){return t.setFormSelected()})("ngModelChange",function(e){return t.form.formID=e}),i["\u0275\u0275elementStart"](13,"option",8),i["\u0275\u0275text"](14,"- Please select -"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](15,h,2,2,"option",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,S,3,0,"div",10),i["\u0275\u0275elementStart"](17,"div",6),i["\u0275\u0275elementStart"](18,"div",11),i["\u0275\u0275elementStart"](19,"button",12),i["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),i["\u0275\u0275text"](20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.isReviewForm?"Review Forms":"Select Form"," "),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("avnonLoader",t.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isReviewForm&&!t.isApplyForm&&!t.customFormSection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.customFormSection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isReviewForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isApplyForm),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModelOptions",i["\u0275\u0275pureFunction0"](12,v))("ngModel",t.form.formID),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.forms),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isReviewForm&&!t.isApplyForm&&!t.customFormSection),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!t.returnForm.length),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](t.isReviewForm?"Next":"Submit"))},directives:[l.a,m.n,d.B,d.q,d.t,d.v,d.D,m.m],styles:[""]}),e})()},FSKZ:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n("vdWK"),r=n("fXoL"),i=n("xDUJ"),a=n("1kSV"),s=n("tyNb"),c=n("kmKP"),l=n("3Pt+"),m=n("5eqV"),d=n("ofXK");const f=function(){return{standalone:!0}};function p(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",23),r["\u0275\u0275elementStart"](1,"input",24),r["\u0275\u0275listener"]("ngModelChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().isArchive=t}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](2,"label",25),r["\u0275\u0275text"](3,"Archive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("checked",e.isArchive)("ngModelOptions",r["\u0275\u0275pureFunction0"](3,f))("ngModel",e.isArchive)}}let u=(()=>{class e{constructor(e,t,n,r){this.formService=e,this.ngbActiveModal=t,this.router=n,this.userService=r,this.formCategoryID=1,this.referenceID=1,this.form=new o.c,this.isArchive=!1,this.user=this.userService.user.getValue()}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.form&&this.form.formID&&(this.isArchive=2===this.form.status,this.form.thankyouMessage&&(this.form.thankYouMessage=this.form.thankyouMessage)),console.log(this.form)}onCancel(){this.ngbActiveModal.close()}onSubmit(){this.form.companyID=this.companyID,this.form.formCategoryID=1,this.form.referenceID=1,this.form.createdByID=this.contactID,this.form.formID?(this.form.status=this.isArchive?2:1,this.formService.updateForm(this.form).subscribe(e=>{this.ngbActiveModal.close(this.form)})):(this.form.status=1,this.formService.insertForm(this.form).subscribe(e=>{this.form.formID=e.inOut_FormID,localStorage.setItem("formObject",JSON.stringify(this.form)),this.ngbActiveModal.close(),this.router.navigate(["forms/builder"])}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](s.d),r["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-add1"]],decls:42,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-add-content",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","formName"],["type","text","id","formName","name","formName","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","formDescription"],["name","formDescription","id","formDescription","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["for","introductionMessage"],["name","introductionMessage","id","introductionMessage","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["for","thankYouMessage"],["name","thankYouMessage","id","thankYouMessage","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group form-check",4,"ngIf"],["for","formTypeID"],["name","formTypeID","id","formTypeID",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"text-right"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary","ml-2",3,"disabled"],[1,"form-group","form-check"],["type","checkbox","id","archive",1,"form-check-input",3,"checked","ngModelOptions","ngModel","ngModelChange"],["for","archive",1,"form-check-label"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h1",1),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"button",2),r["\u0275\u0275listener"]("click",function(){return t.onCancel()}),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5,"\xd7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"form",5,6),r["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),r["\u0275\u0275elementStart"](9,"div",7),r["\u0275\u0275elementStart"](10,"label",8),r["\u0275\u0275text"](11,"Form Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"input",9),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formName=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275elementStart"](14,"label",10),r["\u0275\u0275text"](15,"Form Description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"textarea",11),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formDescription=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",7),r["\u0275\u0275elementStart"](18,"label",12),r["\u0275\u0275text"](19,"Introduction Message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"textarea",13),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.introductionMessage=e}),r["\u0275\u0275text"](21,"      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",7),r["\u0275\u0275elementStart"](23,"label",14),r["\u0275\u0275text"](24,"Thank you message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"textarea",15),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.thankYouMessage=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](26,p,4,4,"div",16),r["\u0275\u0275elementStart"](27,"div",7),r["\u0275\u0275elementStart"](28,"label",17),r["\u0275\u0275text"](29,"Form Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"select",18),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formTypeID=e}),r["\u0275\u0275elementStart"](31,"option",19),r["\u0275\u0275text"](32,"Please Select"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"option",19),r["\u0275\u0275text"](34,"Standard"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"option",19),r["\u0275\u0275text"](36,"Diagnostic"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"div",20),r["\u0275\u0275elementStart"](38,"button",21),r["\u0275\u0275listener"]("click",function(){return t.onCancel()}),r["\u0275\u0275text"](39,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"button",22),r["\u0275\u0275text"](41,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275reference"](8);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",t.form&&t.form.formID?"Edit":"Add"," Form "),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngModel",t.form.formName),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.form.formDescription),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.form.introductionMessage),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.form.thankYouMessage),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.form&&t.form.formID),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.form.formTypeID),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngValue",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",2),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("disabled",e.invalid)}},directives:[l.E,l.r,l.s,l.b,l.A,l.q,l.t,m.a,d.n,l.B,l.v,l.D,l.a],styles:[".form-add-content[_ngcontent-%COMP%]{max-height:86vh;overflow-x:hidden;overflow-y:auto}"]}),e})()},MxHx:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskSectionBuilderDetailModule",function(){return R});var o=n("ofXK"),r=n("tyNb"),i=n("OzGw"),a=n("0snc"),s=n("9122"),c=n("FPrQ"),l=n("vdWK"),m=n("MNGV"),d=n("8J6U"),f=n("dmN6"),p=n("fXoL"),u=n("kmKP"),g=n("xDUJ"),h=n("ev4g"),S=n("1kSV"),v=n("Jn3s");function I(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"span",15),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](3).index;return p["\u0275\u0275nextContext"]().addForm(t)}),p["\u0275\u0275text"](1,"Please Select Form"),p["\u0275\u0275elementEnd"]()}}function k(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",16),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](3).$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](e.task.taskTitle)}}function x(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"li"),p["\u0275\u0275elementStart"](1,"a",22),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](4).index;return p["\u0275\u0275nextContext"]().changeForm(t)}),p["\u0275\u0275text"](2,"Change Form"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}}function y(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",17),p["\u0275\u0275elementStart"](1,"div",18),p["\u0275\u0275elementStart"](2,"button",19),p["\u0275\u0275element"](3,"span",20),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"ul",21),p["\u0275\u0275elementStart"](5,"li"),p["\u0275\u0275elementStart"](6,"a",22),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](3).index;return p["\u0275\u0275nextContext"]().deleteTaskSection(t)}),p["\u0275\u0275text"](7,"Delete"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](8,x,3,0,"li",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](3).$implicit;p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&e.task)}}function D(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275template"](1,I,2,0,"span",12),p["\u0275\u0275template"](2,k,2,1,"span",13),p["\u0275\u0275template"](3,y,9,1,"div",14),p["\u0275\u0275elementContainerEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2).$implicit,t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&!e.task),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&e.task),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.adminCheck)}}function C(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"span",15),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](3).index;return p["\u0275\u0275nextContext"]().addForm(t)}),p["\u0275\u0275text"](1,"Please Select Form"),p["\u0275\u0275elementEnd"]()}}function b(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",16),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](3).$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](e.formTask.formName)}}function E(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"li"),p["\u0275\u0275elementStart"](1,"a",22),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](4).index;return p["\u0275\u0275nextContext"]().changeForm(t)}),p["\u0275\u0275text"](2,"Change Form"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",17),p["\u0275\u0275elementStart"](1,"div",18),p["\u0275\u0275elementStart"](2,"button",23),p["\u0275\u0275element"](3,"span",20),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"ul",21),p["\u0275\u0275elementStart"](5,"li"),p["\u0275\u0275elementStart"](6,"a",22),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](3).index;return p["\u0275\u0275nextContext"]().deleteTaskSection(t)}),p["\u0275\u0275text"](7,"Delete"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](8,E,3,0,"li",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](3).$implicit;p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&e.formTask)}}function M(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275template"](1,C,2,0,"span",12),p["\u0275\u0275template"](2,b,2,1,"span",13),p["\u0275\u0275template"](3,F,9,1,"div",14),p["\u0275\u0275elementContainerEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2).$implicit,t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&!e.formTask),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&e.formTask),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.adminCheck)}}function w(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",11),p["\u0275\u0275elementStart"](1,"h2"),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](3,D,4,3,"ng-container",10),p["\u0275\u0275template"](4,M,4,3,"ng-container",10),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]().$implicit,t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",e.taskSectionCategory," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",31!==t.taskCategoryID),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",31===t.taskCategoryID)}}function T(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",17),p["\u0275\u0275elementStart"](1,"div",18),p["\u0275\u0275elementStart"](2,"button",26),p["\u0275\u0275element"](3,"span",20),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"ul",21),p["\u0275\u0275elementStart"](5,"li"),p["\u0275\u0275elementStart"](6,"a",22),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"]().index;return p["\u0275\u0275nextContext"](3).deleteTaskSection(t,!0)}),p["\u0275\u0275text"](7,"Delete"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}}function V(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",11),p["\u0275\u0275elementStart"](1,"h2",25),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](3,T,8,0,"div",14),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=p["\u0275\u0275nextContext"](3);p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",e.taskSectionCategory," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",n.adminCheck)}}function N(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275template"](1,V,4,2,"div",24),p["\u0275\u0275elementContainerEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",e.productSections)}}const j=function(){return[16,23,24,26]};function A(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275template"](1,w,5,3,"div",9),p["\u0275\u0275template"](2,N,2,1,"ng-container",10),p["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!p["\u0275\u0275pureFunction0"](2,j).includes(e.taskSectionCategoryID)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",3===e.taskSectionCategoryID)}}const O=[{path:"",component:(()=>{class e{constructor(e,t,n,o,r,i){this.activatedRoute=e,this.userService=t,this.location=n,this.formService=o,this.taskService=r,this.modal=i,this.taskSections=[],this.productSections=[],this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID,this.adminCheck=this.user.permissions.some(e=>e.permissionAreaID===s.b.Admin)}ngOnInit(){this.taskCategoryID=+this.activatedRoute.snapshot.params.id,this.getSections()}getSections(e=!0){e&&(this.loading=!0),this.taskService.getTaskSection(this.companyID,this.taskCategoryID).subscribe(e=>{this.taskSections=e,this.productSections=e.filter(e=>[16,23,24,26].includes(e.taskSectionCategoryID)),e.some(e=>12===e.taskSectionCategoryID)?this.getTask():this.loading=!1})}getTask(){const e=this.taskSections.findIndex(e=>12===e.taskSectionCategoryID),t=this.taskSections[e];31!==this.taskCategoryID?this.taskService.getTask(0,1,t.taskSectionID,0,0,0,0,0,!1).subscribe(e=>{t.task=e[0]||null,this.loading=!1}):this.formService.getFormTask(t.taskSectionID,this.taskCategoryID).subscribe(e=>{t.formTask=e[0]||null,this.loading=!1})}openSectionModal(){const e=this.modal.open(a.a);e.componentInstance.existingSections=this.taskSections,e.componentInstance.taskCategoryID=this.taskCategoryID,e.result.then(e=>{e&&this.getSections(!1)})}deleteTaskSection(e,t=!1){const n=t?this.productSections[e]:this.taskSections[e],o=this.modal.open(i.a);o.componentInstance.objectType="Task Section",o.componentInstance.objectDetails=""+n.taskSectionCategory,o.result.then(o=>{"Yes"===o&&this.taskService.deleteTaskSection(n.taskSectionID).subscribe(()=>{if(t){const t=this.taskSections.findIndex(e=>e.taskSectionID===n.taskSectionID);-1!==t&&this.taskSections.splice(t,1),this.productSections.splice(e,1)}else this.taskSections.splice(e,1)})})}addForm(e){const t=this.taskSections[e],n=this.modal.open(c.a,{backdrop:"static"});n.componentInstance.customFormSection=!0,n.result.then(e=>{if(e[0]){if(this.loading=!0,31===this.taskCategoryID){const n=new f.a;return n.formName=e[0].formName,n.formID=e[0].formID,n.referenceID=t.taskSectionID,n.formCategoryID=this.taskCategoryID,void this.formService.insertFormTask(n).subscribe(e=>{n.formTaskID=e.inOut_FormTaskID,t.formTask=n,this.loading=!1})}let n=new m.a;n.formID=e[0].formID,n.taskCategoryID=1,n.referenceID=t.taskSectionID,n.endDate=Object(d.a)(new Date),n.taskTitle=e[0].formName,n.taskDescription=`Complete form for complete ${t.taskSectionCategory} section`,n.submittedBy=this.contactID,this.taskService.addTask(n).subscribe(e=>{n=e,n.taskID=e.inOut_TaskID,t.task=n,this.loading=!1})}})}changeForm(e){var t,n,o,r;const i=this.taskSections[e],a=new l.c;a.formID=(null===(t=null==i?void 0:i.task)||void 0===t?void 0:t.formID)||(null===(n=null==i?void 0:i.formTask)||void 0===n?void 0:n.formID),a.formName=(null===(o=null==i?void 0:i.task)||void 0===o?void 0:o.formName)||(null===(r=null==i?void 0:i.formTask)||void 0===r?void 0:r.formName);const s=this.modal.open(c.a,{backdrop:"static"});s.componentInstance.form=Object(d.l)(a),s.componentInstance.returnForm=[Object(d.l)(a)],s.componentInstance.customFormSection=!0,s.result.then(e=>{if(e[0]&&e[0].formID!==a.formID){if(this.loading=!0,31===this.taskCategoryID){const t=Object(d.l)(i.formTask);return t.formID=e[0].formID,t.formName=e[0].formName,void this.formService.updateFormTask(t).subscribe(()=>{i.formTask=t,this.loading=!1})}const t=Object(d.l)(i.task);t.formID=e[0].formID,t.taskTitle=e[0].formName,this.taskService.updateTask(t).subscribe(()=>{i.task=t,this.loading=!1})}})}back(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](r.a),p["\u0275\u0275directiveInject"](u.a),p["\u0275\u0275directiveInject"](o.j),p["\u0275\u0275directiveInject"](g.a),p["\u0275\u0275directiveInject"](h.a),p["\u0275\u0275directiveInject"](S.p))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-task-section-builder-detail"]],decls:13,vars:3,consts:[[3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"filter-container","d-flex","w-100","align-items-center","border-bottom"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],[4,"ngFor","ngForOf"],["class","entry pb-3",4,"ngIf"],[4,"ngIf"],[1,"entry","pb-3"],["class","cursor-pointer text-primary",3,"click",4,"ngIf"],["class","cursor-pointer text-primary",4,"ngIf"],["class","actions",4,"ngIf"],[1,"cursor-pointer","text-primary",3,"click"],[1,"cursor-pointer","text-primary"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button","id","dd","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],["class","entry pb-3",4,"ngFor","ngForOf"],[1,"pl-3"],["type","button","id","d","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275elementStart"](2,"span",2),p["\u0275\u0275listener"]("click",function(){return t.back()}),p["\u0275\u0275element"](3,"i",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"h1",4),p["\u0275\u0275text"](5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"div",5),p["\u0275\u0275elementStart"](7,"span"),p["\u0275\u0275text"](8,"Sections"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"a",6),p["\u0275\u0275listener"]("click",function(){return t.openSectionModal()}),p["\u0275\u0275element"](10,"span",7),p["\u0275\u0275text"](11,"Manage Sections "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](12,A,3,3,"ng-container",8),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("avnonLoader",t.loading),p["\u0275\u0275advance"](5),p["\u0275\u0275textInterpolate1"](" ",31===t.taskCategoryID?"Monthly":"Baseline"," Report Section Builder "),p["\u0275\u0275advance"](7),p["\u0275\u0275property"]("ngForOf",t.taskSections))},directives:[v.a,o.m,o.n],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.h.forChild(O)],r.h]}),e})();var K=n("3Pt+"),$=n("j4PG"),J=n("PCNd");let R=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.c,P,K.l,K.z,S.q,S.l,$.a,J.a]]}),e})()},dmN6:function(e,t,n){"use strict";n.d(t,"a",function(){return o});class o{constructor(){this.formID=null,this.referenceID=null,this.formCategoryID=null,this.deadlineDays=null}}}}]);