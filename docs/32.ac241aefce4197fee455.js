(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"D+TJ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var a=n("tk/3"),i=n("2Vo4"),o=n("AytR"),r=n("fXoL");const c=o.a.apiUrl+"/",l=localStorage.getItem("token");let s=(()=>{class t{constructor(t){this.http=t,this.cachedEnterpriseEventDetails=new i.a(null),this.httpOptions={headers:new a.f({"Content-Type":"application/json",Token:l})}}getJobCreation(t,e="2020-01-01",n="2020-01-01",a=0,i=0,o=0){return this.http.get(`${c}JobCreation?CompanyID=${t}&StartDate=${e}&EndDate=${n}&ProgramID=${a}&ProgramInstanceID=${i}&CompanyLocationID=${o}`,this.httpOptions)}getPortfolios(t,e,n,a,i,o="2020-01-01",r="2020-01-01"){return this.http.get(`${c}portfolio/stage/timeline?ProgramInstanceStageID=${a}&CompanyID=${e}&companyProgramInstanceStageID=${i}&StartDate=${o}&ProgramID=${t}&ProgramInstanceID=${n}&EndDate=${r}`,this.httpOptions)}getEnterpriseEventDetails(t,e,n,a,i,o,r,l,s,m,p,d){return this.http.get(`\n        ${c}Event/summary/byprogrammedetailenterprise?CompanyID=${t}&DivisionID=${e}&DepartmentID=${n}&CourseID=${a}&CourseCategoryID=${i}&ProviderID=${o}&StartDate=${r}&EndDate=${l}&ProvinceID=${s}&PeromnesID=${m}&DesignationID=${p}&ContactID=${d}\n    `)}getCachedEnterpriseEventDetails(){return this.cachedEnterpriseEventDetails.asObservable()}setCachedEnterpriseEventDetails(t){this.cachedEnterpriseEventDetails.next(t)}getApplications(t){return this.http.get(`${c}Application/all?CompanyID=${t}&MasterCompanyID=0&ProgramInstanceID=0&CompanyLocationID=0&ApplicationStatusID=0&ApplicationID=0`,this.httpOptions)}getApplicationsReview(t){return this.http.get(`${c}Application/Review?MasterCompanyID=${t}&ApplicationReviewID=0&ApplicationID=0`,this.httpOptions)}getEvents(t){return this.http.get(`${c}Event/full?CompanyID=${t}\n\t\t\t&ContactID=0\n\t\t\t&CourseID=0\n\t\t\t&ReferenceID=0\n\t\t\t&StartDate=''\n\t\t\t&EndDate=''\n\t\t\t&EventCategoryID=0\n\t\t\t&EventID=0`,this.httpOptions)}getFinancial(t,e){return this.http.get(`${c}Company/financial?CompanyID=${t}&FinancialCategoryID=0&MonthID=0&YearID=${e}`,this.httpOptions)}getBudget(t,e){return this.http.get(`${c}Company/budget?CompanyBudgetID=0&CompanyID=${t}&CompanyFinancialCategoryID=0&MonthID=0&YearID=${e}`,this.httpOptions)}getDelegates(){return this.http.get(c+"Event/delegate?EventDelegateID=0&CourseID=0&EventID=0&ContactID=0&EventCategoryID=0&ParentEventID=0",this.httpOptions)}getTransaction(){return this.http.get(c+"Transaction/event?CompanyAccountID=0&EventID=0",this.httpOptions)}getCompanyFinancialPortfolio(t,e,n=2020,a=0,i=0,o=0,r=0,l=0){return this.http.get(`${c}Company/financial/portfolio?CompanyID=${t}&FinancialCategoryID=${e}&MonthID=${a}&YearID=${n}&ProgramInstanceID=${i}&ProgramID=${o}&CompanyLocationID=${r}&MasterCompanyID=${l}`,this.httpOptions)}getDashboard(t=0,e=0,n=0,a=0){return this.http.get(`${c}dashboard?DashboardID=${t}&ContactID=${e}&DashboardCategoryID=${n}&ReferenceID=${a}`)}postDashboard(t){return this.http.post(c+"dashboard",t)}deleteDashboard(t){return this.http.delete(`${c}dashboard/${t}`)}getDashboardCard(t){return this.http.get(`${c}dashboard/card?DashboardID=${t}`)}postDashboardCard(t){return this.http.post(c+"dashboard/card",t)}deleteDashboardCard(t=0){return this.http.delete(`${c}dashboard/card/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275inject"](a.b))},t.\u0275prov=r["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t})()},S0QU:function(t,e,n){"use strict";n.d(e,"a",function(){return a});const a={FilterConditions:"FilterConditions",Applications:"Applications",JobCreation:"JobCreation",ApplicationsReview:"ApplicationsReview",Events:"Events",Financial:"Financial",Budget:"Budget",Delegates:"Delegates",Transaction:"Transaction"}},Unjc:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n("2Vo4"),i=n("fXoL");let o=(()=>{class t{constructor(){this._observableState=new Array}getObservable(t){return this._observableState[t]||(this._observableState[t]=new a.a(null)),this._observableState[t].asObservable()}setObservable(t,e){this._observableState[t]||(this._observableState[t]=new a.a(null)),this._observableState[t].next(e)}unsubscribe(t){this._observableState[t]&&(this._observableState[t].unsubscribe(),this._observableState[t]=null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t})()},njZD:function(t,e,n){"use strict";n.r(e),n.d(e,"AccountModule",function(){return fe});var a=n("ofXK"),i=n("S0QU"),o=n("8J6U"),r=n("w6ya"),c=n("4CJs");class l{constructor(){this.companyAccountID=null,this.companyID=null,this.companyLocationID=null,this.companyAccountTypeID=null,this.accountName=null,this.accountNumber=null,this.bank=null,this.branchName=null,this.swiftCode=null,this.companyAccountCategoryID=null,this.referenceID=null,this.accountDescription=null,this.openingBalance=null}}var s=n("fXoL"),m=n("rdQE"),p=n("8CXc"),d=n("kmKP"),u=n("5eHb"),g=n("1kSV"),h=n("3Pt+");function f(t,e){1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1," Update Account "),s["\u0275\u0275elementContainerEnd"]())}function y(t,e){1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1," Add Account "),s["\u0275\u0275elementContainerEnd"]())}function C(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"option",19),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275property"]("ngValue",t.programID),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](t.programTitle)}}let I=(()=>{class t{constructor(t,e,n,a,i){this.companyAccountService=t,this.programService=e,this.userService=n,this.toastrService=a,this.ngbActiveModal=i,this.programs=[],this.companyAccount=new l,this.user=n.user.getValue(),this.companyID=this.user.companyID||0}ngOnInit(){this.fillPrograms()}onSubmit(){this.companyAccount.referenceID?this.updateAccount():this.addNewAccount()}updateAccount(){this.loading=!0,this.companyAccount.companyID=this.companyID,this.companyAccountService.updateCompanyAccount(this.companyAccount).subscribe(t=>{this.loading=!1,this.toastrService.success("Account has been updated"),this.ngbActiveModal.close(this.companyAccount)})}addNewAccount(){this.loading=!0,this.companyAccount.companyID=this.companyID,this.companyAccountService.addCompanyAccount(this.companyAccount).subscribe(t=>{this.loading=!1,this.toastrService.success("Account has been added"),this.companyAccount.companyAccountID=t.inOut_CompanyAccountID,this.ngbActiveModal.close(this.companyAccount)})}dismiss(){this.ngbActiveModal.dismiss()}fillPrograms(){this.loading=!0,this.programService.getPrograms(this.companyID).subscribe(t=>{this.programs=t,this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](m.a),s["\u0275\u0275directiveInject"](p.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](u.b),s["\u0275\u0275directiveInject"](g.a))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-account-add"]],decls:29,vars:7,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","accountName"],["type","text","name","accountName","id","accountName","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","referenceID"],["name","referenceID","id","referenceID",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"ngValue",4,"ngFor","ngForOf"],["for","openingBalance"],["type","number","name","openingBalance","id","openingBalance","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"ngValue"]],template:function(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"h5",1),s["\u0275\u0275template"](2,f,2,0,"ng-container",2),s["\u0275\u0275template"](3,y,2,0,"ng-container",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"button",3),s["\u0275\u0275listener"]("click",function(){return e.dismiss()}),s["\u0275\u0275elementStart"](5,"span",4),s["\u0275\u0275text"](6,"\xd7"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",5),s["\u0275\u0275elementStart"](8,"form",6,7),s["\u0275\u0275listener"]("ngSubmit",function(){return e.onSubmit()}),s["\u0275\u0275elementStart"](10,"div",8),s["\u0275\u0275elementStart"](11,"div",8),s["\u0275\u0275elementStart"](12,"label",9),s["\u0275\u0275text"](13,"Account Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"input",10),s["\u0275\u0275listener"]("ngModelChange",function(t){return e.companyAccount.accountName=t}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",8),s["\u0275\u0275elementStart"](16,"label",11),s["\u0275\u0275text"](17,"Program Link"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"select",12),s["\u0275\u0275listener"]("ngModelChange",function(t){return e.companyAccount.referenceID=t}),s["\u0275\u0275elementStart"](19,"option",13),s["\u0275\u0275text"](20,"--"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](21,C,2,2,"option",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",8),s["\u0275\u0275elementStart"](23,"label",15),s["\u0275\u0275text"](24,"Opening Balance"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"input",16),s["\u0275\u0275listener"]("ngModelChange",function(t){return e.companyAccount.openingBalance=t}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"div",17),s["\u0275\u0275elementStart"](27,"button",18),s["\u0275\u0275text"](28,"Submit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275reference"](9);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.companyAccount.referenceID),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.companyAccount.referenceID),s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("ngModel",e.companyAccount.accountName),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",e.companyAccount.referenceID),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",e.programs),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",e.companyAccount.openingBalance),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",t.invalid)}},directives:[a.n,h.E,h.r,h.s,h.b,h.A,h.q,h.t,h.B,h.v,h.D,a.m,h.w],styles:[""]}),t})();var x=n("OzGw"),D=n("ELnu"),b=n("cp0P"),v=n("A63E"),S=n("7RJT");let E=(()=>{class t{constructor(){this.isExpand$=new S.BehaviorSubject(!1),this.isExpand=this.isExpand$.asObservable()}changeState(t){this.isExpand$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var M=n("Jn3s");function A(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"option",21),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275property"]("value",t.value),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",t.name," ")}}function O(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function _(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",27),s["\u0275\u0275elementStart"](1,"div",28),s["\u0275\u0275elementStart"](2,"button",29),s["\u0275\u0275element"](3,"span",30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"ul",31),s["\u0275\u0275elementStart"](5,"li"),s["\u0275\u0275elementStart"](6,"a",32),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](2).$implicit;return s["\u0275\u0275nextContext"]().editCategory(e)}),s["\u0275\u0275text"](7,"Edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"li"),s["\u0275\u0275elementStart"](9,"a",32),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](2).$implicit;return s["\u0275\u0275nextContext"]().deleteCategory(e)}),s["\u0275\u0275text"](10,"Delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function P(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",24),s["\u0275\u0275elementStart"](2,"div",25),s["\u0275\u0275text"](3),s["\u0275\u0275template"](4,_,11,0,"div",26),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",t.financialCategory," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.financialCategoryMasterID)}}const F=function(){return{standalone:!0}};function w(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",33),s["\u0275\u0275listener"]("ngModelChange",function(e){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().$implicit.financialCategory=e})("keyup.enter",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)})("blur",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("id","category-"+t.financialCategoryID)("readOnly",t.financialCategoryMasterID)("ngModel",t.financialCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](4,F))}}function $(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"td"),s["\u0275\u0275elementStart"](1,"input",35),s["\u0275\u0275listener"]("ngModelChange",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().$implicit[n.month+"_budgetAmount"]=e})("ngModelChange",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onChangeBudgetAmount(n,e.month)})("contextmenu",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit,a=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onrightClickBudgetAmount(e,a,n.month)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModelOptions",s["\u0275\u0275pureFunction0"](2,F))("ngModel",e[t.month+"_budgetAmount"])}}function B(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,$,2,3,"td",34),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0)}}function k(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td",9),s["\u0275\u0275template"](2,P,5,2,"ng-container",22),s["\u0275\u0275template"](3,w,1,5,"ng-template",null,23,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,B,2,1,"ng-container",6),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=s["\u0275\u0275reference"](4),a=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.editable)("ngIfElse",n),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",a.columns)}}function T(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",37),s["\u0275\u0275elementStart"](1,"span",37),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"number"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](3,1,e.getTotalIncomes(t.month,1))," ")}}function V(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,T,4,3,"th",36),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0)}}function j(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",39),s["\u0275\u0275elementStart"](1,"div",28),s["\u0275\u0275elementStart"](2,"button",29),s["\u0275\u0275element"](3,"span",30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"ul",40),s["\u0275\u0275elementStart"](5,"li"),s["\u0275\u0275elementStart"](6,"a",32),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](3).$implicit;return s["\u0275\u0275nextContext"]().editCategory(e)}),s["\u0275\u0275text"](7,"Edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"li"),s["\u0275\u0275elementStart"](9,"a",32),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](3).$implicit;return s["\u0275\u0275nextContext"]().deleteCategory(e)}),s["\u0275\u0275text"](10,"Delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function N(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",24),s["\u0275\u0275elementStart"](2,"div",25),s["\u0275\u0275text"](3),s["\u0275\u0275template"](4,j,11,0,"div",38),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",t.financialCategory," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.financialCategoryMasterID)}}function L(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,N,5,2,"ng-container",22),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275reference"](4);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.editable)("ngIfElse",e)}}function R(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",33),s["\u0275\u0275listener"]("ngModelChange",function(e){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().$implicit.financialCategory=e})("keyup.enter",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)})("blur",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("id","category-"+t.financialCategoryID)("readOnly",t.financialCategoryMasterID)("ngModel",t.financialCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](4,F))}}function U(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"td"),s["\u0275\u0275elementStart"](1,"input",35),s["\u0275\u0275listener"]("ngModelChange",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().$implicit[n.month+"_budgetAmount"]=e})("ngModelChange",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onChangeBudgetAmount(n,e.month)})("contextmenu",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit,a=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onrightClickBudgetAmount(e,a,n.month)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModelOptions",s["\u0275\u0275pureFunction0"](2,F))("ngModel",e[t.month+"_budgetAmount"])}}function Y(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,U,2,3,"td",34),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0)}}function H(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td",9),s["\u0275\u0275template"](2,L,2,2,"ng-container",22),s["\u0275\u0275template"](3,R,1,5,"ng-template",null,23,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,Y,2,1,"ng-container",6),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=s["\u0275\u0275reference"](4),a=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.editable)("ngIfElse",n),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",a.columns)}}function z(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",37),s["\u0275\u0275elementStart"](1,"span",37),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"number"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](3,1,e.getTotalExpenses(t.month,1))," ")}}function J(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,z,4,3,"th",36),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0)}}function q(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",41),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,t.totalIncomes-t.totalExpenses)," ")}}let X=(()=>{class t{constructor(t,e,n,a,i,o){this.financialService=t,this.modal=e,this.cdr=n,this.userService=a,this.homeExpandService=i,this.activeModal=o,this.financialUpdated=new s.EventEmitter,this.close=new s.EventEmitter,this.yearID=null,this.monthID=null,this.companyID=null,this.years=[],this.months=D.a.create(),this.columns=[],this.isProcessing=!1,this.contactID=null,this.companyAccountID=0,this.categories=[],this.incomeCategories=[],this.incomeCategory="",this.expenseCategories=[],this.expenseCategory="",this.categorySelected=null,this.monthSelected=null,this.contactID=this.userService.user.getValue().contactID}ngOnInit(){this.buildListYearsForFilter(),this.buildColumnsLockup(),this.getCategories(),this.homeExpandService.changeState(!0)}buildListYearsForFilter(){for(let t=this.yearID;t<=this.yearID+3;++t)this.years.push({name:t,value:t})}buildColumnsLockup(){let t=1;for(let e=0;e<36;++e)e>0&&e%3==0&&(t+=1),this.columns.push({index:e,month:t})}getCategories(){this.isProcessing=!0,this.financialService.getCategories(this.companyID).subscribe(t=>{if(t){t=t.sort((t,e)=>t.financialCategoryID>e.financialCategoryID?1:t.financialCategoryID<e.financialCategoryID?-1:0),this.incomeCategories=t.filter(t=>1===t.financialCategoryTypeID),this.expenseCategories=t.filter(t=>2===t.financialCategoryTypeID),this.categories=[];let e=0;for(const t of this.incomeCategories)t.index=e,this.categories.push(t),e++;for(const t of this.expenseCategories)t.index=e,this.categories.push(t),e++;this.getFinancial()}},()=>{this.isProcessing=!1,this.cdr.detectChanges()})}getFinancial(){this.isProcessing=!0,this.categories.forEach(t=>{this.months.forEach(e=>{this.setDefaultValueCategoryPerMonth(t,e.value),t[e.value+"_budgetAmount"]=null,t[e.value+"_actualAmount"]=null,t[e.value+"_variance"]=null,e.openingBalance=null,e.totalIncomes=null,e.totalExpenses=null,e.closingBalance=null})}),this.financialService.getBudgets({companyBudgetID:0,companyID:this.companyID,companyFinancialCategoryID:0,monthID:0,yearID:this.yearID,companyAccountID:this.companyAccountID}).subscribe(t=>{t&&t.length>0&&this.categories.forEach(e=>{this.months.forEach(n=>{t.some(t=>{t.companyFinancialCategoryID===e.financialCategoryID&&t.monthID===n.value&&(e[n.value+"_budgetAmount"]=t.budgetAmount,e[n.value+"_companyBudgetID"]=t.companyBudgetID,e[n.value+"_companyAccountID"]=t.companyAccountID||this.companyAccountID,e[n.value+"_companyFinancialCategoryID"]=e.financialCategoryID)})})}),this.financialService.getFinancial({companyID:this.companyID,financialCategoryID:0,monthID:0,yearID:this.yearID}).subscribe(t=>{t&&t.length>0&&(this.categories.forEach(e=>{this.months.forEach(n=>{t.some(t=>{t.financialCategoryID===e.financialCategoryID&&t.monthID===n.value&&(e[n.value+"_actualAmount"]=t.actualAmount,e[n.value+"_companyFinancialID"]=t?t.companyFinancialID:null)}),this.setVarianceValue(e,n.value)})}),this.calculateFinancialSumary()),this.isProcessing=!1,this.cdr.detectChanges()},()=>{this.isProcessing=!1,this.cdr.detectChanges()})},()=>{this.isProcessing=!1,this.cdr.detectChanges()})}calculateFinancialSumary(){this.months.forEach(t=>{t.openingBalance=this.getOpeningBalance(t.value),t.totalIncomes=this.getTotalIncomes(t.value,1),t.totalExpenses=this.getTotalExpenses(t.value,1),t.closingBalance=this.getClosingBalance(t.value)})}onChangeBudgetAmount(t,e){this.setVarianceValue(t,e),this.calculateFinancialSumary()}onChangeActualAmount(t,e){this.setVarianceValue(t,e),this.calculateFinancialSumary()}onrightClickBudgetAmount(t,e,n){t.preventDefault(),t.stopPropagation();const a=document.getElementById("ctxMenu");a.style.display="block",a.style.left=t.clientX-100+"px",a.style.top=t.clientY-50+"px",this.categorySelected=e,this.categorySelected={financialCategoryTypeID:e.financialCategoryTypeID,financialCategoryID:e.financialCategoryID,budgetAmount:e[n+"_budgetAmount"],actualAmount:e[n+"_actualAmount"]},this.monthSelected=n}disableContextMenu(){const t=document.getElementById("ctxMenu");t.style.display="none",t.style.left="",t.style.top="",this.categorySelected=null,this.monthSelected=null}applyAll(){this.categories.forEach(t=>{this.months.forEach(e=>{t.financialCategoryTypeID===this.categorySelected.financialCategoryTypeID&&t[e.value+"_companyFinancialCategoryID"]===this.categorySelected.financialCategoryID&&(t[e.value+"_budgetAmount"]=this.categorySelected.budgetAmount)})}),this.disableContextMenu()}saveFromCtxMenu(){this.disableContextMenu(),this.updateFinancial(),this.close.emit(!0),this.activeModal.close(!0)}setVarianceValue(t,e){if(t){const n=t[e+"_budgetAmount"],a=t[e+"_actualAmount"];let i=null;Number(n)&&Number(a)&&(i=Number(n)-Number(a)),i<0&&(i=-i),t[e+"_variance"]=i,t[e+"_classVariance"]=this.getVarianceClass(t,e)}}getTotalIncomes(t,e){let n=null;for(const a of this.incomeCategories){let i;1===e?i=a[t+"_budgetAmount"]:2===e&&(i=a[t+"_actualAmount"]),i&&(n+=Number(i))}return n}getTotalExpenses(t,e){let n=null;for(const a of this.expenseCategories){let i;1===e?i=a[t+"_budgetAmount"]:2===e&&(i=a[t+"_actualAmount"]),i&&(n+=Number(i))}return n}getOpeningBalance(t){return 1===t?0:this.getClosingBalance(t-1)}getClosingBalance(t){return this.getOpeningBalance(t)+this.getTotalIncomes(t,2)-this.getTotalExpenses(t,2)}getVarianceClass(t,e){const n=t[e+"_budgetAmount"],a=t[e+"_actualAmount"];let i=null;return Number(n)&&Number(a)&&(i=Number(n)-Number(a)),1===t.financialCategoryTypeID&&i>0||2===t.financialCategoryTypeID&&i<0?"text-danger":""}storeCategory(t){let e;1===t&&""!==this.incomeCategory?(e={companyID:this.companyID,financialCategory:this.incomeCategory,financialCategoryTypeID:t,financialCategoryCode:null},this.incomeCategory=""):2===t&&""!==this.expenseCategory&&(e={companyID:this.companyID,financialCategory:this.expenseCategory,financialCategoryTypeID:t,financialCategoryCode:null},this.expenseCategory=""),e&&this.financialService.storeCategory(e).subscribe(t=>{var e;t&&(t.financialCategoryID=t.inOut_FinancialCategoryID,t.index=null===(e=this.categories)||void 0===e?void 0:e.length,this.setDafaultValueForCategory(t),this.categories.push(t),this.incomeCategories=this.categories.filter(t=>1===t.financialCategoryTypeID),this.expenseCategories=this.categories.filter(t=>2===t.financialCategoryTypeID),this.cdr.detectChanges())})}setDafaultValueForCategory(t){for(const e of this.months)this.setDefaultValueCategoryPerMonth(t,e.value)}setDefaultValueCategoryPerMonth(t,e){t[e+"_companyBudgetID"]=null,t[e+"_companyAccountID"]=this.companyAccountID,t[e+"_financialCategoryTypeID"]=t.financialCategoryTypeID,t[e+"_companyFinancialCategoryID"]=t.financialCategoryID,t[e+"_monthID"]=e,t[e+"_yearID"]=this.yearID,t[e+"_budgetAmount"]=null,t[e+"_companyID"]=this.companyID,t[e+"_companyFinancialID"]=null,t[e+"_actualAmount"]=null,t[e+"_capturedBy"]=this.contactID,t[e+"_variance"]=null}editCategory(t){t.financialCategoryMasterID||(t.editable=!0,setTimeout(()=>{document.getElementById("category-"+t.financialCategoryID).focus()}))}updateCategory(t){t.editable=!1,this.financialService.updateCategory(t).subscribe()}updateFinancial(){const t=[],e=[],n=[],a=[],i=[];for(const m of this.categories)for(const o of this.months){const r=o.value;t.push({companyBudgetID:m[r+"_companyBudgetID"],companyAccountID:m[r+"_companyAccountID"],companyFinancialCategoryID:m[r+"_companyFinancialCategoryID"],financialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),budgetAmount:m[r+"_budgetAmount"],companyID:this.companyID,companyFinancialID:m[r+"_companyFinancialID"],actualAmount:m[r+"_actualAmount"],capturedBy:this.contactID}),e.push({companyAccountID:m[r+"_companyAccountID"],companyFinancialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),budgetAmount:m[r+"_budgetAmount"],companyID:this.companyID}),n.push({companyAccountID:m[r+"_companyAccountID"],companyBudgetID:m[r+"_companyBudgetID"],companyFinancialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),budgetAmount:m[r+"_budgetAmount"]}),a.push({companyID:this.companyID,financialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),actualAmount:m[r+"_actualAmount"],capturedBy:this.contactID}),i.push({companyFinancialID:m[r+"_companyFinancialID"],financialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),actualAmount:m[r+"_actualAmount"],capturedBy:this.contactID})}const o=[],r=t.filter(t=>!t.companyBudgetID);r.length&&o.push(this.financialService.storeBudgets(r));const c=t.filter(t=>!!t.companyBudgetID);c.length&&o.push(this.financialService.updateBudgets(c));const l=t.filter(t=>!t.companyFinancialID);l.length&&o.push(this.financialService.storeFinancial(l));const s=t.filter(t=>!!t.companyFinancialID);s.length&&o.push(this.financialService.updateFinancial(s)),this.isProcessing=!0,Object(b.a)(o).subscribe(()=>{this.isProcessing=!1,this.getFinancial(),this.financialUpdated.emit(!0),this.activeModal.close(!0)})}deleteCategory(t){const e=this.modal.open(x.a,{backdrop:"static"});e.componentInstance.objectType="Category",e.componentInstance.objectDetails=(null==t?void 0:t.financialCategory)+" Category",e.result.then(e=>{"Yes"===e&&this.financialService.deleteCategory(t.financialCategoryID).subscribe(()=>{this.categories.splice(t.index,1);let e=0;for(const t of this.categories)t.index=e,++e;this.incomeCategories=this.categories.filter(t=>1===t.financialCategoryTypeID),this.expenseCategories=this.categories.filter(t=>2===t.financialCategoryTypeID),this.cdr.detectChanges()})})}continueLater(){this.close.emit(!0),this.activeModal.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](g.p),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](E),s["\u0275\u0275directiveInject"](g.a))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-budget-report-annual"]],inputs:{yearID:"yearID",monthID:"monthID",companyID:"companyID"},outputs:{financialUpdated:"financialUpdated",close:"close"},decls:51,vars:16,consts:[[1,"d-flex","flex-column","w-100","position-relative","budget-wrapper",3,"avnonLoader"],[1,"table-responsive","table-financial-report","m-0"],[1,"table","table-hover","table-bordered",3,"click"],[1,"sticky-left"],[1,"w-auto","form-control","form-control-sm",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["colspan","37"],[1,"font-weight-bold"],[1,"col-category","sticky-left"],["type","text","placeholder","Add new category",1,"form-control","form-control-sm","col-category",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["colspan","36"],[1,"text-nowrap","sticky-left"],["type","text","placeholder","Add new category",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["class","text-right","colspan","1",4,"ngFor","ngForOf"],[1,"text-right","my-3","pl-3","pr-3"],[1,"cursor-pointer","text-primary","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["id","ctxMenu"],[1,"list-group"],["href","javascript:void(0)",1,"list-group-item","list-group-item-action",3,"click"],[3,"value"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"d-flex","align-items-center"],[1,"d-flex","align-items-center","flex-grow-1"],["class","actions ml-auto position-relative",4,"ngIf"],[1,"actions","ml-auto","position-relative"],["ngbDropdown","","display","dynamic","container","body"],["type","button","ngbDropdownToggle","","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["ngbDropdownMenu","",1,"dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","text",1,"form-control","form-control-sm",3,"id","readOnly","ngModel","ngModelOptions","ngModelChange","keyup.enter","blur"],[4,"ngIf"],["type","number",1,"form-control","form-control-sm","text-right",3,"ngModelOptions","ngModel","ngModelChange","contextmenu"],["class","text-right",4,"ngIf"],[1,"text-right"],["class","actions ml-auto",4,"ngIf"],[1,"actions","ml-auto"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["colspan","1",1,"text-right"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"table",2),s["\u0275\u0275listener"]("click",function(){return e.disableContextMenu()}),s["\u0275\u0275elementStart"](3,"thead"),s["\u0275\u0275elementStart"](4,"tr"),s["\u0275\u0275elementStart"](5,"th",3),s["\u0275\u0275elementStart"](6,"select",4),s["\u0275\u0275listener"]("change",function(){return e.getFinancial()})("ngModelChange",function(t){return e.yearID=t}),s["\u0275\u0275template"](7,A,2,2,"option",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](8,O,2,1,"th",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"tbody"),s["\u0275\u0275elementStart"](10,"tr"),s["\u0275\u0275elementStart"](11,"th",7),s["\u0275\u0275elementStart"](12,"span",8),s["\u0275\u0275text"](13,"Income Categories"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](14,k,6,3,"tr",6),s["\u0275\u0275elementStart"](15,"tr"),s["\u0275\u0275elementStart"](16,"td",9),s["\u0275\u0275elementStart"](17,"input",10),s["\u0275\u0275listener"]("ngModelChange",function(t){return e.incomeCategory=t})("keyup.enter",function(){return e.storeCategory(1)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](18,"td",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"tr"),s["\u0275\u0275elementStart"](20,"th",12),s["\u0275\u0275text"](21," Total Income "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](22,V,2,1,"ng-container",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"tr"),s["\u0275\u0275elementStart"](24,"th",7),s["\u0275\u0275elementStart"](25,"span",8),s["\u0275\u0275text"](26,"Expense Categories"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](27,H,6,3,"tr",6),s["\u0275\u0275elementStart"](28,"tr"),s["\u0275\u0275elementStart"](29,"td",9),s["\u0275\u0275elementStart"](30,"input",13),s["\u0275\u0275listener"]("ngModelChange",function(t){return e.expenseCategory=t})("keyup.enter",function(){return e.storeCategory(2)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](31,"td",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](32,"tr"),s["\u0275\u0275elementStart"](33,"th",12),s["\u0275\u0275text"](34,"Total Expenses"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](35,J,2,1,"ng-container",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](36,"tr"),s["\u0275\u0275elementStart"](37,"th",12),s["\u0275\u0275text"](38,"Profit / Loss"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](39,q,3,3,"th",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"div",15),s["\u0275\u0275elementStart"](41,"span",16),s["\u0275\u0275listener"]("click",function(){return e.continueLater()}),s["\u0275\u0275text"](42,"Continue Later"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](43,"button",17),s["\u0275\u0275listener"]("click",function(){return e.updateFinancial()}),s["\u0275\u0275text"](44," Done "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](45,"menu",18),s["\u0275\u0275elementStart"](46,"div",19),s["\u0275\u0275elementStart"](47,"a",20),s["\u0275\u0275listener"]("click",function(){return e.applyAll()}),s["\u0275\u0275text"](48,"Apply to All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](49,"a",20),s["\u0275\u0275listener"]("click",function(){return e.saveFromCtxMenu()}),s["\u0275\u0275text"](50,"Save"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275property"]("avnonLoader",e.isProcessing),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",e.yearID),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.years),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.months),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngForOf",e.incomeCategories),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.incomeCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](14,F)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.columns),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.expenseCategories),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.expenseCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](15,F)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.columns),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",e.months),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("disabled",e.isProcessing))},directives:[M.a,h.B,h.q,h.t,a.m,h.b,h.v,h.D,a.n,g.i,g.m,g.k,h.w],pipes:[a.f],styles:[".table-financial-report[_ngcontent-%COMP%]{position:relative}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#222;vertical-align:middle}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:100px;height:calc(1.5em + .5rem);margin:0;outline:medium none;padding:.25em;font-weight:400}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.col-category[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:auto}.table-financial-report[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .table-financial-report[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.table-financial-report[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}#ctxMenu[_ngcontent-%COMP%]{display:none;z-index:100;position:absolute;left:0;top:0}.table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem}.table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:0}.table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:0}.table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:0}.table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:0}.sticky-left[_ngcontent-%COMP%]{position:sticky;z-index:9;left:0;background:#fff;box-shadow:inset -1px 0 0 0 #dee2e6}.budget-wrapper[_ngcontent-%COMP%]{max-height:90vh}"]}),t})();var W=n("tk/3");let K=(()=>{class t{constructor(t){this.http=t,this.BaseURI="https://api.incubatorportal.com/api"}getFinancialCategory(t){return this.http.get(this.BaseURI+"/financialCategory?CompanyID="+t)}insertFinancialCategory(t){return this.http.post(this.BaseURI+"/financialcategory",t)}insertCompanyBudget(t){return this.http.post(this.BaseURI+"/company/budget",t)}insertCompanyFinancial(t){return this.http.post(this.BaseURI+"/company/financial",t)}updateCompanyFinancial(t){return this.http.put(this.BaseURI+"/company/financial",t)}updateCompanyBudget(t){return this.http.put(this.BaseURI+"/company/budget",t)}updateFinancialCategory(t){return this.http.put(this.BaseURI+"/financialcategory",t)}getBudgets(t,e,n,a,i){return this.http.get(this.BaseURI+"/Company/budget?CompanyBudgetID="+t+"&CompanyID="+e+"&CompanyFinancialCategoryID="+n+"&MonthID="+a+"&YearID="+i)}deleteFinancialCategory(t){return this.http.delete(`${this.BaseURI}/financialcategory/${t}`)}getTransaction(t){return this.http.get(`${this.BaseURI}/Transaction/?companyAccountID=${t}`)}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](W.b))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=n("tyNb"),G=n("Unjc"),Z=n("9nlD"),tt=n("S2+F");class et{static checkObjectExists(t,e,n){const a=Number(n.fromMonthID),i=Number(n.fromYearID),o=Number(n.toMonthID),r=Number(n.toYearID);return e.yearID>=i&&e.yearID<=r&&e.monthID>=a&&e.monthID<=o&&this.filterByConditions(e,n)}static checkObjectExistsFollowFilter(t,e,n){let a=n.fromMonthID,i=n.fromYearID,o=n.toMonthID,r=n.toYearID,c=Number(et.formatObjectDate(t,e,"MM")),l=Number(et.formatObjectDate(t,e,"y"));const s=new Date(i,a-1),m=new Date(r,o-1),p=new Date(l,c-1);return p.getTime()>=s.getTime()&&p.getTime()<=m.getTime()&&this.filterByConditions(e,n)}static filterByConditions(t,e){let n=Number(e.program),a=Number(e.instance),i=Number(e.location);return!(0!==n&&n!==Number(t.programID)||0!==a&&a!==Number(t.programInstanceID)||0!==i&&i!==Number(t.companyLocationID))}static formatObjectDate(t,e,n="MMM y"){const i=new Date(e[t]);return Object(a.y)(i,n,"en-US")}static getAPISortedValue(t={}){const e=[];for(const[n,a]of Object.entries(t)){const t=[];t.push(n),t.push(a),e.push(t)}return e.sort((t,e)=>{const n=new Date(t[0]).getTime(),a=new Date(e[0]).getTime();return n<a?-1:n>a?1:0})}static formatDate(t,e="MMM y"){const n=new Date(t.yearID,t.monthID-1);return Object(a.y)(n,e,"en-US")}}var nt=n("6n/F");function at(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275elementStart"](1,"div",7),s["\u0275\u0275element"](2,"div",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function it(t,e){1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275text"](2,"Please wait..."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]())}function ot(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",1),s["\u0275\u0275elementStart"](1,"div",8),s["\u0275\u0275element"](2,"div",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",8),s["\u0275\u0275element"](4,"div",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}let rt=n("2BfV"),ct=n("Tos5"),lt=n("M8aS");rt(nt),ct(nt),lt(nt),ct(nt);let st=(()=>{class t extends class{constructor(){this.heightChart=150}processInitialCalendarData(){const t=new Date,e=t.getFullYear(),n=t.getFullYear();return{program:0,instance:0,instances:[],location:0,job:0,stackedChart:void 0,fromYearID:e,fromMonthID:1,toMonthID:t.getMonth()+1,toYearID:n}}}{constructor(t,e,n,a){super(),this.router=t,this.modalService=e,this.changeDetector=n,this.dashboardShareDataService=a,this.chartTime=null,this.totalFinancial=0,this.chartDetailsAxisData=[],this.parameterType="dateRecorded",this.enabledStackedChart=!1,this.totalInstances=[],this.drillType="plain",this.monthInfo={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},this.filterOptions=this.processInitialCalendarData()}ngOnInit(){this.initDataFromShareService(),this.listenEventFilter()}initDataFromShareService(){this.financialSub$=this.dashboardShareDataService.getObservable(i.a.Financial).subscribe(t=>{t&&(this.financialInformation=t,this.financialInformationFiltered=this.filterFinancialInformation(this.filterOptions),this.processFinancialInformation())})}listenEventFilter(){this.filterConditions$=this.dashboardShareDataService.getObservable(i.a.FilterConditions).subscribe(t=>{t&&(this.filterOptions=t,this.financialInformationFiltered=this.filterFinancialInformation(t),this.processFinancialInformation())})}filterFinancialInformation(t){if(this.financialInformation)return this.financialInformation.filter(e=>et.checkObjectExists("dateRecorded",e,t))}ngAfterViewInit(){this.changeDetector.detach()}renderPieCharts(t,e,n,a=""){if(document.getElementById(t)){let i=this.financialPieChartConfiguration(e,n,a);i.chart.renderTo=t,"financial-income"===t?(this.financialPieIncomeHighChart&&this.financialPieIncomeHighChart.series&&this.financialPieIncomeHighChart.series[0]&&this.financialPieIncomeHighChart.series[0].destroy(),this.financialPieIncomeHighChart=new nt.Chart(i)):"financial-expense"===t&&(this.financialPieExpenseHighChart&&this.financialPieExpenseHighChart.series&&this.financialPieExpenseHighChart.series[0]&&this.financialPieExpenseHighChart.series[0].destroy(),this.financialPieExpenseHighChart=new nt.Chart(i))}}processFinancialPieChartInformation(){let t={},e={};this.financialInformationFiltered&&this.financialInformationFiltered.forEach(n=>{t[n.financialCategory]=1===n.financialCategoryTypeID?n.financialCategory in t?t[n.financialCategory]+n.actualAmount:n.actualAmount:n.financialCategory in t?t[n.financialCategory]:0,e[n.financialCategory]=2===n.financialCategoryTypeID?n.financialCategory in e?e[n.financialCategory]+n.actualAmount:n.actualAmount:n.financialCategory in e?e[n.financialCategory]:0}),this.calculatePieChartIncomePercentage(t),this.calculatePieChartExpenseTypePercentage(e)}calculatePieSeriesData(t={}){let e=Object.values(t).reduce((t,e)=>t+e,0),n=[];return Object.entries(t).forEach(t=>{let a={name:"",y:0,custom:0},i=100*Number(t[1])/Number(e);i>0&&(a.name=t[0],a.y=i,a.custom=t[1],n.push(a))}),n}calculatePieChartIncomePercentage(t={}){let e=this.calculatePieSeriesData(t);this.renderPieCharts("financial-income",e,"Income by FinancialCategory","financialCategory")}calculatePieChartExpenseTypePercentage(t={}){let e=this.calculatePieSeriesData(t);this.renderPieCharts("financial-expense",e,"Expenses by FinancialCategory","financialCategory")}processFinancialInformation(){this.financialInformationFiltered||(this.financialInformationFiltered=[]),this.totalInstances=[...new Set(this.financialInformationFiltered.map(t=>t.financialCategoryTypeID))],this.enabledStackedChart=this.totalInstances.length>1,this.processFinancialPieChartInformation(),this.chartDetailsAxisData=[],this.renderChartByType(this.currentFilterOptions?this.currentFilterOptions.stackedChart:void 0),this.changeDetector.detectChanges()}processIncomeExpenseSeriesData(t){let e=[];for(const[n,a]of Object.entries(t)){let t=[];t.push(n),t.push(a),e.push(t)}return e.sort((t,e)=>{let n=new Date(t).getTime(),a=new Date(e).getTime();return n<a?-1:n>a?1:0})}processChartAxisInformation(t){let e={},n={},a={},i=0;return this.totalFinancial=0,t.forEach(t=>{let e=this.formatEventDate(t),o=t.actualAmount?Number(t.actualAmount):0;if(i+=o,1===t.financialCategoryTypeID){const t=e in n?Number(n[e])+o:o;n[e]=t,this.totalFinancial+=o}else 2===t.financialCategoryTypeID&&(a[e]=e in a?Number(a[e])+o:o)}),e.income=n,e.expense=a,e.total=i,e}formatEventDate(t,e="MMM y"){const n=new Date(t.yearID,t.monthID-1);return Object(a.y)(n,e,"en-US")}financialStackedChartConfigurations(t){let e=this;return{chart:{type:"column",height:400},title:{text:""},credits:{enabled:!1},tooltip:{formatter:function(){return this.series.name+" : "+nt.numberFormat(this.y,2,".")}},xAxis:{categories:t},yAxis:{allowDecimals:!0,title:{text:""},tickInterval:10,labels:{enabled:!1},gridLineWidth:0,plotLines:[{width:1,value:0}]},plotOptions:{series:{animation:!1,cursor:"pointer",point:{events:{click:function(){e.drillType="profit",e.selectedColumnValue=e.processSelectedMonthStackedfinancialInformation(this.category),e.openDetailFinancial(),e.changeDetector.detectChanges()}}}},column:{stacking:"normal",dataLabels:{enabled:!0}}},series:this.chartDetailsAxisData}}financialIncomeExpenseChartConfigurations(t){let e=this;return{chart:{type:"column",height:400},title:{text:""},credits:{enabled:!1},tooltip:{formatter:function(){return"Total "+this.series.name+":"+this.y.toFixed(2)}},xAxis:{categories:t},yAxis:{allowDecimals:!1,title:{text:e.totalFinancial+" Sales."},labels:{enabled:!0},gridLineWidth:0},plotOptions:{series:{animation:!1,cursor:"pointer",point:{events:{click:function(t){var n;"Profit"===this.series.name?(e.drillType="profit",e.selectedColumnValue=e.processSelectedMonthStackedfinancialInformation(this.category)):"Income"===this.series.name&&(e.drillType="plain",e.chartTime=null===(n=null==t?void 0:t.point)||void 0===n?void 0:n.category,e.selectedColumnValue=e.processSelectedMonthfinancialInformation(this.category,this.series.name)),e.openDetailFinancial(),e.changeDetector.detectChanges()}}}}},series:this.chartDetailsAxisData}}financialChartConfigurations(t="Income"){let e=this;return{chart:{type:"column",height:400},title:{text:""},credits:{enabled:!1},tooltip:{formatter:function(){return"Total "+t+": "+this.y.toFixed(2)}},xAxis:{type:"category",scrollbar:{enabled:!0},gridLineWidth:1,labels:{rotation:-45,style:{fontFamily:"Verdana, sans-serif"}}},yAxis:{allowDecimals:!1,title:{text:e.totalFinancial+" Sales."},labels:{enabled:!0},gridLineWidth:0},plotOptions:{series:{animation:!1,cursor:"pointer",point:{events:{click:function(t){var n;e.drillType="plain",e.selectedColumnValue=e.processSelectedMonthfinancialInformation(this.name,"Income"),e.chartTime=null===(n=null==t?void 0:t.point)||void 0===n?void 0:n.name,e.openDetailFinancial(),e.changeDetector.detectChanges()}}}}},series:[{showInLegend:!1,name:"Series",data:this.chartDetailsAxisData}]}}financialPieChartConfiguration(t=[],e="",n){let a=this;return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",height:250},title:{text:e},credits:{enabled:!1},tooltip:{pointFormat:"<b>{point.custom}</b>"},plotOptions:{series:{animation:!1,point:{events:{click:function(t){a.drillType="plain",a.selectedColumnValue=a.processSelectedPiefinancialInformation(this.name,n),a.openDetailPieFinancial(),a.changeDetector.detectChanges()}}}},pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"",colorByPoint:!0,data:t,size:170}],responsive:{rules:[{condition:{maxWidth:420},chartOptions:{plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1,format:"<b>{point.name}</b>:\t{point.percentage:.1f} %"}}}}}]}}}userFilterOptions(t){this.currentFilterOptions=t,this.processFinancialPieChartInformation(),this.chartDetailsAxisData=[],this.financialHighChart.series&&this.financialHighChart.series[0]&&this.financialHighChart.series[0].destroy(),this.renderChartByType(t.stackedChart,t.salesType),this.changeDetector.detectChanges()}renderChartByType(t,e="income"){let n=this.processStackedSeriesData(this.financialInformationFiltered);if(t){delete n.instances.Income,delete n.instances.Expense;let t=this.getDateKeys(n.instances),e=t.sort((t,e)=>{let n=new Date(t).getTime(),a=new Date(e).getTime();return n<a?-1:n>a?1:0});this.processStackedChartInformation(n,t),this.initStackedColumnChart(e)}else{let t=this.processChartAxisInformation(this.financialInformationFiltered),a=Object.entries(t.income).length;if("income"===e)this.chartDetailsAxisData=et.getAPISortedValue(t.income),this.initColumnChart(a);else if("profit"===e){let e=[],a=[],i=[];et.getAPISortedValue(t.income).forEach(t=>{i.push(t[0]),e.push(t[1])}),et.getAPISortedValue(n.instances.Profit).forEach(t=>{a.push(t[1])});let o=this.processBudgetLine(i);this.chartDetailsAxisData=[{showInLegend:!1,name:"Income",data:e},{showInLegend:!1,name:"Profit",data:a},{showInLegend:!1,type:"spline",name:"Budget",data:o,marker:{lineWidth:2,lineColor:nt.getOptions().colors[3],fillColor:"white"}}],this.initIncomeExpenseColumnChart(i)}}}processBudgetLine(t){let e={};return this.budgetInformation&&this.budgetInformation.forEach(n=>{e=this.checkBudgetInDate(n,e,t)}),Object.entries(e)}checkBudgetInDate(t,e={},n){return n.forEach(n=>{n.split(" "),(Object.entries(this.monthInfo).find(e=>e[1]===t.monthID)[0]+" "+t.yearID).toString()===n.toString()&&(e[n]=e[n]?e[n]+t.budgetAmount:t.budgetAmount)}),e}processStackedChartInformation(t,e){let n=Object.entries(t.instances);n&&n.length>0&&n.forEach(t=>{let n=this.fillMissingData(t[1],e),a=this.sortAxisDataByDate(Object.entries(n));a.forEach((t,e)=>{a[e][1]=Number(t[1].toFixed(2))}),this.chartDetailsAxisData.push({showInLegend:!1,name:t[0],data:a})})}fillMissingData(t,e){return e.forEach(e=>{t.hasOwnProperty(e)||(t[e]=0)}),t}sortAxisDataByDate(t){return t.sort((t,e)=>{let n=new Date(t[0]).getTime(),a=new Date(e[0]).getTime();return n<a?-1:n>a?1:0})}initColumnChart(t=1){let e=this.financialChartConfigurations();this.financialHighChart&&this.financialHighChart.series[0]&&this.financialHighChart.series[0].destroy(),document.getElementById("financial-chart-details")&&(e.chart.renderTo="financial-chart-details",this.financialHighChart=new nt.Chart(e))}initIncomeExpenseColumnChart(t){let e=this.financialIncomeExpenseChartConfigurations(t);this.financialHighChart&&this.financialHighChart.series[0]&&this.financialHighChart.series[0].destroy(),document.getElementById("financial-chart-details")&&(e.chart.renderTo="financial-chart-details",this.financialHighChart=new nt.Chart(e))}initStackedColumnChart(t){if(document.getElementById("financial-chart-details")){let e=this.financialStackedChartConfigurations(t);e.chart.renderTo="financial-chart-details",this.financialHighChart=new nt.Chart(e),nt.each(this.financialHighChart.series,(t,e)=>{t.data.forEach(t=>{t.y>0?(t.color="green",t.update()):(t.color="red",t.update())})})}}processStackedSeriesData(t=[]){let e={instances:{},profitOptions:{},stackedTotalEvent:0};return t.forEach(t=>{let n=t.financialCategoryTypeID;n&&(e=this.separateFinancialByType(n,e,t))}),e}getDateKeys(t){let e=[];return["Profit","Expense"].forEach(n=>{if(n in t){let a=Object.keys(t[n]);e=e.concat(a)}}),[...new Set(e)]}separateFinancialByType(t,e,n){let a=this.formatEventDate(n);return t=1===t?"Income":"Expense",void 0===e.instances.Income&&(e.instances.Income={}),void 0===e.instances.Expense&&(e.instances.Expense={}),void 0===e.instances.Profit&&(e.instances.Profit={}),a in e.instances[t]?(e.instances[t][a]=e.instances[t][a]+n.actualAmount,e.instances.Income[a]=a in e.instances.Income?e.instances.Income[a]:0,e.instances.Expense[a]=a in e.instances.Expense?e.instances.Expense[a]:0,e.instances.Profit[a]=e.instances.Income[a]-e.instances.Expense[a],e.instances.Profit[a]=e.instances.Profit[a]):e.instances[t][a]=n.actualAmount,e.stackedTotalEvent=e.stackedTotalEvent+1,e}processSelectedMonthfinancialInformation(t,e){let n="Income"===e?1:2;return this.financialInformationFiltered.filter(e=>{let a=this.formatEventDate(e);return t===a&&e.financialCategoryTypeID===n})}processSelectedMonthStackedfinancialInformation(t){return this.financialInformationFiltered.filter(e=>this.formatEventDate(e).toString()===t)}processSelectedPiefinancialInformation(t,e){return this.financialInformationFiltered.filter(n=>String(n[e])===String(t))}backToDashboard(){this.router.navigate(["/dashboard"])}openDetailFinancial(){}openDetailPieFinancial(){}ngOnDestroy(){var t,e;null===(t=this.filterConditions$)||void 0===t||t.unsubscribe(),null===(e=this.financialSub$)||void 0===e||e.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](Q.c),s["\u0275\u0275directiveInject"](g.p),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](G.a))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-company-financials-chart"]],inputs:{financialInformation:"financialInformation",budgetInformation:"budgetInformation",hiddenPie:"hiddenPie",hiddenFilter:"hiddenFilter"},features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:3,consts:[["class","d-flex align-items-center pt-3",4,"ngIf"],[1,"row"],[1,"col-12"],["id","financial-chart-details",1,"job-creation-chart-wrapper"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"d-flex","align-items-center","pt-3"],[1,"flex-grow-1"],[1,"col-4"],["id","financial-income",2,"width","100%"],["id","financial-expense",2,"width","100%"]],template:function(t,e){1&t&&(s["\u0275\u0275template"](0,at,3,0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275element"](3,"div",3),s["\u0275\u0275template"](4,it,3,0,"ng-container",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,ot,5,0,"div",5)),2&t&&(s["\u0275\u0275property"]("ngIf",!e.hiddenFilter),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",void 0===e.chartDetailsAxisData),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.hiddenPie))},directives:[a.n],styles:[""],changeDetection:0}),t})();var mt=n("0mlJ");function pt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",4),s["\u0275\u0275elementStart"](2,"span",5),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().back()}),s["\u0275\u0275element"](3,"i",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"h1",7),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",8),s["\u0275\u0275elementStart"](7,"span",9),s["\u0275\u0275element"](8,"img",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"h2",11),s["\u0275\u0275elementStart"](10,"a"),s["\u0275\u0275text"](11," Company Name "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"span",12),s["\u0275\u0275text"](13," Industry "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",13),s["\u0275\u0275elementStart"](15,"div",14),s["\u0275\u0275elementStart"](16,"div",15),s["\u0275\u0275elementStart"](17,"button",16),s["\u0275\u0275element"](18,"span",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"ul",18),s["\u0275\u0275elementStart"](20,"li"),s["\u0275\u0275elementStart"](21,"a",19),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().onEditAccount()}),s["\u0275\u0275text"](22,"Edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"li"),s["\u0275\u0275elementStart"](24,"a",19),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().delete()}),s["\u0275\u0275text"](25,"Delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"div",20),s["\u0275\u0275elementStart"](27,"p",21),s["\u0275\u0275text"](28),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"p",22),s["\u0275\u0275text"](30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",t.companyAccount.accountName," "),s["\u0275\u0275advance"](23),s["\u0275\u0275textInterpolate1"](" ",t.companyAccount.accountName," "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](t.companyAccount.openingBalance)}}function dt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",23),s["\u0275\u0275elementStart"](1,"ul",24),s["\u0275\u0275elementStart"](2,"li",25),s["\u0275\u0275elementStart"](3,"a",26),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().transactionTab()}),s["\u0275\u0275text"](4," Transactions "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"li",25),s["\u0275\u0275elementStart"](6,"a",26),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().activeTab=1}),s["\u0275\u0275text"](7," Budget "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275classProp"]("active",2===t.activeTab),s["\u0275\u0275advance"](3),s["\u0275\u0275classProp"]("active",1===t.activeTab)}}function ut(t,e){if(1&t&&s["\u0275\u0275element"](0,"app-company-financials-chart",34),2&t){const t=s["\u0275\u0275nextContext"](3);s["\u0275\u0275property"]("financialInformation",t.financeChart)}}function gt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",31),s["\u0275\u0275elementStart"](1,"button",32),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"](2).configureBudget()}),s["\u0275\u0275text"](2,"Configure Budget "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,ut,1,1,"app-company-financials-chart",33),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.financeChart.length>0)}}const ht=function(t){return{active:t}};function ft(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",35),s["\u0275\u0275elementStart"](1,"a",36),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"](2).filterTransaction(1)}),s["\u0275\u0275text"](2," Verified "),s["\u0275\u0275elementStart"](3,"span",37),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"a",36),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"](2).filterTransaction(2)}),s["\u0275\u0275text"](6," Pending Verification "),s["\u0275\u0275elementStart"](7,"span",37),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](4,ht,1===t.filterType)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](t.verifiedCount),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](6,ht,2===t.filterType)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](t.pendingCount)}}function yt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",46),s["\u0275\u0275elementStart"](1,"button",47),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](3).declined(e)}),s["\u0275\u0275text"](2," Reject "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",48),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](3).verified(e)}),s["\u0275\u0275text"](4," Approve "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Ct(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",40),s["\u0275\u0275elementStart"](1,"span",9),s["\u0275\u0275element"](2,"img",41),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"h2",42),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"span",43),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"date"),s["\u0275\u0275pipe"](8,"dateObject"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"p"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"p"),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",44),s["\u0275\u0275elementStart"](14,"p"),s["\u0275\u0275text"](15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"p"),s["\u0275\u0275text"](17),s["\u0275\u0275pipe"](18,"number"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](19,yt,5,0,"div",45),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate2"](" ",t.firstname," ",t.surname," "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](7,8,s["\u0275\u0275pipeBind1"](8,11,t.transactionDate),"dd MMM yyyy")," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",t.referenceDescription," "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",t.financialCategory," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](t.transactionDescription),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("R",s["\u0275\u0275pipeBind2"](18,13,t.transactionamount,"1.1-2"),""),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",2===n.filterType)}}function It(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",38),s["\u0275\u0275template"](1,Ct,20,16,"div",39),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.filteredTransactions)}}function xt(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",27),s["\u0275\u0275template"](1,gt,4,1,"div",28),s["\u0275\u0275template"](2,ft,9,8,"div",29),s["\u0275\u0275template"](3,It,2,1,"div",30),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("avnonLoader",t.isProcessing),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",1===t.activeTab),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",2===t.activeTab),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",2===t.activeTab)}}let Dt=(()=>{class t{constructor(t,e,n,a,i,o,r,c,l,s,m,p,d){this.financeService=t,this.financialService=e,this.companyAccountService=n,this.activatedRoute=a,this.modal=i,this.dashboardShareDataService=o,this.toastrService=r,this.notificationService=c,this.signalRService=l,this.userService=s,this.location=m,this.ngbModal=p,this.router=d,this.transactions=[],this.filteredTransactions=[],this.verifiedCount=0,this.pendingCount=0,this.filterType=1,this.activeTab=2,this.financeChart=[],this.user=this.userService.user.getValue(),this.companyID=this.user.companyID||0,this.companyAccountID=+this.activatedRoute.snapshot.params.id,this.contactID=this.user.contactID}ngOnInit(){this.getProfile(),this.fillTransactions()}getProfile(){this.loading=!0,this.companyAccountService.getCompanyAccount(this.companyID,this.companyAccountID,0,0,0).subscribe(t=>{this.companyAccount=t[0],this.getFinancials(),this.loading=!1})}onEditAccount(){const t=this.ngbModal.open(I);t.componentInstance.companyAccount=this.companyAccount,t.result.then(t=>{this.companyAccount=t})}delete(){const t=this.modal.open(x.a);t.componentInstance.objectType="Account",t.componentInstance.objectDetails=this.companyAccount.accountName+" Account",t.result.then(t=>{"Yes"===t&&this.companyAccountService.deleteCompanyAccount(this.companyAccount.companyAccountID).subscribe(()=>{this.router.navigate(["/accounts"])})})}fillTransactions(){this.isProcessing=!0,this.financialService.getTransactionByAccountID(this.companyAccountID).subscribe(t=>{this.transactions=t,this.filterTransaction(1),this.isProcessing=!1})}configureBudget(){const t={companyID:this.companyID,financialCategoryID:0,monthID:0,yearID:(new Date).getFullYear()},e=this.modal.open(X,{size:"xl",backdrop:"static",scrollable:!0});e.componentInstance.companyID=this.companyID,e.componentInstance.companyAccountID=this.companyAccountID,e.componentInstance.yearID=t.yearID,e.componentInstance.month=0,e.componentInstance.financialUpdated.subscribe(()=>{this.financialService.getFinancial(t).subscribe(t=>{this.financeChart=t.filter(t=>t.companyAccountID===this.companyAccountID),this.financeChart.length>0&&this.dashboardShareDataService.setObservable(i.a.Financial,t),this.loading=!1})})}transactionTab(){this.activeTab=2,this.fillTransactions()}getFinancials(){this.loading=!0,this.financialService.getFinancial({companyID:this.companyID,financialCategoryID:0,monthID:0,yearID:2020}).subscribe(t=>{this.financeChart=t.filter(t=>t.companyAccountID===this.companyAccountID),this.financeChart.length>0&&this.dashboardShareDataService.setObservable(i.a.Financial,t),this.loading=!1})}filterTransaction(t){this.filterType=t,this.filteredTransactions=this.transactions.filter(e=>1===t?e.verified||1===e.transactionCategoryID:null===e.verified&&2===e.transactionCategoryID),this.verifiedCount=this.transactions.filter(t=>t.verified||1===t.transactionCategoryID).length,this.pendingCount=this.transactions.filter(t=>null===t.verified&&2===t.transactionCategoryID).length}verified(t){const e=Object(o.l)(this.filteredTransactions[t]);e.verified=!0,e.verifiedByContactID=this.contactID,this.financialService.updateTransaction(e).subscribe(()=>{const t=this.transactions.findIndex(t=>t.transactionID===e.transactionID);-1!==t&&(this.transactions[t].verified=!0,this.transactions[t].verifiedByContactID=this.contactID,this.filterTransaction(2),this.toastrService.success("Notification has been approved"),this.noticeNotification(e.transactionID,e.submittedByContactID,!0))})}declined(t){const e=Object(o.l)(this.filteredTransactions[t]);e.verified=!1,e.verifiedByContactID=this.contactID,this.financialService.updateTransaction(e).subscribe(()=>{const t=this.transactions.findIndex(t=>t.transactionID===e.transactionID);-1!==t&&(this.transactions[t].verified=!1,this.transactions[t].verifiedByContactID=this.contactID,this.filterTransaction(2),this.toastrService.warning("Notification has been declined"),this.noticeNotification(e.transactionID,e.submittedByContactID,!1))})}noticeNotification(t,e,n){if(this.contactID===e)return;const a=Object(o.a)(new Date),i="Your transaction has been "+(n?"approved":"declined"),l={notificationCategoryID:r.a.transaction_verification_notification,referenceID:t,contactID:e,description:i,createdContact:this.contactID},s=a+"|"+t,m={date:a,body:i.replace("|",""),topic:i.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:l.referenceID,notificationType:c.a.applicantRequest,senderId:l.createdContact,receivers:[l.contactID],uniqueId:s,discussionId:0};this.notificationService.noticeNotification(l).subscribe(()=>{this.signalRService.transferMessage("dashboard",m)})}back(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](K),s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](m.a),s["\u0275\u0275directiveInject"](Q.a),s["\u0275\u0275directiveInject"](g.p),s["\u0275\u0275directiveInject"](G.a),s["\u0275\u0275directiveInject"](u.b),s["\u0275\u0275directiveInject"](Z.a),s["\u0275\u0275directiveInject"](tt.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](a.j),s["\u0275\u0275directiveInject"](g.p),s["\u0275\u0275directiveInject"](Q.c))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-account-profile"]],decls:4,vars:4,consts:[[3,"avnonLoader"],[4,"ngIf"],["class","tabs",4,"ngIf"],["class","w-100 d-flex flex-column",3,"avnonLoader",4,"ngIf"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"entry","border-none"],[1,"media","avatar","avatar-48","avatar-48-square"],["src","assets/img/placeholder.jpg","alt","Avatar",1,"img-fluid","img-48"],[1,"mt-1"],[1,"meta"],[1,"bottom-actions","d-flex","justify-content-end","align-items-center"],[1,"actions","mt-3","mr-3"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"profile-overview","pb-0","pt-0","mt-0"],[1,"p-23"],[1,"mb-1","meta"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],[1,"nav-link","cursor-pointer",3,"click"],[1,"w-100","d-flex","flex-column",3,"avnonLoader"],["class","filter-container w-100",4,"ngIf"],["class","filter-container d-flex filter-transactions align-items-center border-bottom",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"filter-container","w-100"],[1,"btn","btn-outline-primary","btn-sm","mb-4",3,"click"],[3,"financialInformation",4,"ngIf"],[3,"financialInformation"],[1,"filter-container","d-flex","filter-transactions","align-items-center","border-bottom"],[1,"btn","btn-rounded","btn-rounded-32","mr-2","btn-sm","mb-0",3,"ngClass","click"],[1,"badge","badge-primary"],[1,"w-100"],["class","entry",4,"ngFor","ngForOf"],[1,"entry"],["src","assets/img/placeholder.jpg",1,"img-fluid","img-48","cover"],[1,"inline"],[1,"meta","ml-1"],[1,"entry-content","mt-1"],["class","d-flex justify-content-start mt-1",4,"ngIf"],[1,"d-flex","justify-content-start","mt-1"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-primary","ml-1",3,"click"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275template"](1,pt,31,3,"ng-container",1),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](2,dt,8,4,"div",2),s["\u0275\u0275template"](3,xt,4,4,"div",3)),2&t&&(s["\u0275\u0275property"]("avnonLoader",e.loading),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.companyAccount),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.companyAccount),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.companyAccount))},directives:[M.a,a.n,st,a.l,a.m],pipes:[a.e,mt.a,a.f],styles:[".menu-nav-tab[_ngcontent-%COMP%]{margin-top:10px;float:left;width:100%;border-width:2px}.menu-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-bottom:-2px}.menu-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:focus{outline:none}.menu-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2a2a2a;border:none;border-bottom:2px solid #ebebeb}.menu-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .menu-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .menu-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{outline:none;border-color:#406fe4}.menu-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:600}.table-dotted-border[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-dotted-border[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;padding:.5rem}.table-dotted-border[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:15px}.table-dotted-border[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:2px 10px 3px!important}.table-dotted-border[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:0;border-bottom:1px dotted #aaa;font-weight:600}.table-dotted-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border:0}.table-dotted-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:0;border-bottom:1px dotted #aaa}.dropdown-toggle[_ngcontent-%COMP%]{width:20px;height:20px;background-position:50%}.dropdown-toggle[_ngcontent-%COMP%]:after, .dropdown-toggle[_ngcontent-%COMP%]:before{display:none}.filter-transactions[_ngcontent-%COMP%]{flex-wrap:wrap}.filter-transactions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative;border:1px solid #c8c8c8;margin-bottom:10px}.filter-transactions[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{border:1px solid #406fe4!important;color:#406fe4}.filter-transactions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#406fe4!important}.filter-transactions[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:14px}"]}),t})();function bt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",8),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const n=e.$implicit;return s["\u0275\u0275nextContext"]().showAccountProfile(n)}),s["\u0275\u0275elementStart"](1,"h2"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"p"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](t.accountName),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](t.accountDescription)}}const vt=[{path:"",component:(()=>{class t{constructor(t,e,n,a,i){this.companyAccountService=t,this.ngbModal=e,this.router=n,this.userService=a,this.location=i,this.companyAccounts=[],this.user=this.userService.user.getValue(),this.companyID=this.user.companyID||0}ngOnInit(){this.fillAccounts()}showAccountProfile(t){this.router.navigate(["/accounts",t.companyAccountID])}addAccount(){this.ngbModal.open(I).result.then(t=>{this.companyAccounts.push(t)})}fillAccounts(){this.companyAccountService.getCompanyAccount(this.companyID,0,0).subscribe(t=>{this.companyAccounts=t})}back(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](m.a),s["\u0275\u0275directiveInject"](g.p),s["\u0275\u0275directiveInject"](Q.c),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](a.j))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-accounts"]],decls:13,vars:2,consts:[[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"filter-container","d-flex","w-100","align-items-center","border-bottom"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],["class","entry",3,"click",4,"ngFor","ngForOf"],[1,"entry",3,"click"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"span",1),s["\u0275\u0275listener"]("click",function(){return e.back()}),s["\u0275\u0275element"](3,"i",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"h1",3),s["\u0275\u0275text"](5,"Accounts"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"span"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"a",5),s["\u0275\u0275listener"]("click",function(){return e.addAccount()}),s["\u0275\u0275element"](10,"span",6),s["\u0275\u0275text"](11,"Add "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,bt,5,2,"div",7),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](8),s["\u0275\u0275textInterpolate1"]("",e.companyAccounts.length," account(s)"),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",e.companyAccounts))},directives:[a.m],styles:[""]}),t})()},{path:":id",component:Dt}];let St=(()=>{class t{}return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[Q.g.forChild(vt)],Q.g]}),t})();var Et=n("GKkB");let Mt=(()=>{class t{}return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.c,Q.g,h.l]]}),t})(),At=(()=>{class t{}return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.c,Mt,g.q]]}),t})();var Ot=n("j4PG");function _t(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"option",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275property"]("value",t.value),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",t.name," ")}}function Pt(t,e){1&t&&s["\u0275\u0275element"](0,"div",24)}function Ft(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",25),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",t.name," ")}}function wt(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Projected"),s["\u0275\u0275elementEnd"]())}function $t(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Actual"),s["\u0275\u0275elementEnd"]())}function Bt(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Variance"),s["\u0275\u0275elementEnd"]())}function kt(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"td"),s["\u0275\u0275template"](1,wt,2,0,"span",26),s["\u0275\u0275template"](2,$t,2,0,"span",26),s["\u0275\u0275template"](3,Bt,2,0,"span",26),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==2)}}function Tt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",29),s["\u0275\u0275elementStart"](2,"div",30),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().editCategory(e)}),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"button",31),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().deleteCategory(e)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",t.financialCategory," ")}}const Vt=function(){return{standalone:!0}};function jt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",32),s["\u0275\u0275listener"]("ngModelChange",function(e){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().$implicit.financialCategory=e})("keyup.enter",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)})("blur",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("id","category-"+t.financialCategoryID)("ngModel",t.financialCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](3,Vt))}}function Nt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",37),s["\u0275\u0275listener"]("ngModelChange",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().$implicit[n.month+"_budgetAmount"]=e})("ngModelChange",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onChangeBudgetAmount(n,e.month)})("contextmenu",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit,a=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onrightClickBudgetAmount(e,a,n.month)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("ngModelOptions",s["\u0275\u0275pureFunction0"](2,Vt))("ngModel",e[t.month+"_budgetAmount"])}}function Lt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",38),s["\u0275\u0275listener"]("ngModelChange",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().$implicit[n.month+"_actualAmount"]=e})("ngModelChange",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onChangeActualAmount(n,e.month)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("ngModelOptions",s["\u0275\u0275pureFunction0"](2,Vt))("ngModel",e[t.month+"_actualAmount"])}}function Rt(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275classMap"](e[t.month+"_classVariance"]),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,4,e[t.month+"_variance"])," ")}}function Ut(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"td",33),s["\u0275\u0275template"](1,Nt,1,3,"input",34),s["\u0275\u0275template"](2,Lt,1,3,"input",35),s["\u0275\u0275template"](3,Rt,3,6,"span",36),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==2)}}function Yt(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td",11),s["\u0275\u0275template"](2,Tt,5,1,"ng-container",27),s["\u0275\u0275template"](3,jt,1,4,"ng-template",null,28,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,Ut,4,3,"td",15),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=s["\u0275\u0275reference"](4),a=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.editable)("ngIfElse",n),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",a.columns)}}function Ht(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,e.getTotalIncomes(t.month,1))," ")}}function zt(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,e.getTotalIncomes(t.month,2))," ")}}function Jt(t,e){1&t&&s["\u0275\u0275element"](0,"span")}function qt(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",33),s["\u0275\u0275template"](1,Ht,3,3,"span",26),s["\u0275\u0275template"](2,zt,3,3,"span",26),s["\u0275\u0275template"](3,Jt,1,0,"span",26),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==2)}}function Xt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",29),s["\u0275\u0275elementStart"](2,"div",30),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](2).$implicit;return s["\u0275\u0275nextContext"]().editCategory(e)}),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"button",31),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](2).$implicit;return s["\u0275\u0275nextContext"]().deleteCategory(e)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",t.financialCategory," ")}}function Wt(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Xt,5,1,"ng-container",27),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275reference"](4);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.editable)("ngIfElse",e)}}function Kt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",32),s["\u0275\u0275listener"]("ngModelChange",function(e){return s["\u0275\u0275restoreView"](t),s["\u0275\u0275nextContext"]().$implicit.financialCategory=e})("keyup.enter",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)})("blur",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().updateCategory(e)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("id","category-"+t.financialCategoryID)("ngModel",t.financialCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](3,Vt))}}function Qt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",37),s["\u0275\u0275listener"]("ngModelChange",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().$implicit[n.month+"_budgetAmount"]=e})("ngModelChange",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onChangeBudgetAmount(n,e.month)})("contextmenu",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit,a=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onrightClickBudgetAmount(e,a,n.month)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("ngModelOptions",s["\u0275\u0275pureFunction0"](2,Vt))("ngModel",e[t.month+"_budgetAmount"])}}function Gt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"input",38),s["\u0275\u0275listener"]("ngModelChange",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().$implicit[n.month+"_actualAmount"]=e})("ngModelChange",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onChangeActualAmount(n,e.month)}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("ngModelOptions",s["\u0275\u0275pureFunction0"](2,Vt))("ngModel",e[t.month+"_actualAmount"])}}function Zt(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275classMap"](e[t.month+"_classVariance"]),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,4,e[t.month+"_variance"])," ")}}function te(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"td",33),s["\u0275\u0275template"](1,Qt,1,3,"input",34),s["\u0275\u0275template"](2,Gt,1,3,"input",35),s["\u0275\u0275template"](3,Zt,3,6,"span",36),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==2)}}function ee(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"tr"),s["\u0275\u0275elementStart"](1,"td",11),s["\u0275\u0275template"](2,Wt,2,2,"ng-container",27),s["\u0275\u0275template"](3,Kt,1,4,"ng-template",null,28,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,te,4,3,"td",15),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=s["\u0275\u0275reference"](4),a=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.editable)("ngIfElse",n),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",a.columns)}}function ne(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,e.getTotalExpenses(t.month,1))," ")}}function ae(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit,e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,e.getTotalExpenses(t.month,2))," ")}}function ie(t,e){1&t&&s["\u0275\u0275element"](0,"span")}function oe(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",33),s["\u0275\u0275template"](1,ne,3,3,"span",26),s["\u0275\u0275template"](2,ae,3,3,"span",26),s["\u0275\u0275template"](3,ie,1,0,"span",26),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.index%3==2)}}function re(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",39),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,t.openingBalance)," ")}}function ce(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",39),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,t.totalIncomes)," ")}}function le(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",39),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,t.totalExpenses)," ")}}function se(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"th",39),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"number"),s["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,t.closingBalance)," ")}}let me=(()=>{class t{constructor(t,e,n,a){this.financialService=t,this.modal=e,this.activeModal=n,this.cdr=a,this.years=[],this.months=D.a.create(),this.columns=[],this.isProcessing=!1,this.companyID=null,this.yearID=null,this.contactID=null,this.categories=[],this.incomeCategories=[],this.incomeCategory="",this.expenseCategories=[],this.expenseCategory="",this.categorySelected=null,this.monthSelected=null}ngOnInit(){this.companyID=+localStorage.getItem("CID"),this.contactID=+localStorage.getItem("CoID"),this.buildListYearsForFilter(),this.buildColumnsLockup(),this.getCategories()}buildListYearsForFilter(){this.yearID=(new Date).getFullYear();for(let t=this.yearID-5;t<=this.yearID+5;++t)this.years.push({name:t,value:t})}buildColumnsLockup(){let t=1;for(let e=0;e<36;++e)e>0&&e%3==0&&(t+=1),this.columns.push({index:e,month:t})}getCategories(){this.isProcessing=!0,this.financialService.getCategories(this.companyID).subscribe(t=>{if(t){t=t.sort((t,e)=>t.financialCategoryID>e.financialCategoryID?1:t.financialCategoryID<e.financialCategoryID?-1:0),this.incomeCategories=t.filter(t=>1===t.financialCategoryTypeID),this.expenseCategories=t.filter(t=>2===t.financialCategoryTypeID),this.categories=[];let e=0;for(let t of this.incomeCategories)t.index=e,this.categories.push(t),e++;for(let t of this.expenseCategories)t.index=e,this.categories.push(t),e++;this.getFinancial()}},()=>{this.isProcessing=!1,this.cdr.detectChanges()})}getFinancial(){this.isProcessing=!0,this.categories.forEach(t=>{this.months.forEach(e=>{this.setDefaultValueCategoryPerMonth(t,e.value),t[e.value+"_budgetAmount"]=null,t[e.value+"_actualAmount"]=null,t[e.value+"_variance"]=null,e.openingBalance=null,e.totalIncomes=null,e.totalExpenses=null,e.closingBalance=null})}),this.financialService.getBudgets({companyBudgetID:0,companyID:this.companyID,companyFinancialCategoryID:0,monthID:0,yearID:this.yearID}).subscribe(t=>{t&&t.length>0&&this.categories.forEach(e=>{this.months.forEach(n=>{t.some(t=>{t.companyFinancialCategoryID===e.financialCategoryID&&t.monthID===n.value&&(e[n.value+"_budgetAmount"]=t.budgetAmount,e[n.value+"_companyBudgetID"]=t.companyBudgetID,e[n.value+"_companyAccountID"]=0,e[n.value+"_companyFinancialCategoryID"]=e.financialCategoryID)})})}),this.financialService.getFinancial({companyID:this.companyID,financialCategoryID:0,monthID:0,yearID:this.yearID}).subscribe(t=>{t&&t.length>0&&(this.categories.forEach(e=>{this.months.forEach(n=>{t.some(t=>{t.financialCategoryID===e.financialCategoryID&&t.monthID===n.value&&(e[n.value+"_actualAmount"]=t.actualAmount,e[n.value+"_companyFinancialID"]=t?t.companyFinancialID:null)}),this.setVarianceValue(e,n.value)})}),this.calculateFinancialSumary()),this.isProcessing=!1,this.cdr.detectChanges()},()=>{this.isProcessing=!1,this.cdr.detectChanges()})},()=>{this.isProcessing=!1,this.cdr.detectChanges()})}calculateFinancialSumary(){this.months.forEach(t=>{t.openingBalance=this.getOpeningBalance(t.value),t.totalIncomes=this.getTotalIncomes(t.value,2),t.totalExpenses=this.getTotalExpenses(t.value,2),t.closingBalance=this.getClosingBalance(t.value)})}onChangeBudgetAmount(t,e){this.setVarianceValue(t,e),this.calculateFinancialSumary()}onChangeActualAmount(t,e){this.setVarianceValue(t,e),this.calculateFinancialSumary()}onrightClickBudgetAmount(t,e,n){t.preventDefault(),t.stopPropagation();const a=document.getElementById("ctxMenu");a.style.display="block",a.style.left=t.clientX-300+"px",a.style.top=t.clientY+window.scrollY-75+"px",this.categorySelected=e,this.categorySelected={financialCategoryTypeID:e.financialCategoryTypeID,financialCategoryID:e.financialCategoryID,budgetAmount:e[n+"_budgetAmount"],actualAmount:e[n+"_actualAmount"]},this.monthSelected=n}disableContextMenu(){const t=document.getElementById("ctxMenu");t.style.display="none",t.style.left="",t.style.top="",this.categorySelected=null,this.monthSelected=null}applyAll(){this.categories.forEach(t=>{this.months.forEach(e=>{t.financialCategoryTypeID===this.categorySelected.financialCategoryTypeID&&t[e.value+"_companyFinancialCategoryID"]===this.categorySelected.financialCategoryID&&(t[e.value+"_budgetAmount"]=this.categorySelected.budgetAmount)})}),this.disableContextMenu()}saveFromCtxMenu(){this.disableContextMenu(),this.updateFinancial()}setVarianceValue(t,e){if(t){let n=t[e+"_budgetAmount"],a=t[e+"_actualAmount"],i=null;Number(n)&&Number(a)&&(i=Number(n)-Number(a)),i<0&&(i=-i),t[e+"_variance"]=i,t[e+"_classVariance"]=this.getVarianceClass(t,e)}}getTotalIncomes(t,e){let n=null;for(let a of this.incomeCategories){let i;1===e?i=a[t+"_budgetAmount"]:2===e&&(i=a[t+"_actualAmount"]),i&&(n+=Number(i))}return n}getTotalExpenses(t,e){let n=null;for(let a of this.expenseCategories){let i;1===e?i=a[t+"_budgetAmount"]:2===e&&(i=a[t+"_actualAmount"]),i&&(n+=Number(i))}return n}getOpeningBalance(t){return 1===t?0:this.getClosingBalance(t-1)}getClosingBalance(t){return this.getOpeningBalance(t)+this.getTotalIncomes(t,2)-this.getTotalExpenses(t,2)}getVarianceClass(t,e){let n=t[e+"_budgetAmount"],a=t[e+"_actualAmount"],i=null;return Number(n)&&Number(a)&&(i=Number(n)-Number(a)),1===t.financialCategoryTypeID&&i>0||2===t.financialCategoryTypeID&&i<0?"text-danger":""}storeCategory(t){let e;1===t&&""!==this.incomeCategory?(e={companyID:this.companyID,financialCategory:this.incomeCategory,financialCategoryTypeID:t,financialCategoryCode:null},this.incomeCategory=""):2===t&&""!==this.expenseCategory&&(e={companyID:this.companyID,financialCategory:this.expenseCategory,financialCategoryTypeID:t,financialCategoryCode:null},this.expenseCategory=""),e&&this.financialService.storeCategory(e).subscribe(t=>{var e;t&&(t.financialCategoryID=t.inOut_FinancialCategoryID,t.index=null===(e=this.categories)||void 0===e?void 0:e.length,this.setDafaultValueForCategory(t),this.categories.push(t),this.incomeCategories=this.categories.filter(t=>1===t.financialCategoryTypeID),this.expenseCategories=this.categories.filter(t=>2===t.financialCategoryTypeID),this.cdr.detectChanges())})}setDafaultValueForCategory(t){for(let e of this.months)this.setDefaultValueCategoryPerMonth(t,e.value)}setDefaultValueCategoryPerMonth(t,e){t[e+"_companyBudgetID"]=null,t[e+"_companyAccountID"]=0,t[e+"_financialCategoryTypeID"]=t.financialCategoryTypeID,t[e+"_companyFinancialCategoryID"]=t.financialCategoryID,t[e+"_monthID"]=e,t[e+"_yearID"]=this.yearID,t[e+"_budgetAmount"]=null,t[e+"_companyID"]=this.companyID,t[e+"_companyFinancialID"]=null,t[e+"_actualAmount"]=null,t[e+"_capturedBy"]=this.contactID,t[e+"_variance"]=null}editCategory(t){t.editable=!0,setTimeout(()=>{document.getElementById("category-"+t.financialCategoryID).focus()})}updateCategory(t){t.editable=!1,this.financialService.updateCategory(t).subscribe()}updateFinancial(){const t=[],e=[],n=[],a=[],i=[];for(let m of this.categories)for(let o of this.months){const r=o.value;t.push({companyBudgetID:m[r+"_companyBudgetID"],companyAccountID:m[r+"_companyAccountID"],companyFinancialCategoryID:m[r+"_companyFinancialCategoryID"],financialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),budgetAmount:m[r+"_budgetAmount"],companyID:this.companyID,companyFinancialID:m[r+"_companyFinancialID"],actualAmount:m[r+"_actualAmount"],capturedBy:this.contactID}),e.push({companyAccountID:m[r+"_companyAccountID"],companyFinancialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),budgetAmount:m[r+"_budgetAmount"],companyID:this.companyID}),n.push({companyBudgetID:m[r+"_companyBudgetID"],companyFinancialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),budgetAmount:m[r+"_budgetAmount"]}),a.push({companyID:this.companyID,financialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),actualAmount:m[r+"_actualAmount"],capturedBy:this.contactID}),i.push({companyFinancialID:m[r+"_companyFinancialID"],financialCategoryID:m[r+"_companyFinancialCategoryID"],monthID:r,yearID:Number(this.yearID),actualAmount:m[r+"_actualAmount"],capturedBy:this.contactID})}let o=[],r=t.filter(t=>!t.companyBudgetID);r.length&&o.push(this.financialService.storeBudgets(r));let c=t.filter(t=>!!t.companyBudgetID);c.length&&o.push(this.financialService.updateBudgets(c));let l=t.filter(t=>!t.companyFinancialID);l.length&&o.push(this.financialService.storeFinancial(l));let s=t.filter(t=>!!t.companyFinancialID);s.length&&o.push(this.financialService.updateFinancial(s)),this.isProcessing=!0,Object(b.a)(o).subscribe(()=>{this.isProcessing=!1,this.getFinancial()})}deleteCategory(t){const e=this.modal.open(x.a,{backdrop:"static"});e.componentInstance.objectType="Event",e.result.then(e=>{"Yes"==e&&this.financialService.deleteCategory(t.financialCategoryID).subscribe(()=>{this.categories.splice(t.index,1);let e=0;for(let t of this.categories)t.index=e,++e;this.incomeCategories=this.categories.filter(t=>1===t.financialCategoryTypeID),this.expenseCategories=this.categories.filter(t=>2===t.financialCategoryTypeID),this.cdr.detectChanges()})})}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](g.p),s["\u0275\u0275directiveInject"](g.a),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-company-financial"]],decls:67,vars:20,consts:[[1,"d-flex","align-items-center","justify-content-start","mb-2"],[1,"m-0","mr-3"],[1,"w-auto","form-control","form-control-sm",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive","table-financial-report","m-0"],["class","loading-process",4,"ngIf"],[1,"table","table-bordered","table-hover",3,"click"],["rowspan","2"],["colspan","3",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["colspan","37"],[1,"col-category"],["type","text","placeholder","Add new category",1,"form-control","form-control-sm","col-category",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["colspan","36"],[1,"text-nowrap"],["class","text-right",4,"ngFor","ngForOf"],["type","text","placeholder","Add new category",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["class","text-right","colspan","3",4,"ngFor","ngForOf"],[1,"text-right","my-3"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["id","ctxMenu"],[1,"list-group"],["href","javascript:void(0)",1,"list-group-item","list-group-item-action",3,"click"],[3,"value"],[1,"loading-process"],["colspan","3"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"d-flex","align-items-center"],[1,"flex-grow-1",3,"click"],[1,"btn","btn-link","ico","delete-ico",3,"click"],["type","text",1,"form-control","form-control-sm",3,"id","ngModel","ngModelOptions","ngModelChange","keyup.enter","blur"],[1,"text-right"],["type","number","class","form-control form-control-sm text-right",3,"ngModelOptions","ngModel","ngModelChange","contextmenu",4,"ngIf"],["type","number","class","form-control form-control-sm text-right",3,"ngModelOptions","ngModel","ngModelChange",4,"ngIf"],[3,"class",4,"ngIf"],["type","number",1,"form-control","form-control-sm","text-right",3,"ngModelOptions","ngModel","ngModelChange","contextmenu"],["type","number",1,"form-control","form-control-sm","text-right",3,"ngModelOptions","ngModel","ngModelChange"],["colspan","3",1,"text-right"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"label",1),s["\u0275\u0275text"](2,"Year: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"select",2),s["\u0275\u0275listener"]("change",function(){return e.getFinancial()})("ngModelChange",function(t){return e.yearID=t}),s["\u0275\u0275template"](4,_t,2,2,"option",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",4),s["\u0275\u0275template"](6,Pt,1,0,"div",5),s["\u0275\u0275elementStart"](7,"table",6),s["\u0275\u0275listener"]("click",function(){return e.disableContextMenu()}),s["\u0275\u0275elementStart"](8,"thead"),s["\u0275\u0275elementStart"](9,"tr"),s["\u0275\u0275element"](10,"th",7),s["\u0275\u0275template"](11,Ft,2,1,"th",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"tr"),s["\u0275\u0275template"](13,kt,4,3,"td",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"tbody"),s["\u0275\u0275elementStart"](15,"tr"),s["\u0275\u0275elementStart"](16,"th",10),s["\u0275\u0275text"](17," Income Categories "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](18,Yt,6,3,"tr",9),s["\u0275\u0275elementStart"](19,"tr"),s["\u0275\u0275elementStart"](20,"td",11),s["\u0275\u0275elementStart"](21,"input",12),s["\u0275\u0275listener"]("ngModelChange",function(t){return e.incomeCategory=t})("keyup.enter",function(){return e.storeCategory(1)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](22,"td",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"tr"),s["\u0275\u0275elementStart"](24,"th",14),s["\u0275\u0275text"](25,"Total Incomes"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](26,qt,4,3,"th",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"tr"),s["\u0275\u0275elementStart"](28,"th",10),s["\u0275\u0275text"](29," Expense Categories "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](30,ee,6,3,"tr",9),s["\u0275\u0275elementStart"](31,"tr"),s["\u0275\u0275elementStart"](32,"td",11),s["\u0275\u0275elementStart"](33,"input",16),s["\u0275\u0275listener"]("ngModelChange",function(t){return e.expenseCategory=t})("keyup.enter",function(){return e.storeCategory(2)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](34,"td",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"tr"),s["\u0275\u0275elementStart"](36,"th",14),s["\u0275\u0275text"](37,"Total Expenses"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](38,oe,4,3,"th",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"tr"),s["\u0275\u0275elementStart"](40,"td",10),s["\u0275\u0275text"](41,"\xa0"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"tr"),s["\u0275\u0275elementStart"](43,"th",14),s["\u0275\u0275text"](44,"Opening Balance"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](45,re,3,3,"th",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](46,"tr"),s["\u0275\u0275elementStart"](47,"th",14),s["\u0275\u0275text"](48,"Total Incomes"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](49,ce,3,3,"th",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](50,"tr"),s["\u0275\u0275elementStart"](51,"th",14),s["\u0275\u0275text"](52,"Total Expenses"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](53,le,3,3,"th",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](54,"tr"),s["\u0275\u0275elementStart"](55,"th",14),s["\u0275\u0275text"](56,"Closing Balance"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](57,se,3,3,"th",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](58,"div",18),s["\u0275\u0275elementStart"](59,"button",19),s["\u0275\u0275listener"]("click",function(){return e.updateFinancial()}),s["\u0275\u0275text"](60," Save "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](61,"menu",20),s["\u0275\u0275elementStart"](62,"div",21),s["\u0275\u0275elementStart"](63,"a",22),s["\u0275\u0275listener"]("click",function(){return e.applyAll()}),s["\u0275\u0275text"](64,"Apply to All"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](65,"a",22),s["\u0275\u0275listener"]("click",function(){return e.saveFromCtxMenu()}),s["\u0275\u0275text"](66,"Save"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.yearID),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.years),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.isProcessing),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.months),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",e.columns),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.incomeCategories),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.incomeCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](18,Vt)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.columns),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",e.expenseCategories),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",e.expenseCategory)("ngModelOptions",s["\u0275\u0275pureFunction0"](19,Vt)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e.columns),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngForOf",e.months),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",e.months),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",e.months),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",e.months),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",e.isProcessing))},directives:[h.B,h.q,h.t,a.m,a.n,h.b,h.v,h.D,h.w],pipes:[a.f],styles:[".table-financial-report[_ngcontent-%COMP%]{position:relative}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem;font-size:14px;color:#222;vertical-align:middle}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:60px;height:calc(1.5em + .5rem);margin:0;outline:medium none;padding:.25em;font-weight:400}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.col-category[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{width:auto}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.col-category[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:20px;width:20px;padding:0;opacity:0}.table-financial-report[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td.col-category[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{opacity:1}.table-financial-report[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .table-financial-report[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.table-financial-report[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}#ctxMenu[_ngcontent-%COMP%]{display:none;z-index:100;position:absolute;left:0;top:0}",'.loading-process[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;position:absolute;left:0;right:0;top:0;bottom:0;padding:50px 0 0;z-index:1;justify-content:center;background:rgb(214 214 214/40%)}.loading-process[_ngcontent-%COMP%]:after{content:" ";display:block;width:40px;height:40px;margin:5px;border-radius:50%;border-color:#406fe4 transparent;border-style:solid;border-width:3px;animation:loading-process 1.2s linear infinite}@keyframes loading-process{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}'],changeDetection:0}),t})();const pe=[{path:"financials",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["app-financials"]],decls:4,vars:0,consts:[["id","dashboard-charts",1,"container","financials-view"],[1,"row","p-0"],[1,"col-lg-10","m-t-130"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275element"](3,"router-outlet"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())},directives:[Q.h],styles:[".financials-view[_ngcontent-%COMP%] {\n\t\t\t\twidth: 100%;\n\t\t\t\tmax-width: 100%;\n\t\t\t}"]}),t})(),children:[{path:"",component:me}]}];let de=(()=>{class t{}return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[Q.g.forChild(pe)],Q.g]}),t})(),ue=(()=>{class t{}return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[g.a],imports:[[a.c,h.l,h.z,g.q,de]]}),t})();var ge=n("D+TJ"),he=n("zemM");let fe=(()=>{class t{}return t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[ge.a,G.a],imports:[[a.c,h.l,h.z,St,Et.a,At,Ot.a,ue,he.a]]}),t})()},rdQE:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var a=n("AytR"),i=n("fXoL"),o=n("tk/3");let r=(()=>{class t{constructor(t){this.http=t,this.BaseURI=a.a.apiUrl}getCompanyAccount(t,e,n,a=0,i=0){return this.http.get(`${this.BaseURI}/company/account?companyID=${t}&companyAccountID=${e}&companyLocationID=${n}&companyAccountCategoryID=${a}&referenceID=${i}`)}addCompanyAccount(t){return this.http.post(this.BaseURI+"/company/account",t)}updateCompanyAccount(t){return this.http.put(this.BaseURI+"/company/account",t)}deleteCompanyAccount(t){return this.http.delete(`${this.BaseURI}/company/account/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](o.b))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);