(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"3nm2":function(e,t,n){"use strict";n.d(t,"a",function(){return P});var i=n("8stm"),o=n("fXoL"),a=n("WhH8"),s=n("1kSV"),c=n("kmKP"),r=n("Jn3s"),l=n("3Pt+"),d=n("ofXK"),m=n("Cbnz"),p=n("SdWN"),u=n("0mlJ");const h=["contactSearch"];function g(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",31),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.fullName)}}function f(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",31),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.firstName+" "+e.surname)}}function C(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.designation)}}function y(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"date"),o["\u0275\u0275pipe"](4,"dateObject"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",32),o["\u0275\u0275text"](6,"Pending"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("Last sent on",o["\u0275\u0275pipeBind2"](3,1,o["\u0275\u0275pipeBind1"](4,4,e.customerReviewSentDate),"dd MMM yyyy"),"")}}function b(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"date"),o["\u0275\u0275pipe"](3,"dateObject"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("Last review on ",o["\u0275\u0275pipeBind2"](2,1,o["\u0275\u0275pipeBind1"](3,4,e.sentiment.datePosted),"dd MMM yyyy"),"")}}function I(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"td"),o["\u0275\u0275template"](1,y,7,6,"ng-container",30),o["\u0275\u0275template"](2,b,4,6,"span",30),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.pendingCustomerReview),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.sentiment&&!e.pendingCustomerReview)}}const x=function(e){return{selected:e}};function v(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr",24),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"]().toggleContact(n)}),o["\u0275\u0275elementStart"](1,"td"),o["\u0275\u0275elementStart"](2,"div",12),o["\u0275\u0275element"](3,"input",25),o["\u0275\u0275element"](4,"label",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td"),o["\u0275\u0275elementStart"](6,"div",27),o["\u0275\u0275element"](7,"img",28),o["\u0275\u0275pipe"](8,"avatar"),o["\u0275\u0275template"](9,g,2,1,"span",29),o["\u0275\u0275template"](10,f,2,1,"span",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,C,2,1,"td",30),o["\u0275\u0275template"](12,I,3,2,"td",30),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275classProp"]("disabled",n.groupOwnerID&&n.groupOwnerID===e.contactID),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](11,x,e.checked)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("checked",e.checked),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("src",o["\u0275\u0275pipeBind1"](8,9,e.profilePhoto),o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.fullName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.fullName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.isCustomerSatisfaction),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.isCustomerSatisfaction)}}function M(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",33),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().addNewContact()}),o["\u0275\u0275text"](1," Add new contact "),o["\u0275\u0275elementEnd"]()}}let P=(()=>{class e{constructor(e,t,n,i,o){this.cdr=e,this.contactService=t,this.ngbModal=n,this.activeModal=i,this.userService=o,this.isProcessing=!1,this.pageTitle="",this.contacts=[],this.filteredContacts=[],this.preSelectedcontacts=[],this.allowAddNewContact=!1,this.searchText="",this.checkAllModel=!1,this.user=this.userService.user.getValue(),this.companyID=this.user.companyID,this.contactID=this.user.contactID}ngOnInit(){this.companyID=+localStorage.getItem("CID"),this.contactID=+localStorage.getItem("CoID"),this.masterCompanyID?this.fillContacts():this.mapCurrentContactSelected()}toggleContact(e){e.checked=!e.checked,this.isSingleSelect?this.activeModal.close({contact:e}):this.calculateContactSelected()}unSelectAllContact(){this.filteredContacts.forEach(e=>e.checked=!1),this.calculateContactSelected()}checkAll(){this.filteredContacts&&(this.filteredContacts.forEach(e=>{e.checked=this.checkAllModel}),this.calculateContactSelected())}calculateContactSelected(){this.selectedCount=this.filteredContacts.filter(e=>e.checked).length,this.checkAllModel=this.selectedCount===this.filteredContacts.length}filterContacts(e){this.filteredContacts=this.contacts.filter(t=>{var n;return-1!==(null===(n=t.firstName)||void 0===n?void 0:n.toLowerCase().indexOf(null==e?void 0:e.toLowerCase()))})}submitSelections(){const e={selectedContacts:this.filteredContacts.filter(e=>e.checked)};this.activeModal.close(e)}fillContacts(){this.isProcessing=!0,this.contactService.getContactConnect(0,this.contactID,0,0,"",0,1e3).subscribe(e=>{e&&(this.contacts=e,this.filteredContacts=e,this.mapCurrentContactSelected()),this.isProcessing=!1,this.cdr.detectChanges()},()=>{this.isProcessing=!1,this.cdr.detectChanges()})}mapCurrentContactSelected(){this.filteredContacts.map(e=>e.checked=this.preSelectedcontacts.filter(t=>t.contactID==e.contactID).length>0);const e=this.filteredContacts.filter(e=>e.checked);this.selectedCount=e.length}addNewContact(){const e=this.ngbModal.open(i.a,{backdrop:"static",size:this.customerContact?"lg":"xl"});e.componentInstance.companyID=this.companyID,e.componentInstance.companyName=null,e.componentInstance.actionType="Add",e.componentInstance.customerContact=this.customerContact,e.result.then(e=>{e&&(this.customerContact?(e.checked=!0,this.filteredContacts.push(e),this.calculateContactSelected()):this.activeModal.close(e),this.cdr.detectChanges())},()=>{})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](s.p),o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-contact-selector"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](h,!0),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.contactSearch=e.first)}},decls:35,vars:13,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[1,"form-group"],["placeholder","Type any contact name",1,"form-control",3,"ngModel","ngModelChange"],[1,"contact-selector-content"],[1,"table","inline-table","table-grid","table-compact","table-modal-search"],[1,"inline-header"],[1,"font-weight-normal","col-check"],[1,"custom-control","custom-checkbox"],["id","checkall","type","checkbox",1,"custom-control-input",3,"ngModel","disabled","ngModelChange"],["for","checkall",1,"custom-control-label"],[1,"font-weight-normal"],[1,"font-weight-normal","col-position"],["class","cursor-pointer",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],[1,"filter-sticky","filter-sticky-3","fw-block"],[1,"float-right","text-link"],[1,"cursor-pointer",3,"click"],[1,"text-right","pt-3"],["class","btn btn-info mr-2",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"cursor-pointer",3,"ngClass","click"],["type","checkbox",1,"custom-control-input",3,"checked"],[1,"custom-control-label"],[1,"d-flex","align-items-center"],["alt","",1,"img-fluid","avatar-rounded",3,"src"],["class","pl-2",4,"ngIf"],[4,"ngIf"],[1,"pl-2"],[1,"tag","tag-orange","ml-1"],[1,"btn","btn-info","mr-2",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h1",2),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",3),o["\u0275\u0275listener"]("click",function(){return t.activeModal.dismiss("Cross click")}),o["\u0275\u0275elementStart"](5,"span",4),o["\u0275\u0275text"](6,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"input",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchText=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",8),o["\u0275\u0275elementStart"](11,"table",9),o["\u0275\u0275elementStart"](12,"thead",10),o["\u0275\u0275elementStart"](13,"tr"),o["\u0275\u0275elementStart"](14,"th",11),o["\u0275\u0275elementStart"](15,"div",12),o["\u0275\u0275elementStart"](16,"input",13),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.checkAllModel=e})("ngModelChange",function(){return t.checkAll()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](17,"label",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"th",15),o["\u0275\u0275text"](19,"Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"th",16),o["\u0275\u0275text"](21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"tbody"),o["\u0275\u0275template"](23,v,13,13,"tr",17),o["\u0275\u0275pipe"](24,"contactSelectorFilter"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",18),o["\u0275\u0275elementStart"](26,"span",19),o["\u0275\u0275elementStart"](27,"a",20),o["\u0275\u0275listener"]("click",function(){return t.unSelectAllContact()}),o["\u0275\u0275text"](28,"Clear Filters "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"span"),o["\u0275\u0275text"](30),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"div",21),o["\u0275\u0275template"](32,M,2,0,"button",22),o["\u0275\u0275elementStart"](33,"button",23),o["\u0275\u0275listener"]("click",function(){return t.submitSelections()}),o["\u0275\u0275text"](34),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](t.pageTitle||"Select Contacts"),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("avnonLoader",t.isProcessing),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.searchText),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngModel",t.checkAllModel)("disabled",t.isSingleSelect),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",t.isCustomerSatisfaction?"Status":"Position"," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind2"](24,10,t.filteredContacts,t.searchText)),o["\u0275\u0275advance"](7),o["\u0275\u0275textInterpolate1"](" ",t.selectedCount," selected "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.allowAddNewContact),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.isCustomerSatisfaction?"Send Reviews":"Submit Selections"," "))},directives:[r.a,l.b,l.q,l.t,l.a,d.m,d.n,d.l],pipes:[m.a,p.a,d.e,u.a],styles:[".contact-selector-content[_ngcontent-%COMP%]{height:400px;overflow:auto;position:relative}.fw-block.filter-sticky[_ngcontent-%COMP%]{background-color:#edf1f5;padding:10px 20px;font-size:12px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;padding:.5rem}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#edf1f5}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .col-check[_ngcontent-%COMP%]{width:40px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"],changeDetection:0}),e})()},"6U5Y":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("ofXK"),o=n("fXoL");let a=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},Ousv:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fXoL"),o=n("jhN1");let a=(()=>{class e{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.b))},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"safeHtml",type:e,pure:!0}),e})()},ccsH:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("ofXK"),o=n("3Pt+"),a=n("PCNd"),s=n("1kSV"),c=n("ZLSo"),r=n("j4PG"),l=n("zemM"),d=n("tyNb"),m=n("sYmb"),p=n("5eqV"),u=n("6U5Y"),h=n("fXoL");let g=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,o.l,o.z,a.a,s.v,s.l,d.g,s.q,m.b,c.a,r.a,l.a,s.D,s.t,s.h,p.b,u.a],i.c]}),e})()},mFMl:function(e,t,n){"use strict";n.d(t,"a",function(){return ue});var i=n("fXoL"),o=n("BoU9"),a=n("AytR"),s=n("myoa"),c=n("mwbx"),r=function(e){return e[e.discussion_reaction=1]="discussion_reaction",e}({}),l=n("tyNb"),d=n("1kSV"),m=n("IyfZ"),p=n("ofXK"),u=n("enax"),h=n("Ousv"),g=n("SdWN");function f(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"div",2),i["\u0275\u0275pipe"](2,"safeHtml"),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](2,1,e.text),i["\u0275\u0275sanitizeHtml"])}}const C=function(e){return["/contacts/profile",e]};function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"a",6),i["\u0275\u0275elementStart"](1,"div",7),i["\u0275\u0275element"](2,"img",8),i["\u0275\u0275pipe"](3,"avatar"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngIf;i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](6,C,e.contactID)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("src",i["\u0275\u0275pipeBind1"](3,4,e.profilePhoto),i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," ")}}function b(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"span",3,4),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275reference"](2).open()}),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,y,5,8,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,n=i["\u0275\u0275reference"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngbPopover",n),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," ")}}function I(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,b,6,3,"ng-container",1),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.getMember(e.mentionedContactId))}}function x(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,f,3,3,"ng-container",1),i["\u0275\u0275template"](2,I,2,1,"ng-container",1),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.text),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mentionedContactId)}}let v=(()=>{class e{constructor(){this.members=[]}ngOnInit(){}trackByFn(e,t){return e}get bodyArray(){try{const e=JSON.parse(this.body);if(e.some(e=>e.mentionedContactId)){const t={mentionedContactId:e.find(e=>e.hasOwnProperty("mentionedContactId")).mentionedContactId,text:""};return e.filter(e=>e.hasOwnProperty("text")).forEach(e=>{t.text+=e.text}),[t]}return[{text:this.body}]}catch(e){return[{text:this.body}]}}getMember(e){return this.members.find(t=>t.contactID===e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-chat-body-display"]],inputs:{body:"body",members:"members"},decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"text-wrap",3,"innerHTML"],["triggers","manual",1,"contact-name",3,"ngbPopover","click"],["p","ngbPopover"],["contactInfo",""],["target","_blank",3,"routerLink"],[1,"contact-info"],["alt","profile",3,"src"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,x,3,2,"ng-container",0),2&e&&i["\u0275\u0275property"]("ngForOf",t.bodyArray)("ngForTrackBy",t.trackByFn)},directives:[p.m,p.n,d.s,l.f],pipes:[h.a,g.a],styles:[".contact-name[_ngcontent-%COMP%]{font-weight:700;color:#406fe4;cursor:pointer}.contact-info[_ngcontent-%COMP%]{display:flex}.contact-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;min-width:20px;margin-right:8px;border-radius:50%}.text-wrap[_ngcontent-%COMP%]{max-width:450px;word-wrap:break-word}"],changeDetection:0}),e})();var M=n("0mlJ");const P=["chatActionDropdown"],S=["emojiPickerBtn"],O=["emojiPickerMenuBtn"];function w(e,t){if(1&e&&(i["\u0275\u0275element"](0,"img",20),i["\u0275\u0275pipe"](1,"avatar")),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("src",i["\u0275\u0275pipeBind1"](1,1,e.chatItem.profilePhoto),i["\u0275\u0275sanitizeUrl"])}}function D(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",21),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.chatItem.firstName+" "+e.chatItem.surname," ")}}function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",22),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"date"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,e.chatItem.dateCreated,"HH:mm a")," ")}}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",23),i["\u0275\u0275text"](1,"Requested Sign Off "),i["\u0275\u0275elementEnd"]())}function E(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",24),i["\u0275\u0275text"](1,"Approved Sign Off "),i["\u0275\u0275elementEnd"]())}function T(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",25),i["\u0275\u0275text"](1,"Declined Sign Off "),i["\u0275\u0275elementEnd"]())}function R(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",25),i["\u0275\u0275text"](1,"Flagged"),i["\u0275\u0275elementEnd"]())}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",26),i["\u0275\u0275text"](1," Sales Review "),i["\u0275\u0275elementEnd"]())}function j(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",26),i["\u0275\u0275text"](1," Demand Review "),i["\u0275\u0275elementEnd"]())}function A(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",26),i["\u0275\u0275text"](1," Delivery Review "),i["\u0275\u0275elementEnd"]())}function N(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",26),i["\u0275\u0275text"](1," Team Capacity Review "),i["\u0275\u0275elementEnd"]())}function V(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",26),i["\u0275\u0275text"](1," Overall Stability Review "),i["\u0275\u0275elementEnd"]())}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",26),i["\u0275\u0275text"](1," How month went Review "),i["\u0275\u0275elementEnd"]())}const L=function(){return[20,24]},$=function(){return[21]},q=function(){return[22]},z=function(){return[23]};function U(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",27),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("text-success",i["\u0275\u0275pureFunction0"](9,L).includes(e.chatItem.discussionCategoryID))("text-danger",i["\u0275\u0275pureFunction0"](10,$).includes(e.chatItem.discussionCategoryID))("text-primary",i["\u0275\u0275pureFunction0"](11,q).includes(e.chatItem.discussionCategoryID))("text-warning",i["\u0275\u0275pureFunction0"](12,z).includes(e.chatItem.discussionCategoryID)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.chatItem.discussionTopic," ")}}function G(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",24),i["\u0275\u0275text"](1," Weekly report "),i["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",24),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.chatItem.discussionTopic," ")}}function Q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",23),i["\u0275\u0275text"](1," Canceled requested Sign Off "),i["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",26),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.chatItem.discussionTopic," ")}}function X(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275elementStart"](1,"span",35),i["\u0275\u0275element"](2,"app-chat-body-display",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"span",36),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("body",e.chatItem.repliedDiscussion.discussionBody)("members",e.members),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate3"](" by ",e.chatItem.repliedDiscussion.firstName," ",e.chatItem.repliedDiscussion.surname," - ",i["\u0275\u0275pipeBind2"](5,5,e.chatItem.repliedDiscussion.dateCreated,"dd-MM-yyyy HH:mm")," ")}}function W(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",39),i["\u0275\u0275text"](1),i["\u0275\u0275element"](2,"br"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"date"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"](" ",e.firstname," ",e.surname,""),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](4,3,e.dateSubmitted,"dd-MM-yyyy HH:mm")," ")}}function J(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",37),i["\u0275\u0275text"](1),i["\u0275\u0275template"](2,W,5,6,"ng-template",null,38,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275reference"](3);i["\u0275\u0275property"]("ngbPopover",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.emojiRef," ")}}function Y(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",40,41),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275reference"](1).open()}),i["\u0275\u0275element"](2,"img",42),i["\u0275\u0275elementEnd"]()}if(2&e){i["\u0275\u0275nextContext"](2);const e=i["\u0275\u0275reference"](30);i["\u0275\u0275property"]("ngbPopover",e)}}function Z(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,X,6,8,"div",28),i["\u0275\u0275elementStart"](2,"p",29),i["\u0275\u0275element"](3,"app-chat-body-display",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",31),i["\u0275\u0275template"](5,J,4,2,"span",32),i["\u0275\u0275template"](6,Y,3,1,"span",33),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.chatItem.repliedDiscussion),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("body",e.chatItem.discussionBody)("members",e.members),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.discusstionReactions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.discusstionReactions.length)}}function ee(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"p",29),i["\u0275\u0275text"](1," Task assigned: "),i["\u0275\u0275elementStart"](2,"span",43),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]();return t.onGoToTaskDetail(t.chatItem.taskID)}),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"date"),i["\u0275\u0275pipe"](6,"dateObject"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Complete ",e.chatItem.taskTitle.trim(),""),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" by ",i["\u0275\u0275pipeBind2"](5,2,i["\u0275\u0275pipeBind1"](6,5,e.chatItem.endDate),"dd MMM yyyy")," ")}}const te=function(e){return["/task",e]};function ne(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"a",44),i["\u0275\u0275text"](1," See details "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](1,te,e.chatItem.referenceID))}}const ie=function(e){return["/goal/detail",e]};function oe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"a",45),i["\u0275\u0275text"](1," See goal details "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](1,ie,e.chatItem.referenceID))}}function ae(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",51),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"](3);return t.onRemoveChat(t.chatItem.discussionID)}),i["\u0275\u0275text"](1," Delete "),i["\u0275\u0275elementEnd"]()}}function se(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"button",51),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"](2);return t.onChatEdit(t.chatItem)}),i["\u0275\u0275text"](2," Edit "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,ae,2,0,"button",52),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",8!==e.chatItem.discussionCategoryID)}}const ce=function(e){return{"action-item-chat--show":e}};function re(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",46,47),i["\u0275\u0275listener"]("openChange",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChatDropdownChange(t)}),i["\u0275\u0275elementStart"](2,"button",48),i["\u0275\u0275element"](3,"span",49),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",50),i["\u0275\u0275template"](5,se,4,1,"ng-container",13),i["\u0275\u0275elementStart"](6,"button",51),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]();return t.onChatReply(t.chatItem)}),i["\u0275\u0275text"](7," Reply "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,ce,e.isHoverMenu)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.chatItem.discussionCreatedByContactID===e.contactId)}}function le(e,t){}const de=function(){return[7,8,9,10,11]},me=function(){return[20,21,22,23,24]},pe=function(){return[5,40]};let ue=(()=>{class e{constructor(e,t,n){this.router=e,this.modal=t,this.likeService=n,this.members=[],this.removeChat=new i.EventEmitter,this.editChat=new i.EventEmitter,this.replyChat=new i.EventEmitter,this.taskStatus=new i.EventEmitter,this.discusstionReactions=[],this.fakeId=0,this.apiBlobUrl=a.a.apiBlobUrl+"/",this.discussionCategoriesEnum=o.b}ngOnInit(){var e,t,n;this.contactId=+localStorage.getItem("CoID"),this.galleryFiles=this.getGalleryFiles(this.chatItem.documents),this.documents=null===(e=this.chatItem)||void 0===e?void 0:e.documents.filter(e=>!s.b.isGalleryDocument(e)).map(e=>Object.assign(Object.assign({},e),{documentPath:this.apiBlobUrl+e.documentPath})),this.nonGalleryFiles=this.getNonGalleryFiles(this.documents);const i=null===(n=null===(t=this.chatItem)||void 0===t?void 0:t.discussionTopic)||void 0===n?void 0:n.match(s.a);i&&(this.chatItem.urlLinks=i.map(e=>e.trim()))}getGalleryFiles(e){return e.filter(e=>s.b.isGalleryDocument(e)).map(e=>{const t=s.b.isVideoDocument(e)?{videoUrl:this.apiBlobUrl+e.documentPath}:{imageUrl:`${this.apiBlobUrl}512px/${e.documentPath}`};return Object.assign({id:e.documentID,documentPath:e.documentPath,data:t,type:e.documentType,progress:100},e)})}getNonGalleryFiles(e){return e?e.filter(e=>!s.b.isImage(e)).map(e=>this.getFile(e)):[]}getFile(e){return Object.assign({id:e.documentID,documentPath:e.documentPath,data:{name:e.documentTitle},type:e.documentType,progress:100,fakeId:e.documentID},e)}onChatDropdownChange(e){this.isHoverMenu=!!e}mouseEnter(e){this.isHoverMenu=!0}mouseLeave(e){e||(this.isHoverMenu=!1)}openDocumentPreviewModal(e){this.modal.open(c.a,{size:"xl"}).componentInstance.document=e}onRemoveChat(e){this.removeChat.emit(e)}onChatEdit(e){this.editChat.emit(e)}onChatReply(e){this.replyChat.emit(e)}onGoToTaskDetail(e){this.router.navigate(["/task",e])}addReaction({emoji:e}){this.likeService.createLike({emojiRef:e.native,contactID:this.contactId,referenceID:this.chatItem.discussionID,likeCategoryID:r.discussion_reaction}).subscribe(()=>this.getReactions()),this.chatActionDropdown.close(),this.emojiPickerBtn.close(),this.emojiPickerMenuBtn.close()}getReactions(){this.likeService.getLike({referenceID:this.chatItem.discussionID,likeCategoryID:r.discussion_reaction,contactID:0,likeID:0}).subscribe(e=>{e&&e.length&&(this.discusstionReactions=e)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.c),i["\u0275\u0275directiveInject"](d.p),i["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-chat-card"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](P,!0),i["\u0275\u0275viewQuery"](S,!0),i["\u0275\u0275viewQuery"](O,!0)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.chatActionDropdown=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.emojiPickerBtn=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.emojiPickerMenuBtn=e.first)}},inputs:{members:"members",chatItem:"chatItem",taskOwner:"taskOwner",actionsHidden:"actionsHidden",isAgenda:"isAgenda"},outputs:{removeChat:"removeChat",editChat:"editChat",replyChat:"replyChat",taskStatus:"taskStatus"},decls:31,vars:42,consts:[[1,"chat-item"],["alt","Profile pic","class","profile-pic",3,"src",4,"ngIf"],[1,"chat-data",3,"mouseenter","mouseleave"],[1,"chat-header","d-flex","align-items-center","justify-content-start","cursor-pointer"],[1,"char-header-info","flex-grow-1"],["class","contact-name",4,"ngIf"],["class","hour mr-1",4,"ngIf"],["class","text-warning font-weight-bold",4,"ngIf"],["class","text-success font-weight-bold",4,"ngIf"],["class","text-danger font-weight-bold",4,"ngIf"],["class","text-primary font-weight-bold",4,"ngIf"],["class","font-weight-bold",3,"text-success","text-danger","text-primary","text-warning",4,"ngIf"],[1,"w-100"],[4,"ngIf"],["class","chat-body",4,"ngIf"],["class","text-primary mb-1 cursor-pointer",3,"routerLink",4,"ngIf"],["class","text-primary mb-1",3,"routerLink",4,"ngIf"],[1,"w-100",3,"images","files","editable","click"],["ngbDropdown","","container","body","class","action-item-chat",3,"ngClass","openChange",4,"ngIf"],["emojiPickerTpl",""],["alt","Profile pic",1,"profile-pic",3,"src"],[1,"contact-name"],[1,"hour","mr-1"],[1,"text-warning","font-weight-bold"],[1,"text-success","font-weight-bold"],[1,"text-danger","font-weight-bold"],[1,"text-primary","font-weight-bold"],[1,"font-weight-bold"],["class","reply-chat-content",4,"ngIf"],[1,"chat-body"],[3,"body","members"],[1,"reactions"],["triggers","mouseenter:mouseleave",3,"ngbPopover",4,"ngFor","ngForOf"],["triggers","manual","autoClose","outside","placement","top-left",3,"ngbPopover","click",4,"ngIf"],[1,"reply-chat-content"],[1,"reply-chat-body"],[1,"reply-chat-info"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["reactionInfo",""],[1,"reaction-info"],["triggers","manual","autoClose","outside","placement","top-left",3,"ngbPopover","click"],["emojiPickerBtn","ngbPopover"],["src","assets/img/icons/add-reaction.png","alt","Add reaction icon",1,"add-reaction-icon"],[1,"cursor-pointer","text-primary",3,"click"],[1,"text-primary","mb-1","cursor-pointer",3,"routerLink"],[1,"text-primary","mb-1",3,"routerLink"],["ngbDropdown","","container","body",1,"action-item-chat",3,"ngClass","openChange"],["chatActionDropdown","ngbDropdown"],["ngbDropdownToggle","",1,"btn","btn-sm","no-icon"],[1,"ico","dots-ico","dots-ico--gray"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,w,2,3,"img",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275listener"]("mouseenter",function(){return t.mouseEnter("chat-data")})("mouseleave",function(){return t.mouseLeave(t.chatActionDropdown.isOpen())}),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275template"](5,D,2,1,"span",5),i["\u0275\u0275template"](6,k,3,4,"span",6),i["\u0275\u0275template"](7,_,2,0,"span",7),i["\u0275\u0275template"](8,E,2,0,"span",8),i["\u0275\u0275template"](9,T,2,0,"span",9),i["\u0275\u0275template"](10,R,2,0,"span",9),i["\u0275\u0275template"](11,F,2,0,"span",10),i["\u0275\u0275template"](12,j,2,0,"span",10),i["\u0275\u0275template"](13,A,2,0,"span",10),i["\u0275\u0275template"](14,N,2,0,"span",10),i["\u0275\u0275template"](15,V,2,0,"span",10),i["\u0275\u0275template"](16,B,2,0,"span",10),i["\u0275\u0275template"](17,U,2,13,"span",11),i["\u0275\u0275template"](18,G,2,0,"span",8),i["\u0275\u0275template"](19,H,2,1,"span",8),i["\u0275\u0275template"](20,Q,2,0,"span",7),i["\u0275\u0275template"](21,K,2,1,"span",10),i["\u0275\u0275elementStart"](22,"div",12),i["\u0275\u0275template"](23,Z,7,5,"ng-container",13),i["\u0275\u0275template"](24,ee,7,7,"p",14),i["\u0275\u0275template"](25,ne,2,3,"a",15),i["\u0275\u0275template"](26,oe,2,3,"a",16),i["\u0275\u0275elementStart"](27,"app-image-layout",17),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](28,re,8,4,"div",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](29,le,0,0,"ng-template",null,19,i["\u0275\u0275templateRefExtractor"])),2&e&&(i["\u0275\u0275classProp"]("agenda",t.isAgenda)("chat-item--first-item",!t.chatItem.isSameTime),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.chatItem.isSameTime&&!t.isAgenda),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("ml-0",t.isAgenda)("same",t.chatItem.isSameTime),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("no-data",t.chatItem.isSameTime&&!i["\u0275\u0275pureFunction0"](38,de).includes(t.chatItem.discussionCategoryID)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.chatItem.isSameTime&&!t.isAgenda),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.chatItem.isSameTime&&!t.isAgenda),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.requestSignOff),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.acceptSignOff),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.declineSignOff),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.flaggedTask),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.salesReview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.demandReview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.customerSatisfactionReview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.teamCapacityReview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.overallStabilityReview),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.chatItem.discussionCategoryID===t.discussionCategoriesEnum.howMonthGo),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](39,me).includes(t.chatItem.discussionCategoryID)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",25===t.chatItem.discussionCategoryID),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",26===t.chatItem.discussionCategoryID),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",11===t.chatItem.discussionCategoryID),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](40,pe).includes(t.chatItem.discussionCategoryID)&&t.chatItem.referenceID),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("is-agenda-body",t.isAgenda),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",10!==t.chatItem.discussionCategoryID),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",10===t.chatItem.discussionCategoryID&&t.chatItem.taskID),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",26===t.chatItem.discussionCategoryID&&t.chatItem.referenceID),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pureFunction0"](41,me).includes(t.chatItem.discussionCategoryID)&&t.chatItem.referenceID),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("images",t.galleryFiles)("files",t.nonGalleryFiles)("editable",!1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.actionsHidden))},directives:[p.n,u.a,v,p.m,d.s,l.f,d.i,p.l,d.m,d.k,d.j],pipes:[g.a,p.e,M.a],styles:['.chat-item[_ngcontent-%COMP%]{display:flex}.chat-item.agenda[_ngcontent-%COMP%]{color:#495057;font-size:15px}.chat-item[_ngcontent-%COMP%]   .action-item-chat[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:none;padding:0!important;margin:0!important;height:20px!important;width:20px;line-height:normal!important}.chat-item[_ngcontent-%COMP%]   .action-item-chat[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.chat-item[_ngcontent-%COMP%]   .action-item-chat[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after{content:none}.chat-item[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:40px;height:40px;min-width:40px;margin-right:8px;border-radius:50%}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.chat-item[_ngcontent-%COMP%]   .chat-data.same[_ngcontent-%COMP%]{margin:0 15px 0 48px}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:0}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header.no-data[_ngcontent-%COMP%]{margin-bottom:0}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .contact-name[_ngcontent-%COMP%]{font-size:15px;font-weight:700;line-height:1;color:#000}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .hour[_ngcontent-%COMP%]{line-height:1;margin-left:8px;font-size:15px;text-transform:lowercase;color:rgba(42,42,42,.5)}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .chat-actions[_ngcontent-%COMP%]{background:none;padding:0;margin:0;display:flex;align-items:center;justify-content:center;border:none;outline:none;box-shadow:none;height:6px}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   .chat-actions[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:18px;height:4px;opacity:.5}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .reply-chat-content[_ngcontent-%COMP%]{border-left:4px solid grey;overflow:hidden;display:flex;flex-direction:column;margin-bottom:3px}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .reply-chat-content[_ngcontent-%COMP%]   .reply-chat-body[_ngcontent-%COMP%]{padding:0 8px;font-size:14px;color:#6f7480;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .reply-chat-content[_ngcontent-%COMP%]   .reply-chat-info[_ngcontent-%COMP%]{padding:0 8px;font-size:12px;color:#a1a7b4;font-style:italic}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{font-size:15px;line-height:1.2;font-weight:400;color:#2a2a2a;margin-bottom:0;white-space:pre-line}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .reactions[_ngcontent-%COMP%]{position:relative}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .reactions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:2px}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .reactions[_ngcontent-%COMP%]   .reaction-info[_ngcontent-%COMP%]{font-size:12px}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;flex-direction:column;list-style:none}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-item[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;width:100%;overflow:hidden}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-item[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;color:#007bff;cursor:pointer}.chat-item[_ngcontent-%COMP%]   .chat-data[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-item[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:4px}.is-agenda-body[_ngcontent-%COMP%]{position:relative;padding-left:16px}.is-agenda-body[_ngcontent-%COMP%]:before{width:8px;height:8px;border-radius:50%;background:#495057;content:"";position:absolute;left:0;top:4px}.action-item-chat[_ngcontent-%COMP%]{position:absolute;visibility:hidden}.action-item-chat--show[_ngcontent-%COMP%]{position:absolute;visibility:visible;right:3px;padding:4px;background-color:#fff;border:1px solid grey;border-radius:15px}.chat-item[_ngcontent-%COMP%]{padding:.1rem 0}.btn[_ngcontent-%COMP%]   .dots-ico[_ngcontent-%COMP%]{display:inline-block;background-size:18px 18px;width:18px;height:18px}.chat-item--first-item[_ngcontent-%COMP%]{margin-top:.5rem}']}),e})()},"w/zQ":function(e,t,n){"use strict";n.d(t,"a",function(){return te});var i=n("fXoL"),o=n("6lqT"),a=n("XNiG"),s=n("LRne"),c=n("cp0P"),r=n("1G5W"),l=n("eIep"),d=n("lJxs"),m=n("Wgwc"),p=n("BN3N"),u=n("xJDW"),h=n("4CJs"),g=n("QF1F"),f=n("tk/3"),C=n("AytR"),y=n("p0ro"),b=n("8J6U"),I=n("XIp8"),x=n("w6ya"),v=n("myoa"),M=n("1kSV"),P=n("S2+F"),S=n("XAmU"),O=n("esnG"),w=n("kmKP"),D=n("5eHb"),k=n("ev4g"),_=n("1bi4"),E=n("9nlD"),T=n("ofXK"),R=n("enax"),F=n("SdWN");const j=["groupMembersSelector"],A=["groupMembersSelectorAnchor"];function N(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",6),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().selectMember(n)}),i["\u0275\u0275element"](1,"img",7),i["\u0275\u0275pipe"](2,"avatar"),i["\u0275\u0275elementStart"](3,"span",8),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",i["\u0275\u0275pipeBind1"](2,2,e.profilePhoto),i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.firstName+" "+e.surname)}}let V=(()=>{class e{constructor(){this.members=[],this.filterMembers=[],this.selectedMembers=[],this.isGroupMembersSelecting=!1}ngAfterViewInit(){this.inputElement.addEventListener("keydown",this.onKeyDown.bind(this))}ngOnChanges(){this.filterMembers=this.members.filter(e=>e.contactID!==+localStorage.getItem("CoID"))}ngOnDestroy(){this.inputElement.removeEventListener("keydown",this.onKeyDown.bind(this))}selectMember(e){this.groupMembersSelector.close(),this.inputElement.focus(),this.inputElement.value+=`${e.firstName} ${e.surname} `,this.inputElement.dispatchEvent(new CustomEvent("input",{bubbles:!0})),this.isGroupMembersSelecting=!1,this.selectedMembers.push(e)}onKeyDown(e){this.checkShowGroupMembersSelector(e),this.isGroupMembersSelecting?setTimeout(()=>{this.groupMembersSelector.open(),this.inputElement.value.endsWith("@")&&(this.inputElement.blur(),this.groupMembersSelectorAnchor.nativeElement.focus())}):this.groupMembersSelector.close()}checkShowGroupMembersSelector(e){50!==e.keyCode||!e.shiftKey||this.inputElement.value&&" "!==this.inputElement.value.slice(this.inputElement.value.length-1)||(this.isGroupMembersSelecting=!0),32===e.keyCode&&(this.isGroupMembersSelecting=!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-group-member-selector"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](j,!0),i["\u0275\u0275viewQuery"](A,!0)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.groupMembersSelector=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.groupMembersSelectorAnchor=e.first)}},inputs:{members:"members",inputElement:"inputElement"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:1,consts:[["ngbDropdown","","display","static","placement","top-left",1,"group-members-selector"],["groupMembersSelector","ngbDropdown"],["ngbDropdownToggle","",1,"anchor"],["groupMembersSelectorAnchor",""],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"click"],["alt","profile",3,"src"],[1,"member-name"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0,1),i["\u0275\u0275element"](2,"button",2,3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275template"](5,N,5,4,"button",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.filterMembers))},directives:[M.i,M.m,M.k,T.m,M.j],pipes:[F.a],styles:[".group-members-selector[_ngcontent-%COMP%]{height:0}.group-members-selector[_ngcontent-%COMP%]   .anchor[_ngcontent-%COMP%]{max-width:0;max-height:0;border:0;padding:0}.group-members-selector[_ngcontent-%COMP%]   .anchor[_ngcontent-%COMP%]:after{content:none}.group-members-selector[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;min-width:20px;margin-right:8px;border-radius:50%}.group-members-selector[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-size:14px}"]}),e})();var B=n("3Pt+"),L=n("5eqV");const $=["messageInput"],q=["fileInput"],z=["groupMemberSelectorComponent"];function U(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ul",9),i["\u0275\u0275elementStart"](1,"li",10),i["\u0275\u0275elementStart"](2,"div",11),i["\u0275\u0275elementStart"](3,"span",12),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"ngb-progressbar",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"button",14),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit,o=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).removeProgressFile(o,n)}),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](e.data.name),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("value",e.progress)("showValue",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",100===e.progress&&n.sendingRequest),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.sendingRequest?"Cancel":"Delete"," ")}}function G(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,U,8,5,"ul",8),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.getFile(e))}}function H(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275template"](1,G,2,1,"ng-container",7),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.documents)}}function Q(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"app-image-layout",15),i["\u0275\u0275listener"]("handleRemoveImage",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().removeFile(t)}),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("images",e.getGalleryFiles(e.documents))("files",e.getNoneGalleryFiles(e.documents))("editable",!0)}}function K(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",31),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).openAddTaskModal()}),i["\u0275\u0275element"](1,"i",32),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngbTooltip",3===e.chat.discussionCategoryID?3===e.user.userGroupID?"Log a request":"Assign a task":50===e.chat.discussionCategoryID?"Request support":"Assign a task")}}function X(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",33),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onChatEdit.emit(null)}),i["\u0275\u0275text"](1,"Cancel edit"),i["\u0275\u0275elementEnd"]()}}const W=function(e,t){return{"chat-form--filled":e,"full-screen":t}};function J(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"button",17),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]();return t.fullScreen=!t.fullScreen}),i["\u0275\u0275element"](2,"i"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"app-group-member-selector",18,19),i["\u0275\u0275elementStart"](5,"div",20),i["\u0275\u0275elementStart"](6,"textarea",21,22),i["\u0275\u0275listener"]("keydown",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSendMessage(t)})("paste",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onPaste(t)})("ngModelChange",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().commentText=t}),i["\u0275\u0275text"](8,"    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",23),i["\u0275\u0275elementStart"](10,"div",24),i["\u0275\u0275elementStart"](11,"span",25),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFileInputClick("image/*")}),i["\u0275\u0275element"](12,"i",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"span",25),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFileInputClick("")}),i["\u0275\u0275element"](14,"i",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](15,K,2,1,"span",28),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,X,2,0,"span",29),i["\u0275\u0275elementStart"](17,"button",30),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().sendMessage()}),i["\u0275\u0275text"](18,"Send"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275reference"](7),t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](14,W,t.commentText,t.fullScreen)),i["\u0275\u0275advance"](2),i["\u0275\u0275classMapInterpolate1"]("fas fa-chevron-",t.fullScreen?"down":"up",""),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("members",t.members)("inputElement",e),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("flex-grow-1",t.fullScreen),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("flex-grow-1",t.fullScreen),i["\u0275\u0275property"]("placeholder","Type a message here")("ngModel",t.commentText),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",t.showTask),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.editChat)}}function Y(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",41),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onChatEdit.emit(null)}),i["\u0275\u0275text"](1," Cancel edit "),i["\u0275\u0275elementEnd"]()}}function Z(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275elementStart"](1,"div",35),i["\u0275\u0275elementStart"](2,"input",36),i["\u0275\u0275listener"]("keydown",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSendMessage(t)})("paste",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onPaste(t)})("ngModelChange",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().commentText=t}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"span",37),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](5).click()}),i["\u0275\u0275element"](4,"img",38),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",39),i["\u0275\u0275template"](6,Y,2,0,"span",40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",e.commentText),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",e.editChat)}}const ee=n("Ds8A");m.extend(ee);let te=(()=>{class e{constructor(e,t,n,o,s,c,r,l,d){this.modal=e,this.signalRService=t,this.discussionService=n,this.documentService=o,this.userService=s,this.toastrService=c,this.taskService=r,this.distributionService=l,this.notificationService=d,this.onChatAdd=new i.EventEmitter,this.onChatEdit=new i.EventEmitter,this.instantPost=new i.EventEmitter,this.members=[],this.showTask=!0,this.showCalendar=!1,this.delegates=[],this.commentText="",this.documents=[],this.fakeId=0,this.unsubscribe=[],this.documentsWillRemove=[],this.destroy$=new a.a,this.isSentMail=!1,this.acceptType="",this.fullScreen=!1,this.user=this.userService.user.getValue(),this.companyID=this.user.companyID}ngOnInit(){this.profilePhoto=this.user.profilePhoto,this.editChat&&(this.commentText=this.editChat.discussionTopic,this.documents=this.editChat.documents.map(e=>{const t=this.getFile(e);return e.file=t,e}))}ngOnChanges(e){this.editChat&&(this.commentText=this.editChat.discussionTopic,this.documents=this.editChat.documents.map(e=>{const t=this.getFile(e);return e.file=t,e}))}onSendMessage(e){this.typing?(clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout(()=>{this.clearTyping()},1500)):(this.typing=!0,this.addTypingIndicator(),this.typingTimeout=setTimeout(()=>{this.clearTyping()},1500)),13!==e.keyCode||e.shiftKey||!(this.commentText&&this.commentText.length||this.documents.length)||this.sendingRequest||(e.preventDefault(),this.editChat?this.updateMessage():this.createMessage())}sendMessage(){(this.commentText||0!==this.documents.length)&&(this.editChat?this.updateMessage():this.createMessage())}createMessage(e=0){this.sendingRequest=!0;const t={discussionTopic:this.commentText,discussionCategoryID:50===this.chat.discussionCategoryID?10:this.chat.discussionCategoryID,isDirectMessage:!0,discussionCreatedByContactID:this.contactId,discussionBody:this.processedCommentText,parentDiscussionID:this.chat.discussionID,referenceID:e,replyDisussionID:this.repliedChat?this.repliedChat.discussionID:null},n=Object(b.a)(new Date)+t.discussionTopic;if(""===this.commentText&&(t.discussionTopic="Just attachments"),!this.documents.length){const e=Object.assign({},t);e.firstName=this.user.firstName,e.surname=this.user.surname,e.dateCreated=m().format(p.c),e.profilePhoto=this.profilePhoto,e.tempKey=n,e.documents=[],e.replyDiscussionID=e.replyDisussionID,this.onChatAdd.emit(e),this.commentText=""}this.discussionService.insertDiscussion(t).pipe(Object(r.a)(this.destroy$)).subscribe(e=>{e.firstName=this.user.firstName,e.surname=this.user.surname,e.dateCreated=m().format(p.c),e.profilePhoto=this.profilePhoto,e.tempKey=n,e.replyDiscussionID=e.replyDisussionID;const i=this.members.map(e=>e.contactID).filter(e=>e!==this.contactId)[0];let o=!1;i&&(o=0===this.signalRService.getClientsByChannel("dashboard").filter(e=>Number(e.contactId)===i).length),(this.isSentMail||o)&&this.sendEmail(this.chat.discussionID,t.discussionTopic,this.channel),this.saveDocuments(e.discussionID,this.documents).subscribe(t=>{this.sendingRequest=!1,this.documents=[],e.documents=t.filter(e=>e),t.length?this.onChatAdd.emit(e):this.instantPost.emit(e);const n={type:u.a.chatAdd,data:e};this.clearTyping(),this.signalRService.transferMessage(this.channel,n);const i=m().format(p.c)+"|"+e.discussionID,o={date:m().format(p.c),body:this.commentText.substr(0,12)+"...",topic:"unread message",senderFullName:e.firstName+" "+e.surname,senderPhoto:e.profilePhoto,channel:this.channel,reference:this.chat.discussionID,notificationType:2===this.chat.discussionCategoryID?h.a.groupMessage:h.a.chatNewMessage,senderId:e.discussionCreatedByContactID,receivers:this.members.map(e=>e.contactID).filter(t=>t!==e.discussionCreatedByContactID),uniqueId:i,discussionId:this.chat.discussionID};this.signalRService.transferMessage("dashboard",o),t.length&&(this.commentText="")},()=>{this.sendingRequest=!1}),this.updateUnreadCount(),this.notifyMentionedMembers()})}get processedCommentText(){var e,t;const n=[];let i=this.commentText;return null===(t=null===(e=this.groupMemberSelectorComponent)||void 0===e?void 0:e.selectedMembers)||void 0===t||t.forEach(e=>{const t=i.split(`@${e.firstName} ${e.surname}`);t.length>1&&(t[0]&&n.push({text:t[0]}),n.push({mentionedContactId:e.contactID}),t[1]&&n.push({text:t[1]}),i=t[1])}),n.length?JSON.stringify(n):this.commentText}updateMessage(){this.sendingRequest=!0,this.editChat.discussionTopic=this.commentText,this.editChat.discussionBody=this.commentText;const e=Object.assign(Object.assign({},this.editChat),{documents:null});this.discussionService.updateDiscussion(e).pipe(Object(r.a)(this.destroy$),Object(l.a)(()=>{const e=this.documentsWillRemove.map(e=>this.documentService.deleteDocument(e)),t=e&&e.length?e:Object(s.a)([]),n=Object(c.a)(t),i=this.documents.filter(e=>!e.documentID);return Object(c.a)([this.saveDocuments(this.editChat.discussionID,i),n])})).subscribe(([e])=>{this.documents=[],this.sendingRequest=!1,this.editChat.documents||(this.editChat.documents=[]),this.editChat.documents=this.editChat.documents.filter(e=>e.documentID),e&&e.length&&this.editChat.documents.push(...e),this.editChat.documents=this.editChat.documents.filter(e=>e),this.onChatEdit.emit(this.editChat);const t={type:u.a.chatEdit,data:this.editChat};this.isSentMail&&this.sendEmail(this.editChat.discussionID,this.editChat.discussionTopic,this.channel),this.signalRService.transferMessage(this.channel,t),this.notifyMentionedMembers()},()=>{this.sendingRequest=!1})}updateUnreadCount(){const e=this.members.find(e=>e.contactID===this.contactId);e.lastReadDate=m().format(p.c),e.unread=0,this.discussionService.updateMember(e).subscribe()}notifyMentionedMembers(){const e=`${this.user.firstName} ${this.user.surname}| has mentioned you in a discussion`;this.groupMemberSelectorComponent.selectedMembers.forEach(t=>{this.notificationService.noticeNotification({notificationCategoryID:x.a.mention_discussion_item,referenceID:this.chat.discussionID,contactID:t.contactID,description:e,createdContact:this.user.contactID}).subscribe(()=>{const n=Object(b.a)(new Date),i={date:n,body:e.replace("|",""),topic:e.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:this.chat.discussionID,notificationType:h.a.other,senderId:this.user.contactID,receivers:[t.contactID],uniqueId:`${n}|${this.chat.discussionID}`,discussionId:0};this.signalRService.transferMessage("dashboard",i)})}),this.groupMemberSelectorComponent.selectedMembers=[]}resetSelection(e){e.target.value=""}onFileSelect(e){const t=e.target.files;for(let n=0;n<t.length;n++){const e=t.item(n);if(e.type&&/^image\//.test(e.type)){const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{e.imageUrl=t.result}}else if(e.type&&/^video\//.test(e.type)){const t=15,n=new FileReader;n.readAsDataURL(e),n.onload=n=>{e.videoUrl=n.target.result;const i=document.createElement("video");i.setAttribute("src",n.target.result),i.addEventListener("loadedmetadata",function(){this.currentTime=i.duration<t?i.duration/2:t},!1),i.addEventListener("loadeddata",()=>{setTimeout(()=>{const t=document.createElement("canvas");t.getContext("2d").drawImage(i,0,0,i.videoWidth,i.videoHeight),e.imageUrl=t.toDataURL()},300)},!1)}}this.addFile(e)}}onPaste(e){if(e.clipboardData&&e.clipboardData.files&&e.clipboardData.files.length&&/^image\//.test(e.clipboardData.files[0].type)){const t=new FileReader,n=e.clipboardData.files[0];t.readAsDataURL(n),t.onload=()=>{n.imageUrl=t.result,this.addFile(n)}}}addFile(e){const t=new g.a;t.data=e,t.progress=0;const n=new o.a;t.fakeId=this.fakeId++,n.file=t,this.documents.push(n)}removeFile(e){const t=this.documents.findIndex(t=>t.file?t.file.fakeId===e.fakeId:t.documentID===e.id);-1!==t&&this.documents[t].documentID&&this.documentsWillRemove.push(this.documents[t].documentID),this.documents.splice(t,1),this.editChat&&this.editChat.documents.splice(t,1)}saveDocuments(e,t){return t&&0!==t.length?Object(c.a)(t.map((t,n)=>{const i=new FormData;return i.append("file",t.file.data),this.unsubscribe.push({id:t.file.fakeId,sub:new a.a}),this.documentService.insertDocument(i,22,e,this.contactId,0,this.chat.discussionID).pipe(Object(r.a)(this.unsubscribe[n].sub),Object(d.a)(e=>{switch(e.type){case f.e.UploadProgress:t.file.progress=Math.round(100*e.loaded/e.total);break;case f.e.Response:return e.body[0]}}))})):Object(s.a)([])}getGalleryFiles(e){return e?e.filter(e=>v.b.isImage(e)).map(e=>this.getFile(e)):[]}getNoneGalleryFiles(e){return e?e.filter(e=>!v.b.isImage(e)).map(e=>this.getFile(e)):[]}removeProgressFile(e,t){this.removeFile(t);const n=this.unsubscribe.find(t=>t.id===e.file.fakeId);n&&n.sub.next()}getFile(e){return e.file?e.file:Object.assign({id:e.documentID,documentPath:e.documentPath,data:Object.assign({name:e.documentTitle},"video/mp4"===e.documentType?{videoUrl:C.a.apiBlobUrl+"/"+e.documentPath}:{imageUrl:`${C.a.apiBlobUrl}/1024px/${e.documentPath}`}),type:e.documentType,progress:100,fakeId:this.fakeId++},e)}clearTyping(){this.typing=!1,this.signalRService.transferMessage(this.channel,{type:u.a.typingIndicator,data:{fullName:this.user.firstName+" "+this.user.surname,typing:!1,id:this.contactId}})}addTypingIndicator(){this.signalRService.transferMessage(this.channel,{type:u.a.typingIndicator,data:{fullName:this.user.firstName+" "+this.user.surname,typing:!0,id:this.contactId}})}openAddTaskModal(){const e=this.modal.open(y.a);this.isAgenda?(e.componentInstance.delegates=this.delegates,e.componentInstance.staticSelector=!0,e.componentInstance.meetingEvent=!0):(e.componentInstance.contacts=3===this.chat.discussionCategoryID&&3===this.user.userGroupID?Object(I.a)(this.members.filter(e=>e.contactID!==this.contactId)):Object(I.a)(this.members),e.componentInstance.staticSelector=!0),e.componentInstance.fromChatPage=!0,e.componentInstance.referenceId=this.chat.discussionID,50===this.chat.discussionCategoryID&&(e.componentInstance.isGroupDiscussionTask=!0),3===this.chat.discussionCategoryID&&3===this.user.userGroupID&&(e.componentInstance.isGroupDiscussionTask=!0,e.componentInstance.startUpSupport=!0),e.result.then(e=>{if(e&&e.hasOwnProperty("disResponse")&&e.hasOwnProperty("task")){const t=e.task;e.disResponse.map(e=>(e.firstName=this.user.firstName,e.surname=this.user.surname,e.dateCreated=m().format(p.c),e.profilePhoto=this.profilePhoto,e.documents=[],10===e.discussionCategoryID&&(e.taskTitle=t.taskTitle,e.taskID=t.taskID,e.endDate=t.endDate),e)).forEach(e=>{10===e.discussionCategoryID&&this.createTaskDiscussion(e)})}})}createTaskDiscussion(e){this.onChatAdd.emit(e),this.signalRService.transferMessage(this.channel,{type:u.a.chatAdd,data:e});const t={date:m().format(p.c),body:this.commentText.substr(0,24)+"...",topic:"assignedTask",senderFullName:e.firstName+" "+e.surname,senderPhoto:e.profilePhoto,channel:this.channel,notificationId:e.taskID,notificationType:h.a.taskRequests,senderId:e.discussionCreatedByContactID,reference:e.taskID,receivers:this.members.map(e=>e.contactID).filter(t=>t!==e.discussionCreatedByContactID)};this.signalRService.transferMessage("dashboard",t)}addEmoji({emoji:e}){this.commentText+=e.native}sendEmail(e,t,n){const i=this.user.firstName+" "+this.user.surname,o=[];this.members.forEach(e=>{e.contactID!==this.contactId&&o.push(e.contactID)});const a=Object(b.n)(e+"|"+o[0]+"|"+n);let s="Message from "+i;this.subjectLine&&(s=this.subjectLine),this.distributionService.create({distributionTitle:"Message from "+i,distributionCategoryID:2,referenceID:0,distributionDate:null,userID:this.user.contactID,emailBody:t,subjectLine:s,senderEmail:a+"@message.avnon.co",senderName:i,replyTo:a+"@message.avnon.co",contacts:o}).subscribe(()=>{},()=>{})}onFileInputClick(e=""){this.acceptType=e;const t=setTimeout(()=>{this.fileInput&&this.fileInput.nativeElement.click(),clearTimeout(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.unsubscribe.map(e=>{e&&e.sub&&!e.sub.closed&&(e.sub.next(),e.sub.complete())}),this.typing&&this.clearTyping(),clearTimeout(this.typingTimeout)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](M.p),i["\u0275\u0275directiveInject"](P.a),i["\u0275\u0275directiveInject"](S.a),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](w.a),i["\u0275\u0275directiveInject"](D.b),i["\u0275\u0275directiveInject"](k.a),i["\u0275\u0275directiveInject"](_.a),i["\u0275\u0275directiveInject"](E.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-common-chat-add"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"]($,!0,i.ElementRef),i["\u0275\u0275viewQuery"](q,!0,i.ElementRef),i["\u0275\u0275viewQuery"](z,!0)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.messageInput=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.fileInput=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.groupMemberSelectorComponent=e.first)}},inputs:{chat:"chat",editChat:"editChat",repliedChat:"repliedChat",contactId:"contactId",channel:"channel",memberId:"memberId",members:"members",showTask:"showTask",showCalendar:"showCalendar",subjectLine:"subjectLine",isAgenda:"isAgenda",delegates:"delegates"},outputs:{onChatAdd:"onChatAdd",onChatEdit:"onChatEdit",instantPost:"instantPost"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:5,consts:[["class","progress-holder",4,"ngIf"],["class","w-100 app-image-layout",3,"images","files","editable","handleRemoveImage",4,"ngIf"],["class","chat-form position-relative",3,"ngClass",4,"ngIf"],["class","agenda-form d-flex flex-column",4,"ngIf"],["type","file","multiple","","onclick","this.value = null",1,"d-none",3,"accept","change"],["fileInput",""],[1,"progress-holder"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between"],[1,"w-100"],[1,"file-name"],["type","success","textType","white",3,"value","showValue"],["type","button",1,"btn","btn-link",3,"disabled","click"],[1,"w-100","app-image-layout",3,"images","files","editable","handleRemoveImage"],[1,"chat-form","position-relative",3,"ngClass"],["type","button",1,"btn","btn-sm","toggle-fullscreen",3,"click"],[3,"members","inputElement"],["groupMemberSelectorComponent",""],[1,"d-flex","flex-column"],["type","text","autosize","",1,"form-control","text-area-chat",3,"placeholder","ngModel","keydown","paste","ngModelChange"],["messageInput",""],[1,"d-flex","align-items-center","bottom-chat-action"],[1,"d-flex","align-items-center","mr-auto","icons"],[1,"cursor-pointer","mr-3",3,"click"],[1,"fas","fa-image"],[1,"fas","fa-paperclip"],["class","cursor-pointer",3,"ngbTooltip","click",4,"ngIf"],["class","cursor-pointer text-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","ml-2","send-message-btn",3,"click"],[1,"cursor-pointer",3,"ngbTooltip","click"],[1,"fas","fa-list-alt"],[1,"cursor-pointer","text-primary",3,"click"],[1,"agenda-form","d-flex","flex-column"],[1,"d-flex","align-items-center","main-input"],["type","text","placeholder","Type meeting note",1,"form-control",3,"ngModel","keydown","paste","ngModelChange"],[1,"icon","attach-file-icon",3,"click"],["src","assets/img/paperclip.svg","alt",""],[1,"d-flex","align-items-center","pt-1","pb-1","pl-3","pr-3"],["class","cancel-edit cursor-pointer text-primary ml-auto",3,"click",4,"ngIf"],[1,"cancel-edit","cursor-pointer","text-primary","ml-auto",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,H,2,1,"div",0),i["\u0275\u0275template"](1,Q,1,3,"app-image-layout",1),i["\u0275\u0275template"](2,J,19,17,"div",2),i["\u0275\u0275template"](3,Z,7,2,"div",3),i["\u0275\u0275elementStart"](4,"input",4,5),i["\u0275\u0275listener"]("change",function(e){return t.onFileSelect(e)}),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngIf",t.sendingRequest&&t.documents.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.documents&&t.documents.length>0&&!t.sendingRequest),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isAgenda),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isAgenda),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("accept",t.acceptType))},directives:[T.n,T.m,M.u,R.a,T.l,V,B.b,L.a,B.q,B.t,M.C],styles:[".chat-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px 0 0;background:#fff;box-sizing:border-box;border-radius:2px}.chat-form.full-screen[_ngcontent-%COMP%]{min-height:calc(100vh - 70px)}.chat-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;min-height:52px;padding:0 16px;font-size:15px;resize:none}.chat-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .chat-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.chat-form[_ngcontent-%COMP%]   .send-message-btn[_ngcontent-%COMP%]{background:#e5e6e7;color:#646464;border-radius:30px}.chat-form[_ngcontent-%COMP%]   .send-message-btn[_ngcontent-%COMP%]:hover{background:#646464;color:#e5e6e7}.chat-form[_ngcontent-%COMP%]   .bottom-chat-action[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 16px;background:#f9fafb;border-top:1px solid #dfdfdf}.chat-form[_ngcontent-%COMP%]   .bottom-chat-action[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#646464;font-size:17px}.chat-form[_ngcontent-%COMP%]   .bottom-chat-action[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{opacity:.8}.progress-holder[_ngcontent-%COMP%]{max-height:200px;overflow-x:hidden;overflow-y:auto;padding:12px}.list-group-item[_ngcontent-%COMP%], .progress-holder[_ngcontent-%COMP%] > .list-group-item[_ngcontent-%COMP%]{padding-right:0;padding-left:0}.agenda-form[_ngcontent-%COMP%]{margin:0;padding-bottom:2px}.agenda-form[_ngcontent-%COMP%]   .bottom-actions[_ngcontent-%COMP%]{height:30px}.agenda-form[_ngcontent-%COMP%]   .main-input[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf;position:relative}.agenda-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;height:30px;line-height:30px!important;padding:0 1rem;font-size:15px}.agenda-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .agenda-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.agenda-form[_ngcontent-%COMP%]   .add-task-icon[_ngcontent-%COMP%], .agenda-form[_ngcontent-%COMP%]   .attach-file-icon[_ngcontent-%COMP%]{width:24px;height:24px;background-size:100%;background-position:50%;margin-right:12px;cursor:pointer}.agenda-form[_ngcontent-%COMP%]   .add-task-icon[_ngcontent-%COMP%]:hover, .agenda-form[_ngcontent-%COMP%]   .attach-file-icon[_ngcontent-%COMP%]:hover{opacity:.6}.agenda-form[_ngcontent-%COMP%]   .send-message-btn[_ngcontent-%COMP%]{padding:0;background:none}.agenda-form[_ngcontent-%COMP%]   .send-message-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-position:50%;background-size:100%;width:30px;height:30px}.agenda-form[_ngcontent-%COMP%]   .send-message-btn[_ngcontent-%COMP%]:hover{background:none;opacity:.6}.app-image-layout[_ngcontent-%COMP%]{padding:7px}.text-area-chat[_ngcontent-%COMP%]{line-height:20px;height:20px}.toggle-fullscreen[_ngcontent-%COMP%]{position:absolute;right:16px;top:0;width:20px;text-align:center;z-index:1;height:20px;padding:0}.toggle-fullscreen[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}"]}),e})()}}]);