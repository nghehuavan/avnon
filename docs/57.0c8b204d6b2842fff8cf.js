(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{S1vP:function(t,e,n){"use strict";n.r(e),n.d(e,"TasksModule",function(){return it});var a=n("ofXK"),s=n("tyNb"),i=n("XNiG"),o=n("1G5W"),r=n("fXoL"),c=n("ev4g"),l=n("p+bo"),p=n("MNGV"),d=n("cp0P"),m=n("LRne"),h=n("8J6U"),u=n("AytR"),k=n("w6ya"),f=n("4CJs"),g=n("Ay/5"),I=n("VgRj"),D=n("3DXX"),y=n("HNxE"),S=n("9122"),b=n("eIep"),v=n("1kSV"),w=n("9nlD"),C=n("S2+F"),x=n("kmKP"),O=n("Hu2X"),E=n("1bi4"),M=n("5eHb"),j=n("SVtl"),T=n("f/iK"),P=n("euQB"),N=n("Jn3s"),_=n("3MU0"),B=n("0mlJ"),R=n("SdWN");function A(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"date"),r["\u0275\u0275pipe"](3,"dateObject"),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" Monthly Report - ",r["\u0275\u0275pipeBind2"](2,1,r["\u0275\u0275pipeBind1"](3,4,t.task.endDate),"MMMM yyyy")," ")}}function $(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",null==t.companyStage?null:t.companyStage.programTitle," Diagnostic ")}}function L(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",null==t.task?null:t.task.taskTitle," ")}}function V(t,e){if(1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,$,2,1,"ng-container",2),r["\u0275\u0275template"](2,L,2,1,"ng-container",2),r["\u0275\u0275elementContainerEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.isPreDiagnostic),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.isPreDiagnostic)}}function U(t,e){1&t&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1," Baseline Report "),r["\u0275\u0275elementContainerEnd"]())}function G(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"p",19),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"date"),r["\u0275\u0275pipe"](3,"dateObject"),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" Monthly Operational Report - ",r["\u0275\u0275pipeBind2"](2,1,r["\u0275\u0275pipeBind1"](3,4,t.task.endDate),"MMM yyyy")," ")}}function F(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"p",19),r["\u0275\u0275text"](1," Baseline Report "),r["\u0275\u0275elementEnd"]())}function q(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"p",19),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",null==t.task?null:t.task.taskTitle," ")}}function J(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",10),r["\u0275\u0275elementStart"](1,"div",11),r["\u0275\u0275elementStart"](2,"div",12),r["\u0275\u0275element"](3,"img",13),r["\u0275\u0275pipe"](4,"avatar"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",14),r["\u0275\u0275elementStart"](6,"div",15),r["\u0275\u0275elementStart"](7,"h3",16),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"span",17),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](11,G,4,6,"p",18),r["\u0275\u0275template"](12,F,2,0,"p",18),r["\u0275\u0275template"](13,q,2,1,"p",18),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("src",r["\u0275\u0275pipeBind1"](4,7,null==t.taskOwner?null:t.taskOwner.profilePhoto),r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",t.taskOwner.companyName," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",t.taskOwner.firstName," ",t.taskOwner.surname," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",31===(null==t.task?null:t.task.taskCategoryID)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",32===(null==t.task?null:t.task.taskCategoryID)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",38===(null==t.task?null:t.task.taskCategoryID))}}function X(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",20),r["\u0275\u0275elementStart"](1,"span",21),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().backToList()}),r["\u0275\u0275element"](2,"i",22),r["\u0275\u0275text"](3," Back to list "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function z(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",33),r["\u0275\u0275text"](1,"Completed"),r["\u0275\u0275elementEnd"]())}function H(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",34),r["\u0275\u0275text"](1,"Completed"),r["\u0275\u0275elementEnd"]())}function K(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",35),r["\u0275\u0275text"](1,"Underway"),r["\u0275\u0275elementEnd"]())}function W(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr",25),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](t);const n=e.$implicit;return r["\u0275\u0275nextContext"](2).fillSections(n)}),r["\u0275\u0275elementStart"](1,"td"),r["\u0275\u0275elementStart"](2,"div",26),r["\u0275\u0275elementStart"](3,"span",27),r["\u0275\u0275element"](4,"img",28),r["\u0275\u0275pipe"](5,"avatar"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"span",29),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"td"),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"td"),r["\u0275\u0275template"](11,z,2,0,"span",30),r["\u0275\u0275template"](12,H,2,0,"span",31),r["\u0275\u0275template"](13,K,2,0,"span",32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("src",r["\u0275\u0275pipeBind1"](5,7,t.profilePhoto),r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate2"]("",t.firstName," ",t.surname,""),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](null==t?null:t.companyName),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",3===t.taskStatusID),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",2===t.taskStatusID),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",1===t.taskStatusID)}}function Q(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"table",23),r["\u0275\u0275elementStart"](1,"thead"),r["\u0275\u0275elementStart"](2,"tr"),r["\u0275\u0275elementStart"](3,"th"),r["\u0275\u0275text"](4,"Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"th"),r["\u0275\u0275text"](6,"Company"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"th"),r["\u0275\u0275text"](8,"Status"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"tbody"),r["\u0275\u0275template"](10,W,14,9,"tr",24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngForOf",t.task.taskOwners)}}function Y(t,e){if(1&t){const t=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"app-task-sections-preview",36),r["\u0275\u0275listener"]("sectionDone",function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().markSectionDone(e)})("isPreDiagnostic",function(e){return r["\u0275\u0275restoreView"](t),r["\u0275\u0275nextContext"]().isPreDiagnostic=e}),r["\u0275\u0275elementEnd"]()}if(2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("taskOwner",t.taskOwner)("sections",t.sections)("task",t.task)("disabledActions",t.disabledActions)("sectionsCompleted",t.sectionsCompleted)("supporters",t.task.taskSupporters)("masterCompanyID",t.masterCompanyID)}}let Z=(()=>{class t{constructor(t,e,n,a,s,i,o,c,l,p,d,m,h){this.taskService=t,this.modal=e,this.notificationService=n,this.signalRService=a,this.router=s,this.location=i,this.userService=o,this.companyService=c,this.distributionService=l,this.toastrService=p,this.networkService=d,this.permissionService=m,this.portfolioService=h,this.sectionSelect=new r.EventEmitter,this.sections=[],this.sectionsCompleted=0,this.blobUrl=u.a.apiBlobUrl+"/256px/",this.supportTeam=[],this.tab=1,this.user=this.userService.user.getValue(),this.companyID=this.user.companyID,this.contactID=this.user.contactID}set Active(t){this.resetVariables(),this.getTask(t)}ngOnInit(){this.getCompanies()}getTask(t){t.taskOwners=[],t.taskSupporters=[],this.loading=!0,Object(d.a)(this.taskService.getTaskOwners(t.taskID,0,0,0,0,0),this.taskService.getTaskSupporters(t.taskID)).subscribe(e=>{t.taskOwners=Object(h.j)(e[0],"taskOwnerID"),t.taskSupporters=e[1],this.isAdmin=t.submittedBy===this.contactID||t.taskSupporters.some(t=>t.contactID===this.contactID),this.taskOwner=t.taskOwners.find(t=>t.contactID===this.contactID&&t.companyID===this.user.companyID),this.isAdmin&&(this.tab=0),this.task=t,this.taskOwner&&this.fillSections(this.taskOwner),this.checkAccess(),this.loading=!1})}checkAccess(){const t=this.task.taskOwners.some(t=>t.contactID===this.contactID),e=this.task.submittedBy===this.contactID,n=this.task.taskSupporters.some(t=>t.contactID===this.contactID);this.hasAccess=t||e||n,this.hasAccess||this.router.navigate(["/weekly-plan/tasks"])}fillSections(t){this.taskOwner=t,this.masterCompanyID=t.companyID,this.disabledActions=this.taskOwner.contactID!==this.contactID,this.tab=1,38===this.task.taskCategoryID&&this.getPortfolio(),31===this.task.taskCategoryID&&this.taskOwner.contactID===this.contactID&&this.task.referenceID&&this.getSupportTeam(this.task.referenceID),this.sectionLoading=!0,this.taskService.getTaskOwnerSection(this.taskOwner.taskOwnerID,0).subscribe(t=>{t=t.sort((t,e)=>t.taskSectionCategoryID-e.taskSectionCategoryID),this.sectionsCompleted=t.filter(t=>2===t.taskOwnerSectionStatusID).length;const e=[],n=Object(h.l)(t),a=n.findIndex(t=>1===t.taskSectionCategoryID);-1!==a&&e.push(n.splice(a,1)[0]);const s=n.findIndex(t=>19===t.taskSectionCategoryID);-1!==s&&e.push(n.splice(s,1)[0]);const i=n.findIndex(t=>2===t.taskSectionCategoryID);-1!==i&&e.push(n.splice(i,1)[0]);const o=n.findIndex(t=>3===t.taskSectionCategoryID);-1!==o&&e.push(n.splice(o,1)[0]);const r=n.findIndex(t=>5===t.taskSectionCategoryID);-1!==r&&e.push(n.splice(r,1)[0]);const c=n.findIndex(t=>16===t.taskSectionCategoryID);-1!==c&&e.push(n.splice(c,1)[0]);const l=n.findIndex(t=>26===t.taskSectionCategoryID);if(-1!==l&&e.push(n.splice(l,1)[0]),31===this.taskOwner.taskCategoryID){const t=n.findIndex(t=>10===t.taskSectionCategoryID);-1!==t&&e.push(n.splice(t,1)[0]);const a=n.findIndex(t=>11===t.taskSectionCategoryID);-1!==a&&e.push(n.splice(a,1)[0])}const p=n.findIndex(t=>22===t.taskSectionCategoryID);-1!==p&&e.push(n.splice(p,1)[0]);const d=n.findIndex(t=>20===t.taskSectionCategoryID);-1!==d&&e.push(n.splice(d,1)[0]);const m=n.findIndex(t=>12===t.taskSectionCategoryID);if(-1!==m){const t=n.splice(m,1)[0];n.push(t)}const u=n.findIndex(t=>23===t.taskSectionCategoryID);-1!==u&&n.push(n.splice(u,1)[0]);const k=n.findIndex(t=>24===t.taskSectionCategoryID);-1!==i&&n.push(n.splice(k,1)[0]),this.sections=[...e,...n],this.sectionLoading=!1})}resetVariables(){this.task=null,this.taskOwner=null,this.sections=[]}markSectionDone(t){const e=this.sections[t];e.taskOwnerSectionStatusID=2,this.taskService.updateTaskOwnerSection(e).subscribe(()=>{const e=this.sections.filter(t=>![23,24].includes(t.taskSectionCategoryID));this.sectionsCompleted=e.filter(t=>2===t.taskOwnerSectionStatusID).length,this.sectionsCompleted===e.length&&t===e.length-1&&(this.taskOwner.taskStatusID=3,this.submit())},()=>{e.taskOwnerSectionStatusID=null})}back(){this.location.back()}submit(){const t=Object(h.l)(this.taskOwner);this.loading=!0,t.taskStatusID=3,t.dateSentForSignOff=Object(h.a)(new Date),this.taskService.updateTaskOwner(t).subscribe(()=>{this.taskOwner.taskStatusID=3,this.companyStage&&this.companyStage.companyProgramStageStatusID===g.b.Underway&&(this.companyStage.companyProgramStageStatusID=g.b.Application_Completed_Ready_for_Review,this.portfolioService.updateStage(this.companyStage).subscribe()),38!==this.taskOwner.taskCategoryID&&(this.task.taskSupporters.forEach(t=>{this.noticeNotification(this.task.taskID,t.contactID)}),this.task.taskSupporters.length||this.noticeNotification(this.task.taskID,this.task.submittedBy)),this.productGoal&&this.productGoal.taskSupporters.forEach(t=>{this.projectPlanNotification(t)}),31===this.task.taskCategoryID&&this.monthlyVerificationTask(),this.loading=!1})}noticeNotification(t,e){if(this.contactID===e)return;const n=Object(h.a)(new Date),a=`${this.taskOwner.companyName} has submitted their ${31===this.task.taskCategoryID?"Monthly":"Baseline"} Report`,s={notificationCategoryID:k.a.baseline_report_task_owner,referenceID:t,contactID:e,description:a,createdContact:this.contactID},i=n+"|"+t,o={date:n,body:a.replace("|",""),topic:a.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:s.referenceID,notificationType:f.a.applicantRequest,senderId:s.createdContact,receivers:[s.contactID],uniqueId:i,discussionId:0};this.notificationService.noticeNotification(s).subscribe(()=>{this.signalRService.transferMessage("dashboard",o)})}getPortfolio(){this.portfolioLoading=!0,this.portfolioService.getCompanyRoadmapStages(this.taskOwner.companyID,0,0,0,this.taskOwner.referenceID,0).subscribe(t=>{this.companyStage=t.find(t=>t.contactID===this.taskOwner.contactID),this.portfolioLoading=!1})}projectPlanNotification(t){const e=Object(h.a)(new Date),n=this.taskOwner.companyName+" have submitted a project plan for review",a={notificationCategoryID:k.a.goal_status_update,referenceID:this.productGoal.taskID,contactID:t.contactID,description:n,createdContact:this.contactID},s=(new Date).toString()+"|"+this.productGoal.taskID,i={date:e,body:n.replace("|",""),topic:n.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:a.referenceID,notificationType:f.a.applicantRequest,senderId:a.createdContact,receivers:[a.contactID],uniqueId:s,discussionId:0};this.notificationService.noticeNotification(a).subscribe(()=>{this.signalRService.transferMessage("dashboard",i)});const o=I.a.fullDomain()+"/goal/"+a.referenceID,r=`\n\t\t\t<p>Hi ${t.firstName}</p>\n\t\t\t<p>${n.replace("|","")}</p>\n\t\t\t<br>\n\t\t\t<p><span class="btn btn-primary" style="margin: 0; padding: 0"><a href="${o}">See Details</a></span></p>\n\t\t\t<br>\n\t\t`,c={distributionTitle:"Goal Status Update",distributionCategoryID:null,referenceID:null,distributionDate:null,userID:this.contactID,emailBody:D.a.template(r),subjectLine:"Goal Status Update",senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[a.contactID]};this.distributionService.create(c).subscribe(()=>{},()=>{})}getCompanies(){this.companyService.getCompanyList("",0).subscribe(t=>{this.companyService.setCachedCompanies(t)})}getSupportTeam(t){this.supportLoading=!0,this.networkService.getNetwork(0,0,0,0,t,0,1).pipe(Object(b.a)(t=>t.length?this.networkService.getNetworkMember(t[0].networkID,2,0,this.taskOwner.companyID,0,0):Object(m.a)([])),Object(b.a)(t=>t.length?this.permissionService.getPermission(S.b.Startup_Supporter,t[0].networkMemberID,0):Object(m.a)([]))).subscribe(t=>{this.supportTeam=t,this.supportLoading=!1})}monthlyVerificationTask(){const t=new p.a,e=new Date;t.contactID=this.task.submittedBy,t.endDate=Object(h.a)(e),t.taskCategoryID=34,t.submittedBy=this.task.submittedBy,t.autoSignOff=!1,t.referenceID=this.companyID,t.companyID=this.companyID,t.parentTaskID=this.task.taskID,t.taskTitle=`${this.user.companyName} - ${Object(h.a)(t.endDate,"MMMM")} report review`,this.taskService.addTask(t).pipe(Object(b.a)(e=>{t.taskID=e.inOut_TaskID;const n=[];if(!this.supportTeam.length){const t=new y.a;t.contactID=this.task.submittedBy,this.supportTeam.push(t)}return this.supportTeam.forEach(a=>{const s=new l.a;s.contactID=a.contactID,s.taskID=e.inOut_TaskID,s.deadline=t.endDate,s.companyID=this.task.referenceID,n.push(this.taskService.addTaskOwner(s))}),Object(d.a)(n)})).subscribe(()=>{this.supportTeam.forEach(e=>{this.noticeSupportTeam(t,e.contactID)})})}noticeSupportTeam(t,e){const n=Object(h.a)(new Date(t.endDate),"MMMM"),a=Object(h.a)(new Date),s=`${this.user.companyName} - ${n} report ready for review.`,i={notificationCategoryID:k.a.monthly_report_task_owner,referenceID:t.taskID,contactID:e,description:s,createdContact:this.contactID},o=a+"|"+t.taskID,r={date:a,body:s.replace("|",""),topic:s.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:i.referenceID,notificationType:f.a.applicantRequest,senderId:i.createdContact,receivers:[i.contactID],uniqueId:o,discussionId:0};this.notificationService.noticeNotification(i).subscribe(()=>{this.signalRService.transferMessage("dashboard",r)})}backToList(){this.tab=0,this.taskOwner=null}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](v.p),r["\u0275\u0275directiveInject"](w.a),r["\u0275\u0275directiveInject"](C.a),r["\u0275\u0275directiveInject"](s.d),r["\u0275\u0275directiveInject"](a.j),r["\u0275\u0275directiveInject"](x.a),r["\u0275\u0275directiveInject"](O.a),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](M.b),r["\u0275\u0275directiveInject"](j.a),r["\u0275\u0275directiveInject"](T.a),r["\u0275\u0275directiveInject"](P.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-task-monthly-report"]],inputs:{Active:["activeTask","Active"]},outputs:{sectionSelect:"sectionSelect"},decls:12,vars:8,consts:[[1,"page-title"],[1,"display-inline"],[4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[1,"card","card-content","flex-grow-1",3,"avnonLoader"],[1,"card-body","d-flex","flex-column","pl-0","pr-0","pt-1","pb-0"],["class","filter-container info-section d-flex flex-column w-100 border-bottom",4,"ngIf"],["class","d-flex pl-3 pr-3 pb-2  pt-2 border-bottom",4,"ngIf"],["class","table support-task-list",4,"ngIf"],["class","flex-grow-1",3,"taskOwner","sections","task","disabledActions","sectionsCompleted","supporters","masterCompanyID","sectionDone","isPreDiagnostic",4,"ngIf"],[1,"filter-container","info-section","d-flex","flex-column","w-100","border-bottom"],[1,"d-flex","w-100","mb-2"],[1,"logo-section","rounded-border"],["alt","logo",1,"rounded-border",3,"src"],[1,"d-flex","flex-grow-1","flex-column","ml-2"],[1,"d-flex","w-100"],[1,"mr-2","d-flex","align-items-center","mt-0","p-0","mb-0"],[1,"meta"],["class","stage-name mb-0",4,"ngIf"],[1,"stage-name","mb-0"],[1,"d-flex","pl-3","pr-3","pb-2","pt-2","border-bottom"],[1,"cursor-pointer","text-primary",3,"click"],[1,"fas","fa-arrow-left"],[1,"table","support-task-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"d-flex","align-items-center"],[1,"avatar-30"],["alt","",1,"img-thumbnail","p-0",3,"src"],[1,"ml-1"],["class","tag tag-green tag-filled",4,"ngIf"],["class","tag tag-orange tag-filled",4,"ngIf"],["class","tag tag-blue tag-filled",4,"ngIf"],[1,"tag","tag-green","tag-filled"],[1,"tag","tag-orange","tag-filled"],[1,"tag","tag-blue","tag-filled"],[1,"flex-grow-1",3,"taskOwner","sections","task","disabledActions","sectionsCompleted","supporters","masterCompanyID","sectionDone","isPreDiagnostic"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h1",1),r["\u0275\u0275template"](2,A,4,6,"ng-container",2),r["\u0275\u0275template"](3,V,3,2,"ng-container",2),r["\u0275\u0275template"](4,U,2,0,"ng-container",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275template"](8,J,14,9,"div",6),r["\u0275\u0275template"](9,X,4,0,"div",7),r["\u0275\u0275template"](10,Q,11,1,"table",8),r["\u0275\u0275template"](11,Y,1,7,"app-task-sections-preview",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",31===(null==e.task?null:e.task.taskCategoryID)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",38===(null==e.task?null:e.task.taskCategoryID)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",32===(null==e.task?null:e.task.taskCategoryID)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("avnonLoader",e.loading||e.sectionLoading||e.portfolioLoading||e.supportLoading),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.taskOwner&&e.disabledActions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",1===e.tab&&e.disabledActions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0===e.tab),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.taskOwner&&e.sections.length&&1===e.tab))},directives:[a.n,N.a,a.m,_.a],pipes:[a.e,B.a,R.a],styles:[".card-content[_ngcontent-%COMP%]{box-shadow:none;position:relative;padding:0;border:none}.stage-name[_ngcontent-%COMP%]{font-size:23px!important}"]}),t})();function tt(t,e){if(1&t&&r["\u0275\u0275element"](0,"app-task-monthly-report",1),2&t){const t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("activeTask",t.activeTask)}}let et=(()=>{class t{constructor(t,e,n){this.router=t,this.activatedRoute=e,this.taskService=n,this.destroy$=new i.a}ngOnInit(){this.activatedRoute.params.pipe(Object(o.a)(this.destroy$)).subscribe(t=>{this.activeTask&&(this.activeTask=null),this.taskID=+t.taskID,this.getTask()})}getTask(){this.taskService.getTask(this.taskID,0,0,0,0,0,0,0,!1).pipe(Object(o.a)(this.destroy$)).subscribe(t=>{t[0]&&([4,31,32,38].includes(t[0].taskCategoryID)?this.activeTask=t[0]:this.router.navigate(["/weekly-plan"],{queryParams:{taskID:this.taskID}}))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](s.d),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](c.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-task-list"]],decls:1,vars:1,consts:[["class","full-height d-flex flex-column",3,"activeTask",4,"ngIf"],[1,"full-height","d-flex","flex-column",3,"activeTask"]],template:function(t,e){1&t&&r["\u0275\u0275template"](0,tt,1,1,"app-task-monthly-report",0),2&t&&r["\u0275\u0275property"]("ngIf",e.activeTask)},directives:[a.n,Z],styles:[".task-list-container[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{width:100%;background-color:#fff;margin-top:55px}.task-list-container[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after{content:none}.task-list-container[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{background-position:100%}.task-list-container[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{cursor:pointer}.task-list-container[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#007bff}.header-actions[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{background-image:none}"]}),t})();const nt=[{path:"",component:(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-tasks"]],decls:2,vars:0,consts:[[1,"tasks-container"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275element"](1,"router-outlet"),r["\u0275\u0275elementEnd"]())},directives:[s.i],styles:[""]}),t})(),children:[{path:":taskID",component:et}]}];let at=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[s.h.forChild(nt)],s.h]}),t})();var st=n("zemM");let it=(()=>{class t{}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.c,at,st.a]]}),t})()}}]);