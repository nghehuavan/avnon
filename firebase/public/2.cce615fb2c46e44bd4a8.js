(window.webpackJsonp=window.webpackJsonp||[]).push([[2,31],{"3DtY":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});const a={TRAINING_EVENT:1,INTERVIEW:2,ASSESSMENT:3,MEETING:4,LEARNERSHIP:5,PROJECT_MANAGEMENT:6,TRAVEL:7,CONSULTING:8,REPORT_WRITING:9,WORKPLACE:10,APPRENTICESHIPS:11},i={TRAINING_DELEGATE:1,PANEL_MEMBER:2,APPLICANT:3,MENTOR:4,MENTEE:5,GUEST_SPEAKER:6}},"6BoG":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("eUP4"),i=n("2Vo4"),r=n("lJxs"),o=n("uYqz"),s=n("fXoL"),l=n("tk/3");let c=(()=>{class e{constructor(e){this.http=e,this.BaseURI="https://api.incubatorportal.com/api",this.eventObject=new i.a(""),this.eventObject$=this.eventObject.asObservable(),this._event=new i.a(null)}get eventDetail(){return this._event.asObservable()}loadEventDetail(e){this._event.next(e)}updateEventValue(e){this.eventObject.next({event:e})}selectEvents(e){e=Object.assign({CompanyID:0,ContactID:0,CourseID:0,ReferenceID:0,EventID:0,StartDate:"2000-01-01",EndDate:"2000-01-01",EventCategoryID:0,ScheduledByID:0,EventSubCategoryID:0},e);const t=Object.keys(e).map(t=>`${t}=${e[t]}`).join("&");return this.http.get(`${this.BaseURI}/event/full?${t}`).pipe(Object(r.a)(e=>e.map(e=>new a.a(e))))}selectEvent(e,t){return this.http.get(this.BaseURI+"/event/profile?contactID="+e+"&eventID="+t)}selectEventDate(e,t){return this.http.get(this.BaseURI+"/event/date?eventID="+e+"&eventGroupID="+t)}getEvent(e,t,n,a,i,r,o,s){return this.http.get(this.BaseURI+"/event?CompanyID="+e+"&ContactID="+t+"&PublicEvent="+n+"&ReferenceID="+a+"&CourseID="+i+"&ProgramInstanceID="+r+"&CompanyLocationID="+o+"&ProgramID="+s)}findDelegate(e){return this.http.get(`${this.BaseURI}/event/delegate/all/${e}`).pipe(Object(r.a)(e=>e.map(e=>new o.a(e))))}insertEvent(e){return this.http.post(this.BaseURI+"/event",e).pipe(Object(r.a)(e=>e))}updateEvent(e){return this.http.put(this.BaseURI+"/Event",e).pipe(Object(r.a)(e=>e))}insertEventDate(e){return this.http.post(this.BaseURI+"/event/date",e).pipe(Object(r.a)(e=>e))}updateEventDate(e){return this.http.put(this.BaseURI+"/event/date",e)}insertEventDelegateBatch(e){return this.http.post(this.BaseURI+"/Event/delegate/batch",e).pipe(Object(r.a)(e=>e))}insertEventDelegate(e){return this.http.post(this.BaseURI+"/Event/delegate",e).pipe(Object(r.a)(e=>e))}updateEventDelegate(e){return this.http.put(this.BaseURI+"/Event/delegate",e).pipe(Object(r.a)(e=>e))}deleteEventDelegate(e){return this.http.delete(`${this.BaseURI}/Event/delegate/${e}`).pipe(Object(r.a)(e=>e))}getEventDelegate(e){return this.http.get(`${this.BaseURI}/event/delegate/all/${e}`).pipe(Object(r.a)(e=>e))}getEventDelegates(e,t,n,a,i,o,s=0,l=0,c=0,d="2000-01-01",m="2000-01-01",u=0,p=0,h=0){return this.http.get(this.BaseURI+"/event/delegate?EventDelegateID="+e+"&CourseID="+t+"&EventID="+n+"&ContactID="+a+"&EventCategoryID="+i+"&ParentEventID="+o+"&CompanyID="+s+"&ReferenceID="+l+"&EventSubCategoryID="+c+"&EndDate="+d+"&StartDate="+m+"&DivisionID="+h+"&DepartmentID="+p+"&ScheduledbyContactID="+u).pipe(Object(r.a)(e=>e))}getEventDelegatesByDate(e,t,n,a,i,o,s=0,l=0,c=0,d="2000-01-01",m="2000-01-01",u=0,p=0,h=0){return this.http.get(this.BaseURI+"/event/delegate/bydate?EventDelegateID="+e+"&CourseID="+t+"&EventID="+n+"&ContactID="+a+"&EventCategoryID="+i+"&ParentEventID="+o+"&CompanyID="+s+"&ReferenceID="+l+"&EventSubCategoryID="+c+"&EndDate="+d+"&StartDate="+m+"&DivisionID="+h+"&DepartmentID="+p+"&ScheduledbyContactID="+u).pipe(Object(r.a)(e=>e))}insertEventDateDelegate(e){return this.http.post(this.BaseURI+"/Event/date/delegate",e).pipe(Object(r.a)(e=>e))}deleteEvent(e){return this.http.delete(`${this.BaseURI}/Event/${e}`).pipe(Object(r.a)(e=>e))}fetchEvents(e){e=Object.assign({CompanyID:0,ContactID:0,CourseID:0,ReferenceID:0,EventID:0,StartDate:"2000-01-01",EndDate:"2000-01-01"},e);const t=Object.keys(e).map(t=>`${t}=${e[t]}`).join("&");return this.http.get(`${this.BaseURI}/event/full?${t}`)}getEventDates(e){return this.http.get(`${this.BaseURI}/Event/date?EventID=${e}&EventDateGroupID=0`)}getDateDelegates(e){return this.http.get(`${this.BaseURI}/Event/date/delegate?EventID=${e}`)}updateDateDelegate(e){return this.http.put(this.BaseURI+"/Event/date/delegate",e)}deleteEventDate(e){return this.http.delete(`${this.BaseURI}/Event/date/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](l.b))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"6d/g":function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n("7Ow8"),i=n("eIep"),r=n("cp0P"),o=n("8J6U"),s=n("W4rt"),l=n("fXoL"),c=n("1kSV"),d=n("XAmU"),m=n("1bi4"),u=n("kmKP"),p=n("5eHb"),h=n("ofXK"),g=n("Jn3s"),v=n("f3yp"),f=n("SdWN");function D(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h5",6),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate2"](" ",e.data.firstName," ",e.data.surname," - reviews ")}}function I(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h5",6),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate2"](" ",e.panelMember.firstName," ",e.panelMember.surname," - reviews ")}}function y(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",19),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"number"),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](2,1,e.owner.formReviewPercentage,"1.1-2"),"% ")}}function b(e,t){1&e&&l["\u0275\u0275element"](0,"app-spinner")}function C(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"p",20),l["\u0275\u0275text"](2," No feedback yet. "),l["\u0275\u0275elementStart"](3,"a",21),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const t=l["\u0275\u0275nextContext"]().index;return l["\u0275\u0275nextContext"](2).sendReminder(t)}),l["\u0275\u0275template"](4,b,1,0,"app-spinner",5),l["\u0275\u0275text"](5," Send a reminder "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]().$implicit,t=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275classProp"]("disabled",e.owner.sendingReminder||e.owner.contactID===t.contactID),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.owner.sendingReminder)}}function S(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",7),l["\u0275\u0275elementStart"](1,"div",12),l["\u0275\u0275elementStart"](2,"span",13),l["\u0275\u0275element"](3,"img",14),l["\u0275\u0275pipe"](4,"avatar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"span",15),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.index;return l["\u0275\u0275nextContext"](2).viewScore(n)}),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"span",16),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.index;return l["\u0275\u0275nextContext"](2).viewScore(n)}),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",17),l["\u0275\u0275template"](10,y,3,4,"span",18),l["\u0275\u0275template"](11,C,6,3,"ng-container",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("src",l["\u0275\u0275pipeBind1"](4,6,null==e.response?null:e.response.profilePhoto),l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"]("",null==e.response?null:e.response.firstname," ",null==e.response?null:e.response.surname,""),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](null==e.response?null:e.response.companyName),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",3===e.owner.taskStatusID),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",3!==e.owner.taskStatusID)}}function M(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"div",7),l["\u0275\u0275elementStart"](2,"div",8),l["\u0275\u0275elementStart"](3,"span",9),l["\u0275\u0275text"](4," Applicant "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div",10),l["\u0275\u0275elementStart"](6,"span",9),l["\u0275\u0275text"](7," Score "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,S,12,8,"div",11),l["\u0275\u0275elementContainerEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngForOf",e.data.reviews)}}function x(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",7),l["\u0275\u0275elementStart"](1,"div",12),l["\u0275\u0275elementStart"](2,"span",13),l["\u0275\u0275element"](3,"img",14),l["\u0275\u0275pipe"](4,"avatar"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"span",15),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.index;return l["\u0275\u0275nextContext"](2).viewScore(n)}),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"span",16),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.index;return l["\u0275\u0275nextContext"](2).viewScore(n)}),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",17),l["\u0275\u0275elementStart"](10,"span",19),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("src",l["\u0275\u0275pipeBind1"](4,5,e.presenterProfilePhoto),l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"]("",null==e?null:e.presenterFirstname," ",e.presenterSurname,""),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](null==e?null:e.presenterCompany),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](12,7,e.totalScore/e.maxScore*100,"1.1-2"),"% ")}}function E(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"div",7),l["\u0275\u0275elementStart"](2,"div",8),l["\u0275\u0275elementStart"](3,"span",9),l["\u0275\u0275text"](4," Presenter "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div",10),l["\u0275\u0275elementStart"](6,"span",9),l["\u0275\u0275text"](7," Score "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,x,13,10,"div",11),l["\u0275\u0275elementContainerEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("ngForOf",e.answers)}}let w=(()=>{class e{constructor(e,t,n,a,i,r){this.activeModal=e,this.discussionService=t,this.distributionService=n,this.modal=a,this.userService=i,this.toastrService=r,this.answers=[],this.contactID=this.userService.user.getValue().contactID}ngOnInit(){}viewScore(e){const t=this.modal.open(a.a,{size:"lg",backdrop:"static",scrollable:!0});if(this.panelMember)t.componentInstance.panelMemberAnswer=this.answers[e];else{t.componentInstance.limited=!1;const n=this.data.reviews[e],a=n.task;a.taskOwners=[n.owner],t.componentInstance.opportunityResponse=n.response,t.componentInstance.reviews=[a]}}sendReminder(e){const t=this.contactID,n=this.data.reviews[e].owner,a=this.modal.open(s.a);a.componentInstance.title=`Reminder for ${n.firstName} ${n.surname}`,a.result.then(a=>{if(a&&a.hasOwnProperty("commentText")){const i={contactId:n.contactID,loggedInContactId:t};n.sendingReminder=!0,this.discussionService.getDiscussionByContact(i).subscribe(n=>{n&&n.discussionID?this.createDiscussion(n.discussionID,t,e,a):this.createChat(t,e,a)},()=>{n.sendingReminder=!0})}})}createChat(e,t,n){const a=this.data.reviews[t].owner;let o=0;this.discussionService.insertDiscussion({discussionTopic:"DM",discussionCategoryID:1,isDirectMessage:!0,discussionCreatedByContactID:e,discussionBody:"DM"}).pipe(Object(i.a)(t=>{o=t.discussionID;const n={discussionID:t.discussionID,contactID:e,isAdmin:!0},i={discussionID:t.discussionID,contactID:a.contactID,isAdmin:!0};return Object(r.a)(this.discussionService.addMember(n),this.discussionService.addMember(i))})).subscribe(()=>{this.createDiscussion(o,e,t,n)},()=>{a.sendingReminder=!1})}createDiscussion(e,t,n,a){const i=this.data.reviews[n],r=i.task,o=i.owner;this.discussionService.insertDiscussion({discussionTopic:"Task Query Request on - "+r.taskTitle,discussionCategoryID:26,isDirectMessage:!0,discussionCreatedByContactID:t,discussionBody:a.commentText,parentDiscussionID:e,referenceID:r.taskID}).subscribe(()=>{this.toastrService.success("Reminder send successfully!"),a.isSentMail&&this.sendEmail(e,"chat"+e,o.contactID,a.commentText),o.sendingReminder=!1},()=>{o.sendingReminder=!1})}sendEmail(e,t,n,a){const i=localStorage.getItem("firstName")+" "+localStorage.getItem("surname"),r=[n],s=Object(o.n)(e+"|"+r[0]+"|"+t),l={distributionTitle:"Chat with"+i,distributionCategoryID:2,referenceID:0,distributionDate:null,userID:this.contactID,emailBody:a,subjectLine:"Chat with"+i,senderEmail:localStorage.getItem("emailAddress"),senderName:i,replyTo:s+"@message.avnon.co",contacts:r};this.distributionService.create(l).subscribe(()=>{},()=>{})}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](c.a),l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](c.p),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](p.b))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-reviewer-summary-reviews-dialog"]],decls:9,vars:5,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column",3,"avnonLoader"],[4,"ngIf"],[1,"modal-title"],[1,"row","table-row","table-users"],[1,"col-sm-7","d-flex","align-items-center"],[1,"filter","d-flex","align-items-center"],[1,"col-sm-5","d-flex","align-items-center","justify-content-end","cursor-pointer"],["class","row table-row table-users",4,"ngFor","ngForOf"],[1,"col-sm-7","title-avatar"],[1,"float-left"],["alt","",1,"img-fluid","avatar-rounded","avatar-60",3,"src"],[1,"table-title","s-block",2,"cursor","pointer",3,"click"],[1,"s-block",2,"cursor","pointer",3,"click"],[1,"col-sm-5","last-right","text-right","d-flex","flex-column","align-items-end"],["class","meta",4,"ngIf"],[1,"meta"],[1,"text-dark","m-0"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275template"](1,D,2,2,"h5",1),l["\u0275\u0275template"](2,I,2,2,"h5",1),l["\u0275\u0275elementStart"](3,"button",2),l["\u0275\u0275listener"]("click",function(){return t.dismiss()}),l["\u0275\u0275elementStart"](4,"span",3),l["\u0275\u0275text"](5,"\xd7"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",4),l["\u0275\u0275template"](7,M,9,1,"ng-container",5),l["\u0275\u0275template"](8,E,9,1,"ng-container",5),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.panelMember),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.panelMember),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("avnonLoader",t.loading),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.data&&!t.panelMember),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.panelMember))},directives:[h.n,g.a,h.m,v.a],pipes:[f.a,h.f],styles:[".avatar-60[_ngcontent-%COMP%]{height:60px;object-fit:cover}a[_ngcontent-%COMP%]:disabled{opacity:.8;pointer-events:none}"]}),e})()},Ps3d:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n("fXoL"),i=n("4CJs"),r=n("8J6U"),o=n("w6ya"),s=n("1kSV"),l=n("ev4g"),c=n("9nlD"),d=n("S2+F"),m=n("kmKP"),u=n("ofXK"),p=n("/6gR"),h=n("V9Fx"),g=n("0mlJ");function v(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",7),a["\u0275\u0275elementStart"](1,"h1"),a["\u0275\u0275text"](2,"Form successfully submitted!"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"p",8),a["\u0275\u0275text"](4,"Thanks for taking the time to provide your feedback, your input has been successfully recorded."),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"button",9),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).showMyReview()}),a["\u0275\u0275text"](6,"Show my review"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function f(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275elementStart"](1,"app-form-playback",10),a["\u0275\u0275listener"]("saved",function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](2).onFeedbackSaved()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formCategoryID",e.formCategoryID)("answerReferenceID",e.taskOwner.taskOwnerID)("formID",e.task.formID)("isOnWindow",!0)("isEdit",e.editToggle)("removePadding",!0)("formFieldAnswerCategoryID",e.formFieldAnswerCategoryID)("referenceID",0)("taskOwnerID",e.taskOwner.taskOwnerID)}}function D(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",15),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](e),a["\u0275\u0275nextContext"](3).editToggle=!0}),a["\u0275\u0275text"](1,"Edit my answers"),a["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275elementStart"](1,"p",11),a["\u0275\u0275element"](2,"i",12),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"date"),a["\u0275\u0275pipe"](5,"dateObject"),a["\u0275\u0275template"](6,D,2,0,"span",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"app-form-review-feedback",14),a["\u0275\u0275elementContainerEnd"]()),2&e){const e=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" You posted your feedback on ",a["\u0275\u0275pipeBind2"](4,7,a["\u0275\u0275pipeBind1"](5,10,e.taskOwner.dateSentForSignOff),"dd MMM yyyy"),". "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",22!==e.task.taskCategoryID),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formFieldAnswerCategoryID",1)("contactID",e.taskOwner.contactID)("formID",e.task.formID)("taskOwner",e.taskOwner)("answerReferenceID",e.taskOwner.taskOwnerID)}}function y(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275template"](1,v,7,0,"div",6),a["\u0275\u0275template"](2,f,2,9,"ng-container",5),a["\u0275\u0275template"](3,I,8,12,"ng-container",5),a["\u0275\u0275elementContainerEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.feedbackSaved),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(3!==e.taskOwner.taskStatusID||e.editToggle)&&!e.feedbackSaved),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",3===e.taskOwner.taskStatusID&&!e.editToggle&&!e.feedbackSaved)}}let b=(()=>{class e{constructor(e,t,n,i,r){this.activeModal=e,this.taskService=t,this.notificationService=n,this.signalRService=i,this.userService=r,this.statusUpdate=new a.EventEmitter,this.presenters=[],this.formCategoryID=8,this.formFieldAnswerCategoryID=1,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID}ngOnInit(){this.taskOwner=this.task.taskOwners.find(e=>e.contactID===this.contactID)}onFeedbackSaved(){this.editToggle?this.notifyAdmin("updated"):(this.feedbackSaved=!0,this.taskOwner.dateSentForSignOff=Object(r.a)(new Date),this.taskOwner.taskStatusID=3,this.notifyAdmin("submitted")),this.editToggle=!1}showMyReview(){this.taskOwner.dateSentForSignOff=Object(r.a)(new Date),this.taskOwner.taskStatusID=3,this.feedbackSaved=!1}notifyAdmin(e){if(this.statusUpdate.emit(this.taskOwner),this.event.scheduledbyID!==this.contactID){const t=this.user.firstName,n=this.user.surname,a=Object(r.a)(new Date),s=this.presenters.find(e=>e.eventDelegateID===this.task.referenceID),l=`${t} ${n} has ${e} a review of ${s.firstName} ${s.surname}(${s.companyName})`,c={notificationCategoryID:o.a.event_invite_event_deligate,referenceID:this.event.eventID,contactID:this.event.scheduledbyID,description:l,createdContact:this.contactID},d=a+"|"+this.event.eventID,m={date:a,body:l,topic:l,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:c.referenceID,notificationType:i.a.eventRequest,senderId:c.createdContact,receivers:[c.contactID],uniqueId:d,discussionId:0};this.notificationService.noticeNotification(c).subscribe(()=>{this.signalRService.transferMessage("dashboard",m)})}}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-feedback-dialog"]],outputs:{statusUpdate:"statusUpdate"},decls:8,vars:2,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column"],[4,"ngIf"],["class","success-form",4,"ngIf"],[1,"success-form"],[1,"lead"],[1,"btn","btn-primary","btn-sm","mt-2",3,"click"],[3,"formCategoryID","answerReferenceID","formID","isOnWindow","isEdit","removePadding","formFieldAnswerCategoryID","referenceID","taskOwnerID","saved"],[1,"submitted-text"],[1,"fas","fa-info-circle"],["class","edit-answers text-primary",3,"click",4,"ngIf"],[3,"formFieldAnswerCategoryID","contactID","formID","taskOwner","answerReferenceID"],[1,"edit-answers","text-primary",3,"click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"h5",1),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"button",2),a["\u0275\u0275listener"]("click",function(){return t.dismiss()}),a["\u0275\u0275elementStart"](4,"span",3),a["\u0275\u0275text"](5,"\xd7"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275template"](7,y,4,3,"ng-container",5),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",t.task.taskTitle," "),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.taskOwner))},directives:[u.n,p.a,h.a],pipes:[u.e,g.a],styles:["app-form-playback .form-page{margin:0}  app-form-playback h1{display:none}  app-form-playback .container.body{margin-left:0}  app-form-playback .form-block{padding:0}  app-form-review-feedback .score-review{top:0!important}  .task-profile app-task-chat{flex:1;display:flex;flex-direction:column;overflow:hidden}  .task-profile .container-chats{max-height:100%!important;min-height:100%!important}.progress-info[_ngcontent-%COMP%]   ngb-progressbar[_ngcontent-%COMP%]{min-width:150px;margin-left:20px}"]}),e})()},Q4ZP:function(e,t,n){"use strict";n.d(t,"a",function(){return be});var a=n("AytR"),i=n("eUP4"),r=n("HNxE"),o=n("yxFF"),s=n("XNiG"),l=n("LRne"),c=n("VRyK"),d=n("cp0P"),m=n("sCZr"),u=n("mOT8"),p=n("3DtY"),h=n("Kj3r"),g=n("/uUt"),v=n("lJxs"),f=n("eIep"),D=n("JIr8"),I=n("pLZG"),y=n("ofXK"),b=n("w6ya"),C=n("4CJs"),S=n("8J6U"),M=n("dmN6"),x=n("fXoL"),E=n("tyNb"),w=n("1kSV"),T=n("6BoG"),k=n("rlYM"),O=n("WhH8"),P=n("hpld"),A=n("Hu2X"),R=n("9nlD"),j=n("S2+F"),F=n("5eHb"),N=n("kmKP"),V=n("XAmU"),L=n("xDUJ"),U=n("Jn3s"),B=n("3Pt+"),_=n("5eqV"),$=n("7itd"),G=n("SdWN");const q=["f"],K=["instance"],H=function(e){return{active:e}};function Y(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",25),x["\u0275\u0275elementStart"](1,"div",26),x["\u0275\u0275elementStart"](2,"a",15),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onSwitchCategory(1)}),x["\u0275\u0275text"](3,"Workshop"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](4,"a",16),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onSwitchCategory(2)}),x["\u0275\u0275text"](5,"Interview / Pitch"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngClass",x["\u0275\u0275pureFunction1"](2,H,1===e.eventCategory)),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngClass",x["\u0275\u0275pureFunction1"](4,H,2===e.eventCategory))}}function X(e,t){if(1&e&&x["\u0275\u0275element"](0,"ngb-highlight",32),2&e){const e=t.term;x["\u0275\u0275property"]("result",t.result.courseTitle)("term",e)}}function J(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div",33),x["\u0275\u0275text"](1," Please select a course from the list "),x["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",33),x["\u0275\u0275text"](1," Do you want to add this to the list? "),x["\u0275\u0275elementStart"](2,"a",34),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"](2).onAddNewCourse()}),x["\u0275\u0275text"](3,"Yes"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}}function W(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",27),x["\u0275\u0275template"](1,X,1,2,"ng-template",null,28,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementStart"](3,"input",29,30),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().courseModel=t})("ngModelChange",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onChangeCourse()}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](5,J,2,0,"div",31),x["\u0275\u0275template"](6,z,4,0,"div",31),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](2),t=x["\u0275\u0275reference"](4),n=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngModel",n.courseModel)("ngbTypeahead",n.courseSearch)("resultTemplate",e)("inputFormatter",n.courseFormatter),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",t.value&&!(null!=n.courseModel&&n.courseModel.courseID)&&4092==n.user.companyID),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",n.addNewCourse&&4092!==n.user.companyID)}}function Q(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",9),x["\u0275\u0275elementStart"](1,"textarea",35),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().event.eventProfile=t}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngModel",e.event.eventProfile)}}function Z(e,t){if(1&e&&x["\u0275\u0275element"](0,"ngb-highlight",32),2&e){const e=t.term;x["\u0275\u0275property"]("result",t.result.companyName)("term",e)}}function ee(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",39),x["\u0275\u0275text"](1," Do you want to add this to the list? "),x["\u0275\u0275elementStart"](2,"a",34),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"](2).onAddTrainingProvider()}),x["\u0275\u0275text"](3,"Yes"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}}function te(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",9),x["\u0275\u0275template"](1,Z,1,2,"ng-template",null,36,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementStart"](3,"input",37),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().trainingProviderModel=t}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](4,ee,4,0,"div",38),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](2),t=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngModel",t.trainingProviderModel)("ngbTypeahead",t.trainingProvideSearch)("resultTemplate",e)("inputFormatter",t.companyFormatter),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.addNewTrainingProvider)}}function ne(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span",47),x["\u0275\u0275text"](1),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"]().result;x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](e.department)}}function ae(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div",44),x["\u0275\u0275element"](1,"img",45),x["\u0275\u0275pipe"](2,"avatar"),x["\u0275\u0275elementStart"](3,"div",46),x["\u0275\u0275element"](4,"ngb-highlight",32),x["\u0275\u0275elementStart"](5,"span",47),x["\u0275\u0275text"](6),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](7,ne,2,1,"span",48),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e){const e=t.result,n=t.term;x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("src",x["\u0275\u0275pipeBind1"](2,5,e.profilePhoto),x["\u0275\u0275sanitizeUrl"]),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("result",e.firstName+" "+e.surname)("term",n),x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate"](null==e?null:e.designation),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",e.department)}}function ie(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span",55),x["\u0275\u0275text"](1),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"]().$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate1"](" ",e.department," ")}}function re(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",51),x["\u0275\u0275element"](1,"img",52),x["\u0275\u0275elementStart"](2,"div",53),x["\u0275\u0275elementStart"](3,"span",54),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](5,"span",55),x["\u0275\u0275text"](6),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](7,ie,2,1,"span",56),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](8,"button",57),x["\u0275\u0275listener"]("click",function(){x["\u0275\u0275restoreView"](e);const n=t.index;return x["\u0275\u0275nextContext"](3).onRemoveTrainer(n)}),x["\u0275\u0275elementStart"](9,"span",58),x["\u0275\u0275text"](10,"Close"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=x["\u0275\u0275nextContext"](3);x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("src",e.profilePhoto?n.apiBlobUrl+"/256px/"+e.profilePhoto:"assets/img/person-10.jpg",x["\u0275\u0275sanitizeUrl"]),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate1"](" ",e.firstName+" "+e.surname,""),x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate1"](" ",e.designation," "),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",e.department)}}function oe(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div",49),x["\u0275\u0275template"](1,re,11,4,"div",50),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"](2);x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngForOf",e.trainerSelectedList)}}function se(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",40),x["\u0275\u0275template"](1,ae,8,7,"ng-template",null,41,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementStart"](3,"input",42),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().trainerModel=t})("ngModelChange",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onChangeTrainer()}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](4,oe,2,1,"div",43),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](2),t=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("placeholder","Trainers or guest speakers")("ngModel",t.trainerModel)("ngbTypeahead",t.trainerSearch)("resultTemplate",e)("inputFormatter",t.contactFormatter),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.trainerSelectedList&&t.trainerSelectedList.length>0)}}function le(e,t){if(1&e&&x["\u0275\u0275element"](0,"ngb-highlight",32),2&e){const e=t.result,n=t.term;x["\u0275\u0275property"]("result",e.firstName+" "+e.surname)("term",n)}}function ce(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",51),x["\u0275\u0275element"](1,"img",52),x["\u0275\u0275elementStart"](2,"div",53),x["\u0275\u0275elementStart"](3,"span",54),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](5,"span",55),x["\u0275\u0275text"](6),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](7,"button",57),x["\u0275\u0275listener"]("click",function(){x["\u0275\u0275restoreView"](e);const n=t.index;return x["\u0275\u0275nextContext"](3).onRemovePanelMember(n)}),x["\u0275\u0275elementStart"](8,"span",58),x["\u0275\u0275text"](9,"Close"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=x["\u0275\u0275nextContext"](3);x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("src",e.profilePhoto?n.apiBlobUrl+"/256px/"+e.profilePhoto:"assets/img/person-10.jpg",x["\u0275\u0275sanitizeUrl"]),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate"](e.firstName+" "+e.surname),x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate"](e.designation)}}function de(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"div",49),x["\u0275\u0275template"](1,ce,10,3,"div",50),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"](2);x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngForOf",e.panelMembersSelectedList)}}function me(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",9),x["\u0275\u0275template"](1,le,1,2,"ng-template",null,59,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementStart"](3,"input",60),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().panelMember=t})("ngModelChange",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onChangePanelMember()}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](4,de,2,1,"div",43),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](2),t=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("placeholder","Select Panel Members")("ngModel",t.panelMember)("ngbTypeahead",t.trainerSearch)("resultTemplate",e)("inputFormatter",t.contactFormatter),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.panelMembersSelectedList&&t.panelMembersSelectedList.length>0)}}function ue(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"option",63),x["\u0275\u0275text"](1),x["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;x["\u0275\u0275property"]("ngValue",e.formID),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate"](e.formName)}}function pe(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",61),x["\u0275\u0275elementStart"](1,"select",62),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().panelMemberFormID=t}),x["\u0275\u0275elementStart"](2,"option",63),x["\u0275\u0275text"](3,"Select Form"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](4,ue,2,2,"option",64),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngModel",e.panelMemberFormID),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngValue",null),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngForOf",e.forms)}}function he(e,t){if(1&e&&x["\u0275\u0275element"](0,"ngb-highlight",32),2&e){const e=t.term;x["\u0275\u0275property"]("result",t.result.venueName)("term",e)}}function ge(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",39),x["\u0275\u0275text"](1," Do you want to add this to the list? "),x["\u0275\u0275elementStart"](2,"a",34),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"](2).onAddNewVenue()}),x["\u0275\u0275text"](3,"Yes"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}}function ve(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",9),x["\u0275\u0275template"](1,he,1,2,"ng-template",null,65,x["\u0275\u0275templateRefExtractor"]),x["\u0275\u0275elementStart"](3,"input",66),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().venueID=t}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](4,"input",67,68),x["\u0275\u0275listener"]("onAddressChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().handleAddressChange(t)})("change",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onAddressChange(t.target.value)})("keyup",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onVenueKeyup(t.target.value)})("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().venueModel=t}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](7,ge,4,0,"div",38),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](2),t=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngModel",t.venueID),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngModel",t.venueModel)("ngbTypeahead",t.venueSearch)("resultTemplate",e)("inputFormatter",t.venueFormatter),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngIf",t.addNewVenue)}}function fe(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",27),x["\u0275\u0275elementStart"](1,"textarea",69),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().event.eventInstructions=t}),x["\u0275\u0275text"](2,"\t\t\t"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngModel",e.event.eventInstructions)}}function De(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementContainerStart"](0),x["\u0275\u0275elementStart"](1,"input",80,81),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().$implicit.endDateModel=t})("ngModelChange",function(){x["\u0275\u0275restoreView"](e);const t=x["\u0275\u0275nextContext"]().index;return x["\u0275\u0275nextContext"]().onChangeEndDate(t)})("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275reference"](2).toggle()}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](3,"div",82),x["\u0275\u0275elementStart"](4,"span",83),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275reference"](2).toggle()}),x["\u0275\u0275element"](5,"span",75),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index;x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("error",t.existRange),x["\u0275\u0275propertyInterpolate1"]("name","endDateModel-",n,""),x["\u0275\u0275property"]("minDate",t.startDateModel)("ngModel",t.endDateModel)}}function Ie(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",70),x["\u0275\u0275elementStart"](1,"input",71,72),x["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.startDateModel=e})("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275reference"](2).toggle()})("ngModelChange",function(){x["\u0275\u0275restoreView"](e);const n=t.index;return x["\u0275\u0275nextContext"]().onChangeStartDate(n)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](3,"div",73),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275reference"](2).toggle()}),x["\u0275\u0275elementStart"](4,"span",74),x["\u0275\u0275element"](5,"span",75),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](6,De,6,5,"ng-container",76),x["\u0275\u0275elementStart"](7,"ngb-timepicker",77),x["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.startTimeModel=e})("ngModelChange",function(){x["\u0275\u0275restoreView"](e);const n=t.index;return x["\u0275\u0275nextContext"]().onChangeTime(n)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](8,"span",78),x["\u0275\u0275text"](9,"-"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](10,"ngb-timepicker",77),x["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.endTimeModel=e})("ngModelChange",function(){x["\u0275\u0275restoreView"](e);const n=t.index;return x["\u0275\u0275nextContext"]().onChangeTime(n)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](11,"i",79),x["\u0275\u0275listener"]("click",function(){x["\u0275\u0275restoreView"](e);const n=t.index;return x["\u0275\u0275nextContext"]().removeRange(n)}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("error",e.existRange),x["\u0275\u0275propertyInterpolate1"]("name","startDateModel-",n,""),x["\u0275\u0275property"]("ngModel",e.startDateModel),x["\u0275\u0275advance"](5),x["\u0275\u0275property"]("ngIf",!a.applicant&&9!==(null==a.event?null:a.event.eventSubCategoryID)),x["\u0275\u0275advance"](1),x["\u0275\u0275propertyInterpolate1"]("name","startTimeModel-",n,""),x["\u0275\u0275property"]("ngModel",e.startTimeModel),x["\u0275\u0275advance"](3),x["\u0275\u0275propertyInterpolate1"]("name","endTimeModel-",n,""),x["\u0275\u0275property"]("ngModel",e.endTimeModel),x["\u0275\u0275advance"](1),x["\u0275\u0275classProp"]("disabled",0===n)}}function ye(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",84),x["\u0275\u0275elementStart"](1,"span",34),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().addRange()}),x["\u0275\u0275text"](2,"Add Range"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](3,"span",47),x["\u0275\u0275text"](4),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275advance"](4),x["\u0275\u0275textInterpolate1"]("",e.getTotalDays," day(s)")}}let be=(()=>{class e{constructor(e,t,n,d,p,y,b,C,S,x,E,w,T,k,O,P){this.router=e,this.calendar=t,this.eventService=d,this.modalService=p,this.venueService=y,this.contactService=b,this.courseService=C,this.companyService=S,this.activeModal=x,this.notificationService=E,this.signalRService=w,this.toastrService=T,this.userService=k,this.discussionService=O,this.formService=P,this.hideToggles=!0,this.apiBlobUrl=a.a.apiBlobUrl,this.validForm=!1,this.isProcessing=!1,this.validTime=!0,this.eventCategory=1,this.event=new i.a,this.startDateModel={year:null,month:null,day:null},this.endDateModel={year:null,month:null,day:null},this.startTimeModel={hour:13,minute:30},this.endTimeModel={hour:13,minute:30},this.venues=[],this.addNewVenue=!1,this.venueModel=new o.a,this.focus$=new s.a,this.click$=new s.a,this.courseModel=new m.a,this.addNewCourse=!1,this.newCourseTitle="",this.courseList=[],this.trainingProviderModel=new u.a,this.addNewTrainingProvider=!1,this.addNewCompanyName="",this.trainerModel=new r.a,this.trainerSelectedList=[],this.attendeeModel=new r.a,this.attendeeSelectedList=[],this.panelMembersSelectedList=[],this.panelMember=new r.a,this.applicants=[],this.ranges=[],this.panelForm=new M.a,this.forms=[],this.panelMemberFormID=null,this.venueID=null,this.contactFormatter=e=>e.firstName?e.firstName+" "+e.surname+" - "+(e.designation||""):"",this.venueFormatter=e=>e.venueName,this.courseFormatter=e=>e.courseTitle,this.companyFormatter=e=>e.companyName,this.courseSearch=e=>e.pipe(Object(h.a)(300),Object(g.a)(),Object(v.a)(e=>{let t=[];return this.addNewCourse=!1,this.newCourseTitle="",t=""===e?this.courseList:this.courseList.filter(t=>new RegExp(e,"mi").test(t.courseTitle)),0===t.length&&(this.addNewCourse=!0,this.newCourseTitle=e),t.slice(0,10)})),this.trainingProvideSearch=e=>e.pipe(Object(h.a)(300),Object(g.a)(),Object(f.a)(e=>{const t=this.companyService.getCompanyList(e,0).pipe(Object(D.a)(()=>Object(l.a)([])));return t.subscribe(t=>{this.addNewTrainingProvider=!1,t&&0===t.length&&(this.addNewTrainingProvider=!0,this.addNewCompanyName=e)}),t})),this.trainerSearch=e=>e.pipe(Object(h.a)(300),Object(g.a)(),Object(I.a)(e=>e.length>=1),Object(f.a)(e=>this.contactService.getContactList(e,0,this.companyID).pipe(Object(D.a)(()=>Object(l.a)([]))))),this.venueSearch=e=>{const t=e.pipe(Object(h.a)(300),Object(g.a)()),n=this.click$.pipe(Object(I.a)(()=>!this.instance.isPopupOpen())),a=this.focus$;return Object(c.a)(t,a,n).pipe(Object(v.a)(e=>{let t=[];return this.hideGoogleMapResults(),this.addNewVenue=!1,t=""===e?this.venues:this.venues.filter(t=>t.venueName&&t.venueName.toLowerCase().indexOf(e.toLowerCase())>-1),0===(null==t?void 0:t.length)&&this.showGoogleMapResults(),t.slice(0,10)}))},this.attendeeSearch=e=>e.pipe(Object(h.a)(300),Object(g.a)(),Object(I.a)(e=>e.length>=1),Object(f.a)(e=>this.contactService.getContactList(e,0,this.companyID).pipe(Object(D.a)(()=>Object(l.a)([]))))),n.spinners=!1,this.user=this.userService.user.getValue()}get getTotalDays(){let e=0;return this.ranges.forEach(t=>{if(t.startDateModel&&t.endDateModel){const n=this.getMultiDateEvent(this.event,t);e+=n.length}}),e}ngOnInit(){var e,t,n,a,i;if(this.contactID=this.user.contactID,this.companyID=this.user.companyID||0,this.masterCompanyID&&!this.companyID&&(this.companyID=this.masterCompanyID),this.getForms(),this.event.eventFormatID=1,this.minDate=this.calendar.getToday(),this.startDateModel=this.calendar.getToday(),this.endDateModel=this.calendar.getToday(),this.startTimeModel={hour:10,minute:0},this.endTimeModel={hour:16,minute:0},(null===(e=this.plannerStartTime)||void 0===e?void 0:e.hour)&&(null===(t=this.plannerEndTime)||void 0===t?void 0:t.hour)&&(this.startTimeModel=this.plannerStartTime,this.endTimeModel=this.plannerEndTime),(null===(n=this.plannerStartDate)||void 0===n?void 0:n.year)&&(null===(a=this.plannerEndDate)||void 0===a?void 0:a.year)&&(this.startDateModel=this.plannerStartDate,this.endDateModel=this.plannerEndDate),this.event.startDate){const e=new Date(this.event.startDate);this.startDateModel.year=e.getFullYear(),this.startDateModel.month=e.getMonth()+1,this.startTimeModel.hour=e.getHours(),this.startTimeModel.minute=e.getMinutes(),this.startDateModel.day=e.getDate()}if(this.event.endDate){const e=new Date(this.event.endDate);this.endDateModel.year=e.getFullYear(),this.endDateModel.month=e.getMonth()+1,this.endDateModel.day=e.getDate(),this.endTimeModel.hour=e.getHours(),this.endTimeModel.minute=e.getMinutes()}this.getCourses(),this.getVenues(),this.event&&this.event.eventID&&(this.eventCategory=this.event.eventCategoryID,this.event.eventInstructions&&(this.event.eventFormatID=2),this.event.venueName&&(this.event.eventFormatID=1),this.courseModel.courseTitle=this.event.eventTitle,this.courseModel.courseID=this.event.courseID,this.courseModel.courseClassificationID=this.event.courseClassificationID,this.trainingProviderModel.companyName=this.event.provider,this.trainingProviderModel.companyID=this.event.providerID,this.trainingProviderModel.companyLogo=this.event.providerLogo,this.venueModel.venueCity=this.event.venueCity,this.venueModel.venueID=this.event.venueID,this.venueModel.googleURL=this.event.googleURL,this.venueModel.latitude=this.event.latitude,this.venueModel.longitude=this.event.longitude,this.venueModel.venueAddress=this.event.venueAddress,this.venueModel.venueName=this.event.venueName,this.venueID=this.venueModel.venueName||this.venueModel.venueAddress,this.venueModel.venueName&&!this.venueModel.venueID&&(this.venueModel.venueID=0,this.venueID=0),this.trainerSelectedList=this.getDelegatesByTypeID(p.b.GUEST_SPEAKER),this.attendeeSelectedList=this.getDelegatesByTypeID(p.b.TRAINING_DELEGATE),this.event.dates.sort((e,t)=>e.eventDateGroupID-t.eventDateGroupID).forEach(e=>{if(!this.ranges.filter(t=>e.eventDateGroupID===t.eventDateGroupID).length){const t=this.event.dates.filter(t=>t.eventDateGroupID===e.eventDateGroupID),n=new Date(t[0].startTime),a=new Date(t[t.length-1].endTime);this.ranges.push({eventDateGroupID:t[0].eventDateGroupID,startTimeModel:{hour:n.getHours(),minute:n.getMinutes()},endTimeModel:{hour:a.getHours(),minute:a.getMinutes()},startDateModel:{year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()},endDateModel:{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate()}})}}),2===this.event.eventCategoryID&&this.formService.getFormTask(this.event.eventID,3).subscribe(e=>{e[0]&&(this.panelForm=e[0],this.panelMemberFormID=this.panelForm.formID)})),this.event.eventID||this.ranges.push({startDateModel:this.startDateModel,endDateModel:this.endDateModel,endTimeModel:this.endTimeModel,startTimeModel:this.startTimeModel,eventDateGroupID:1}),null===(i=this.f)||void 0===i||i.valueChanges.subscribe(()=>{this.validForm=this.f.valid,this.isProcessing=!1,this.validForm&&this.validateForm()}),this.validateStageDate()}validateForm(){var e;this.validForm=!0,4092!==this.user.companyID||(null===(e=this.courseModel)||void 0===e?void 0:e.courseID)||1!==this.eventCategory||(this.validForm=!1)}getCourses(){this.courseLoading=!0,this.courseService.getCourses(this.companyID).subscribe(e=>{this.courseList=e,this.courseLoading=!1},()=>{this.courseLoading=!1})}getVenues(){this.venueService.selectVenue(this.companyID,0).subscribe(e=>{this.venues=e},()=>{})}getDelegatesByTypeID(e){let t=[];return this.event.delegates&&(t=this.event.delegates.filter(t=>t.eventDelegateTypeID===e)),t}onChangeCourse(){this.courseModel.courseIntroduction&&(this.event.eventPitch=this.courseModel.courseIntroduction)}onAddNewCourse(){if(1===this.eventCategory){const e=new m.a;e.courseClassificationID=1,e.courseDuration=0,e.courseCost=0,e.courseCategoryID=0,e.companyID=this.companyID,e.courseTitle=this.newCourseTitle,this.courseService.saveCourse(e).subscribe(t=>{if(t){const n=t;n.courseID=t.inOut_CourseID,this.courseModel={courseID:n.courseID,courseTitle:e.courseTitle,courseClassificationID:e.courseClassificationID},this.addNewCourse=!1,this.courseList.push(n)}})}}onAddTrainingProvider(){const e=new u.a;e.companyName=this.addNewCompanyName,this.companyService.addCompany(e).subscribe(t=>{e.companyID=t.inOut_CompanyID,this.trainingProviderModel=e,this.addNewTrainingProvider=!1,this.addNewCompanyName=""})}onChangeTrainer(){this.trainerModel&&this.trainerModel.contactID>0&&(this.trainerSelectedList.unshift(this.trainerModel),this.trainerModel=new r.a,this.validateForm())}onRemoveTrainer(e){this.trainerSelectedList.splice(e,1),this.validateForm()}onAddNewVenue(){this.venueModel.companyID=this.companyID,this.venueService.insertVenue(this.venueModel).subscribe(e=>{const t=e;this.venueModel.venueID=e.inOut_VenueID,t.venueID=e.inOut_VenueID,this.addNewVenue=!1,this.venues.push(t)},()=>{})}onAddressChange(e){"string"==typeof this.venueModel&&(this.venueModel=new o.a,this.venueModel.venueName=e,this.venueModel.venueID=0,this.venueID=e,this.validateForm()),this.venueID=e}onVenueKeyup(e){this.venueID=e}handleAddressChange(e){var t,n;this.venueModel=new o.a,this.venueModel.venueID=0,this.venueModel.venueName=null==e?void 0:e.formatted_address,this.venueModel.latitude=null===(t=null==e?void 0:e.geometry)||void 0===t?void 0:t.location.lat(),this.venueModel.longitude=null===(n=null==e?void 0:e.geometry)||void 0===n?void 0:n.location.lng(),this.venueModel.googleURL=null==e?void 0:e.url,this.addNewVenue=!0}showGoogleMapResults(){var e,t;const n=document.getElementsByClassName("pac-container");for(let a=0,i=n.length;a<i;a++)null===(e=n[a].classList)||void 0===e||e.remove("d-none"),null===(t=n[a].classList)||void 0===t||t.add("map-selector")}hideGoogleMapResults(){var e,t;const n=document.getElementsByClassName("pac-container");for(let a=0,i=n.length;a<i;a++)null===(e=n[a].classList)||void 0===e||e.add("d-none"),null===(t=n[a].classList)||void 0===t||t.remove("map-selector")}onChangeTime(e){this.validTime=!(this.ranges[e].startTimeModel.hour>this.ranges[e].endTimeModel.hour)&&(this.ranges[e].startTimeModel.hour!==this.ranges[e].endTimeModel.hour||this.ranges[e].startTimeModel.minute<=this.ranges[e].endTimeModel.minute)}onChangeStartDate(e){this.ranges[e].endDateModel=this.ranges[e].startDateModel,this.checkExistingRange(e)}onSubmit(e){const t=this.prepareDateBeforeSubmitEvent();if(this.isProcessing=!0,this.event.eventID){t.eventID=this.event.eventID,this.event.startDate=this.event.startTime,this.event.endDate=this.event.endTime,this.event.providerID=this.trainingProviderModel.companyID,this.event.provider=this.trainingProviderModel.companyName;const e=Object.assign(Object.assign({},t),this.event);this.event=e,2===this.event.eventCategoryID&&(this.panelMemberFormID&&this.panelForm.formID&&this.panelForm.formID!==this.panelMemberFormID&&(this.panelForm.formID=this.panelMemberFormID,this.updateFormTask()),this.panelMemberFormID&&!this.panelForm.formID&&this.createFormTask()),this.eventService.updateEvent(this.event).subscribe(e=>{this.updateEventDate(this.event)},()=>{this.isProcessing=!1})}else this.eventService.insertEvent(t).subscribe(e=>{this.event.eventID=e.inOut_EventID,2===this.eventCategory&&this.panelMemberFormID&&this.createFormTask(),this.insertEventDelegate(),this.ranges.forEach(e=>{const t=this.getMultiDateEvent(this.event,e),n="yyyy-MM-dd HH:mm:ss",a="en-UK";t&&t.length>0&&t.forEach(t=>{const i=t,r=new Date(e.endDateModel.year,e.endDateModel.month-1,e.endDateModel.day,e.endTimeModel.hour,e.endTimeModel.minute),o=Object(y.y)(i,n,a),s=Object(y.y)(r,n,a);this.eventService.insertEventDate({eventID:this.event.eventID,startTime:o,endTime:s,eventDateGroupID:e.eventDateGroupID}).subscribe()})}),this.programInstance&&this.programInstanceStage||this.preventPostNavigation?this.activeModal.close(this.event):(this.router.navigate(["/event",this.event.eventID]),this.modalService.dismissAll())},()=>{this.isProcessing=!1})}updateEventDate(e){const t=[];e.dates.forEach(e=>{t.push(this.eventService.deleteEventDate(e.eventDateID))}),this.ranges.forEach((n,a)=>{const i=this.getMultiDateEvent(this.event,n),r="yyyy-MM-dd HH:mm:ss",o="en-UK";i&&i.length>0&&i.forEach(i=>{const s=i,l=new Date(n.endDateModel.year,n.endDateModel.month-1,n.endDateModel.day,n.endTimeModel.hour,n.endTimeModel.minute),c=Object(y.y)(s,r,o),d=Object(y.y)(l,r,o);t.push(this.eventService.insertEventDate({eventID:e.eventID,startTime:c,endTime:d,eventDateGroupID:a+1}))})});let n=[],a=[];1===this.eventCategory&&(n=this.event.delegates.filter(e=>6===e.eventDelegateTypeID&&!this.trainerSelectedList.filter(t=>t.contactID===e.contactID).length),a=this.trainerSelectedList.filter(e=>!this.event.delegates.filter(t=>e.contactID===t.contactID).length)),n.forEach(e=>{t.push(this.eventService.deleteEventDelegate(e.eventDelegateID))}),a.forEach(e=>{const n=this.prepareDataInSertEventDelegate(p.b.GUEST_SPEAKER);n.contactID=e.contactID,n.eventDelegateStatusID=2,t.push(this.eventService.insertEventDelegate(n))}),this.event.delegates=this.event.delegates.filter(e=>!n.filter(t=>t.contactID===e.contactID).length),Object(d.a)(t).subscribe(e=>{this.event.dates=[],e.forEach(e=>{if(e.hasOwnProperty("inOut_EventDateID")&&(e.eventDateID=e.inOut_EventDateID,this.event.dates.push(e)),e.hasOwnProperty("inOut_EventDelegateID")){e.eventDelegateID=e.inOut_EventDelegateID;const t=this.trainerSelectedList.find(t=>t.contactID===e.contactID);e.firstName=t.firstName,e.surname=t.surname,e.profilePhoto=t.profilePhoto,this.event.delegates.push(e)}});const t=this.ranges[0].startDateModel,n=this.ranges[0].startTimeModel,a=this.ranges[this.ranges.length-1].endDateModel,i=this.ranges[0].endTimeModel,r=new Date(t.year,t.month-1,t.day,n.hour,n.minute),o=new Date(a.year,a.month-1,a.day,i.hour,i.minute);this.event.startTime=Object(S.a)(r),this.event.endTime=Object(S.a)(o),this.event.startDate=Object(S.a)(r),this.event.endDate=Object(S.a)(o),this.trainingProviderModel&&(this.event.providerLogo=this.trainingProviderModel.companyLogo),this.activeModal.close(this.event)},()=>{this.isProcessing=!1})}getMultiDateEvent(e,t){const n=t.startDateModel,a=t.startTimeModel,i=t.endDateModel,r=t.endTimeModel,o=[];let s=new Date(n.year,n.month-1,n.day,a.hour,a.minute),l=new Date(i.year,i.month-1,i.day,r.hour,r.minute);const c=l.setDate(l.getDate()+1);for(l=new Date(c);s.getDate()<l.getDate()||s.getMonth()<l.getMonth()||s.getFullYear()<l.getFullYear();){o.push(s);const e=new Date(s),t=e.setDate(e.getDate()+1);s=new Date(t)}return o}insertEventDelegate(e){const t=this.prepareDataInSertEventDelegate(p.b.MENTOR),n=this.prepareDataInSertEventDelegate(p.b.MENTEE),a=[];this.trainerSelectedList&&(t.eventDelegateTypeID=p.b.GUEST_SPEAKER,this.trainerSelectedList.forEach(e=>{t.contactID=e.contactID,t.companyID=e.companyID,a.push(t),t.eventDelegateStatusID=2,this.insertDataEventDelegate(t)})),this.attendeeSelectedList&&(n.eventDelegateTypeID=p.b.TRAINING_DELEGATE,this.attendeeSelectedList.forEach(t=>{n.contactID=t.contactID,n.companyID=t.companyID,this.insertDataEventDelegate(n,e)})),this.applicants&&(t.eventDelegateTypeID=p.b.APPLICANT,this.applicants.forEach(e=>{t.contactID=e.contactID,t.companyID=e.companyID,t.companyProgramInstanceStageID=e.companyProgramInstanceStageID,this.insertDataEventDelegate(t)})),this.panelMembersSelectedList&&(n.eventDelegateTypeID=p.b.PANEL_MEMBER,this.panelMembersSelectedList.forEach(e=>{n.contactID=e.contactID,t.companyID=e.companyID,this.insertDataEventDelegate(n)})),this.generateChat(a)}insertDataEventDelegate(e,t){const n=e;t&&t.length&&t.forEach(t=>{const a=t[0];a&&a.contactID===e.contactID&&(n.scormRegistrationID=a.scormRegistrationID,n.eventDelegateStatusID=2)}),this.eventService.insertEventDelegate(n).subscribe(t=>{e.contactID=t.contactID,e.eventDelegateTypeID=t.eventDelegateTypeID,this.notifyDelegate(e.eventID,e.contactID,e.addedByID,e.eventDelegateTypeID)})}prepareDateBeforeSubmitEvent(){const e="yyyy-MM-dd HH:mm:ss",t="en-UK",n=this.ranges[0].startDateModel,a=this.ranges[0].startTimeModel,i=this.ranges[0].endDateModel,r=this.ranges[0].endTimeModel,o=new Date(n.year,n.month-1,n.day,a.hour,a.minute);this.event.startTime=Object(y.y)(o,e,t);const s=new Date(i.year,i.month-1,i.day,r.hour,r.minute);return this.event.endTime=Object(y.y)(s,e,t),this.event.companyID=this.companyID,this.event.scheduledbyID=this.user.contactID,this.event.venueID=0,this.event.venueID=+this.venueModel.venueID,this.event.venueName=this.venueModel.venueName,this.event.googleURL=this.venueModel.googleURL,this.event.latitude=+this.venueModel.latitude,this.event.longitude=+this.venueModel.longitude,this.courseModel.courseClassificationID?(this.event.courseID=this.courseModel.courseID,this.event.eventTitle=this.courseModel.courseTitle):(this.event.courseID=0,this.event.eventTitle=this.courseModel.courseTitle?this.courseModel.courseTitle:this.courseModel+""),this.programInstanceStage&&this.programInstanceStage.programInstanceStageID&&(this.event.eventSubCategoryID=8,this.event.referenceID=this.programInstanceStage.programInstanceStageID,2===this.eventCategory&&(this.event.eventTitle=this.programInstanceStage.programStageTitle+" (Interview)"),this.trainingProviderModel.companyID=this.companyID),2===this.eventCategory&&!this.event.eventID&&this.applicant&&(this.event.eventSubCategoryID=9,this.event.eventTitle=`${this.applicant.programStageTitle} (${this.applicant.companyName})`,this.event.referenceID=this.applicant.programInstanceStageID),{eventID:this.event.eventID,companyID:this.event.companyID||0,companyLocationID:0,eventTitle:this.event.eventTitle,eventCategoryID:this.eventCategory,eventSubCategoryID:this.event.eventSubCategoryID||0,courseID:this.event.courseID,venueID:this.event.venueID,providerID:this.trainingProviderModel.companyID,scheduledbyID:this.event.scheduledbyID,trainerID:this.trainerModel.contactID,eventProfile:this.event.eventProfile,publicEvent:this.event.publicEvent,referenceID:this.event.referenceID||0,minimumScore:this.event.minimumScore,maxScore:this.event.maxScore,awardCredits:this.event.awardCredits,eventPitch:this.event.eventPitch,venueName:this.event.venueName,eventFormatID:this.event.eventFormatID,eventInstructions:this.event.eventInstructions,googleURL:this.event.googleURL,latitude:this.event.latitude,longitude:+this.event.longitude}}prepareDataInSertEventDelegate(e){return{eventID:this.event.eventID,contactID:null,addedByID:this.contactID,assessmentScore:0,contractNumber:"",eventDelegateTypeID:e,eventDelegateStatusID:1,setaID:0,endDate:this.event.endTime,startDate:this.event.startTime,projectedEndDate:"",companyID:0,companyProgramInstanceStageID:0}}onCancel(){this.activeModal.dismiss()}notifyDelegate(e,t,n,a){if(1===this.eventCategory&&6===a)return;const i=localStorage.getItem("firstName"),r=localStorage.getItem("surname"),o=new Date,s=Object(y.y)(o,"yyyy-MM-dd HH:mm:ss","en-UK"),l=`${i} ${r} invited you to "${this.event.eventTitle}" event`,c={notificationCategoryID:b.a.event_invite_event_deligate,referenceID:this.event.eventID,contactID:t,description:l,createdContact:n},d=s+"|"+this.event.eventID,m={date:s,body:l,topic:l,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:c.referenceID,notificationType:C.a.eventRequest,senderId:c.createdContact,receivers:[c.contactID],uniqueId:d,discussionId:0};this.notificationService.noticeNotification(c).subscribe(()=>{this.signalRService.transferMessage("dashboard",m)})}generateChat(e){let t;this.discussionService.insertDiscussion({discussionTopic:this.event.eventTitle+" group",discussionCategoryID:2,referenceID:this.event.eventID,isDirectMessage:!1,discussionCreatedByContactID:this.contactID,discussionBody:this.event.eventTitle+" group",parentDiscussionID:0}).pipe(Object(f.a)(n=>{t=n.discussionID;const a=[],i=[],r=new Date,o=Object(y.y)(r,"yyyy-MM-dd HH:mm:ss","en-UK");return i.push({discussionID:n.discussionID,contactID:this.contactID,isAdmin:!0,submittedByContactID:this.contactID,hasAccepted:!0,dateAccepted:o}),e.forEach(e=>{1!==this.eventCategory||6!==e.eventDelegateTypeID||i.filter(t=>t.contactID===e.contactID).length||i.push({discussionID:n.discussionID,contactID:e.contactID,isAdmin:!0,submittedByContactID:this.contactID,hasAccepted:!0,dateAccepted:o})}),i.forEach(e=>{a.push(this.discussionService.addMember(e))}),Object(d.a)(a)})).subscribe(()=>{})}onChangeEndDate(e){this.checkExistingRange(e)}validateStageDate(){}onChangeAttendee(){this.attendeeModel&&this.attendeeModel.contactID>0&&(this.attendeeSelectedList.unshift(this.attendeeModel),this.attendeeModel=new r.a,this.validateForm())}addRange(){const e={month:null,year:null,day:null};this.ranges.push({startDateModel:e,endDateModel:e,startTimeModel:{hour:10,minute:0},endTimeModel:{hour:16,minute:0},eventDateGroupID:this.ranges.length+1})}removeRange(e){this.ranges.splice(e,1)}onRemoveAttendee(e){this.attendeeSelectedList.splice(e,1),this.validateForm()}checkExistingRange(e){const t=this.ranges[e];let n=[];if(this.ranges.forEach(e=>{e.eventDateGroupID!==t.eventDateGroupID&&(n=[...n,...this.getMultiDateEvent(this.event,e)])}),t.startDateModel&&t.endDateModel){const e=this.getMultiDateEvent(this.event,t);t.existRange=e.some(e=>n.some(t=>{const n=Object(S.a)(t,"dd.MM.yyyy");return Object(S.a)(e,"dd.MM.yyyy")===n}))}this.existRange=this.ranges.some(e=>e.existRange)}onChangeEventFormat(e){this.event.eventFormatID=e}onSwitchCategory(e){this.eventCategory=e,this.event=new i.a,this.event.eventFormatID=1,this.courseModel=new m.a,this.addNewCourse=!1,this.newCourseTitle="",this.trainingProviderModel=new u.a,this.trainerModel=new r.a,this.trainerSelectedList=[],this.attendeeModel=new r.a,this.attendeeSelectedList=[],this.addNewVenue=!1,this.venueModel=new o.a}createFormTask(){this.panelForm.deadlineDays=0,this.panelForm.formCategoryID=3,this.panelForm.formID=this.panelMemberFormID,this.panelForm.referenceID=this.event.eventID,this.formService.insertFormTask(this.panelForm).subscribe()}updateFormTask(){this.formService.updateFormTask(this.panelForm).subscribe()}getForms(){this.formService.getForms(this.companyID,0,0).subscribe(e=>{this.forms=e})}onChangePanelMember(){this.panelMember&&this.panelMember.contactID&&(this.panelMembersSelectedList.unshift(this.panelMember),this.panelMember=new r.a)}onRemovePanelMember(e){this.panelMembersSelectedList.splice(e),this.validateForm()}}return e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275directiveInject"](E.c),x["\u0275\u0275directiveInject"](w.d),x["\u0275\u0275directiveInject"](w.A),x["\u0275\u0275directiveInject"](T.a),x["\u0275\u0275directiveInject"](w.p),x["\u0275\u0275directiveInject"](k.a),x["\u0275\u0275directiveInject"](O.a),x["\u0275\u0275directiveInject"](P.a),x["\u0275\u0275directiveInject"](A.a),x["\u0275\u0275directiveInject"](w.a),x["\u0275\u0275directiveInject"](R.a),x["\u0275\u0275directiveInject"](j.a),x["\u0275\u0275directiveInject"](F.b),x["\u0275\u0275directiveInject"](N.a),x["\u0275\u0275directiveInject"](V.a),x["\u0275\u0275directiveInject"](L.a))},e.\u0275cmp=x["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-workshop-add"]],viewQuery:function(e,t){if(1&e&&(x["\u0275\u0275staticViewQuery"](q,!0),x["\u0275\u0275staticViewQuery"](K,!0)),2&e){let e;x["\u0275\u0275queryRefresh"](e=x["\u0275\u0275loadQuery"]())&&(t.f=e.first),x["\u0275\u0275queryRefresh"](e=x["\u0275\u0275loadQuery"]())&&(t.instance=e.first)}},decls:37,vars:23,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],["class","form-group d-flex mb-3",4,"ngIf"],[3,"avnonLoader","ngSubmit"],["f","ngForm"],["class","form-group mb-2",4,"ngIf"],[1,"form-group","mb-3"],["placeholder","Brief description","rows","1","autosize","","name","eventPitch",1,"form-control","form-control-material",3,"ngModel","ngModelChange"],["class","form-group mb-3",4,"ngIf"],["class","form-group mb-3 trainer-group",4,"ngIf"],["class","input-group mb-3 input-group-icon",4,"ngIf"],[1,"w-100","tabs-action-row","type-course"],[1,"btn","btn-rounded","btn-rounded-32",3,"ngClass","click"],[1,"btn","btn-rounded","btn-rounded-32","ml-2",3,"ngClass","click"],["class","input-group mb-2 input-group-icon",4,"ngFor","ngForOf"],["class","d-flex w-100 justify-content-between align-items-center",4,"ngIf"],[1,"custom-control","custom-checkbox","mt-4"],["id","publicEvent","type","checkbox","name","publicEvent",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","publicEvent",1,"custom-control-label"],[1,"text-right"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],[1,"form-group","d-flex","mb-3"],[1,"w-100","m-0","tabs-action-row","type-course"],[1,"form-group","mb-2"],["courseResults",""],["id","typeahead-template","type","text","placeholder","Workshop title","name","courseModel","required","",1,"form-control","form-control-material",3,"ngModel","ngbTypeahead","resultTemplate","inputFormatter","ngModelChange"],["workshopTitleInput",""],["class","font-italic",4,"ngIf"],[3,"result","term"],[1,"font-italic"],[1,"cursor-pointer","text-primary",3,"click"],["placeholder","About","rows","1","autosize","","name","eventProfile",1,"form-control","form-control-material",3,"ngModel","ngModelChange"],["trainingProviderResults",""],["type","text","placeholder","Who is hosting the event","name","trainingProviderModel",1,"form-control","form-control-material",3,"ngModel","ngbTypeahead","resultTemplate","inputFormatter","ngModelChange"],["class","font-italic w-100 allow-auto-new",4,"ngIf"],[1,"font-italic","w-100","allow-auto-new"],[1,"form-group","mb-3","trainer-group"],["trainerResults",""],["type","text","name","trainerModel",1,"form-control","form-control-material",3,"placeholder","ngModel","ngbTypeahead","resultTemplate","inputFormatter","ngModelChange"],["class","member-selected ml-0",4,"ngIf"],[1,"d-flex","align-items-center"],[3,"src"],[1,"d-flex","flex-column","ml-2"],[1,"meta"],["class","meta",4,"ngIf"],[1,"member-selected","ml-0"],["class","member-item d-flex align-items-center",4,"ngFor","ngForOf"],[1,"member-item","d-flex","align-items-center"],[1,"img-fluid","avatar-rounded",3,"src"],[1,"member-info"],[1,"s-block","fullName"],[1,"s-block","sm-title"],["class","s-block sm-title",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"sr-only"],["panelMemberResult",""],["type","text","name","panelMember",1,"form-control","form-control-material",3,"placeholder","ngModel","ngbTypeahead","resultTemplate","inputFormatter","ngModelChange"],[1,"input-group","mb-3","input-group-icon"],["name","panelMemberForm","required","",1,"form-control","form-control-material",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["venueResults",""],["type","hidden","required","","name","venueID",3,"ngModel","ngModelChange"],["required","","autocomplete","off","ngx-google-places-autocomplete","","name","venueModel","placeholder","Add location",1,"form-control","form-control-material",3,"ngModel","ngbTypeahead","resultTemplate","inputFormatter","onAddressChange","change","keyup","ngModelChange"],["locationRef","ngx-places","venueInput",""],["placeholder","Add details for online meeting","rows","1","name","eventInstructions",1,"form-control","form-control-material",3,"ngModel","ngModelChange"],[1,"input-group","mb-2","input-group-icon"],["placeholder","yyyy-mm-dd","ngbDatepicker","","autocomplete","off","required","","container","body",1,"form-control","form-control-material",3,"name","ngModel","ngModelChange","click"],["startDatePicker","ngbDatepicker"],[1,"input-group-append","mr-2",3,"click"],[1,"input-group-text","bg-transparent","border-0"],[1,"calendar-icon","icon-sm"],[4,"ngIf"],["required","",3,"name","ngModel","ngModelChange"],[1,"pt-2","mx-2"],[1,"fas","fa-trash-alt","text-danger","ml-2","mt-2","cursor-pointer",3,"click"],["placeholder","yyyy-mm-dd","ngbDatepicker","","required","","container","body",1,"form-control","form-control-material",3,"minDate","name","ngModel","ngModelChange","click"],["endDatePicker","ngbDatepicker"],[1,"input-group-append","mr-2"],[1,"input-group-text","bg-transparent","border-0",3,"click"],[1,"d-flex","w-100","justify-content-between","align-items-center"]],template:function(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",0),x["\u0275\u0275elementStart"](1,"h5",1),x["\u0275\u0275text"](2),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](3,"button",2),x["\u0275\u0275listener"]("click",function(){return t.onCancel()}),x["\u0275\u0275elementStart"](4,"span",3),x["\u0275\u0275text"](5,"\xd7"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](6,"div",4),x["\u0275\u0275template"](7,Y,6,6,"div",5),x["\u0275\u0275elementStart"](8,"form",6,7),x["\u0275\u0275listener"]("ngSubmit",function(){x["\u0275\u0275restoreView"](e);const n=x["\u0275\u0275reference"](9);return t.onSubmit(n)}),x["\u0275\u0275template"](10,W,7,6,"div",8),x["\u0275\u0275elementStart"](11,"div"),x["\u0275\u0275elementStart"](12,"div",9),x["\u0275\u0275elementStart"](13,"textarea",10),x["\u0275\u0275listener"]("ngModelChange",function(e){return t.event.eventPitch=e}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](14,Q,2,1,"div",11),x["\u0275\u0275template"](15,te,5,5,"div",11),x["\u0275\u0275template"](16,se,5,6,"div",12),x["\u0275\u0275template"](17,me,5,6,"div",11),x["\u0275\u0275template"](18,pe,5,3,"div",13),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](19,"div",14),x["\u0275\u0275elementStart"](20,"a",15),x["\u0275\u0275listener"]("click",function(){return t.onChangeEventFormat(1)}),x["\u0275\u0275text"](21," In Person "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](22,"a",16),x["\u0275\u0275listener"]("click",function(){return t.onChangeEventFormat(2)}),x["\u0275\u0275text"](23," Online / Virtual "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](24,ve,8,6,"div",11),x["\u0275\u0275template"](25,fe,3,1,"div",8),x["\u0275\u0275template"](26,Ie,12,11,"div",17),x["\u0275\u0275template"](27,ye,5,1,"div",18),x["\u0275\u0275elementStart"](28,"div",19),x["\u0275\u0275elementStart"](29,"input",20),x["\u0275\u0275listener"]("ngModelChange",function(e){return t.event.publicEvent=e}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](30,"label",21),x["\u0275\u0275text"](31,"Public Event"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](32,"div",22),x["\u0275\u0275elementStart"](33,"button",23),x["\u0275\u0275listener"]("click",function(){return t.onCancel()}),x["\u0275\u0275text"](34," Cancel "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](35,"button",24),x["\u0275\u0275text"](36," Submit "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](9);x["\u0275\u0275advance"](2),x["\u0275\u0275textInterpolate1"](" ",t.event.eventID?"Edit Event":"Schedule Event"," "),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("avnonLoader",t.courseLoading),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.hideToggles&&!t.event.eventID),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("avnonLoader",t.isProcessing),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",1===t.eventCategory),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngModel",t.event.eventPitch),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.event.eventID&&2!==t.eventCategory),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",1===t.eventCategory),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",1===t.eventCategory),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",2===t.eventCategory&&!t.event.eventID),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",2===t.eventCategory),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngClass",x["\u0275\u0275pureFunction1"](19,H,1===t.event.eventFormatID)),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngClass",x["\u0275\u0275pureFunction1"](21,H,2===t.event.eventFormatID)),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",1===t.event.eventFormatID),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",2==t.event.eventFormatID),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngForOf",t.ranges),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.applicant&&9!==(null==t.event?null:t.event.eventSubCategoryID)),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngModel",t.event.publicEvent),x["\u0275\u0275advance"](6),x["\u0275\u0275property"]("disabled",!t.validForm||!t.validTime||t.isProcessing||t.existRange||e.invalid)}},directives:[U.a,y.n,B.E,B.r,B.s,B.b,_.a,B.q,B.t,y.l,y.m,B.a,w.E,B.A,w.n,B.B,B.v,B.D,$.GooglePlaceDirective,w.o,w.z],pipes:[G.a],styles:["ngb-typeahead-window.dropdown-menu{right:24px;max-height:200px;overflow:auto}.member-selected[_ngcontent-%COMP%]{max-height:94px;overflow:auto;margin-left:30px;width:100%}.member-item[_ngcontent-%COMP%]{position:relative;padding:5px 0;border-bottom:1px solid #f0f0f0}.member-item[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,95.3%,.5)}.member-selected[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}.member-info[_ngcontent-%COMP%]{margin-left:10px}.member-info[_ngcontent-%COMP%]   .fullName[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.member-info[_ngcontent-%COMP%]   .sm-title[_ngcontent-%COMP%]{font-size:11px}.member-item[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;right:10px;display:none}.member-item[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.member-item[_ngcontent-%COMP%]:hover   .btn-close[_ngcontent-%COMP%]{display:inline}.event-format[_ngcontent-%COMP%]   .tabs-action-row[_ngcontent-%COMP%]   .btn-rounded[_ngcontent-%COMP%]{border-color:#cdcdcd!important}.event-format[_ngcontent-%COMP%]   .tabs-action-row[_ngcontent-%COMP%]   .btn-rounded.active[_ngcontent-%COMP%], .event-format[_ngcontent-%COMP%]   .tabs-action-row[_ngcontent-%COMP%]   .btn-rounded[_ngcontent-%COMP%]:hover{border-color:#406fe4!important;color:#406fe4}  .pac-container.map-selector{z-index:999999!important}.type-course.tabs-action-row[_ngcontent-%COMP%]{padding-left:0!important}.type-course.tabs-action-row[_ngcontent-%COMP%]   .btn-rounded[_ngcontent-%COMP%]{border-color:#cdcdcd!important}.type-course.tabs-action-row[_ngcontent-%COMP%]   .btn-rounded.active[_ngcontent-%COMP%]{border-color:#406fe4!important}.input-group-icon[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:30px;padding-left:0}.form-control.form-control-material[_ngcontent-%COMP%]{border-left:none;border-right:none;border-top:none;box-shadow:none;border-radius:0;padding-left:0}textarea.form-control-material[_ngcontent-%COMP%]{height:auto;min-height:auto}.allow-auto-new[_ngcontent-%COMP%]{padding-left:30px}  ngb-timepicker .form-control{border-left:none;border-right:none;border-top:none;box-shadow:none;border-radius:0;outline:none}  ngb-timepicker .form-control:focus{box-shadow:none}.form-control[_ngcontent-%COMP%]:read-only{background:#fff}.disabled[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}  .trainer-group ngb-typeahead-window .dropdown-item{padding:10px}  .trainer-group ngb-typeahead-window img{width:32px;height:32px}"]}),e})()},S65P:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var a=n("8J6U"),i=n("TMgw"),r=n("frau"),o=n("fXoL"),s=n("uk6F"),l=n("kmKP"),c=n("1kSV"),d=n("rdQE"),m=n("6BoG"),u=n("Jn3s"),p=n("3Pt+"),h=n("ofXK");function g(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",31),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e.companyAccountID),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.accountName)}}function v(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275elementStart"](1,"label",28),o["\u0275\u0275text"](2,"Account"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"select",29),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().transaction.companyAccountID=t}),o["\u0275\u0275elementStart"](4,"option",30),o["\u0275\u0275text"](5,"Please Select"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,g,2,2,"option",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.transaction.companyAccountID),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.accounts)}}function f(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",31),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e.financialCategoryID),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.financialCategory)}}function D(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275elementStart"](1,"label",32),o["\u0275\u0275text"](2,"Relates to"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](3,"input",33),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.relatesTo)}}function I(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",37),o["\u0275\u0275elementStart"](1,"input",38),o["\u0275\u0275listener"]("change",function(){o["\u0275\u0275restoreView"](e);const n=t.index;return o["\u0275\u0275nextContext"](2).onDelegateSelect(n)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"label",39),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("id","delegate-",n,""),o["\u0275\u0275property"]("checked",a.selectedDelegates.includes(e.eventDelegateID)),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("for","delegate-",n,""),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," ")}}function y(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",34),o["\u0275\u0275elementStart"](1,"label",35),o["\u0275\u0275text"](2,"Assign To"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,I,4,5,"div",36),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.delegates)}}const b=function(){return{standalone:!0}};function C(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",40),o["\u0275\u0275elementStart"](1,"input",41),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().split=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"label",42),o["\u0275\u0275text"](3,"Split amount between delegates"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",e.split)("ngModelOptions",o["\u0275\u0275pureFunction0"](2,b))}}let S=(()=>{class e{constructor(e,t,n,a,r,o){this.companyFinancialService=e,this.userService=t,this.ngbActiveModal=n,this.companyAccountService=a,this.eventService=r,this.ngbModal=o,this.financialCategories=[],this.transaction=new i.a,this.editMode=!1,this.relatesTo="",this.delegates=[],this.selectedDelegates=[],this.accounts=[],this.isAssignToAll=void 0,this.user=t.user.getValue(),this.companyID=this.user.companyID||0}ngOnInit(){this.assignment&&(this.relatesTo=this.assignment.companyName,this.getAccount()),this.assignment||this.fillCategories(),this.fillAccounts(),this.transaction.transactionID&&(this.editMode=!0,this.fillTransaction(),this.transaction.eventID&&this.getDelegates(this.transaction.eventID))}fillTransaction(){const e=new Date(this.transaction.transactionDate);this.transactionDateModel={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}fillCategories(){this.categoriesLoading=!0,this.companyFinancialService.getCategories(this.companyID).subscribe(e=>{this.financialCategories=e,this.categoriesLoading=!1})}getAccount(){this.assignment&&this.assignment.companyAccountID&&this.companyAccountService.getCompanyAccount(0,this.assignment.companyAccountID,0,0,0).subscribe(e=>{e[0]&&(this.companyID=e[0].companyID,this.fillCategories())})}fillAccounts(){this.accountLoading=!0,this.companyAccountService.getCompanyAccount(this.companyID,0,0).subscribe(e=>{this.accounts=e,this.accountLoading=!1})}delegatesAssignmentChange(){console.log("delegatesAssignmentChange"),void 0===this.isAssignToAll&&(this.selectedDelegates=[]),!1===this.isAssignToAll&&(this.selectedDelegates=[]),!0===this.isAssignToAll&&this.delegates.forEach(e=>{this.selectedDelegates.push(e.eventDelegateID)})}assignDelegates(){const e=this.ngbModal.open(r.a,{size:"xl"});e.componentInstance.staticSelector=!0,e.componentInstance.contacts=Object(a.l)(this.delegates),e.result.then(e=>{e&&e.length>0&&e.forEach(e=>{this.selectedDelegates.push(e.eventDelegateID)})})}onSubmit(){this.loading=!0;const e=new Date(this.transactionDateModel.year,this.transactionDateModel.month-1,this.transactionDateModel.day,0,0);if(this.transaction.transactionDate=Object(a.a)(e),this.split){const e=Number(Math.round(parseFloat(this.transaction.transactionamount/(this.selectedDelegates?this.selectedDelegates.length:1)+"e4"))+"e-4");this.transaction.transactionamount=e}this.editMode?this.companyFinancialService.updateTransaction(this.transaction).subscribe(()=>{this.ngbActiveModal.close(this.transaction)},()=>{this.loading=!1}):(this.transaction.submittedByContactID=this.user.contactID,this.assignment&&(this.transaction.companyAccountID=this.assignment.companyAccountID,this.transaction.transactionCategoryID=2,this.transaction.referenceIDs=[this.referenceID]),this.delegates.length>0&&(this.transaction.transactionCategoryID=1,this.transaction.referenceIDs=this.selectedDelegates),this.companyFinancialService.createBatch(this.transaction).subscribe(()=>{this.ngbActiveModal.close({status:"ok"})}))}onDelegateSelect(e){const t=this.delegates[e],n=this.selectedDelegates.findIndex(e=>e===t.eventDelegateID);-1!==n?this.selectedDelegates.splice(n,1):this.selectedDelegates.push(t.eventDelegateID)}getDelegates(e){this.delegatesLoading=!0,this.eventService.getEventDelegate(e).subscribe(e=>{this.delegates=e.filter(e=>2===e.eventDelegateStatusID&&e.eventDelegateID===this.transaction.referenceID),this.selectedDelegates=[this.transaction.referenceID],this.delegatesLoading=!1,this.isAssignToAll=this.selectedDelegates.length===e.length})}dismiss(){this.ngbActiveModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](s.a),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](c.p))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-transaction-add"]],decls:41,vars:12,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[3,"ngSubmit"],["f","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","date"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","date","required","","ngbDatepicker","","id","date","container","body","autocomplete","off",1,"form-control",3,"ngModel","click","ngModelChange"],["d","ngbDatepicker"],[1,"input-group-append"],[1,"input-group-text","bg-transparent",3,"click"],[1,"calendar-icon","icon-sm"],["for","financialCategoryID"],["id","financialCategoryID","name","financialCategoryID","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"ngValue",4,"ngFor","ngForOf"],["for","transactionDescription"],["name","transactionDescription","id","transactionDescription",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group delegates-list",4,"ngIf"],["for","transactionamount"],["type","number","name","transactionamount","id","transactionamount","required","",1,"form-control","w-35",3,"ngModel","ngModelChange"],["class","form-group form-check",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],["for","companyAccountID"],["name","companyAccountID","id","companyAccountID","required","",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"ngValue"],["for","transactionRef"],["type","text","name","transactionRef","id","transactionRef","readonly","",1,"form-control",3,"ngModel"],[1,"form-group","delegates-list"],["for","delegate"],["class","form-group form-check mb-1","id","delegate",4,"ngFor","ngForOf"],["id","delegate",1,"form-group","form-check","mb-1"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"form-group","form-check"],["type","checkbox","id","split",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","split",1,"form-check-label"]],template:function(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",function(){return t.dismiss()}),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275text"](5,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"form",5,6),o["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),o["\u0275\u0275template"](9,v,7,2,"div",7),o["\u0275\u0275elementStart"](10,"div",8),o["\u0275\u0275elementStart"](11,"label",9),o["\u0275\u0275text"](12,"Date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",10),o["\u0275\u0275elementStart"](14,"input",11,12),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275reference"](15).toggle()})("ngModelChange",function(e){return t.transactionDateModel=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275elementStart"](17,"span",14),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275reference"](15).toggle()}),o["\u0275\u0275element"](18,"span",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",8),o["\u0275\u0275elementStart"](20,"label",16),o["\u0275\u0275text"](21,"Category"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"select",17),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.transaction.financialCategoryID=e}),o["\u0275\u0275elementStart"](23,"option",18),o["\u0275\u0275text"](24,"--"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](25,f,2,2,"option",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](26,D,4,1,"div",7),o["\u0275\u0275elementStart"](27,"div",8),o["\u0275\u0275elementStart"](28,"label",20),o["\u0275\u0275text"](29,"Note"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"textarea",21),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.transaction.transactionDescription=e}),o["\u0275\u0275text"](31,"\t\t\t\t"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](32,y,4,1,"div",22),o["\u0275\u0275elementStart"](33,"div",8),o["\u0275\u0275elementStart"](34,"label",23),o["\u0275\u0275text"](35,"Amount"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"input",24),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.transaction.transactionamount=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](37,C,4,3,"div",25),o["\u0275\u0275elementStart"](38,"div",26),o["\u0275\u0275elementStart"](39,"button",27),o["\u0275\u0275text"](40,"Submit "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275reference"](8);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.editMode?"Edit":"Add"," Transaction "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("avnonLoader",t.loading||t.categoriesLoading||t.accountLoading),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.delegates.length>0),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.transactionDateModel),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngModel",t.transaction.financialCategoryID),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.financialCategories),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.delegates.length),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.transaction.transactionDescription),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.delegates.length),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.transaction.transactionamount),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.delegates.length>1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.invalid||t.delegates.length>0&&!t.selectedDelegates.length||t.loading)}},directives:[u.a,p.E,p.r,p.s,h.n,c.o,p.b,p.A,p.q,p.t,p.B,p.v,p.D,h.m,p.w,p.a],styles:[".w-35[_ngcontent-%COMP%]{width:35%!important}.delegates-list[_ngcontent-%COMP%]{max-height:30vh;overflow:auto}"]}),e})()},TMgw:function(e,t,n){"use strict";n.d(t,"a",function(){return a});class a{}},a395:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n("cxbk"),i=n("3DtY"),r=n("cp0P"),o=n("LRne"),s=n("VgRj"),l=n("3DXX"),c=n("fXoL"),d=n("euQB"),m=n("1kSV"),u=n("kmKP"),p=n("9nlD"),h=n("S2+F"),g=n("1bi4"),v=n("6BoG"),f=n("Jn3s"),D=n("3Pt+"),I=n("ofXK");let y=(()=>{class e{transform(e,t){return t?e.filter(e=>{if(e.hasOwnProperty("firstName")||e.hasOwnProperty("surname")||e.hasOwnProperty("firstname")||e.hasOwnProperty("companyName"))return((e.firstName||e.firstname)+" "+(e.surname||"")+" "+(e.companyName||"")).toLowerCase().includes(t.toLowerCase())}):e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c["\u0275\u0275definePipe"]({name:"arrayFilter",type:e,pure:!0}),e})();function b(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",18),c["\u0275\u0275elementStart"](1,"div",19),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().selectApplicant(n)}),c["\u0275\u0275elementStart"](2,"div",20),c["\u0275\u0275element"](3,"input",21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"span",22),c["\u0275\u0275element"](5,"img",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",24),c["\u0275\u0275elementStart"](7,"span",25),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"span",26),c["\u0275\u0275text"](10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"span",26),c["\u0275\u0275text"](12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"span",26),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"span",26),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("checked",n.selectedApplicantIDs.includes(e.companyProgramInstanceStageID)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("src",null!=e&&e.profilePhoto?n.blobUrl+e.profilePhoto:"../assets/img/trainer-holder.png",c["\u0275\u0275sanitizeUrl"]),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate2"]("",e.firstname," ",e.surname,""),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.companyName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.programTitle),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.programInstanceTitle),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.programStageTitle)}}let C=(()=>{class e{constructor(e,t,n,i,r,o,s){this.portfolioService=e,this.activeModal=t,this.userService=n,this.notificationService=i,this.signalRService=r,this.distributionService=o,this.eventService=s,this.blobUrl=a.a.apiBlobUrl+"/",this.originalApplicants=[],this.applicants=[],this.selectedApplicantIDs=[],this.companyProgramStageStatusID=2,this.presenters=[],this.search="",this.user=this.userService.user.getValue(),this.companyID=this.user.companyID||0,this.contactID=this.user.contactID}ngOnInit(){this.getActiveApplicants()}getActiveApplicants(){this.loading=!0,this.portfolioService.getCompanyRoadmapStages(0,0,0,0,this.companyProgramInstanceStageID,this.companyID).subscribe(e=>{this.applicants=e.filter(e=>e.companyProgramStageStatusID===this.companyProgramStageStatusID),this.originalApplicants=e.filter(e=>e.companyProgramStageStatusID===this.companyProgramStageStatusID),this.loading=!1})}selectMultipleApplicant(e){this.selectedApplicantIDs=e?this.applicants.map(e=>e.companyProgramInstanceStageID):[]}selectApplicant(e){const t=this.selectedApplicantIDs.findIndex(t=>t===e.companyProgramInstanceStageID);-1!==t?this.selectedApplicantIDs.splice(t,1):this.selectedApplicantIDs.push(e.companyProgramInstanceStageID)}submitSelections(){const e=this.originalApplicants.filter(e=>this.selectedApplicantIDs.includes(e.companyProgramInstanceStageID));if(this.activeModal){this.loading=!0;const t=[];e.forEach(e=>{this.presenters.some(t=>t.contactID===e.contactID&&t.startTime===this.activeDate.startTime)||t.push(this.eventService.insertEventDelegate({eventID:this.referenceID,contactID:e.contactID,addedByID:this.contactID,eventDelegateTypeID:i.b.APPLICANT,eventDelegateStatusID:1,endDate:this.activeDate.endTime,startDate:this.activeDate.startTime,companyID:e.companyID,companyProgramInstanceStageID:e.companyProgramInstanceStageID}))}),(t.length?Object(r.a)(t):Object(o.a)(t)).subscribe(t=>{t=t.map(t=>{t.eventDelegateID=t.inOut_EventDelegateID;const n=e.find(e=>e.companyProgramInstanceStageID===t.companyProgramInstanceStageID);return n&&(t.firstName=n.firstname,t.surname=n.surname,t.companyName=n.companyName,t.profileImage=n.profilePhoto,t.delegateStartDate=this.activeDate.startTime,t.delegateEndDate=this.activeDate.endTime,t.startTime=this.activeDate.startTime,t.endTime=this.activeDate.endTime,t.eventDelegateStatusID=1,t.confirmed=0),this.notifyDelegate(t),t}),this.loading=!1,this.activeModal.close(t)})}else this.activeModal.close(e)}dismiss(){this.activeModal.dismiss()}notifyDelegate(e){const t=s.a.fullDomain()+"/weekly-plan?eventID="+this.event.eventID,n={distributionTitle:"Interview Invitation",distributionCategoryID:null,referenceID:this.event.eventID,distributionDate:null,userID:this.user.userID,emailBody:l.a.template(`\n\t\t\t\t\t<p>Hi ${e.firstName}.</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p>You've been invited to attend an ${this.event.provider} Interview</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<a href="${t}">See Details</a>\n\t\t\t\t`),subjectLine:"Interview Invitation",senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[e.contactID]};this.distributionService.create(n).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.a),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](p.a),c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](g.a),c["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-applicants-selector-dialog"]],decls:27,vars:10,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[1,"form-group"],["placeholder","Search",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","flex-column","selector-content","float-left","w-100","mb-1"],[1,"row","table-row","table-users","sticky-table-head"],[1,"col-sm-5","d-flex","align-items-center","cursor-pointer"],[1,"form-check","pl-0","mr-3"],["type","checkbox",1,"form-check-input","position-relative","m-0",3,"checked","change"],["class","row table-row table-users applicants-table",4,"ngFor","ngForOf"],[1,"filter-sticky","filter-sticky-3","fw-block","w-100","float-left","mb-2","mt-2"],[1,"float-right","text-link"],[1,"cursor-pointer",3,"click"],[1,"text-right","pt-3"],[1,"btn","btn-primary",3,"disabled","click"],[1,"row","table-row","table-users","applicants-table"],[1,"col-sm-12","d-flex","align-items-center","cursor-pointer",3,"click"],[1,"form-check","float-left","pl-0","mr-3"],["type","checkbox",1,"form-check-input","position-relative","m-0",3,"checked"],[1,"float-left"],[1,"img-fluid","avatar-rounded","avatar-60",3,"src"],[1,"data","d-flex","flex-column","ml-3"],[1,"table-title","s-block","pl-0"],[1,"s-block","pl-0"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h5",1),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",function(){return t.dismiss()}),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"div",5),c["\u0275\u0275elementStart"](8,"input",6),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.search=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"div",9),c["\u0275\u0275elementStart"](12,"div",10),c["\u0275\u0275elementStart"](13,"input",11),c["\u0275\u0275listener"]("change",function(e){return t.selectMultipleApplicant(e.target.checked)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"span"),c["\u0275\u0275text"](15,"Name"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](16,b,17,8,"div",12),c["\u0275\u0275pipe"](17,"arrayFilter"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",13),c["\u0275\u0275elementStart"](19,"span",14),c["\u0275\u0275elementStart"](20,"a",15),c["\u0275\u0275listener"]("click",function(){return t.selectMultipleApplicant(!1)}),c["\u0275\u0275text"](21,"Clear Selected "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"span"),c["\u0275\u0275text"](23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",16),c["\u0275\u0275elementStart"](25,"button",17),c["\u0275\u0275listener"]("click",function(){return t.submitSelections()}),c["\u0275\u0275text"](26," Submit Selections "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",t.title||"Applicant Selector"," "),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("avnonLoader",t.loading),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngModel",t.search),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("checked",t.selectedApplicantIDs.length>0&&t.selectedApplicantIDs.length===t.applicants.length),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngForOf",c["\u0275\u0275pipeBind2"](17,7,t.applicants,t.search)),c["\u0275\u0275advance"](7),c["\u0275\u0275textInterpolate1"](" ",t.selectedApplicantIDs.length," selected "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",!t.selectedApplicantIDs.length))},directives:[f.a,D.b,D.q,D.t,I.m],pipes:[y],styles:[".selector-content[_ngcontent-%COMP%]{height:400px;overflow:auto;position:relative}.fw-block.filter-sticky[_ngcontent-%COMP%]{background-color:#edf1f5;padding:10px 20px;font-size:12px;float:left;width:100%}.avatar-60[_ngcontent-%COMP%]{max-height:60px}.stage-dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after, .stage-dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:before{display:none}.stage-dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{min-width:280px!important;min-height:420px;background:#fff;display:flex;flex-direction:column}.stage-dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .scroller[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:370px;overflow-x:hidden;overflow-y:auto}.stage-dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus, .stage-dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:none;color:#212529}.sticky-table-head[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:4}"]}),e})()},aFDK:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n("frau"),i=n("8J6U"),r=n("fXoL"),o=n("1kSV"),s=n("Ujtm"),l=n("5eHb"),c=n("3Pt+"),d=n("ofXK"),m=n("f3yp");const u=function(){return{standalone:!0}};function p(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div",6),r["\u0275\u0275elementStart"](2,"label",14),r["\u0275\u0275text"](3,"Assessment Date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",15),r["\u0275\u0275elementStart"](5,"input",16,17),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](6).toggle()})("ngModelChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().assessmentDateModel=t}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",18),r["\u0275\u0275elementStart"](8,"span",19),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](6).toggle()}),r["\u0275\u0275element"](9,"span",20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",6),r["\u0275\u0275elementStart"](11,"label",21),r["\u0275\u0275text"](12,"Expiry years"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"select",22),r["\u0275\u0275listener"]("ngModelChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().expiryYear=t}),r["\u0275\u0275elementStart"](14,"option",9),r["\u0275\u0275text"](15,"1 year"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"option",9),r["\u0275\u0275text"](17,"2 years"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"option",9),r["\u0275\u0275text"](19,"3 year"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"option",9),r["\u0275\u0275text"](21,"4 years"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"option",9),r["\u0275\u0275text"](23,"5 years"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.assessmentDateModel),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngModel",e.expiryYear)("ngModelOptions",r["\u0275\u0275pureFunction0"](8,u)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngValue",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",2),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",3),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",4),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",5)}}function h(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",26),r["\u0275\u0275elementStart"](1,"input",27),r["\u0275\u0275listener"]("change",function(){r["\u0275\u0275restoreView"](e);const n=t.index;return r["\u0275\u0275nextContext"](2).onDelegateSelect(n)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](2,"label",28),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate1"]("id","delegate-",n,""),r["\u0275\u0275property"]("checked",a.selectedDelegates.includes(e.eventDelegateID)),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate1"]("for","delegate-",n,""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," ")}}function g(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",23),r["\u0275\u0275elementStart"](1,"label",24),r["\u0275\u0275text"](2,"Print for"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,h,4,5,"div",25),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",e.delegates)}}function v(e,t){1&e&&r["\u0275\u0275element"](0,"app-spinner")}let f=(()=>{class e{constructor(e,t,n,a){this.ngbActiveModal=e,this.ngbModal=t,this.reportService=n,this.toastrService=a,this.certificateSelected=0,this.isAssignToAll=void 0,this.delegates=[],this.selectedDelegates=[],this.expiryYear=1}ngOnInit(){}delegatesAssignmentChange(){console.log("delegatesAssignmentChange"),void 0===this.isAssignToAll&&(this.selectedDelegates=[]),!1===this.isAssignToAll&&(this.selectedDelegates=[]),!0===this.isAssignToAll&&this.delegates.forEach(e=>{this.selectedDelegates.push(e.eventDelegateID)})}assignDelegates(){const e=this.ngbModal.open(a.a,{size:"xl"});e.componentInstance.staticSelector=!0,e.componentInstance.contacts=JSON.parse(JSON.stringify(this.delegates)),e.result.then(e=>{e&&e.length>0&&e.forEach(e=>{this.selectedDelegates.includes(e.eventDelegateID)||this.selectedDelegates.push(e.eventDelegateID)})})}onDelegateSelect(e){const t=this.delegates[e],n=this.selectedDelegates.findIndex(e=>e===t.eventDelegateID);-1!==n?this.selectedDelegates.splice(n,1):this.selectedDelegates.push(t.eventDelegateID)}dismiss(){this.ngbActiveModal.dismiss()}onSubmit(){if(this.downloadingReport=!0,1===this.certificateSelected)this.reportService.getAttendanceCertificates(this.event.eventID,this.selectedDelegates.toString(),1).subscribe(e=>{const t=e.headers.get("Content-Disposition"),n=Object(i.a)(new Date);let a=(null==t?void 0:t.split("filename=").pop())||`Pipeline_${n}.pdf`;a=a.split(";")[0];const r=new Blob([e.body],{type:"application/pdf"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=a||"",s.click(),this.downloadingReport=!1},()=>{this.toastrService.warning("Cannot generate certificates"),this.downloadingReport=!1});else if(2===this.certificateSelected){this.downloadingReport=!0;let e=new Date(this.assessmentDateModel.year,this.assessmentDateModel.month-1,this.assessmentDateModel.day,0,0),t=Object(i.a)(e),n=new Date(this.assessmentDateModel.year+this.expiryYear,this.assessmentDateModel.month-1,this.assessmentDateModel.day,0,0),a=Object(i.a)(n);this.reportService.getCompetenceCertificate(this.event.eventID,this.selectedDelegates.toString(),t,a,1).subscribe(e=>{const t=e.headers.get("Content-Disposition"),n=Object(i.a)(new Date);let a=(null==t?void 0:t.split("filename=").pop())||`Pipeline_${n}.pdf`;a=a.split(";")[0];const r=new Blob([e.body],{type:"application/pdf"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=a||"",s.click(),this.downloadingReport=!1},()=>{this.toastrService.warning("Cannot generate certificates"),this.downloadingReport=!1})}}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](o.p),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](l.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-print-certificates"]],decls:25,vars:8,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["f","ngForm"],[1,"form-group"],["for","certicateSelected"],["name","certicateSelected","id","certicateSelected","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[4,"ngIf"],["class","form-group delegates-list",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["for","date"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","date","required","","ngbDatepicker","","id","date","container","body","autocomplete","off",1,"form-control",3,"ngModel","click","ngModelChange"],["d","ngbDatepicker"],[1,"input-group-append"],[1,"input-group-text","bg-transparent",3,"click"],[1,"calendar-icon","icon-sm"],["for","expiryYears"],["name","expiryYears","id","expiryYears","required","",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"form-group","delegates-list"],["for","delegate"],["class","form-group form-check mb-1","id","delegate",4,"ngFor","ngForOf"],["id","delegate",1,"form-group","form-check","mb-1"],["type","checkbox","required","",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h5",1),r["\u0275\u0275text"](2," Print Certificates "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"button",2),r["\u0275\u0275listener"]("click",function(){return t.dismiss()}),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5,"\xd7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"form",null,5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"label",7),r["\u0275\u0275text"](11,"Certificate template"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"select",8),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.certificateSelected=e}),r["\u0275\u0275elementStart"](13,"option",9),r["\u0275\u0275text"](14,"Please Select"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"option",9),r["\u0275\u0275text"](16,"Attendance"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"option",9),r["\u0275\u0275text"](18,"Competence"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,p,24,9,"ng-container",10),r["\u0275\u0275template"](20,g,4,1,"div",11),r["\u0275\u0275elementStart"](21,"div",12),r["\u0275\u0275elementStart"](22,"button",13),r["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),r["\u0275\u0275template"](23,v,1,0,"app-spinner",10),r["\u0275\u0275text"](24," Print "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275reference"](8);r["\u0275\u0275advance"](12),r["\u0275\u0275property"]("ngModel",t.certificateSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngValue",0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",2),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",2===t.certificateSelected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.delegates.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",t.downloadingReport||0===t.certificateSelected||0===t.selectedDelegates.length||e.invalid),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.downloadingReport)}},directives:[c.E,c.r,c.s,c.B,c.A,c.q,c.t,c.v,c.D,d.n,o.o,c.b,d.m,m.a],styles:[".delegates-list[_ngcontent-%COMP%]{max-height:30vh;overflow:auto}"]}),e})()},dmN6:function(e,t,n){"use strict";n.d(t,"a",function(){return a});class a{constructor(){this.formID=null,this.referenceID=null,this.formCategoryID=null,this.deadlineDays=null}}},eUP4:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("fujP"),i=n("OZf9"),r=n("AytR"),o=n("3DtY");class s{constructor(e){if(this.eventID=null,this.eventDateID=null,this.companyLocationID=null,this.courseClassificationID=null,this.courseID=null,this.confirmed=null,this.eventCategoryID=null,this.eventCategory=null,this.eventSubCategoryID=null,this.eventTitle=null,this.eventType=null,this.eventProfile=null,this.eventPitch=null,this.eventBanner=null,this.eventCost=null,this.courseTitle=null,this.startTime=null,this.endTime=null,this.endDate=null,this.provider=null,this.providerLogo=null,this.emailAddress=null,this.trainerEmail=null,this.bookingCheck=null,this.publicEvent=null,this.targetAudience=null,this.venueID=null,this.venueName=null,this.venueAddress=null,this.venueCity=null,this.latitude=null,this.longitude=null,this.googleURL=null,this.eventBannerUrl=null,this.providerID=null,this.maxScore=0,this.minimumScore=0,this.awardCredits=null,this.companyID=null,this.referenceCompanyID=null,this.companyName=null,this.contactID=null,this.firstName=null,this.surname=null,this.eventDelegateTypeID=null,this.scheduledbyID=null,this.startDate=null,this.referenceID=null,this.eventFormatID=null,this.eventInstructions=null,this.delegates=[],this.dates=[],this.eventDelegateStatusID=null,this.coordinatedBy=null,this.eventDelegateID=null,this.eventDelegateStatus=null,this.eventDelegateStatusDate=null,this.delegatePhoto=null,this.delegatesForCalendar=[],this.eventTime=null,this.taskID=null,this.inOut_EventID=null,this.color=null,this.categoryId=null,this.tasks=[],this.logo=null,this.offsetTop=null,this.offsetLeft=null,this.offsetHeight=null,this.offsetRange=[],!a.a(e)){let t=this;i.a(e,function(e,n){t.hasOwnProperty(n)&&(t[n]=e)}),e.inOut_EventID&&!this.eventID&&(this.eventID=e.inOut_EventID)}switch(this.eventBanner&&(this.eventBannerUrl=r.a.apiBlobUrl+"/"+this.eventBanner),this.delegatePhoto=this.delegatePhoto?r.a.apiBlobUrl+"/128px/"+this.delegatePhoto:"http://identicon.org?t="+this.firstName+"&s=256",this.eventSubCategoryID){case o.a.TRAINING_EVENT:this.eventType="Traning Calendar";case o.a.MEETING:this.eventType="Mentoring Calendar";case o.a.CONSULTING:this.eventType="Suppoprt Calendar";case o.a.TRAVEL:this.eventType="Travel Calendar"}}getEventType(){switch(this.eventSubCategoryID){case o.a.TRAINING_EVENT:return"Traning Calendar";case o.a.MEETING:return"Mentoring Calendar";case o.a.CONSULTING:return"Suppoprt Calendar";case o.a.TRAVEL:return"Travel Calendar"}}}},hpld:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("tk/3"),i=n("lJxs"),r=n("2Vo4"),o=n("fXoL");let s=(()=>{class e{constructor(e){this.http=e,this.BaseURI="https://api.incubatorportal.com/api",this.activeCourse=new r.a(null)}formUrl(e){return this.BaseURI+e}saveCourse(e){return this.http.post(this.BaseURI+"/Course",e).pipe(Object(i.a)(e=>e))}getCourseCategory(){return this.http.get(this.BaseURI+"/course/category/all")}getCourseClassification(){return this.http.get(this.BaseURI+"/course/classification")}getCourses(e,t=0){return this.http.get(this.BaseURI+"/course?CompanyID="+e+"&courseID="+t)}getCoursesByCompanyId(e,t=0){const n={CompanyID:String(e),CourseID:String(t)},i=new a.g({fromObject:n});return this.http.get(this.formUrl("/Course"),{params:i})}updateCourse(e){return this.http.put(this.formUrl("/Course"),e)}deleteCourse(e){return this.http.delete(this.formUrl("/Course/"+e))}generateScormImportUrl(e){return this.http.get(this.formUrl("/Course/scorm/importurl/"+e))}uploadPackageToScorm(e,t){return this.http.post(e,t,{responseType:"text"})}updateScormTitle(e){return this.http.put(this.formUrl("/Course/scorm"),e)}getScormLaunchUrl(e){const t=new a.g({fromObject:e});return this.http.get(this.formUrl("/Course/scorm/launchurl"),{params:t})}getScormLaunchResult(e){const t=new a.g({fromObject:e});return this.http.get(this.formUrl("/Course/scorm/launchresult"),{params:t})}getScormLaunchHistory(e){const t=new a.g({fromObject:e});return this.http.get(this.formUrl("/Course/scorm/launchHistory"),{params:t})}setActiveCourse(e){this.activeCourse.next(e)}getActiveCourse(){return this.activeCourse.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](a.b))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},nvKq:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("8J6U"),i=n("fXoL");let r=(()=>{class e{transform(e,t,n=!1){const i=e.filter(e=>!!e.delegateEndDate&&Object(a.a)(new Date(e.delegateStartDate),"dd.MM.yyyy")===Object(a.a)(new Date(t.startTime),"dd.MM.yyyy"));return n?i.length:i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"delegateDateFilter",type:e,pure:!0}),e})()},rdQE:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("AytR"),i=n("fXoL"),r=n("tk/3");let o=(()=>{class e{constructor(e){this.http=e,this.BaseURI=a.a.apiUrl}getCompanyAccount(e,t,n,a=0,i=0){return this.http.get(`${this.BaseURI}/company/account?companyID=${e}&companyAccountID=${t}&companyLocationID=${n}&companyAccountCategoryID=${a}&referenceID=${i}`)}addCompanyAccount(e){return this.http.post(this.BaseURI+"/company/account",e)}updateCompanyAccount(e){return this.http.put(this.BaseURI+"/company/account",e)}deleteCompanyAccount(e){return this.http.delete(`${this.BaseURI}/company/account/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.b))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},rlYM:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("lJxs"),i=n("AytR"),r=n("fXoL"),o=n("tk/3");let s=(()=>{class e{constructor(e){this.http=e,this.BaseURI=i.a.apiUrl}selectVenue(e,t){return this.http.get(this.BaseURI+"/venue?CompanyID="+e+"&venueID="+t)}insertVenue(e){return this.http.post(this.BaseURI+"/Venue",e).pipe(Object(a.a)(e=>e))}updateVenue(e){return this.http.put(this.BaseURI+"/Venue",e).pipe(Object(a.a)(e=>e))}deleteVenue(e){return this.http.delete(`${this.BaseURI}/Venue/${e}`).pipe(Object(a.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](o.b))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},sCZr:function(e,t,n){"use strict";n.d(t,"a",function(){return a});class a{constructor(){this.courseID=null,this.companyID=null,this.courseTitle=null,this.courseOverview=null,this.companyName=null,this.courseCost=null,this.courseBanner=null,this.groups=null,this.groups1=null,this.groupsID=[],this.groupsName="",this.documents=[],this.courseAudience=null,this.courseCategoryID=null,this.courseClassificationID=null,this.courseCode=null,this.courseDuration=null,this.courseDurationTypeID=null,this.courseIntroduction=null,this.empowerDexCategoryID=null,this.marketplace=null,this.nqfLevelID=null,this.courseClassification=null,this.courseCategory=null,this.durationType=null,this.companyLogo=null}}},uYqz:function(e,t,n){"use strict";n.d(t,"a",function(){return a});class a{constructor(e){this.eventDelegateID=null,this.eventDelegateTypeID=null,this.contactID=null,this.scormRegistrationID=null,this.companyID=null,this.firstName=null,this.surname=null,this.emailAddress=null,this.profilePhoto=null,this.profileImage=null,this.delegateName=null,this.imagePathFull=null,this.confirmed=null,this.confirmStatus="",this.companyName="",this.courseTitle="",this.venueName="",this.startDate="",this.endDate="",this.startTime="",this.endTime="",this.provider="",this.eventDateDelegateID=null,this.attendancestatusID=null,this.nonAttendanceReason="",this.assessmentScore=0,this.eventDelegateStatusID=null,this.totalCreditsAchieved=0,this.totalCreditsRequired=0,this.interviewScore=null,this.color=null,this.checked=!1,this.distributionItem=null,this.companyLogo=null,this.eventCategoryID=null,this.designation=null,this.department=null}getDelegateStatus(){return 1==this.eventDelegateStatusID?"Underway":2==this.eventDelegateStatusID?"Completed":3==this.eventDelegateStatusID?"Terminated":"Underway"}getConfirmedLabel(){}}},uk6F:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("tk/3"),i=n("AytR"),r=n("fXoL");const o=i.a.apiUrl+"/",s=localStorage.getItem("token");let l=(()=>{class e{constructor(e){this.http=e,this.httpOptions={headers:new a.f({"Content-Type":"application/json",Token:s})}}getListTransactionByEventId(e,t){return this.http.get(`${o}Transaction/event?CompanyAccountID=${e}&EventID=${t}`)}findDelegate(e){return this.http.get(`${o}Event/delegate/all/${e}`)}getCategories(e,t=0,n=0){return this.http.get(`${o}FinancialCategory?CompanyID=${e}&FinancialCategoryClassificationID=${t}&FinancialCategoryTypeID=${n}`)}createBatch(e){return this.http.post(o+"Transaction/batch",e)}addCategory(e){return this.http.post(o+"FinancialCategory",e)}updateCategory(e){return this.http.put(o+"FinancialCategory",e)}deleteCategory(e){return this.http.delete(`${o}FinancialCategory/${e}`)}deleteTransaction(e){return this.http.delete(`${o}Transaction/${e}`,this.httpOptions)}getTransactionByAccountID(e,t=0,n=0,a="",i="",r=0,s=0,l=!1,c=0){return this.http.get(`${o}Transaction?companyAccountID=${e}\n\t\t&transactionCategoryID=${t}\n\t\t&financialCategoryID=${n}\n\t\t&startDate=${a}\n\t\t&endDate=${i}\n\t\t&referenceID=${r}\n\t\t&transactionID=${s}\n\t\t&verified=${l}\n\t\t&CompanyID=${c}`)}updateTransaction(e){return this.http.put(o+"Transaction",e,this.httpOptions)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](a.b))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},vvGM:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("ofXK"),i=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},yxFF:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("fujP"),i=n("OZf9");class r{constructor(e){if(this.venueID=null,this.companyID=null,this.countryID=null,this.venueName=null,this.venueCapacity=null,this.venueHourlyRate=null,this.venueDetail=null,this.venueAddress=null,this.venueCity=null,this.googleURL=null,this.latitude=null,this.longitude=null,this.companyLocationID=null,this.bannerPhoto=null,!a.a(e)){let t=this;i.a(e,function(e,n){t.hasOwnProperty(n)&&(t[n]=e)}),e.inOut_VenueID&&!this.venueID&&(this.venueID=e.inOut_VenueID)}}}}}]);