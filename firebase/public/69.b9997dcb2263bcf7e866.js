(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{rrXH:function(e,t,r){"use strict";r.r(t),r.d(t,"ResetPasswordModule",function(){return x});var n=r("ofXK"),o=r("tyNb"),s=r("3Pt+"),a=r("yxZ3"),i=r("fXoL"),l=r("kmKP"),d=r("5eHb"),m=r("rV3Q");function c(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1," Password field is required. "),i["\u0275\u0275elementContainerEnd"]())}function p(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1," Minimum 8 characters is required. "),i["\u0275\u0275elementContainerEnd"]())}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"small",16),i["\u0275\u0275template"](1,c,2,0,"ng-container",17),i["\u0275\u0275template"](2,p,2,0,"ng-container",17),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.form.controls.password.errors?null:e.form.controls.password.errors.hasOwnProperty("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.form.controls.password.errors?null:e.form.controls.password.errors.hasOwnProperty("minlength"))}}function u(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1," Password field is required. "),i["\u0275\u0275elementContainerEnd"]())}function w(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1," Minimum 8 characters is required. "),i["\u0275\u0275elementContainerEnd"]())}function g(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1," Confirm password must match password. "),i["\u0275\u0275elementContainerEnd"]())}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"small",18),i["\u0275\u0275template"](1,u,2,0,"ng-container",17),i["\u0275\u0275template"](2,w,2,0,"ng-container",17),i["\u0275\u0275template"](3,g,2,0,"ng-container",17),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.form.controls.passwordConfirm.errors?null:e.form.controls.passwordConfirm.errors.hasOwnProperty("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.form.controls.passwordConfirm.errors?null:e.form.controls.passwordConfirm.errors.hasOwnProperty("minlength")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.form.controls.passwordConfirm.errors?null:e.form.controls.passwordConfirm.errors.hasOwnProperty("mustMatch"))}}const v=[{path:"",component:(()=>{class e{constructor(e,t,r,n,o,s,a){this.userService=e,this.toastrService=t,this.formBuilder=r,this.activatedRoute=n,this.router=o,this.renderer=s,this.document=a}ngOnInit(){this.renderer.addClass(this.document.body,"login-page"),this.initForm(),this.activatedRoute.queryParams.subscribe(e=>{e.secretkey?this.form.controls.secretKey.setValue(e.secretkey):this.router.navigate(["/login"])})}initForm(){this.form=this.formBuilder.group({password:["",[s.C.required,s.C.minLength(8)]],passwordConfirm:["",[s.C.required,s.C.minLength(8)]],secretKey:["",[s.C.required]]},{validators:a.a.mustMatch("password","passwordConfirm")})}resetPassword(){if(this.form.invalid)return;this.loading=!0;const e=this.form.value;delete e.passwordConfirm,this.userService.resetPassword(e).subscribe(()=>{this.loading=!1,this.toastrService.success("Password has been successfully restored."),this.router.navigate(["/login"])},()=>{this.loading=!1,this.toastrService.error("Password reset failed")})}ngOnDestroy(){this.renderer.removeClass(this.document.body,"login-page")}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.a),i["\u0275\u0275directiveInject"](d.b),i["\u0275\u0275directiveInject"](s.e),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.c),i["\u0275\u0275directiveInject"](i.Renderer2),i["\u0275\u0275directiveInject"](n.d))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-reset-password"]],decls:28,vars:5,consts:[[1,"body","body-login","container-fluid"],[1,"row","justify-content-center"],[1,"col-lg-4","col-md-5","col-sm-6","login-box"],[1,"box",3,"appSpinner"],[3,"formGroup","submit"],[1,"form-group"],["for","password",1,"sr-only"],["type","password","formControlName","password","id","password","placeholder","New password","autocomplete","off",1,"form-control"],["id","passwordHelp","class","form-text text-danger text-left",4,"ngIf"],["for","passwordConfirm",1,"sr-only"],["type","password","formControlName","passwordConfirm","id","passwordConfirm","placeholder","Confirm password","autocomplete","off",1,"form-control"],["id","passwordConfirmHelp","class","form-text text-danger text-left",4,"ngIf"],[1,"btn","btn-primary","btn-block",3,"disabled"],[1,"form-links"],["routerLink","/login"],["routerLink","/register"],["id","passwordHelp",1,"form-text","text-danger","text-left"],[4,"ngIf"],["id","passwordConfirmHelp",1,"form-text","text-danger","text-left"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"h1"),i["\u0275\u0275text"](5,"Reset Password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"form",4),i["\u0275\u0275listener"]("submit",function(){return t.resetPassword()}),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275elementStart"](8,"label",6),i["\u0275\u0275text"](9,"Please enter your password:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",7),i["\u0275\u0275template"](11,f,3,2,"small",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",5),i["\u0275\u0275elementStart"](13,"label",9),i["\u0275\u0275text"](14,"Confirm password:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"input",10),i["\u0275\u0275template"](16,h,4,3,"small",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",5),i["\u0275\u0275elementStart"](18,"button",12),i["\u0275\u0275text"](19," Reset "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"p",13),i["\u0275\u0275text"](21," Already have account? "),i["\u0275\u0275elementStart"](22,"a",14),i["\u0275\u0275text"](23,"Login"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"p",13),i["\u0275\u0275text"](25," Not registered? "),i["\u0275\u0275elementStart"](26,"a",15),i["\u0275\u0275text"](27,"Sign Up"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("appSpinner",t.loading),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.form.controls.password.invalid&&t.form.controls.password.touched),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.form.controls.passwordConfirm.invalid&&t.form.controls.passwordConfirm.touched),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",t.form.invalid))},directives:[m.a,s.E,s.r,s.j,s.b,s.q,s.h,n.n,o.f],styles:[".ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#f84444}.body-login[_ngcontent-%COMP%]{min-height:calc(100% - 84px)}"]}),e})()}];let C=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(v)],o.g]}),e})();var y=r("v6ps");let x=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.c,s.l,s.z,y.a,C]]}),e})()}}]);