(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"5JBz":function(e,t,n){"use strict";n.r(t),n.d(t,"FormReportModule",function(){return b});var r=n("ofXK"),i=n("tyNb"),o=n("znf5"),a=n("fXoL");const s=[{path:"",component:o.a}];let l=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(s)],i.g]}),e})();var c=n("j4PG"),p=n("3Pt+"),d=n("1kSV"),h=n("pr+S"),u=n("GKkB");let m=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,p.l,p.z,c.a,d.q]]}),e})();var f=n("ZLSo"),v=n("BUqo"),g=n("jgGb");let b=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,p.l,p.z,c.a,d.q,u.a,h.a,l,m,f.a,v.a,g.a]]}),e})()},BUqo:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("ofXK"),i=n("3Pt+"),o=n("1kSV"),a=n("pr+S"),s=n("GKkB"),l=n("j4PG"),c=n("PCNd"),p=n("jgGb"),d=n("ZLSo"),h=n("fXoL");let u=(()=>{class e{}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,i.l,o.q,a.a,s.a,l.a,c.a,p.a,d.a]]}),e})()},TmwG:function(e,t,n){var r,i,o;o=function(e){function t(e,t,n,r){e.hasOwnProperty(t)||(e[t]=r.apply(null,n))}t(e=e?e._modules:{},"Mixins/ColorMapSeries.js",[e["Core/Globals.js"],e["Core/Series/Point.js"],e["Core/Utilities.js"]],function(e,t,n){var r=n.defined;return{colorMapPointMixin:{dataLabelOnNull:!0,isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value},setState:function(e){t.prototype.setState.call(this,e),this.graphic&&this.graphic.attr({zIndex:"hover"===e?1:0})}},colorMapSeriesMixin:{pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:e.noop,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:e.seriesTypes.column.prototype.pointAttribs,colorAttribs:function(e){var t={};return r(e.color)&&(t[this.colorProp||"fill"]=e.color),t}}}}),t(e,"Series/Treemap/TreemapAlgorithmGroup.js",[],function(){return function(){function e(e,t,n,r){this.height=e,this.width=t,this.plot=r,this.startDirection=this.direction=n,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(e,t){return Math.max(e/t,t/e)}}}return e.prototype.addElement=function(e){this.lP.total=this.elArr[this.elArr.length-1],this.total+=e,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)},e.prototype.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0},e}()}),t(e,"Mixins/DrawPoint.js",[],function(){var e=function(e){return"function"==typeof e},t=function(t){var n,r=this,i=r.graphic,o=t.animatableAttribs,a=t.onComplete,s=t.css,l=t.renderer,c=null===(n=r.series)||void 0===n?void 0:n.options.animation;if(r.shouldDraw())i||(r.graphic=i=l[t.shapeType](t.shapeArgs).add(t.group)),i.css(s).attr(t.attribs).animate(o,!t.isNew&&c,a);else if(i){var p=function(){r.graphic=i=i.destroy(),e(a)&&a()};Object.keys(o).length?i.animate(o,void 0,function(){p()}):p()}};return{draw:t,drawPoint:function(e){(e.attribs=e.attribs||{}).class=this.getClassName(),t.call(this,e)},isFn:e}}),t(e,"Series/Treemap/TreemapPoint.js",[e["Mixins/DrawPoint.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,n){var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=t.series.prototype.pointClass,o=t.seriesTypes;t=o.pie.prototype.pointClass;var a=n.isNumber,s=n.pick;return(0,n.extend)((n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=void 0,t.node=void 0,t.options=void 0,t.series=void 0,t.value=void 0,t}return r(t,e),t.prototype.getClassName=function(){var e=i.prototype.getClassName.call(this),t=this.series,n=t.options;return this.node.level<=t.nodeMap[t.rootNode].level?e+=" highcharts-above-level":this.node.isLeaf||s(n.interactByLeaf,!n.allowTraversingTree)?this.node.isLeaf||(e+=" highcharts-internal-node"):e+=" highcharts-internal-node-interactive",e},t.prototype.isValid=function(){return!(!this.id&&!a(this.value))},t.prototype.setState=function(e){i.prototype.setState.call(this,e),this.graphic&&this.graphic.attr({zIndex:"hover"===e?1:0})},t.prototype.shouldDraw=function(){return a(this.plotY)&&null!==this.y},t}(o.scatter.prototype.pointClass)).prototype,{draw:e.drawPoint,setVisible:t.prototype.setVisible}),n}),t(e,"Series/Treemap/TreemapUtilities.js",[e["Core/Utilities.js"]],function(e){var t,n=e.objectEach;return function(e){e.AXIS_MAX=100,e.isBoolean=function(e){return"boolean"==typeof e},e.eachObject=function(e,t,r){r=r||this,n(e,function(n,i){t.call(r,n,i,e)})},e.recursive=function e(t,n,r){void 0===r&&(r=this),!1!==(t=n.call(r,t))&&e(t,n,r)}}(t||(t={})),t}),t(e,"Mixins/TreeSeries.js",[e["Core/Color/Color.js"],e["Core/Utilities.js"]],function(e,t){var n=t.extend,r=t.isArray,i=t.isNumber,o=t.isObject,a=t.merge,s=t.pick;return{getColor:function(t,n){var r,i=n.index,o=n.mapOptionsToLevel,a=n.parentColor,l=n.parentColorIndex,c=n.series,p=n.colors,d=n.siblings,h=c.points,u=c.chart.options.chart;if(t){if(h=h[t.i],t=o[t.level]||{},o=h&&t.colorByPoint)var m=h.index%(p?p.length:u.colorCount),f=p&&p[m];c.chart.styledMode||(p=h&&h.options.color,u=t&&t.color,(r=a)&&(r=(r=t&&t.colorVariation)&&"brightness"===r.key?e.parse(a).brighten(i/d*r.to).get():a),r=s(p,u,f,r,c.color));var v=s(h&&h.options.colorIndex,t&&t.colorIndex,m,l,n.colorIndex)}return{color:r,colorIndex:v}},getLevelOptions:function(e){var t=null;if(o(e)){t={};var s=i(e.from)?e.from:1,l=e.levels,c={},p=o(e.defaults)?e.defaults:{};for(r(l)&&(c=l.reduce(function(e,t){if(o(t)&&i(t.level)){var r=a({},t),l="boolean"==typeof r.levelIsConstant?r.levelIsConstant:p.levelIsConstant;delete r.levelIsConstant,delete r.level,o(e[t=t.level+(l?0:s-1)])?n(e[t],r):e[t]=r}return e},{})),l=i(e.to)?e.to:1,e=0;e<=l;e++)t[e]=a({},p,o(c[e])?c[e]:{})}return t},setTreeValues:function e(t,r){var i=r.before,o=r.idRoot,a=r.points[t.i],l=a&&a.options||{},c=0,p=[];return n(t,{levelDynamic:t.level-("boolean"!=typeof r.levelIsConstant||r.levelIsConstant?0:r.mapIdToNode[o].level),name:s(a&&a.name,""),visible:o===t.id||"boolean"==typeof r.visible&&r.visible}),"function"==typeof i&&(t=i(t,r)),t.children.forEach(function(i,o){var a=n({},r);n(a,{index:o,siblings:t.children.length,visible:t.visible}),i=e(i,a),p.push(i),i.visible&&(c+=i.val)}),t.visible=0<c||t.visible,i=s(l.value,c),n(t,{children:p,childrenTotal:c,isLeaf:t.visible&&!c,val:i}),t},updateRootId:function(e){if(o(e)){var t=o(e.options)?e.options:{};t=s(e.rootNode,t.rootId,""),o(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t}return t}}}),t(e,"Series/Treemap/TreemapComposition.js",[e["Core/Series/SeriesRegistry.js"],e["Series/Treemap/TreemapUtilities.js"],e["Core/Utilities.js"]],function(e,t,n){var r=n.extend,i=!1;(0,n.addEvent)(e.series,"afterBindAxes",function(){var e=this.xAxis,n=this.yAxis;if(e&&n)if(this.is("treemap")){var o={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:t.AXIS_MAX,dataMax:t.AXIS_MAX,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};r(n.options,o),r(e.options,o),i=!0}else i&&(n.setOptions(n.userOptions),e.setOptions(e.userOptions),i=!1)})}),t(e,"Series/Treemap/TreemapSeries.js",[e["Core/Color/Color.js"],e["Mixins/ColorMapSeries.js"],e["Core/Globals.js"],e["Mixins/LegendSymbol.js"],e["Core/Color/Palette.js"],e["Core/Series/SeriesRegistry.js"],e["Series/Treemap/TreemapAlgorithmGroup.js"],e["Series/Treemap/TreemapPoint.js"],e["Series/Treemap/TreemapUtilities.js"],e["Mixins/TreeSeries.js"],e["Core/Utilities.js"]],function(e,t,n,r,i,o,a,s,l,c,p){var d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=e.parse,u=t.colorMapSeriesMixin;e=n.noop;var m=o.series,f=(t=o.seriesTypes).column,v=t.heatmap,g=t.scatter,b=c.getColor,y=c.getLevelOptions,S=c.updateRootId,w=p.addEvent,I=p.correctFloat,x=p.defined,O=p.error,D=p.extend,C=p.fireEvent,k=p.isArray,T=p.isObject,A=p.isString,P=p.merge,R=p.pick,M=p.stableSort;return c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.axisRatio=void 0,t.data=void 0,t.mapOptionsToLevel=void 0,t.nodeMap=void 0,t.options=void 0,t.points=void 0,t.rootNode=void 0,t.tree=void 0,t}return d(t,e),t.prototype.algorithmCalcPoints=function(e,t,n,r){var i,o,a,s,l=n.lW,c=n.lH,p=n.plot,d=0,h=n.elArr.length-1;if(t)l=n.nW,c=n.nH;else var u=n.elArr[n.elArr.length-1];n.elArr.forEach(function(e){(t||d<h)&&(0===n.direction?(i=p.x,o=p.y,s=e/(a=l)):(i=p.x,o=p.y,a=e/(s=c)),r.push({x:i,y:o,width:a,height:I(s)}),0===n.direction?p.y+=s:p.x+=a),d+=1}),n.reset(),0===n.direction?n.width-=l:n.height-=c,p.y=p.parent.y+(p.parent.height-n.height),p.x=p.parent.x+(p.parent.width-n.width),e&&(n.direction=1-n.direction),t||n.addElement(u)},t.prototype.algorithmFill=function(e,t,n){var r,i,o,a,s,l=[],c=t.direction,p=t.x,d=t.y,h=t.width,u=t.height;return n.forEach(function(n){r=n.val/t.val*t.height*t.width,i=p,o=d,0===c?(h-=a=r/(s=u),p+=a):(u-=s=r/(a=h),d+=s),l.push({x:i,y:o,width:a,height:s}),e&&(c=1-c)}),l},t.prototype.algorithmLowAspectRatio=function(e,t,n){var r=[],i=this,o={x:t.x,y:t.y,parent:t},s=0,l=n.length-1,c=new a(t.height,t.width,t.direction,o);return n.forEach(function(n){c.addElement(n.val/t.val*t.height*t.width),c.lP.nR>c.lP.lR&&i.algorithmCalcPoints(e,!1,c,r,o),s===l&&i.algorithmCalcPoints(e,!0,c,r,o),s+=1}),r},t.prototype.alignDataLabel=function(e,t,n){var r=n.style;!x(r.textOverflow)&&t.text&&t.getBBox().width>t.text.textWidth&&t.css({textOverflow:"ellipsis",width:r.width+="px"}),f.prototype.alignDataLabel.apply(this,arguments),e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})},t.prototype.buildNode=function(e,t,n,r,i){var o,a=this,s=[],l=a.points[t],c=0;return(r[e]||[]).forEach(function(t){o=a.buildNode(a.points[t].id,t,n+1,r,e),c=Math.max(o.height+1,c),s.push(o)}),a.nodeMap[(t={id:e,i:t,children:s,height:c,level:n,parent:i,visible:!1}).id]=t,l&&(l.node=t),t},t.prototype.calculateChildrenAreas=function(e,t){var n,r=this,i=r.options,o=r.mapOptionsToLevel[e.level+1],a=R(r[o&&o.layoutAlgorithm]&&o.layoutAlgorithm,i.layoutAlgorithm),s=i.alternateStartingDirection;e=e.children.filter(function(e){return!e.ignore}),o&&o.layoutStartingDirection&&(t.direction="vertical"===o.layoutStartingDirection?0:1),n=r[a](t,e),e.forEach(function(e,i){e.values=P(i=n[i],{val:e.childrenTotal,direction:s?1-t.direction:t.direction}),e.pointValues=P(i,{x:i.x/r.axisRatio,y:l.AXIS_MAX-i.y-i.height,width:i.width/r.axisRatio}),e.children.length&&r.calculateChildrenAreas(e,e.values)})},t.prototype.drawDataLabels=function(){var e,t,n=this,r=n.mapOptionsToLevel;n.points.filter(function(e){return e.node.visible}).forEach(function(i){t=r[i.node.level],e={style:{}},i.node.isLeaf||(e.enabled=!1),t&&t.dataLabels&&(e=P(e,t.dataLabels),n._hasPointLabels=!0),i.shapeArgs&&(e.style.width=i.shapeArgs.width,i.dataLabel&&i.dataLabel.css({width:i.shapeArgs.width+"px"})),i.dlOptions=P(e,i.options.dataLabels)}),m.prototype.drawDataLabels.call(this)},t.prototype.drawPoints=function(){var e=this,t=e.chart,n=t.renderer,r=t.styledMode,i=e.options,o=r?{}:i.shadow,a=i.borderRadius,s=t.pointCount<i.animationLimit,l=i.allowTraversingTree;e.points.forEach(function(t){var c=t.node.levelDynamic,p={},d={},h={},u="level-group-"+t.node.level,m=!!t.graphic,f=s&&m,v=t.shapeArgs;t.shouldDraw()&&(a&&(d.r=a),P(!0,f?p:d,m?v:{},r?{}:e.pointAttribs(t,t.selected?"select":void 0)),e.colorAttribs&&r&&D(h,e.colorAttribs(t)),e[u]||(e[u]=n.g(u).attr({zIndex:1e3-(c||0)}).add(e.group),e[u].survive=!0)),t.draw({animatableAttribs:p,attribs:d,css:h,group:e[u],renderer:n,shadow:o,shapeArgs:v,shapeType:"rect"}),l&&t.graphic&&(t.drillId=i.interactByLeaf?e.drillToByLeaf(t):e.drillToByGroup(t))})},t.prototype.drillToByGroup=function(e){var t=!1;return 1!=e.node.level-this.nodeMap[this.rootNode].level||e.node.isLeaf||(t=e.id),t},t.prototype.drillToByLeaf=function(e){var t=!1;if(e.node.parent!==this.rootNode&&e.node.isLeaf)for(e=e.node;!t;)(e=this.nodeMap[e.parent]).parent===this.rootNode&&(t=e.id);return t},t.prototype.drillToNode=function(e,t){O(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(e,t)},t.prototype.drillUp=function(){var e=this.nodeMap[this.rootNode];e&&A(e.parent)&&this.setRootNode(e.parent,!0,{trigger:"traverseUpButton"})},t.prototype.getExtremes=function(){var e=m.prototype.getExtremes.call(this,this.colorValueData),t=e.dataMax;return this.valueMin=e.dataMin,this.valueMax=t,m.prototype.getExtremes.call(this)},t.prototype.getListOfParents=function(e,t){e=k(e)?e:[];var n=k(t)?t:[];return t=e.reduce(function(e,t,n){return void 0===e[t=R(t.parent,"")]&&(e[t]=[]),e[t].push(n),e},{"":[]}),l.eachObject(t,function(e,t,r){""!==t&&-1===n.indexOf(t)&&(e.forEach(function(e){r[""].push(e)}),delete r[t])}),t},t.prototype.getTree=function(){var e=this.data.map(function(e){return e.id});return e=this.getListOfParents(this.data,e),this.nodeMap={},this.buildNode("",-1,0,e)},t.prototype.hasData=function(){return!!this.processedXData.length},t.prototype.init=function(e,t){u&&(this.colorAttribs=u.colorAttribs);var n=w(this,"setOptions",function(e){x((e=e.userOptions).allowDrillToNode)&&!x(e.allowTraversingTree)&&(e.allowTraversingTree=e.allowDrillToNode,delete e.allowDrillToNode),x(e.drillUpButton)&&!x(e.traverseUpButton)&&(e.traverseUpButton=e.drillUpButton,delete e.drillUpButton)});m.prototype.init.call(this,e,t),delete this.opacity,this.eventsToUnbind.push(n),this.options.allowTraversingTree&&this.eventsToUnbind.push(w(this,"click",this.onClickDrillToNode))},t.prototype.onClickDrillToNode=function(e){var t=(e=e.point)&&e.drillId;A(t)&&(e.setState(""),this.setRootNode(t,!0,{trigger:"click"}))},t.prototype.pointAttribs=function(e,t){var n=T(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},r=e&&n[e.node.level]||{};n=this.options;var i=t&&n.states[t]||{},o=e&&e.getClassName()||"";return e={stroke:e&&e.borderColor||r.borderColor||i.borderColor||n.borderColor,"stroke-width":R(e&&e.borderWidth,r.borderWidth,i.borderWidth,n.borderWidth),dashstyle:e&&e.borderDashStyle||r.borderDashStyle||i.borderDashStyle||n.borderDashStyle,fill:e&&e.color||this.color},-1!==o.indexOf("highcharts-above-level")?(e.fill="none",e["stroke-width"]=0):-1!==o.indexOf("highcharts-internal-node-interactive")?(t=R(i.opacity,n.opacity),e.fill=h(e.fill).setOpacity(t).get(),e.cursor="pointer"):-1!==o.indexOf("highcharts-internal-node")?e.fill="none":t&&(e.fill=h(e.fill).brighten(i.brightness).get()),e},t.prototype.renderTraverseUpButton=function(e){var t=this,n=t.options.traverseUpButton,r=R(n.text,t.nodeMap[e].name,"\u25c1 Back");if(""===e||t.is("sunburst")&&1===t.tree.children.length&&e===t.tree.children[0].id)t.drillUpButton&&(t.drillUpButton=t.drillUpButton.destroy());else if(this.drillUpButton)this.drillUpButton.placed=!1,this.drillUpButton.attr({text:r}).align();else{var i=(e=n.theme)&&e.states;this.drillUpButton=this.chart.renderer.button(r,0,0,function(){t.drillUp()},e,i&&i.hover,i&&i.select).addClass("highcharts-drillup-button").attr({align:n.position.align,zIndex:7}).add().align(n.position,!1,n.relativeTo||"plotBox")}},t.prototype.setColorRecursive=function(e,t,n,r,i){var o=this,a=o&&o.chart;if(a=a&&a.options&&a.options.colors,e){var s=b(e,{colors:a,index:r,mapOptionsToLevel:o.mapOptionsToLevel,parentColor:t,parentColorIndex:n,series:o,siblings:i});(t=o.points[e.i])&&(t.color=s.color,t.colorIndex=s.colorIndex),(e.children||[]).forEach(function(t,n){o.setColorRecursive(t,s.color,s.colorIndex,n,e.children.length)})}},t.prototype.setPointValues=function(){var e=this,t=e.xAxis,n=e.yAxis,r=e.chart.styledMode;e.points.forEach(function(i){var o=i.node,a=o.pointValues;if(o=o.visible,a&&o){o=a.height;var s=a.width,l=a.x,c=a.y,p=r?0:(e.pointAttribs(i)["stroke-width"]||0)%2/2;a=Math.round(t.toPixels(l,!0))-p,s=Math.round(t.toPixels(l+s,!0))-p,l=Math.round(n.toPixels(c,!0))-p,o=Math.round(n.toPixels(c+o,!0))-p,i.shapeArgs={x:Math.min(a,s),y:Math.min(l,o),width:Math.abs(s-a),height:Math.abs(o-l)},i.plotX=i.shapeArgs.x+i.shapeArgs.width/2,i.plotY=i.shapeArgs.y+i.shapeArgs.height/2}else delete i.plotX,delete i.plotY})},t.prototype.setRootNode=function(e,t,n){e=D({newRootId:e,previousRootId:this.rootNode,redraw:R(t,!0),series:this},n),C(this,"setRootNode",e,function(e){var t=e.series;t.idPreviousRoot=e.previousRootId,t.rootNode=e.newRootId,t.isDirty=!0,e.redraw&&t.chart.redraw()})},t.prototype.setState=function(e){this.options.inactiveOtherPoints=!0,m.prototype.setState.call(this,e,!1),this.options.inactiveOtherPoints=!1},t.prototype.setTreeValues=function(e){var t=this,n=t.options,r=t.nodeMap[t.rootNode];n=!l.isBoolean(n.levelIsConstant)||n.levelIsConstant;var i=0,o=[],a=t.points[e.i];e.children.forEach(function(e){e=t.setTreeValues(e),o.push(e),e.ignore||(i+=e.val)}),M(o,function(e,t){return(e.sortIndex||0)-(t.sortIndex||0)});var s=R(a&&a.options.value,i);return a&&(a.value=s),D(e,{children:o,childrenTotal:i,ignore:!(R(a&&a.visible,!0)&&0<s),isLeaf:e.visible&&!i,levelDynamic:e.level-(n?0:r.level),name:R(a&&a.name,""),sortIndex:R(a&&a.sortIndex,-s),val:s}),e},t.prototype.sliceAndDice=function(e,t){return this.algorithmFill(!0,e,t)},t.prototype.squarified=function(e,t){return this.algorithmLowAspectRatio(!0,e,t)},t.prototype.strip=function(e,t){return this.algorithmLowAspectRatio(!1,e,t)},t.prototype.stripes=function(e,t){return this.algorithmFill(!1,e,t)},t.prototype.translate=function(){var e=this,t=e.options,n=S(e);m.prototype.translate.call(e);var r=e.tree=e.getTree(),i=e.nodeMap[n];e.renderTraverseUpButton(n),e.mapOptionsToLevel=y({from:i.level+1,levels:t.levels,to:r.height,defaults:{levelIsConstant:e.options.levelIsConstant,colorByPoint:t.colorByPoint}}),""===n||i&&i.children.length||(e.setRootNode("",!1),i=e.nodeMap[n=e.rootNode]),l.recursive(e.nodeMap[e.rootNode],function(t){var n=!1,r=t.parent;return t.visible=!0,(r||""===r)&&(n=e.nodeMap[r]),n}),l.recursive(e.nodeMap[e.rootNode].children,function(e){var t=!1;return e.forEach(function(e){e.visible=!0,e.children.length&&(t=(t||[]).concat(e.children))}),t}),e.setTreeValues(r),e.axisRatio=e.xAxis.len/e.yAxis.len,e.nodeMap[""].pointValues=n={x:0,y:0,width:l.AXIS_MAX,height:l.AXIS_MAX},e.nodeMap[""].values=n=P(n,{width:n.width*e.axisRatio,direction:"vertical"===t.layoutStartingDirection?0:1,val:r.val}),e.calculateChildrenAreas(r,n),e.colorAxis||t.colorByPoint||e.setColorRecursive(e.tree),t.allowTraversingTree&&(e.xAxis.setExtremes((t=i.pointValues).x,t.x+t.width,!1),e.yAxis.setExtremes(t.y,t.y+t.height,!1),e.xAxis.setScale(),e.yAxis.setScale()),e.setPointValues()},t.defaultOptions=P(g.defaultOptions,{allowTraversingTree:!1,animationLimit:250,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{defer:!1,enabled:!0,formatter:function(){var e=this&&this.point?this.point:{};return A(e.name)?e.name:""},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:"right",x:-10,y:10}},traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:i.neutralColor10,borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:i.neutralColor40,brightness:v?0:.1,halo:!1,opacity:.75,shadow:!1}}}),t}(g),D(c.prototype,{buildKDTree:e,colorKey:"colorValue",directTouch:!0,drawLegendSymbol:r.drawRectangle,getExtremesFromAll:!0,getSymbol:e,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value"],pointClass:s,trackerGroups:["group","dataLabelsGroup"],utils:{recursive:l.recursive}}),o.registerSeriesType("treemap",c),c}),t(e,"Series/Sunburst/SunburstPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),r=e.series.prototype.pointClass,i=t.correctFloat;return t=t.extend,e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node=void 0,t.options=void 0,t.series=void 0,t.shapeExisting=void 0,t}return n(t,e),t.prototype.getDataLabelPath=function(e){var t=this.series.chart.renderer,n=this.shapeExisting,r=n.start,o=n.end,a=r+(o-r)/2;a=0>a&&a>-Math.PI||a>Math.PI;var s=n.r+(e.options.distance||0);if(r===-Math.PI/2&&i(o)===i(1.5*Math.PI)&&(r=-Math.PI+Math.PI/360,o=-Math.PI/360,a=!0),o-r>Math.PI){a=!1;var l=!0}return this.dataLabelPath&&(this.dataLabelPath=this.dataLabelPath.destroy()),this.dataLabelPath=t.arc({open:!0,longArc:l?1:0}).add(e),this.dataLabelPath.attr({start:a?r:o,end:a?o:r,clockwise:+a,x:n.x,y:n.y,r:(s+n.innerR)/2}),this.dataLabelPath},t.prototype.isValid=function(){return!0},t.prototype.shouldDraw=function(){return!this.isNull},t}(e.seriesTypes.treemap.prototype.pointClass),t(e.prototype,{getClassName:r.prototype.getClassName,haloPath:r.prototype.haloPath,setState:r.prototype.setState}),e}),t(e,"Series/Sunburst/SunburstUtilities.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){var n,r=e.seriesTypes.treemap,i=t.isNumber,o=t.isObject,a=t.merge;return function(e){function t(e,t){var n=[];if(i(e)&&i(t)&&e<=t)for(;e<=t;e++)n.push(e);return n}e.recursive=r.prototype.utils.recursive,e.calculateLevelSizes=function(e,n){n=o(n)?n:{};var r,s=0;if(o(e)){var l=a({},e),c=t(e=i(n.from)?n.from:0,i(n.to)?n.to:0);e=Object.keys(l).filter(function(e){return-1===c.indexOf(+e)});var p=r=i(n.diffRadius)?n.diffRadius:0;c.forEach(function(e){var t=(e=l[e]).levelSize.unit,n=e.levelSize.value;"weight"===t?s+=n:"percentage"===t?(e.levelSize={unit:"pixels",value:n/100*p},r-=e.levelSize.value):"pixels"===t&&(r-=n)}),c.forEach(function(e){var t=l[e];"weight"===t.levelSize.unit&&(l[e].levelSize={unit:"pixels",value:(t=t.levelSize.value)/s*r})}),e.forEach(function(e){l[e].levelSize={value:0,unit:"pixels"}})}return l},e.getLevelFromAndTo=function(e){var t=e.level;return{from:0<t?t:1,to:t+e.height}},e.range=t}(n||(n={})),n}),t(e,"Series/Sunburst/SunburstSeries.js",[e["Mixins/CenteredSeries.js"],e["Core/Globals.js"],e["Core/Series/SeriesRegistry.js"],e["Series/Sunburst/SunburstPoint.js"],e["Series/Sunburst/SunburstUtilities.js"],e["Mixins/TreeSeries.js"],e["Core/Utilities.js"]],function(e,t,n,r,i,o,a){function s(e,t){var n=t.mapIdToNode[e.parent],r=t.series,i=r.chart,o=r.points[e.i];return n=m(e,{colors:r.options.colors||i&&i.options.colors,colorIndex:r.colorIndex,index:t.index,mapOptionsToLevel:t.mapOptionsToLevel,parentColor:n&&n.color,parentColorIndex:n&&n.colorIndex,series:t.series,siblings:t.siblings}),e.color=n.color,e.colorIndex=n.colorIndex,o&&(o.color=e.color,o.colorIndex=e.colorIndex,e.sliced=e.id!==t.idRoot&&o.sliced),e}var l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=e.getCenter,p=e.getStartAndEndRadians;e=t.noop;var d=n.series,h=n.seriesTypes;t=h.column;var u=h.treemap,m=o.getColor,f=o.getLevelOptions,v=o.setTreeValues,g=o.updateRootId,b=a.error,y=a.extend,S=a.isNumber,w=a.isObject,I=a.isString,x=a.merge,O=a.splat,D=180/Math.PI;return o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.center=void 0,t.data=void 0,t.mapOptionsToLevel=void 0,t.nodeMap=void 0,t.options=void 0,t.points=void 0,t.shapeRoot=void 0,t.startAndEndRadians=void 0,t.tree=void 0,t}return l(t,e),t.prototype.alignDataLabel=function(t,n,r){if(!r.textPath||!r.textPath.enabled)return e.prototype.alignDataLabel.apply(this,arguments)},t.prototype.animate=function(e){var t=this.chart,n=[t.plotWidth/2,t.plotHeight/2],r=t.plotLeft,i=t.plotTop;t=this.group,e?t.attr(e={translateX:n[0]+r,translateY:n[1]+i,scaleX:.001,scaleY:.001,rotation:10,opacity:.01}):t.animate(e={translateX:r,translateY:i,scaleX:1,scaleY:1,rotation:0,opacity:1},this.options.animation)},t.prototype.drawPoints=function(){var e=this,t=e.mapOptionsToLevel,n=e.shapeRoot,r=e.group,i=e.hasRendered,o=e.rootNode,a=e.idPreviousRoot,s=e.nodeMap,l=s[a],c=l&&l.shapeArgs;l=e.points;var p=e.startAndEndRadians,h=e.chart,u=h&&h.options&&h.options.chart||{},m="boolean"!=typeof u.animation||u.animation,f=e.center[3]/2,v=e.chart.renderer,g=!1,b=!1;if(u=!!(m&&i&&o!==a&&e.dataLabelsGroup)){e.dataLabelsGroup.attr({opacity:0});var I=function(){g=!0,e.dataLabelsGroup&&e.dataLabelsGroup.animate({opacity:1,visibility:"visible"})}}l.forEach(function(l){var d=l.node,u=t[d.level],g=l.shapeExisting||{},C=d.shapeArgs||{},k=!(!d.visible||!d.shapeArgs);if(i&&m){var T={},A={end:C.end,start:C.start,innerR:C.innerR,r:C.r,x:C.x,y:C.y};k?!l.graphic&&c&&((T=o===l.id?{start:p.start,end:p.end}:c.end<=C.start?{start:p.end,end:p.end}:{start:p.start,end:p.start}).innerR=T.r=f):l.graphic&&(a===l.id?A={innerR:f,r:f}:n&&(A=n.end<=g.start?{innerR:f,r:f,start:p.end,end:p.end}:{innerR:f,r:f,start:p.start,end:p.start})),g=T}else A=C,g={};if(!l.node.isLeaf)if(o===l.id){var P=s[o];P=P.parent}else P=l.id;if(y(l,{shapeExisting:C,tooltipPos:T=[C.plotX,C.plotY],drillId:P,name:""+(l.name||l.id||l.index),plotX:C.plotX,plotY:C.plotY,value:d.val,isNull:!k}),P=l.options,d=w(C)?C:{},P=w(P)?P.dataLabels:{},u=O(w(u)?u.dataLabels:{})[0],P=(u=x({style:{}},u,P)).rotationMode,!S(u.rotation)){if("auto"===P||"circular"===P)if(1>l.innerArcLength&&l.outerArcLength>d.radius){var R=0;l.dataLabelPath&&"circular"===P&&(u.textPath={enabled:!0})}else 1<l.innerArcLength&&l.outerArcLength>1.5*d.radius?"circular"===P?u.textPath={enabled:!0,attributes:{dy:5}}:P="parallel":(l.dataLabel&&l.dataLabel.textPathWrapper&&"circular"===P&&(u.textPath={enabled:!1}),P="perpendicular");"auto"!==P&&"circular"!==P&&(R=d.end-(d.end-d.start)/2),u.style.width="parallel"===P?Math.min(2.5*d.radius,(l.outerArcLength+l.innerArcLength)/2):d.radius,"perpendicular"===P&&l.series.chart.renderer.fontMetrics(u.style.fontSize).h>l.outerArcLength&&(u.style.width=1),u.style.width=Math.max(u.style.width-2*(u.padding||0),1),R=R*D%180,"parallel"===P&&(R-=90),90<R?R-=180:-90>R&&(R+=180),u.rotation=R}if(u.textPath&&(0===l.shapeExisting.innerR&&u.textPath.enabled?(u.rotation=0,u.textPath.enabled=!1,u.style.width=Math.max(2*l.shapeExisting.r-2*(u.padding||0),1)):l.dlOptions&&l.dlOptions.textPath&&!l.dlOptions.textPath.enabled&&"circular"===P&&(u.textPath.enabled=!0),u.textPath.enabled&&(u.rotation=0,u.style.width=Math.max((l.outerArcLength+l.innerArcLength)/2-2*(u.padding||0),1))),0===u.rotation&&(u.rotation=.001),l.dlOptions=u,!b&&k){b=!0;var M=I}l.draw({animatableAttribs:A,attribs:y(g,!h.styledMode&&e.pointAttribs(l,l.selected&&"select")),onComplete:M,group:r,renderer:v,shapeType:"arc",shapeArgs:C})}),u&&b?(e.hasRendered=!1,e.options.dataLabels.defer=!0,d.prototype.drawDataLabels.call(e),e.hasRendered=!0,g&&I()):d.prototype.drawDataLabels.call(e)},t.prototype.layoutAlgorithm=function(e,t,n){var r=e.start,i=e.end-r,o=e.val,a=e.x,s=e.y,l=n&&w(n.levelSize)&&S(n.levelSize.value)?n.levelSize.value:0,c=e.r,p=c+l,d=n&&S(n.slicedOffset)?n.slicedOffset:0;return(t||[]).reduce(function(e,t){var n=1/o*t.val*i,h=r+n/2,u=a+Math.cos(h)*d;return h=s+Math.sin(h)*d,e.push(t={x:t.sliced?u:a,y:t.sliced?h:s,innerR:c,r:p,radius:l,start:r,end:r+n}),r=t.end,e},[])},t.prototype.setShapeArgs=function(e,t,n){var r,i=n[e.level+1];e=e.children.filter(function(e){return e.visible}),r=this.layoutAlgorithm(t,e,i),e.forEach(function(e,t){var i=(t=r[t]).start+(t.end-t.start)/2,o=t.innerR+(t.r-t.innerR)/2,a=t.end-t.start;o=0===t.innerR&&6.28<a?{x:t.x,y:t.y}:{x:t.x+Math.cos(i)*o,y:t.y+Math.sin(i)*o};var s=e.val?e.childrenTotal>e.val?e.childrenTotal:e.val:e.childrenTotal;this.points[e.i]&&(this.points[e.i].innerArcLength=a*t.innerR,this.points[e.i].outerArcLength=a*t.r),e.shapeArgs=x(t,{plotX:o.x,plotY:o.y+4*Math.abs(Math.cos(i))}),e.values=x(t,{val:s}),e.children.length&&this.setShapeArgs(e,e.values,n)},this)},t.prototype.translate=function(){var e=this,t=e.options,n=e.center=c.call(e),r=e.startAndEndRadians=p(t.startAngle,t.endAngle),o=n[3]/2,a=n[2]/2-o,l=g(e),h=e.nodeMap,u=h&&h[l],m={};e.shapeRoot=u&&u.shapeArgs,d.prototype.translate.call(e);var y=e.tree=e.getTree();e.renderTraverseUpButton(l);var S=I((u=(h=e.nodeMap)[l]).parent)?u.parent:"";S=h[S];var w=i.getLevelFromAndTo(u),x=w.from,O=w.to;w=f({from:x,levels:e.options.levels,to:O,defaults:{colorByPoint:t.colorByPoint,dataLabels:t.dataLabels,levelIsConstant:t.levelIsConstant,levelSize:t.levelSize,slicedOffset:t.slicedOffset}}),w=i.calculateLevelSizes(w,{diffRadius:a,from:x,to:O}),v(y,{before:s,idRoot:l,levelIsConstant:t.levelIsConstant,mapOptionsToLevel:w,mapIdToNode:h,points:e.points,series:e}),t=h[""].shapeArgs={end:r.end,r:o,start:r.start,val:u.val,x:n[0],y:n[1]},this.setShapeArgs(S,t,w),e.mapOptionsToLevel=w,e.data.forEach(function(t){m[t.id]&&b(31,!1,e.chart),m[t.id]=!0}),m={}},t.defaultOptions=x(u.defaultOptions,{center:["50%","50%"],colorByPoint:!1,opacity:1,dataLabels:{allowOverlap:!0,defer:!0,rotationMode:"auto",style:{textOverflow:"ellipsis"}},rootId:void 0,levelIsConstant:!0,levelSize:{value:1,unit:"weight"},slicedOffset:10}),t}(u),y(o.prototype,{drawDataLabels:e,pointAttribs:t.prototype.pointAttribs,pointClass:r,utils:i}),n.registerSeriesType("sunburst",o),o}),t(e,"masters/modules/sunburst.src.js",[],function(){})},e.exports?(o.default=o,e.exports=o):(r=[n("6n/F")],void 0===(i=(function(e){return o(e),o.Highcharts=e,o}).apply(t,r))||(e.exports=i))},jgGb:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("ofXK"),i=n("3Pt+"),o=n("1kSV"),a=n("oAWB"),s=n("o4o7"),l=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,i.l,s.a,o.x,a.a]]}),e})()},znf5:function(e,t,n){"use strict";n.d(t,"a",function(){return oe});var r=n("fXoL"),i=n("AytR"),o=n("eIep"),a=n("8J6U"),s=n("xDUJ"),l=n("1kSV"),c=n("kmKP"),p=n("Jn3s"),d=n("3Pt+");let h=(()=>{class e{constructor(e,t,n){this.formService=e,this.activeModal=t,this.userService=n,this.formSectionComment="",this.user=this.userService.user.getValue(),this.contactID=this.user.contactID}ngOnInit(){}submit(){this.loading=!0;const e={formSectionReviewTaskOwnerID:this.formSectionReviewTaskOwnerID,formSectionID:this.formSectionID,formSectionComment:this.formSectionComment,taskOwnerID:this.taskOwnerID,editContactiD:this.contactID,dateSubmitted:Object(a.a)(new Date)};this.formService.updateSectionReviewOwner(e).subscribe(()=>{this.activeModal.close(this.formSectionComment),this.loading=!1})}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-section-owner-comment"]],decls:17,vars:4,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],["f","ngForm"],[1,"d-flex","flex-column"],[1,"form-group"],["for","userInviteMessage"],["name","userInviteMessage","required","","id","userInviteMessage",1,"form-control","textarea",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h5",1),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"button",2),r["\u0275\u0275listener"]("click",function(){return t.dismiss()}),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5,"\xd7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"form",null,5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"div",7),r["\u0275\u0275elementStart"](11,"label",8),r["\u0275\u0275text"](12,"Comment"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"textarea",9),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.formSectionComment=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",10),r["\u0275\u0275elementStart"](15,"button",11),r["\u0275\u0275listener"]("click",function(){return t.submit()}),r["\u0275\u0275text"](16," Submit "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275reference"](8);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",t.formSectionTitle," "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("avnonLoader",t.loading),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModel",t.formSectionComment),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",e.invalid||t.loading)}},directives:[p.a,d.E,d.r,d.s,d.b,d.A,d.q,d.t],styles:[".textarea[_ngcontent-%COMP%]{min-height:200px}"]}),e})();var u=n("cp0P"),m=n("LRne"),f=n("6n/F"),v=n("7Ow8"),g=n("w6ya"),b=n("4CJs"),y=n("VgRj"),S=n("3DXX"),w=n("ofXK"),I=n("9122"),x=n("ev4g"),O=n("Hu2X"),D=n("tyNb"),C=n("Ujtm"),k=n("1bi4"),T=n("9nlD"),A=n("S2+F"),P=n("5eHb"),R=n("euQB"),M=n("f3yp"),L=n("mp/k"),j=n("SdWN"),E=n("0mlJ"),N=n("jhN1");let _=(()=>{class e{constructor(e){this.domSanitizer=e}transform(e){return this.domSanitizer.bypassSecurityTrustHtml(e)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](N.b))},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"commentSanitize",type:e,pure:!0}),e})();function B(e,t){1&e&&r["\u0275\u0275element"](0,"app-spinner")}function V(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",28),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).downloadReport()}),r["\u0275\u0275template"](1,B,1,0,"app-spinner",2),r["\u0275\u0275text"](2," Print Report "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("disabled",e.downloadingReport),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.downloadingReport)}}function F(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"li",23),r["\u0275\u0275elementStart"](1,"a",24),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).setTabView(1)}),r["\u0275\u0275text"](2," Summary "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("active",1===e.tabView)}}function U(e,t){if(1&e&&(r["\u0275\u0275element"](0,"div",42),r["\u0275\u0275pipe"](1,"commentSanitize")),2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind1"](1,1,e.formSectionComment),r["\u0275\u0275sanitizeHtml"])}}function z(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",43),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().index;return r["\u0275\u0275nextContext"](3).openCommentDialog(t,!0)}),r["\u0275\u0275elementEnd"]()}}function X(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"tr"),r["\u0275\u0275elementStart"](2,"td",33),r["\u0275\u0275elementStart"](3,"h1",34),r["\u0275\u0275text"](4),r["\u0275\u0275pipe"](5,"percent"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"tr"),r["\u0275\u0275elementStart"](7,"td",35),r["\u0275\u0275elementStart"](8,"div",36),r["\u0275\u0275elementStart"](9,"ul",37),r["\u0275\u0275elementStart"](10,"li",38),r["\u0275\u0275elementStart"](11,"div",39),r["\u0275\u0275template"](12,U,2,3,"div",40),r["\u0275\u0275template"](13,z,1,0,"span",41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate2"]("",e.parentSection," - ",r["\u0275\u0275pipeBind1"](5,4,e.score),""),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",e.formSectionComment),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.hasAccess)}}function W(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"h1",29),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"percent"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"div",30),r["\u0275\u0275elementStart"](5,"table",31),r["\u0275\u0275elementStart"](6,"tbody"),r["\u0275\u0275template"](7,X,14,6,"ng-container",32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("You scored ",r["\u0275\u0275pipeBind1"](3,2,e.score),""),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",e.parentSections)}}function H(e,t){if(1&e&&r["\u0275\u0275element"](0,"app-form-review-feedback-limited",44),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("formFieldAnswerCategoryID",1)("contactID",e.taskOwner.contactID)("formID",e.taskOwner.formID)("taskOwner",e.taskOwner)("limited",!0)("showScore",!1)("showSummary",!0)("answerReferenceID",e.taskOwner.taskOwnerID)}}function G(e,t){1&e&&r["\u0275\u0275element"](0,"app-spinner")}function $(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",50),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](3).sendReport()}),r["\u0275\u0275template"](1,G,1,0,"app-spinner",2),r["\u0275\u0275text"](2," Send Report "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("disabled",e.sendingReport),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.sendingReport)}}function Y(e,t){1&e&&r["\u0275\u0275element"](0,"app-spinner")}function q(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",50),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](3).backToTask()}),r["\u0275\u0275template"](1,Y,1,0,"app-spinner",2),r["\u0275\u0275text"](2," Back to task "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("disabled",e.sendingReport),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.sendingReport)}}const K=function(){return[2837,2791]},J=function(){return[2791,2837]};function Z(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",45),r["\u0275\u0275elementStart"](1,"div",46),r["\u0275\u0275elementStart"](2,"div",47),r["\u0275\u0275elementStart"](3,"button",48),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).preview()}),r["\u0275\u0275text"](4,"Read Answers"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,$,3,2,"button",49),r["\u0275\u0275template"](6,q,3,2,"button",49),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"hr"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pureFunction0"](2,K).includes(e.formID)||2===(null==e.taskOwner?null:e.taskOwner.formTypeID)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pureFunction0"](3,J).includes(e.formID)&&2!==(null==e.taskOwner?null:e.taskOwner.formTypeID))}}function Q(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div",3),r["\u0275\u0275elementStart"](2,"div",4),r["\u0275\u0275elementStart"](3,"div"),r["\u0275\u0275elementStart"](4,"span",5),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().goBack()}),r["\u0275\u0275element"](5,"i",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"h1",7),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",8),r["\u0275\u0275elementStart"](9,"span",9),r["\u0275\u0275element"](10,"img",10),r["\u0275\u0275pipe"](11,"avatar"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",11),r["\u0275\u0275elementStart"](13,"div"),r["\u0275\u0275elementStart"](14,"h2",12),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"p",13),r["\u0275\u0275text"](17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](18,V,3,2,"button",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"div",15),r["\u0275\u0275elementStart"](20,"p",16),r["\u0275\u0275text"](21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",17),r["\u0275\u0275elementStart"](23,"span",18),r["\u0275\u0275element"](24,"i",19),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"date"),r["\u0275\u0275pipe"](27,"dateObject"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"span",18),r["\u0275\u0275element"](29,"i",20),r["\u0275\u0275text"](30),r["\u0275\u0275pipe"](31,"percent"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",21),r["\u0275\u0275elementStart"](33,"ul",22),r["\u0275\u0275elementStart"](34,"li",23),r["\u0275\u0275elementStart"](35,"a",24),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().setTabView(0)}),r["\u0275\u0275text"](36,"Analysis"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](37,F,3,2,"li",25),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](38,W,8,4,"ng-container",2),r["\u0275\u0275template"](39,H,1,8,"app-form-review-feedback-limited",26),r["\u0275\u0275template"](40,Z,8,4,"div",27),r["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate1"]("",null==e.taskOwner?null:e.taskOwner.taskTitle," - Scorecard"),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("src",r["\u0275\u0275pipeBind1"](11,15,e.taskOwner.profilePhoto),r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate2"](" ",e.taskOwner.firstName," ",e.taskOwner.surname," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",e.taskOwner.companyName," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pureFunction0"](24,K).includes(e.formID)||2===(null==e.taskOwner?null:e.taskOwner.formTypeID)),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",null==e.taskOwner?null:e.taskOwner.taskTitle," - Scorecard "),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](26,17,r["\u0275\u0275pipeBind1"](27,20,e.taskOwner.dateSentForSignOff),"dd MMM yyyy")," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" You scored ",r["\u0275\u0275pipeBind1"](31,22,e.score)," "),r["\u0275\u0275advance"](5),r["\u0275\u0275classProp"]("active",0===e.tabView),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.hasAccess),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",0===e.tabView),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",1!==e.taskOwner.taskStatusID&&1===e.tabView),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.hasAccess)}}const ee=n("2BfV"),te=n("Tos5"),ne=n("M8aS"),re=n("zF3M"),ie=n("TmwG");ee(f),te(f),ne(f),re(f),ie(f);let oe=(()=>{class e{constructor(e,t,n,o,a,s,l,c,p,d,h,u,m,f){this.taskService=e,this.formService=t,this.companyService=n,this.activatedRoute=o,this.reportService=a,this.distributionService=s,this.notificationService=l,this.signalRService=c,this.modal=p,this.toastrService=d,this.router=h,this.portfolioService=u,this.userService=m,this.location=f,this.closeForm=new r.EventEmitter,this.referenceID=0,this.isLoading=!1,this.parentSections=[],this.sections=[],this.apiBlobUrl=i.a.apiBlobUrl+"/",this.score=0,this.tabView=0,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}set Value(e){this.companyStage=e,this.programInstanceStageID=e.programInstanceStageID,this.taskOwner=null,this.parentSections=[],this.sections=[],this.tabView=0,this.initData()}set Owner(e){this.taskOwner=null,this.parentSections=[],this.sections=[],this.tabView=0,this.initData()}ngOnInit(){this.rhp||(this.formID=+this.activatedRoute.snapshot.params.formID,this.formCategoryID=+this.activatedRoute.snapshot.params.formCategoryID,this.answerReferenceID=+this.activatedRoute.snapshot.params.answerReferenceID,this.taskOwnerID=+this.activatedRoute.snapshot.params.answerReferenceID,this.formFieldAnswerCategoryID=+this.activatedRoute.snapshot.params.formFieldAnswerCategoryID,this.programInstanceStageID=+this.activatedRoute.snapshot.queryParams.programInstanceStageID,this.initData())}initData(){this.isLoading=!0,this.formService.getForm(0,0,this.formID).subscribe(e=>{this.formProfile=e[0]||null}),this.taskService.getTaskOwners(0,0,0,0,this.taskOwnerID).pipe(Object(o.a)(e=>(this.taskOwner=e[0],this.hasAccess=this.taskOwner.submittedBy===this.contactID,this.hasAccess||(this.hasAccess=this.user.permissions.some(e=>[I.b.ProgramManager,I.b.Startup_Supporter].includes(e.permissionAreaID))),this.formID||(this.formID=this.taskOwner.formID),this.formService.getSectionScores(this.taskOwnerID)))).subscribe(e=>{var t;(null===(t=this.taskOwner)||void 0===t?void 0:t.taskID)&&!this.rhp&&this.getParentTask(this.taskOwner.taskID),e=Object(a.j)(e,"formSectionID").map(t=>{const n=e.filter(e=>e.formSectionID===t.formSectionID);if(t.maxSectionScore=n.reduce((e,t)=>e+t.maxSectionScore,0),t.totalScore=n.reduce((e,t)=>e+t.totalScore,0),t.score=t.totalScore/t.maxSectionScore||0,100*t.score<=60){const e=new w.t("en");t.formSectionComment=t.formSectionTitle+" "+e.transform(t.score)}return t}),Object(a.j)(e,"parentSectionID").forEach(e=>{e.parentSectionID&&0===this.parentSections.filter(t=>t.parentSectionID===e.parentSectionID).length&&this.parentSections.push(Object(a.l)(e))}),this.parentSections=this.parentSections.map(t=>{const n=e.filter(e=>e.parentSectionID===t.parentSectionID);return t.totalScore=n.reduce((e,t)=>e+t.totalScore,0),t.maxSectionScore=n.reduce((e,t)=>e+t.maxSectionScore,0),t.score=t.totalScore/t.maxSectionScore||0,t}),this.score=this.parentSections.reduce((e,t)=>t.totalScore+e,0)/this.parentSections.reduce((e,t)=>t.maxSectionScore+e,0);const n=[];this.parentSections.forEach(e=>{let t=100*e.score;t===1/0&&(t=0),n.push(this.formService.getSectionReviewOwner(0,e.parentSectionID,this.taskOwnerID,t))}),e.forEach(e=>{let t=100*e.score;t===1/0&&(t=0),n.push(this.formService.getSectionReviewOwner(0,e.formSectionID,this.taskOwnerID,t))}),this.commentsLoading=!0,(n.length?Object(u.a)(n):Object(m.a)([])).subscribe(t=>{t.forEach(t=>{if(t[0]){const n=e.findIndex(e=>e.formSectionID===t[0].formSectionID),r=this.parentSections.findIndex(e=>e.parentSectionID===t[0].formSectionID);if(-1!==n&&(t[0].formSectionComment&&(e[n].formSectionComment=t[0].formSectionComment),e[n].formSectionReviewTaskOwnerID=t[0].formSectionReviewTaskOwnerID),-1!==r){const n=this.parentSections[r];t[0].formSectionComment&&(this.parentSections[r].formSectionComment=t[0].formSectionComment),this.parentSections[r].formSectionReviewTaskOwnerID=t[0].formSectionReviewTaskOwnerID;const i=e.filter(e=>e.parentSectionID===n.parentSectionID&&100*e.score<=60);if(i.length&&!t[0].dateSubmitted){const e=n.formSectionComment.includes("<b>Tools & Resources</b>")||n.formSectionComment.includes("<b>Tools and Resources</b>");let t="";i.forEach(e=>{t+=`<li>${e.formSectionComment}</li>`});let o="<b>Action Plan:</b>";o+=`<br/>Please pay attention to the following areas of the ${n.parentSection} business pillar`;const s=`\n${o}\n<ul>\n${t}\n</ul><br>`;if(e){const e=s+"<b>Tools & Resources</b>";n.formSectionComment=n.formSectionComment.replace("<b>Tools & Resources</b>",s+"<b>Tools & Resources</b>").replace("<b>Tools and Resources</b>",e),this.parentSections[r].formSectionComment=n.formSectionComment;const t={formSectionReviewTaskOwnerID:n.formSectionReviewTaskOwnerID,formSectionID:n.parentSectionID,formSectionComment:n.formSectionComment,taskOwnerID:this.taskOwnerID,editContactiD:this.contactID,dateSubmitted:Object(a.a)(new Date)};this.formService.updateSectionReviewOwner(t).subscribe()}}}}}),this.commentsLoading=!1}),this.sections=e,this.generateChart(),this.isLoading=!1})}openCommentDialog(e,t=!1){const n=this.modal.open(h,{backdrop:"static",size:"lg"});let r;n.componentInstance.taskOwnerID=this.taskOwner.taskOwnerID,t?(r=this.parentSections[e],n.componentInstance.formSectionID=r.parentSectionID,n.componentInstance.formSectionTitle=r.parentSection):(r=this.sections[e],n.componentInstance.formSectionID=r.formSectionID,n.componentInstance.formSectionTitle=r.formSectionTitle),n.componentInstance.formSectionComment=r.formSectionComment,n.componentInstance.formSectionReviewTaskOwnerID=r.formSectionReviewTaskOwnerID,n.result.then(n=>{t?this.parentSections[e].formSectionComment=n:this.sections[e].formSectionComment=n})}downloadReport(){var e,t;let n=this.taskOwner.taskOwnerID;this.programInstanceStageID&&(n=this.programInstanceStageID),this.downloadingReport=!0;const r=(null===(e=this.taskOwner)||void 0===e?void 0:e.companyName)||(null===(t=this.companyStage)||void 0===t?void 0:t.companyName);this.reportService.getDiagnosticReport(this.taskOwnerID,n,this.taskOwner.taskCategoryID,this.formID,1,this.taskOwner.companyID).subscribe(e=>{const t=e.headers.get("Content-Disposition"),n=Object(a.a)(new Date);let i=(null==t?void 0:t.split("filename=").pop())||`Pipeline_${n}.pdf`;if(i=r.replace(/ /g,"_"),this.companyStage){let e=this.companyStage.programTitle.replace(/ /g,"_");2326===this.companyStage.programID&&(e="FnbSdDiagnostic"),2332===this.companyStage.programID&&(e="FnbXeroDiagnostic"),i=i+"_"+e}i+=".pdf";const o=new Blob([e.body],{type:"application/pdf"}),s=window.URL.createObjectURL(o),l=document.createElement("a");l.href=s,l.download=i||"",l.click(),this.downloadingReport=!1},()=>{this.toastrService.warning("Cannot generate Report"),this.downloadingReport=!1})}preview(){this.taskOwner.taskOwners=[this.taskOwner];const e=this.modal.open(v.a,{size:"lg",backdrop:"static",scrollable:!0});e.componentInstance.reviews=[this.taskOwner],e.componentInstance.limited=!0}sendReport(){this.sendingReport=!0,this.taskOwner.taskStatusID=3,this.taskOwner.dateSentForSignOff=Object(a.a)(new Date),this.taskService.updateTaskOwner(this.taskOwner).subscribe(()=>{this.noticeAdmin(),this.sendingReport=!1,this.toastrService.success("Report has been sent!"),this.router.navigate(["/task",this.taskOwner.taskID])})}noticeAdmin(){let e=`Your personalised ${this.taskOwner.taskTitle} report scorecard is ready for review `,t="Form Review";this.companyStage&&(e=`Your personalised ${this.companyStage.programTitle} scorecard is ready for review`,t=this.companyStage+" Diagnostic Scorecard");const n={notificationCategoryID:g.a.form_report_scorecard_review,referenceID:this.taskOwner.taskOwnerID,contactID:this.taskOwner.contactID,description:e,createdContact:this.contactID},r=Object(a.a)(new Date)+"|"+this.taskOwner.taskOwnerID,i={date:Object(a.a)(new Date),body:e.replace("|",""),topic:e.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:this.taskOwner.taskOwnerID,notificationType:b.a.connectRequest,senderId:n.createdContact,receivers:[n.contactID],uniqueId:r,discussionId:0};this.notificationService.noticeNotification(n).subscribe(()=>{this.signalRService.transferMessage("dashboard",i)});const o=y.a.fullDomain()+`/form/report/${this.taskOwner.formID}/${this.formCategoryID}/${this.answerReferenceID}/${this.formFieldAnswerCategoryID}`;let s=`\n\t\t\t\t\t<p>Hi ${this.taskOwner.firstName}</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p>${e}</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<a href="${o}">See Details</a>\n\t\t\t\t`;this.companyStage.masterCompanyLogo&&(s=S.a.logo(this.apiBlobUrl+"512px/"+this.companyStage.masterCompanyLogo)+s);const l={distributionTitle:t,distributionCategoryID:null,referenceID:this.taskOwner.taskOwnerID,distributionDate:null,userID:this.user.contactID,emailBody:S.a.template(s),subjectLine:t,senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[this.taskOwner.contactID]};this.distributionService.create(l).subscribe()}backToTask(){this.rhp?this.goBack():this.router.navigate(["/task",this.taskOwner.taskID])}getParentTask(e){this.taskService.getTask(e,0,0,0,0,0,0,0).pipe(Object(o.a)(e=>e[0].parentTaskID?this.taskService.getTask(e[0].parentTaskID,0,0,0,0,0,0,0):Object(m.a)([]))).subscribe(e=>{e[0]&&38===e[0].taskCategoryID&&(this.programInstanceStageID=e[0].referenceID,this.portfolioService.getCompanyRoadmapStages(this.taskOwner.companyID,0,0,0,this.programInstanceStageID,0).subscribe(e=>{e[0]&&(this.companyStage=e[0])}))})}generateChart(){f.setOptions({credits:{enabled:!1}});const e=["#F2B0A2","#F2CCA2","#EFF2A2","#D5F3A2"],t=[{id:"0.0",parent:"",name:"Overall",color:"transparent"}],n=this;this.parentSections.sort((e,t)=>e.score-t.score).forEach((n,r)=>{t.push({id:"1."+(r+1),parent:"0.0",name:n.parentSection,value:+(100*n.score).toFixed(2),color:"#fff",borderColor:"#cacaca",dataLabels:{style:{fontWeight:"bold"}}}),this.sections.filter(e=>e.parentSectionID===n.parentSectionID).sort((e,t)=>e.score-t.score).forEach((i,o)=>{let a=e[0];const s=100*i.score;s<=49&&s>=31&&(a=e[1]),s<=70&&s>=50&&(a=e[2]),s<=100&&s>=70&&(a=e[3]),t.push({id:`${n.formSectionID}.${o+1}`,parent:"1."+(r+1),name:i.formSectionTitle,borderColor:"#cacaca",value:+(100*i.score).toFixed(2),color:a,dataLabels:{shadow:!1,color:"#000",borderWidth:0}})})}),this.chart=f.chart("spider",{chart:{height:"100%"},title:{text:""},series:[{type:"sunburst",data:t,allowDrillToNode:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.name}",rotationMode:"circular"},levels:[{level:1,levelIsConstant:!0,levelSize:{unit:"pixels",value:40},dataLabels:{enabled:!1}},{level:2,levelSize:{unit:"pixels",value:80}}]}],tooltip:{headerFormat:"",pointFormat:"Your <b>{point.name}</b> score is <b>{point.value}%</b>",formatter:function(){return"Overall"===this.point.name?`Your <b>${this.point.name}</b> score is <b>${(100*n.score).toFixed(2)}%</b>`:`Your <b>${this.point.name}</b> score is <b>${this.point.value}%</b>`}},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){n.previewAnswerChart(this.name)}}}}}})}previewAnswerChart(e){if(this.taskOwner.taskOwners=[this.taskOwner],e){const t=this.sections.find(t=>t.formSectionTitle===e);if(t){const e=this.modal.open(v.a,{size:"lg",backdrop:"static",scrollable:!0});e.componentInstance.reviews=[this.taskOwner],e.componentInstance.limited=!1,e.componentInstance.activeSection=t}}}goBack(){this.rhp?this.closeForm.emit(!0):this.location.back()}setTabView(e=0){this.tabView=e,0===e&&setTimeout(()=>{this.generateChart()})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](x.a),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](O.a),r["\u0275\u0275directiveInject"](D.a),r["\u0275\u0275directiveInject"](C.a),r["\u0275\u0275directiveInject"](k.a),r["\u0275\u0275directiveInject"](T.a),r["\u0275\u0275directiveInject"](A.a),r["\u0275\u0275directiveInject"](l.p),r["\u0275\u0275directiveInject"](P.b),r["\u0275\u0275directiveInject"](D.c),r["\u0275\u0275directiveInject"](R.a),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](w.j))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-report"]],inputs:{Value:["activeApplicant","Value"],Owner:["activeTaskOwner","Owner"],formCategoryID:"formCategoryID",answerReferenceID:"answerReferenceID",formFieldAnswerCategoryID:"formFieldAnswerCategoryID",formID:"formID",taskOwnerID:"taskOwnerID",rhp:"rhp"},outputs:{closeForm:"closeForm"},decls:3,vars:6,consts:[[1,"d-flex"],[1,"form-page",3,"avnonLoader"],[4,"ngIf"],[1,"page-title"],[1,"d-flex","justify-content-between","align-items-center"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"entry","border-none","pb-0"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48","cover",3,"src"],[1,"d-flex","justify-content-between"],[1,"mt-1"],[1,"d-inline"],["class","btn btn-primary btn-sm ml-2 float-right",3,"disabled","click",4,"ngIf"],[1,"profile-overview","pt-0","pb-0","mt-0"],[1,"p-23"],[1,"icon-list","mt-2"],[1,"text-muted","other","mt-2","mr-4"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-list-alt"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],[1,"nav-link",3,"click"],["class","nav-item",4,"ngIf"],["class","mt-2",3,"formFieldAnswerCategoryID","contactID","formID","taskOwner","limited","showScore","showSummary","answerReferenceID",4,"ngIf"],["class","row mt-auto",4,"ngIf"],[1,"btn","btn-primary","btn-sm","ml-2","float-right",3,"disabled","click"],[1,"pl-3","pr-3","mt-4"],["id","spider",1,"d-flex","w-100","position-relative","spider"],[1,"table","table-bordered","border-0","w-100","float-left"],[4,"ngFor","ngForOf"],[1,"border-left-0","border-right-0","pl-3","border-bottom-0","pb-0"],[1,"m-0"],["colspan","3",1,"border-0","pl-0","pr-0"],[1,"d-flex","flex-column"],[1,"analysis-list"],[1,"pl-3","pr-3","pt-1","pb-1"],[1,"d-flex","w-100"],["class","mr-2 mb-0 comment-content",3,"innerHTML",4,"ngIf"],["class","fas fa-pencil-alt cursor-pointer ml-auto",3,"click",4,"ngIf"],[1,"mr-2","mb-0","comment-content",3,"innerHTML"],[1,"fas","fa-pencil-alt","cursor-pointer","ml-auto",3,"click"],[1,"mt-2",3,"formFieldAnswerCategoryID","contactID","formID","taskOwner","limited","showScore","showSummary","answerReferenceID"],[1,"row","mt-auto"],[1,"col-12"],[1,"form-group","d-flex","w-100","justify-content-end","pr-3","pl-3"],[1,"btn","btn-outline-primary","mr-2",3,"click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275template"](2,Q,41,25,"ng-container",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275classProp"]("task-right-panel",t.rhp),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("w-100",t.rhp),r["\u0275\u0275property"]("avnonLoader",t.isLoading||t.commentsLoading),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.taskOwner))},directives:[p.a,w.n,M.a,w.m,L.a],pipes:[j.a,w.e,E.a,w.t,_],styles:[".avatar-140[_ngcontent-%COMP%]{height:140px;min-width:140px;object-fit:cover}.chart-container[_ngcontent-%COMP%]{height:400px}.analysis-list[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.analysis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:1}.analysis-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f0f3ff}.w-70[_ngcontent-%COMP%]{width:70px}.analysis-title[_ngcontent-%COMP%]{font-style:italic;font-size:15px}.form-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.score-color[_ngcontent-%COMP%]{color:#4f6dd9}.spider[_ngcontent-%COMP%]{overflow:inherit!important}"]}),e})()}}]);