(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"0alx":function(e,t,n){"use strict";var i=n("VKeD");t.isIterable=function(e){return e&&"function"==typeof e[i.iterator]}},"2KeD":function(e,t,n){"use strict";var i=n("Q1FS"),s=n("zB/H"),o=n("zfKp");t.scheduleObservable=function(e,t){return new i.Observable(function(n){var i=new s.Subscription;return i.add(t.schedule(function(){var s=e[o.observable]();i.add(s.subscribe({next:function(e){i.add(t.schedule(function(){return n.next(e)}))},error:function(e){i.add(t.schedule(function(){return n.error(e)}))},complete:function(){i.add(t.schedule(function(){return n.complete()}))}}))})),i})}},"2qMH":function(e,t,n){"use strict";var i=n("Q1FS"),s=n("zB/H");t.scheduleArray=function(e,t){return new i.Observable(function(n){var i=new s.Subscription,o=0;return i.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||i.add(this.schedule())):n.complete()})),i})}},"6aLS":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=n("q3Kh"),o=n("gTqA"),a=n("wjEo");t.switchMap=function e(t,n){return"function"==typeof n?function(i){return i.pipe(e(function(e,i){return o.from(t(e,i)).pipe(s.map(function(t,s){return n(e,t,i,s)}))}))}:function(e){return e.lift(new c(t))}};var c=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new r(e,this.project))},e}(),r=function(e){function t(t,n){var i=e.call(this,t)||this;return i.project=n,i.index=0,i}return i(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new a.SimpleInnerSubscriber(this),i=this.destination;i.add(n),this.innerSubscription=a.innerSubscribe(e,n),this.innerSubscription!==n&&i.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(a.SimpleOuterSubscriber)},"6qA3":function(e,t,n){"use strict";var i=n("OAkW"),s=n("Z5tI"),o=n("poJ0"),a=n("ozli"),c=n("yRPT"),r=n("90cg"),d=n("GMZp"),l=n("VKeD"),u=n("zfKp");t.subscribeTo=function(e){if(e&&"function"==typeof e[u.observable])return a.subscribeToObservable(e);if(c.isArrayLike(e))return i.subscribeToArray(e);if(r.isPromise(e))return s.subscribeToPromise(e);if(e&&"function"==typeof e[l.iterator])return o.subscribeToIterable(e);var t=d.isObject(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"90cg":function(e,t,n){"use strict";t.isPromise=function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},CEgs:function(e,t,n){"use strict";n.r(t),n.d(t,"ChatsModule",function(){return pt});var i=n("ofXK"),s=n("3Pt+"),o=n("TIDI"),a=n("6pDZ"),c=n("o4o7"),r=n("j4PG"),d=n("V6Zj"),l=n("PCNd"),u=n("ZLSo"),p=n("zemM"),h=n("1kSV"),m=n("sYmb"),g=n("Kdsb"),f=n("tyNb"),v=n("OzGw"),b=n("BN3N"),I=n("w6ya"),C=n("frau"),y=n("3nm2"),M=n("6nfG"),x=n("8J6U"),D=n("xJDW"),S=n("4CJs"),w=n("AytR"),O=n("Wgwc"),E=n("XIp8"),P=n("XNiG"),_=n("cp0P"),k=n("LRne"),T=n("6aLS"),A=n("eIep"),j=n("fXoL"),R=n("XAmU"),V=n("5eHb"),G=n("9nlD"),N=n("S2+F"),L=n("f3yp");function B(e,t){1&e&&(j["\u0275\u0275elementStart"](0,"h5",16),j["\u0275\u0275text"](1),j["\u0275\u0275pipe"](2,"translate"),j["\u0275\u0275elementEnd"]()),2&e&&(j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate1"](" ",j["\u0275\u0275pipeBind1"](2,1,"CHAT-GROUP-ADD.HEADING")," "))}function $(e,t){1&e&&(j["\u0275\u0275elementStart"](0,"h5",17),j["\u0275\u0275text"](1),j["\u0275\u0275pipe"](2,"translate"),j["\u0275\u0275elementEnd"]()),2&e&&(j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate1"](" ",j["\u0275\u0275pipeBind1"](2,1,"CHAT-GROUP-ADD.UPDATE-HEADING")," "))}function F(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"span",22),j["\u0275\u0275text"](1),j["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate1"](" ",e.firstName+" "+e.surname," ")}}function H(e,t){if(1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275template"](1,F,2,1,"span",21),j["\u0275\u0275elementContainerEnd"]()),2&e){const e=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngForOf",e.selectedMembers)}}function z(e,t){1&e&&(j["\u0275\u0275elementStart"](0,"span",23),j["\u0275\u0275text"](1),j["\u0275\u0275pipe"](2,"translate"),j["\u0275\u0275elementEnd"]()),2&e&&(j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate"](j["\u0275\u0275pipeBind1"](2,1,"CHAT-GROUP-ADD.GROUP-PLACEHOLDER")))}function U(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",8),j["\u0275\u0275elementStart"](1,"label",9),j["\u0275\u0275text"](2),j["\u0275\u0275pipe"](3,"translate"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](4,"div",18),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"]().openMembersDialog()}),j["\u0275\u0275template"](5,H,2,1,"ng-container",19),j["\u0275\u0275template"](6,z,3,3,"ng-template",null,20,j["\u0275\u0275templateRefExtractor"]),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275reference"](7),t=j["\u0275\u0275nextContext"]();j["\u0275\u0275advance"](2),j["\u0275\u0275textInterpolate"](j["\u0275\u0275pipeBind1"](3,3,"CHAT-GROUP-ADD.GROUP-LABEL")),j["\u0275\u0275advance"](3),j["\u0275\u0275property"]("ngIf",t.selectedMembers.length>0)("ngIfElse",e)}}function q(e,t){1&e&&j["\u0275\u0275element"](0,"app-spinner")}let K=(()=>{class e{constructor(e,t,n,i,s,o){this.activeModal=e,this.discussionService=t,this.ngbModal=n,this.toastrService=i,this.notificationService=s,this.signalRService=o,this.discussionGroup={discussionTopic:null,discussionCategoryID:2,referenceID:0,isDirectMessage:!1,discussionCreatedByContactID:0,discussionBody:null,parentDiscussionID:0},this.members=[],this.selectedMembers=[],this.contactID=+localStorage.getItem("CoID")}ngOnInit(){this.discussionGroup.discussionCreatedByContactID=Number(localStorage.getItem("CoID")),this.editGroup&&(this.discussionGroup=Object.assign(this.discussionGroup,this.editGroup))}onSubmit(){this.loading=!0,this.editGroup?this.updateGroup():this.addGroup()}addGroup(){const e=[];this.discussionService.insertDiscussion(this.discussionGroup).pipe(Object(A.a)(t=>{const n=[],s=[];return this.selectedMembers.forEach(o=>{const a=localStorage.getItem("firstName"),c=localStorage.getItem("surname"),r=new Date,d=Object(i.y)(r,"yyyy-MM-dd HH:mm:ss","en-UK"),l={discussionID:t.discussionID,contactID:o.contactID,isAdmin:!0,submittedByContactID:this.contactID};if(o.contactID===this.contactID)l.hasAccepted=!0,l.dateAccepted=d;else{const n=`${a} ${c} sent an invitation to join group - `+this.discussionGroup.discussionTopic,i={notificationCategoryID:I.a.group_invitation_discussion,referenceID:t.discussionID,contactID:o.contactID,description:n,createdContact:this.contactID};e.push({date:d,body:n,topic:n,senderFullName:"",senderPhoto:"",channel:"dashboard",reference:i.referenceID,notificationType:S.a.groupConnectRequest,senderId:i.createdContact,receivers:[i.contactID],uniqueId:d+"|"+t.discussionID,discussionId:0}),s.push(this.notificationService.noticeNotification(i))}n.push(this.discussionService.addMember(l))}),Object(_.a)(n.concat(s))})).subscribe(()=>{this.loading=!1,e.forEach(e=>{this.signalRService.transferMessage("dashboard",e)}),this.toastrService.success("New group is created"),this.activeModal.close({success:!0})},()=>{this.toastrService.warning("Cannot create new group"),this.loading=!1})}updateGroup(){const e=Object(E.a)(this.discussionGroup);e.discussionID=this.editGroup.discussionID,this.discussionService.updateDiscussion(e).subscribe(()=>{this.toastrService.success("Group successfuly edited"),this.activeModal.close({discussionTopic:e.discussionTopic,discussionBody:e.discussionBody})},()=>{this.toastrService.warning("Cannot edit group"),this.loading=!1})}openMembersDialog(){const e=this.ngbModal.open(y.a);e.componentInstance.pageTitle="Select Group members",e.componentInstance.contacts=this.members,e.componentInstance.filteredContacts=this.members,e.componentInstance.preSelectedcontacts=this.members,e.result.then(e=>{e&&e.selectedContacts&&(this.selectedMembers=e.selectedContacts)},()=>{})}}return e.\u0275fac=function(t){return new(t||e)(j["\u0275\u0275directiveInject"](h.a),j["\u0275\u0275directiveInject"](R.a),j["\u0275\u0275directiveInject"](h.p),j["\u0275\u0275directiveInject"](V.b),j["\u0275\u0275directiveInject"](G.a),j["\u0275\u0275directiveInject"](N.a))},e.\u0275cmp=j["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-group-chat"]],decls:27,vars:22,consts:[[1,"modal-header"],["class","modal-title","id","postModalLabel",4,"ngIf"],["class","modal-title","id","putModalLabel",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],[1,"w-100"],["type","text","name","discussionTopic","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["name","discussionBody","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"text-right"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["id","postModalLabel",1,"modal-title"],["id","putModalLabel",1,"modal-title"],[1,"",3,"click"],[4,"ngIf","ngIfElse"],["elseNoMemberSelect",""],["class","badge badge-info p-2 m-1",4,"ngFor","ngForOf"],[1,"badge","badge-info","p-2","m-1"],[1,"title-sm"]],template:function(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"div",0),j["\u0275\u0275template"](1,B,3,3,"h5",1),j["\u0275\u0275template"](2,$,3,3,"h5",2),j["\u0275\u0275elementStart"](3,"button",3),j["\u0275\u0275listener"]("click",function(){return t.activeModal.dismiss()}),j["\u0275\u0275elementStart"](4,"span",4),j["\u0275\u0275text"](5,"\xd7"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](6,"div",5),j["\u0275\u0275elementStart"](7,"form",6,7),j["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),j["\u0275\u0275elementStart"](9,"div",8),j["\u0275\u0275elementStart"](10,"label",9),j["\u0275\u0275text"](11),j["\u0275\u0275pipe"](12,"translate"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](13,"input",10),j["\u0275\u0275listener"]("ngModelChange",function(e){return t.discussionGroup.discussionTopic=e}),j["\u0275\u0275pipe"](14,"translate"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](15,"div",8),j["\u0275\u0275elementStart"](16,"label",9),j["\u0275\u0275text"](17),j["\u0275\u0275pipe"](18,"translate"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](19,"textarea",11),j["\u0275\u0275listener"]("ngModelChange",function(e){return t.discussionGroup.discussionBody=e}),j["\u0275\u0275pipe"](20,"translate"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](21,U,8,5,"div",12),j["\u0275\u0275elementStart"](22,"div",13),j["\u0275\u0275elementStart"](23,"button",14),j["\u0275\u0275template"](24,q,1,0,"app-spinner",15),j["\u0275\u0275text"](25),j["\u0275\u0275pipe"](26,"translate"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()),2&e){const e=j["\u0275\u0275reference"](8);j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",!t.editGroup),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",t.editGroup),j["\u0275\u0275advance"](9),j["\u0275\u0275textInterpolate"](j["\u0275\u0275pipeBind1"](12,12,"CHAT-GROUP-ADD.TITLE-LABEL")),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("placeholder",j["\u0275\u0275pipeBind1"](14,14,"CHAT-GROUP-ADD.TITLE-PLACEHOLDER"))("ngModel",t.discussionGroup.discussionTopic),j["\u0275\u0275advance"](4),j["\u0275\u0275textInterpolate"](j["\u0275\u0275pipeBind1"](18,16,"CHAT-GROUP-ADD.DESCRIPTION-LABEL")),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("placeholder",j["\u0275\u0275pipeBind1"](20,18,"CHAT-GROUP-ADD.DESCRIPTION-PLACEHOLDER"))("ngModel",t.discussionGroup.discussionBody),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("ngIf",!t.editGroup),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("disabled",!e.valid||t.loading),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",t.loading),j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate1"](" ",j["\u0275\u0275pipeBind1"](26,20,"CHAT-GROUP-ADD.SUBMIT")," ")}},directives:[i.n,s.E,s.r,s.s,s.b,s.A,s.q,s.t,i.m,L.a],pipes:[m.c],styles:[".form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #f84444}"]}),e})();var Q=n("w/zQ"),W=n("Dhwl"),J=n("VgRj"),X=n("3DXX"),Z=n("1G5W"),Y=n("EAn9"),ee=n("WhH8"),te=n("ev4g"),ne=n("1bi4"),ie=n("kmKP"),se=n("Jn3s"),oe=n("mFMl"),ae=n("VPdJ"),ce=n("9F88");let re=(()=>{class e{transform(e,t){return(t=t.toString().toLowerCase())&&(e=e.filter(e=>{var n;const i=`${e.firstName} ${e.surname}`;return(null==i?void 0:i.toLowerCase().includes(t))||(null===(n=null==e?void 0:e.discussionTopic)||void 0===n?void 0:n.toLocaleLowerCase().includes(t))})),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=j["\u0275\u0275definePipe"]({name:"contactFilter",type:e,pure:!0}),e})();var de=n("CEMh"),le=n("SdWN");const ue=["chatContainer"],pe=["perfectScroll"];function he(e,t){1&e&&j["\u0275\u0275element"](0,"span",32)}function me(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275element"](1,"span",33),j["\u0275\u0275elementContainerEnd"]())}function ge(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",29),j["\u0275\u0275listener"]("click",function(){j["\u0275\u0275restoreView"](e);const n=t.$implicit;return j["\u0275\u0275nextContext"]().onMasterClick(n)}),j["\u0275\u0275elementStart"](1,"span",30),j["\u0275\u0275text"](2),j["\u0275\u0275pipe"](3,"ellipsis"),j["\u0275\u0275template"](4,he,1,0,"span",31),j["\u0275\u0275template"](5,me,2,0,"ng-container",26),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=j["\u0275\u0275nextContext"]();j["\u0275\u0275classProp"]("list-active-fill",e.discussionID===(null==n.activeMessage?null:n.activeMessage.discussionID)),j["\u0275\u0275advance"](2),j["\u0275\u0275textInterpolate1"](" ",j["\u0275\u0275pipeBind2"](3,5,e.discussionTopic,30)," "),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("ngIf",e.unreadMessageCount>0),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",n.onlineIndicator.includes(e.targetContactID))}}function fe(e,t){1&e&&j["\u0275\u0275element"](0,"span",36)}function ve(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275element"](1,"span",33),j["\u0275\u0275elementContainerEnd"]())}function be(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",29),j["\u0275\u0275listener"]("click",function(){j["\u0275\u0275restoreView"](e);const t=j["\u0275\u0275nextContext"]().$implicit;return j["\u0275\u0275nextContext"]().onMasterClick(t)}),j["\u0275\u0275elementStart"](1,"span",30),j["\u0275\u0275elementStart"](2,"span"),j["\u0275\u0275text"](3),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](4,fe,1,0,"span",35),j["\u0275\u0275template"](5,ve,2,0,"ng-container",26),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"]().$implicit,t=j["\u0275\u0275nextContext"]();j["\u0275\u0275classProp"]("list-active-fill",e.discussionID===(null==t.activeMessage?null:t.activeMessage.discussionID)),j["\u0275\u0275advance"](3),j["\u0275\u0275textInterpolate1"](" ",e.discussionTopic," "),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.unreadMessageCount>0),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",t.onlineIndicator.includes(e.targetContactID))}}function Ie(e,t){if(1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275template"](1,be,6,5,"div",34),j["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.discussionTopic)}}function Ce(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"span",45),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).switchToContactList()}),j["\u0275\u0275element"](1,"i",46),j["\u0275\u0275elementEnd"]()}}function ye(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275text"](1,"Chat"),j["\u0275\u0275elementContainerEnd"]())}function Me(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275text"](1,"Activities "),j["\u0275\u0275elementContainerEnd"]())}function xe(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275text"](1,"Files "),j["\u0275\u0275elementContainerEnd"]())}function De(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div"),j["\u0275\u0275elementStart"](1,"div",2),j["\u0275\u0275elementStart"](2,"div",3),j["\u0275\u0275elementStart"](3,"div",4),j["\u0275\u0275template"](4,Ce,2,0,"span",37),j["\u0275\u0275elementStart"](5,"h1",5),j["\u0275\u0275text"](6),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](7,"div",6),j["\u0275\u0275elementStart"](8,"div",38),j["\u0275\u0275elementStart"](9,"div",39),j["\u0275\u0275elementStart"](10,"button",40),j["\u0275\u0275elementStart"](11,"div",6),j["\u0275\u0275elementStart"](12,"span",41),j["\u0275\u0275template"](13,ye,2,0,"ng-container",26),j["\u0275\u0275template"](14,Me,2,0,"ng-container",26),j["\u0275\u0275template"](15,xe,2,0,"ng-container",26),j["\u0275\u0275elementEnd"](),j["\u0275\u0275element"](16,"i",42),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](17,"ul",43),j["\u0275\u0275elementStart"](18,"li"),j["\u0275\u0275elementStart"](19,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](2).chatView=1}),j["\u0275\u0275text"](20,"Chat"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](21,"li"),j["\u0275\u0275elementStart"](22,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](2).getTasks()}),j["\u0275\u0275text"](23,"Activities"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](24,"li"),j["\u0275\u0275elementStart"](25,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](2).chatView=3}),j["\u0275\u0275text"](26,"Files"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](4),j["\u0275\u0275property"]("ngIf",e.isResponsiveOptionOn),j["\u0275\u0275advance"](2),j["\u0275\u0275textInterpolate"](e.activeMessage.discussionTopic),j["\u0275\u0275advance"](7),j["\u0275\u0275property"]("ngIf",1===e.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",2===e.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",3===e.chatView)}}function Se(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"span",45),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).switchToContactList()}),j["\u0275\u0275element"](1,"i",46),j["\u0275\u0275elementEnd"]()}}function we(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275text"](1,"Chat"),j["\u0275\u0275elementContainerEnd"]())}function Oe(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275text"](1,"Activities "),j["\u0275\u0275elementContainerEnd"]())}function Ee(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275text"](1,"Files "),j["\u0275\u0275elementContainerEnd"]())}function Pe(e,t){1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275text"](1," Members "),j["\u0275\u0275elementContainerEnd"]())}function _e(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"li"),j["\u0275\u0275elementStart"](1,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](4).chatView=4}),j["\u0275\u0275text"](2,"Members"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}}function ke(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"li"),j["\u0275\u0275elementStart"](1,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](4).leaveGroup()}),j["\u0275\u0275text"](2,"Leave Group"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}}function Te(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",50),j["\u0275\u0275elementStart"](1,"button",40),j["\u0275\u0275elementStart"](2,"div",6),j["\u0275\u0275elementStart"](3,"span",41),j["\u0275\u0275template"](4,we,2,0,"ng-container",26),j["\u0275\u0275template"](5,Oe,2,0,"ng-container",26),j["\u0275\u0275template"](6,Ee,2,0,"ng-container",26),j["\u0275\u0275template"](7,Pe,2,0,"ng-container",26),j["\u0275\u0275element"](8,"i",42),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](9,"ul",43),j["\u0275\u0275elementStart"](10,"li"),j["\u0275\u0275elementStart"](11,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).chatView=1}),j["\u0275\u0275text"](12,"Chat"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](13,"li"),j["\u0275\u0275elementStart"](14,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).getTasks()}),j["\u0275\u0275text"](15,"Activities"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](16,"li"),j["\u0275\u0275elementStart"](17,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).chatView=3}),j["\u0275\u0275text"](18,"Files"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](19,_e,3,0,"li",26),j["\u0275\u0275template"](20,ke,3,0,"li",26),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"](3);j["\u0275\u0275advance"](4),j["\u0275\u0275property"]("ngIf",1===e.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",2===e.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",3===e.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",1!==e.activeMessage.discussionCategoryID&&4===e.chatView),j["\u0275\u0275advance"](12),j["\u0275\u0275property"]("ngIf",1!==e.activeMessage.discussionCategoryID&&e.activeMessage.discussionCreatedByContactID===e.contactId),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",1!==e.activeMessage.discussionCategoryID&&e.activeMessage.discussionCreatedByContactID!==e.contactId)}}function Ae(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"li"),j["\u0275\u0275elementStart"](1,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).editGroup()}),j["\u0275\u0275text"](2,"Edit Group"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}}function je(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"li"),j["\u0275\u0275elementStart"](1,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).inviteMembers()}),j["\u0275\u0275text"](2,"Invite Members"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}}function Re(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"li"),j["\u0275\u0275elementStart"](1,"a",44),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).leaveGroup()}),j["\u0275\u0275text"](2,"Leave Group"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}}function Ve(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"div"),j["\u0275\u0275elementStart"](1,"div",2),j["\u0275\u0275elementStart"](2,"div",3),j["\u0275\u0275elementStart"](3,"div",4),j["\u0275\u0275template"](4,Se,2,0,"span",37),j["\u0275\u0275elementStart"](5,"h1",5),j["\u0275\u0275text"](6),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](7,"div",38),j["\u0275\u0275elementStart"](8,"div",6),j["\u0275\u0275template"](9,Te,21,6,"div",47),j["\u0275\u0275elementStart"](10,"div",39),j["\u0275\u0275elementStart"](11,"button",48),j["\u0275\u0275elementStart"](12,"div",6),j["\u0275\u0275element"](13,"span",49),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](14,"ul",43),j["\u0275\u0275template"](15,Ae,3,0,"li",26),j["\u0275\u0275template"](16,je,3,0,"li",26),j["\u0275\u0275template"](17,Re,3,0,"li",26),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()),2&e){const e=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](4),j["\u0275\u0275property"]("ngIf",e.isResponsiveOptionOn),j["\u0275\u0275advance"](2),j["\u0275\u0275textInterpolate"](e.activeMessage.discussionTopic),j["\u0275\u0275advance"](3),j["\u0275\u0275property"]("ngIf",e.activeMessage.hasAccepted||e.activeMessage.discussionCreatedByContactID===e.contactId),j["\u0275\u0275advance"](6),j["\u0275\u0275property"]("ngIf",e.activeMessage.discussionCreatedByContactID===e.contactId),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.activeMessage.discussionCreatedByContactID===e.contactId),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.activeMessage.hasAccepted||e.activeMessage.discussionCreatedByContactID!==e.contactId)}}function Ge(e,t){if(1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275template"](1,De,27,5,"div",26),j["\u0275\u0275template"](2,Ve,18,6,"div",26),j["\u0275\u0275elementContainerEnd"]()),2&e){const e=j["\u0275\u0275nextContext"]();j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",1===e.activeMessage.discussionCategoryID),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",1!==e.activeMessage.discussionCategoryID)}}function Ne(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",51),j["\u0275\u0275elementStart"](1,"h2"),j["\u0275\u0275text"](2,"You don\u2019t have a message selected"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](3,"p"),j["\u0275\u0275text"](4,"Choose one from your existing messages, or start a new one."),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](5,"button",52),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"]().newMessage()}),j["\u0275\u0275text"](6," New message "),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}}function Le(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"p",62),j["\u0275\u0275text"](1),j["\u0275\u0275elementEnd"]()),2&e){const e=j["\u0275\u0275nextContext"](3);j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate1"](" ",e.activeMessage.headline," ")}}function Be(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"p",62),j["\u0275\u0275text"](1),j["\u0275\u0275elementEnd"]()),2&e){const e=j["\u0275\u0275nextContext"](3);j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate1"](" ",e.activeMessage.discussionBody," ")}}function $e(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"div",66),j["\u0275\u0275elementStart"](1,"span",67),j["\u0275\u0275text"](2),j["\u0275\u0275pipe"](3,"date"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()),2&e){const e=j["\u0275\u0275nextContext"]().$implicit;j["\u0275\u0275advance"](2),j["\u0275\u0275textInterpolate"](j["\u0275\u0275pipeBind2"](3,1,e.dateCreated,"dd-MM-yyyy HH:mm"))}}function Fe(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",63),j["\u0275\u0275template"](1,$e,4,4,"div",64),j["\u0275\u0275elementStart"](2,"app-chat-card",65),j["\u0275\u0275listener"]("editChat",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onEditChatItem(t)})("removeChat",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onDeleteChatItem(t)})("replyChat",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onReplyChatItem(t)}),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=j["\u0275\u0275nextContext"](3);j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",!e.isSameDate),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("chatItem",e)("members",n.chatMembers)}}function He(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",58,59),j["\u0275\u0275listener"]("scroll",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](2).onScrollChat(t)}),j["\u0275\u0275template"](2,Le,2,1,"p",60),j["\u0275\u0275template"](3,Be,2,1,"p",60),j["\u0275\u0275template"](4,Fe,3,3,"div",61),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("ngIf",e.activeMessage&&1===e.activeMessage.discussionCategoryID&&e.activeMessage.headline),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.activeMessage&&e.activeMessage.discussionBody&&1!==e.activeMessage.discussionCategoryID),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngForOf",e.chats)}}function ze(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"span",70),j["\u0275\u0275text"](1),j["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;j["\u0275\u0275advance"](1),j["\u0275\u0275textInterpolate1"](" ",e.fullName," is typing ")}}function Ue(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"div",68),j["\u0275\u0275template"](1,ze,2,1,"span",69),j["\u0275\u0275elementEnd"]()),2&e){const e=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngForOf",e.typingIndicator)}}function qe(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",71),j["\u0275\u0275elementStart"](1,"div",72),j["\u0275\u0275elementStart"](2,"span",73),j["\u0275\u0275text"](3),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](4,"span",74),j["\u0275\u0275text"](5),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](6,"div"),j["\u0275\u0275elementStart"](7,"span",75),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](2).repliedChat=void 0}),j["\u0275\u0275text"](8,"Cancel"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](3),j["\u0275\u0275textInterpolate"](e.repliedChat.discussionBody),j["\u0275\u0275advance"](2),j["\u0275\u0275textInterpolate2"](" You replied to ",e.repliedChat.firstName," ",e.repliedChat.surname," ")}}function Ke(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275elementStart"](1,"app-common-chat-add",77),j["\u0275\u0275listener"]("instantPost",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onInstantAdd(t)})("onChatAdd",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onChatAdd(t)}),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"](3);j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("members",e.chatMembers)("repliedChat",e.repliedChat)("channel",e.channel)("chat",e.activeMessage)("contactId",e.contactId)}}function Qe(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"app-common-chat-add",78),j["\u0275\u0275listener"]("instantPost",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onInstantAdd(t)})("onChatAdd",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onChatAdd(t)})("onChatEdit",function(t){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"](3).onChatEdit(t)}),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"](3);j["\u0275\u0275property"]("members",e.chatMembers)("editChat",e.editChat)("channel",e.channel)("chat",e.activeMessage)("contactId",e.contactId)}}function We(e,t){if(1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275template"](1,Ke,2,5,"ng-container",24),j["\u0275\u0275template"](2,Qe,1,5,"ng-template",null,76,j["\u0275\u0275templateRefExtractor"]),j["\u0275\u0275elementContainerEnd"]()),2&e){const e=j["\u0275\u0275reference"](3),t=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",!t.editChat)("ngIfElse",e)}}function Je(e,t){if(1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275elementStart"](1,"perfect-scrollbar",53,54),j["\u0275\u0275template"](3,He,5,3,"div",55),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](4,Ue,2,1,"div",56),j["\u0275\u0275template"](5,qe,9,3,"div",57),j["\u0275\u0275template"](6,We,4,2,"ng-container",26),j["\u0275\u0275elementContainerEnd"]()),2&e){const e=j["\u0275\u0275nextContext"]();j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("config",e.config),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("ngIf",e.activeMessage),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.typingIndicator.length>0),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.repliedChat),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.activeMessage)}}function Xe(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275elementStart"](1,"div",14),j["\u0275\u0275elementStart"](2,"span",79),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"]().filterTask(1)}),j["\u0275\u0275text"](3,"Open"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275text"](4," | "),j["\u0275\u0275elementStart"](5,"span",80),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"]().filterTask(3)}),j["\u0275\u0275text"](6,"Closed"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275element"](7,"app-weekly-todo",81),j["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"]();j["\u0275\u0275advance"](2),j["\u0275\u0275classProp"]("text-primary",1===e.taskStatus),j["\u0275\u0275advance"](3),j["\u0275\u0275classProp"]("text-primary",3===e.taskStatus),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("showDate",!0)("showStatus",!0)("showHeader",!0)("user",e.user)("dateLabel","Created")("contactID",e.contactId)("companyID",e.companyID)("disableAdd",!0)("tasks",e.filteredTasks)}}function Ze(e,t){if(1&e&&j["\u0275\u0275element"](0,"app-documents-list",82),2&e){const e=j["\u0275\u0275nextContext"]();j["\u0275\u0275property"]("documentCategoryID",22)("referenceID2",e.activeMessage.discussionID)}}function Ye(e,t){1&e&&(j["\u0275\u0275elementStart"](0,"span",93),j["\u0275\u0275text"](1,"Pending"),j["\u0275\u0275elementEnd"]())}function et(e,t){1&e&&(j["\u0275\u0275elementStart"](0,"span",94),j["\u0275\u0275text"](1,"Active"),j["\u0275\u0275elementEnd"]())}function tt(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"button",95),j["\u0275\u0275listener"]("click",function(){j["\u0275\u0275restoreView"](e);const t=j["\u0275\u0275nextContext"]().$implicit;return j["\u0275\u0275nextContext"](2).directMessage(t.contactID)}),j["\u0275\u0275text"](1," Message "),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"](3);j["\u0275\u0275property"]("disabled",e.dmRequest)}}function nt(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"div",84),j["\u0275\u0275elementStart"](1,"div",85),j["\u0275\u0275element"](2,"img",86),j["\u0275\u0275pipe"](3,"avatar"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](4,"div",87),j["\u0275\u0275elementStart"](5,"div",88),j["\u0275\u0275elementStart"](6,"h3",89),j["\u0275\u0275text"](7),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](8,Ye,2,0,"span",90),j["\u0275\u0275template"](9,et,2,0,"span",91),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](10,tt,2,1,"button",92),j["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=j["\u0275\u0275nextContext"](2);j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("src",j["\u0275\u0275pipeBind1"](3,6,e.profilePhoto),j["\u0275\u0275sanitizeUrl"]),j["\u0275\u0275advance"](5),j["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," "),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",!e.hasAccepted),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.hasAccepted||n.activeMessage.discussionCreatedByContactID===e.contactID),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",e.contactID!==n.contactId)}}function it(e,t){if(1&e&&(j["\u0275\u0275elementContainerStart"](0),j["\u0275\u0275template"](1,nt,11,8,"div",83),j["\u0275\u0275elementContainerEnd"]()),2&e){const e=j["\u0275\u0275nextContext"]();j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngForOf",e.chatMembers)}}function st(e,t){if(1&e){const e=j["\u0275\u0275getCurrentView"]();j["\u0275\u0275elementStart"](0,"div",96),j["\u0275\u0275elementStart"](1,"div",30),j["\u0275\u0275elementStart"](2,"div",97),j["\u0275\u0275elementStart"](3,"div",98),j["\u0275\u0275text"](4),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](5,"button",99),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"]().acceptGroup()}),j["\u0275\u0275text"](6," Accept "),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](7,"button",100),j["\u0275\u0275listener"]("click",function(){return j["\u0275\u0275restoreView"](e),j["\u0275\u0275nextContext"]().declineGroup()}),j["\u0275\u0275text"](8," Decline "),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()}if(2&e){const e=j["\u0275\u0275nextContext"]();j["\u0275\u0275advance"](4),j["\u0275\u0275textInterpolate2"](" ",e.activeMessage.firstName," ",e.activeMessage.surname," has invited you to join this group. ")}}const ot=function(e){return{"full-contact-block":e}},at=function(e){return{"d-none":e}};let ct=(()=>{class e{constructor(e,t,n,i,s,o,a,c,r,d,l,u,p){this.ngbModal=e,this.signalRService=t,this.discussionService=n,this.signalNotificationService=i,this.contactService=s,this.toastrService=o,this.notificationService=a,this.route=c,this.location=r,this.router=d,this.taskService=l,this.distributionService=u,this.userService=p,this.documentPath=w.a.apiBlobUrl+"/",this.config={},this.notifications=[],this.typingIndicator=[],this.contactSearch="",this.directMessages=[],this.groupMessages=[],this.contacts=[],this.chats=[],this.chatMembers=[],this.sharedDocuments=[],this.key="K47zK47z",this.activeTab=1,this.chatView=1,this.pageSize=1,this.tasks=[],this.filteredTasks=[],this.taskStatus=1,this.isResponsiveOptionOn=!1,this.isResponsiveContactOn=!1,this.destroy$=new P.a,this.user=this.userService.user.getValue(),this.companyID=this.user.companyID,this.onLoadChatResposive()}ngOnInit(){this.contactId=this.user.contactID,this.route.params.subscribe(e=>{if(this.initSignalHub(),e&&e.discussionID){const t=M.a.decodeURI(e.discussionID),n=String(t),i=M.a.aesDecrypt(n);this.fetchMasterDiscussions(Number(i))}else this.fetchMasterDiscussions();this.getContactConnect()})}onLoadChatResposive(){window.innerWidth<1239?(this.isResponsiveOptionOn=!0,this.isResponsiveContactOn=!0):(this.isResponsiveOptionOn=!1,this.isResponsiveContactOn=!1)}onResize(e){e.target.innerWidth<1239?(this.isResponsiveOptionOn=!0,this.isResponsiveContactOn=!this.activeMessage):(this.isResponsiveOptionOn=!1,this.isResponsiveContactOn=!1)}switchToContactList(){this.isResponsiveContactOn=!0}newMessage(){const e=this.ngbModal.open(C.a,{size:"md"});e.componentInstance.includeContact=this.contactId,e.componentInstance.isMinimalist=!0,e.componentInstance.isSingleSelect=!0,e.componentInstance.title="New message",e.componentInstance.modalSubmitLabel="Next",e.result.then(e=>{this.directMessage(e[0].contactID)})}directMessage(e){this.dmRequest=!0,this.discussionService.getDiscussionByContact({contactId:e,loggedInContactId:this.contactId}).subscribe(t=>{if(t&&t.discussionID){const e=this.directMessages.findIndex(e=>e.discussionID===t.discussionID);this.dmRequest=!1,this.onMasterClick(this.directMessages[e])}else this.createChat(this.contactId,e)},()=>{})}newGroupMessage(){const e=this.ngbModal.open(W.a);e.componentInstance.header="Create New Group Chat",e.componentInstance.label="Group Name",e.componentInstance.discussionCategoryID=2,e.result.then(e=>{const t=e.comment,n=e.discussionCategoryID;if(t){const e=this.ngbModal.open(C.a);e.componentInstance.title="Select Group Members",e.result.then(e=>{e.length&&this.discussionService.insertDiscussion({discussionTopic:t,discussionCategoryID:n,isDirectMessage:!0,discussionCreatedByContactID:this.contactId,discussionBody:t}).pipe(Object(T.switchMap)(t=>{const n=[];return n.push(this.discussionService.addMember({discussionID:t.discussionID,contactID:this.contactId,isAdmin:!0,hasAccepted:!0})),e.forEach(e=>{e.contactID!==this.contactId&&n.push(this.discussionService.addMember({discussionID:t.discussionID,contactID:e.contactID,isAdmin:!0}))}),Object(_.a)(n)})).subscribe(n=>{this.fetchMasterDiscussions(n[0].discussionID),e.forEach(e=>{if(e.contactID===this.contactId)return;const s=this.user.firstName,o=this.user.surname,a=new Date,c=Object(i.y)(a,"yyyy-MM-dd HH:mm:ss","en-UK"),r=`${s} ${o} has invited you to join `+t,d={notificationCategoryID:I.a.group_invitation_discussion,referenceID:n[0].discussionID,contactID:e.contactID,description:r,createdContact:this.contactId},l=c+"|"+n[0].discussionID,u={date:c,body:r,topic:r,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:d.referenceID,notificationType:S.a.groupConnectRequest,senderId:d.createdContact,receivers:[d.contactID],uniqueId:l,discussionId:0};this.notificationService.noticeNotification(d).subscribe(()=>{this.signalRService.transferMessage("dashboard",u)});const p=J.a.fullDomain()+"/chats",h={distributionTitle:`Invitation to ${t} group`,distributionCategoryID:null,referenceID:n[0].discussionID,distributionDate:null,userID:this.contactId,emailBody:X.a.template(`\n      <p>Hi ${e.firstName}</p>\n\t\t\t<p>${s} has invited you to join ${t}</p>\n\t\t\t<p>Sign into the Incubator Portal then click on Messages > Groups</p>\n\t\t\t<br>\n\t\t\t<p><span class="btn btn-primary" style="margin: 0; padding: 0"><a href="${p}">View Messages</a></span></p>\n\t\t\t<br>\n\t\t`),subjectLine:`Invitation to ${t} group`,senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[e.contactID]};this.distributionService.create(h).subscribe(()=>{},()=>{})})})})}})}createChat(e,t){this.discussionService.insertDiscussion({discussionTopic:"DM",discussionCategoryID:1,isDirectMessage:!0,discussionCreatedByContactID:e,discussionBody:"DM"}).pipe(Object(T.switchMap)(n=>{const i={discussionID:n.discussionID,contactID:e,isAdmin:!0},s={discussionID:n.discussionID,contactID:t,isAdmin:!0};return Object(_.a)(this.discussionService.addMember(i),this.discussionService.addMember(s))})).subscribe(e=>{this.dmRequest=!1,this.fetchMasterDiscussions(e[0].discussionID)},()=>{})}fetchMasterDiscussions(e){this.discussionService.getMasterDiscussions({ContactID:this.contactId}).pipe(Object(Z.a)(this.destroy$)).subscribe(t=>{const n=t.reduce((e,t)=>Number(t.unreadMessageCount)+e,0);this.signalNotificationService.rebaseCount(n),this.directMessages=t.filter(e=>1===e.discussionCategoryID).sort((e,t)=>e.latestMessagePosted&&t.latestMessagePosted?new Date(t.latestMessagePosted).getTime()-new Date(e.latestMessagePosted).getTime():0),this.groupMessages=t.filter(e=>1!==e.discussionCategoryID).sort((e,t)=>e.latestMessagePosted&&t.latestMessagePosted?new Date(t.latestMessagePosted).getTime()-new Date(e.latestMessagePosted).getTime():0),this.handleNotifications();const i=t.find(t=>t.discussionID===e);i&&this.onMasterClick(i)})}onMasterClick(e){this.chatView=1,this.pageSize=1,this.leaveChannel(),this.activeMessage=null,this.chatMembers=[],this.chats=[],this.sharedDocuments=[],this.tasks=[],this.filteredTasks=[],this.taskStatus=1,this.isResponsiveOptionOn&&(this.isResponsiveContactOn=!1),this.onMasterDetail(e)}onMasterDetail(e){this.activeMessage=e;const t=M.a.aesEncrypt(this.activeMessage.discussionID),n=M.a.encodeURI(t);this.location.replaceState("/chats/"+n),this.channel="chat"+this.activeMessage.discussionID,this.signalRService.joinChannel(this.channel);const i=this.directMessages.findIndex(t=>t.discussionID===e.discussionID),s=this.groupMessages.findIndex(t=>t.discussionID===e.discussionID);this.signalNotificationService.removeCount(Number(e.unreadMessageCount)),-1!==i&&(this.directMessages[i].unreadMessageCount=0),-1!==s&&(this.groupMessages[s].unreadMessageCount=0),this.getMember(this.activeMessage.discussionID),this.getChats(0,this.activeMessage.discussionID,0)}getContactConnect(){this.contactService.getContactConnect(0,this.contactId,0,0,"0",1,1e3).pipe(Object(Z.a)(this.destroy$)).subscribe(e=>{e&&(this.contacts=e)})}getMember(e){this.chatMembers=[],this.discussionService.getAllMembers(e).pipe(Object(Z.a)(this.destroy$)).subscribe(e=>{this.chatMembers=e;const t=e.findIndex(e=>e.contactID===this.contactId),n=this.chatMembers[t];n.lastReadDate=O().format(b.c),this.discussionService.updateMember({discussionMemberID:n.discussionMemberID,discussionID:n.discussionID,contactID:n.contactID,lastReadDate:n.lastReadDate,hasAccepted:n.hasAccepted,dateAccepted:n.dateAccepted||"",isAdmin:n.isAdmin,unread:0}).subscribe(),this.lastSeenLoop=setInterval(()=>{this.lastSeenFeature()},3e3)})}openGroupModal(){const e=this.ngbModal.open(K);e.componentInstance.members=Object(E.a)(this.contacts),e.result.then(e=>{e&&e.success&&this.fetchMasterDiscussions()},()=>{})}initSignalHub(){this.signalRService.transferMessageEvent.subscribe(e=>{if(this.channel===e.channel){const t=e.message,n=t.data;if(t.type===D.a.chatAdd&&this.onChatAdd(n),t.type===D.a.chatDelete&&this.onDeleteChat(n.discussionID),t.type===D.a.chatEdit&&this.onChatEdit(n),e.message&&e.message.hasOwnProperty("newDiscussionID")&&this.getReplyChat(e.message.newDiscussionID),t.type===D.a.memberLastSeen){const e=t.data,n=this.chatMembers.findIndex(t=>t.contactID===e.contactID);-1!==n&&(this.chatMembers[n]=e)}if(t.type===D.a.typingIndicator){const e=t.data,n=this.typingIndicator.findIndex(t=>t.id===e.id);-1!==n?e.typing||this.typingIndicator.splice(n,1):e.typing&&this.typingIndicator.push(e)}}else if("dashboard"===e.channel){const t=e.message,n=this.directMessages.findIndex(e=>e.discussionID===t.discussionId),i=this.groupMessages.findIndex(e=>e.discussionID===t.discussionId);-1!==n&&this.directMessages[n].unreadMessageCount++,-1!==i&&this.groupMessages[i].unreadMessageCount++,this.signalNotificationService.addCount(1)}})}onChatAdd(e){this.consumeDiscussion(e,this.chats.length),this.chats.push(e),this.scrollToLatest(),this.repliedChat=null}onChatEdit(e){if(!e)return void(this.editChat=null);const t=this.chats.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&(this.chats[t]=Object(E.a)(e)),this.editChat=null,e.documents.forEach(e=>{const t=Object(E.a)(e),n=Object(E.a)(e);this.sharedDocuments.push(n),t.documentPath=this.documentPath+t.documentPath}),this.scrollToLatest()}leaveChannel(){const e=this.chatMembers.findIndex(e=>e.contactID===this.contactId);if(-1!==e){const t=this.chatMembers[e];t.lastReadDate=O().utc().format(b.c),this.discussionService.updateMember({discussionMemberID:t.discussionMemberID,discussionID:t.discussionID,contactID:t.contactID,lastReadDate:t.lastReadDate,hasAccepted:t.hasAccepted||!0,dateAccepted:t.dateAccepted||"",isAdmin:t.isAdmin,unread:0}).subscribe()}clearInterval(this.lastSeenLoop),this.signalRService.leaveChannel(this.channel)}lastSeenFeature(){const e=this.chatMembers.findIndex(e=>e.contactID===this.contactId);if(-1!==e){const t=this.chatMembers[e];t.lastReadDate=t.lastReadDate=O().utc().format(b.c);const n={type:D.a.memberLastSeen,data:t};if(!this.isScrollUp&&this.activeMessage){const e=this.notifications.filter(e=>e.discussionId!==this.activeMessage.discussionID),t=this.directMessages.findIndex(e=>e.discussionID===this.activeMessage.discussionID),n=this.groupMessages.findIndex(e=>e.discussionID===this.activeMessage.discussionID);this.signalNotificationService.removeCount(Number(this.activeMessage.unreadMessageCount)),-1!==t&&(this.directMessages[t].unreadMessageCount=0),-1!==n&&(this.groupMessages[n].unreadMessageCount=0),this.signalNotificationService.resetNotification(e)}this.signalRService.transferMessage(this.channel,n)}}getChats(e,t,n){this.discussionService.fetchDiscussions(e,0,n,t,0,0,this.pageSize).pipe(Object(Z.a)(this.destroy$)).subscribe(e=>{this.chats=e.reverse(),this.chats.forEach((e,t)=>this.consumeDiscussion(e,t));const t=this.notifications.filter(e=>e.channel!==this.channel);this.signalNotificationService.resetNotification(t),this.scrollToBottom()})}consumeDiscussion(e,t){e.isSameTime=t>0&&Object(x.b)(this.chats[t-1],e),e.isSameDate=t>0&&Object(x.f)(this.chats[t-1],e),e.documents.forEach(e=>{const t=Object(E.a)(e),n=Object(E.a)(e);this.sharedDocuments.push(n),t.documentPath=this.documentPath+t.documentPath}),e.replyDiscussionID&&(e.repliedDiscussion=this.chats.find(t=>t.discussionID===e.replyDiscussionID))}scrollToBottom(){setTimeout(()=>{var e,t;this.chatContainer&&this.perfectScroll.directiveRef.scrollToTop(null===(t=null===(e=this.chatContainer)||void 0===e?void 0:e.nativeElement)||void 0===t?void 0:t.scrollHeight,10)},0)}scrollToLatest(){this.isScrollUp||this.scrollToBottom()}onScrollChat(e){const t=e.target||e.srcElement;this.isScrollUp=t.scrollHeight-t.scrollTop-t.offsetHeight>100,0!==t.scrollTop||this.pageLoading||this.loadMore()}loadMore(){this.pageSize++,this.pageLoading=!0,this.discussionService.fetchDiscussions(0,0,0,this.activeMessage.discussionID,0,0,this.pageSize).pipe(Object(Z.a)(this.destroy$)).subscribe(e=>{if(e.length>0){this.chats=[...e.reverse(),...this.chats],this.chats.forEach((e,t)=>this.consumeDiscussion(e,t));const t=this.notifications.filter(e=>e.channel!==this.channel);this.signalNotificationService.resetNotification(t)}else this.pageSize--;this.pageLoading=!1},()=>{this.pageLoading=!1,this.pageSize--})}getTasks(){this.taskLoading=!0,this.tasks=[],this.chatView=2,this.taskService.getTask(0,0,this.activeMessage.discussionID,0,0,0,0,0,!0).pipe(Object(Z.a)(this.destroy$)).subscribe(e=>{this.tasks=e.map(e=>{if(e.endDate){const t=new Date(e.endDate);e.endDateModel={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}return e}),this.filterTask(),this.taskLoading=!1},()=>{this.taskLoading=!1})}onEditChatItem(e){this.editChat=e}onDeleteChatItem(e){this.discussionService.deleteDiscussion(e).subscribe(()=>{this.onDeleteChat(e),this.signalRService.transferMessage(this.channel,{type:D.a.chatDelete,data:{discussionID:e}})})}onDeleteChat(e){var t,n;const i=null===(t=this.chats)||void 0===t?void 0:t.findIndex(t=>t.discussionID===e);-1!==i&&(null===(n=this.chats[i])||void 0===n||n.documents.forEach(e=>{const t=this.sharedDocuments.findIndex(t=>t.documentID===e.documentID);-1!==t&&this.sharedDocuments.splice(t,1)}),this.chats.splice(i,1),this.chats.forEach((e,t)=>this.consumeDiscussion(e,t))),this.scrollToLatest()}onReplyChatItem(e){this.repliedChat=e,this.commonChatAddComponent.messageInput.nativeElement.focus()}get onlineIndicator(){return this.signalRService.getClientsByChannel("dashboard").map(e=>Number(e.contactId))}handleNotifications(){this.signalNotificationService.getNotifications().subscribe(e=>{this.notifications=e})}membersManagement(){let e=[];const t=this.ngbModal.open(y.a);t.componentInstance.filteredContacts=this.contacts,t.componentInstance.preSelectedcontacts=this.chatMembers,t.componentInstance.groupOwnerID=this.activeMessage.discussionCreatedByContactID,t.componentInstance.pageTitle="Select Group members",t.result.then(t=>{if(t&&t.selectedContacts){e=t.selectedContacts,e=e.filter((e,t,n)=>n.findIndex(t=>t.contactID===e.contactID)===t);const n=this.chatMembers.filter(t=>0===e.filter(e=>e.contactID===t.contactID).length).map(e=>e.contactID),s=e.filter(e=>0===this.chatMembers.filter(t=>t.contactID===e.contactID).length).map(e=>e.contactID),o=[],a=[],c=[];n.forEach(e=>{o.push(this.discussionService.deleteMember(this.activeMessage.discussionID,e))}),s.forEach(e=>{const t=this.user.firstName,n=this.user.surname,s=new Date,r=Object(i.y)(s,"yyyy-MM-dd HH:mm:ss","en-UK"),d={discussionID:this.activeMessage.discussionID,contactID:e,isAdmin:!0,submittedByContactID:this.contactId},l=`${t} ${n} sent an invitation to join group - `+this.activeMessage.discussionTopic,u={notificationCategoryID:I.a.group_invitation_discussion,referenceID:this.activeMessage.discussionID,contactID:e,description:l,createdContact:this.contactId},p=r+"|"+this.activeMessage.discussionID,h={date:r,body:l,topic:l,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:u.referenceID,notificationType:S.a.groupConnectRequest,senderId:u.createdContact,receivers:[u.contactID],uniqueId:p,discussionId:0};c.push(h),a.push(this.notificationService.noticeNotification(u)),o.push(this.discussionService.addMember(d))}),o.length&&(this.groupMemberLoading=!0,Object(_.a)(o.concat(a)).subscribe(()=>{this.groupMemberLoading=!1,c.forEach(e=>{this.signalRService.transferMessage("dashboard",e)}),this.getMember(this.activeMessage.discussionID),this.toastrService.success("Group members modified")},()=>{this.groupMemberLoading=!1,this.toastrService.warning("Cannot modify group member")}))}},()=>{})}onInstantAdd(e){const t=this.chats.findIndex(t=>t.tempKey===e.tempKey);-1!==t&&(this.chats[t].discussionID=e.discussionID)}getReplyChat(e){this.discussionService.fetchDiscussions(0,0,0,this.activeMessage.discussionID,e).subscribe(e=>{e[0]&&this.onChatAdd(e[0])})}navigateToTask(e){this.taskService.getTask(e,0,0,0,0,0,0,0,!0).subscribe(e=>{e[0]&&this.taskService.storeActiveTaskRx(e[0])})}leaveGroup(){const e=this.ngbModal.open(v.a);e.componentInstance.objectType="Confirm Leave Group",e.componentInstance.objectDetails=`Are you sure you want leave ${this.activeMessage.discussionTopic} group?`,e.componentInstance.customConfirm=!0,e.result.then(e=>{"Yes"===e&&this.declineGroup()})}acceptGroup(){const e=this.chatMembers.findIndex(e=>e.discussionMemberID===this.activeMessage.discussionMemberID);if(-1!==e){const t=this.chatMembers[e];t.hasAccepted=!0,t.dateAccepted=Object(x.a)(new Date),this.discussionService.updateMember(t).subscribe(()=>{this.activeMessage.hasAccepted=!0})}}declineGroup(){this.discussionService.deleteMember(this.activeMessage.discussionID,this.contactId).subscribe(()=>{const e=this.groupMessages.findIndex(e=>e.discussionID===this.activeMessage.discussionID);-1!==e&&this.groupMessages.splice(e,1),this.activeMessage=null})}editGroup(){const e=this.ngbModal.open(W.a),t=Object(E.a)(this.activeMessage);e.componentInstance.comment=t.discussionTopic,e.componentInstance.header="Edit Group",e.componentInstance.label="Group Name",e.componentInstance.discussionCategoryID=t.discussionCategoryID,e.result.then(e=>{e&&e!==this.activeMessage.discussionTopic&&this.discussionService.fetchDiscussions(0,0,0,0,t.discussionID,0).pipe(Object(T.switchMap)(t=>{const n=t[0];return n.discussionTopic=e,n.discussionBody=e,this.discussionService.updateDiscussion(n)})).subscribe(()=>{this.activeMessage.discussionTopic=e;const n=this.groupMessages.findIndex(e=>e.discussionID===t.discussionID);-1!==n&&(this.groupMessages[n].discussionTopic=e)})})}inviteMembers(){const e=this.ngbModal.open(C.a);e.componentInstance.title=`Invite Members to ${this.activeMessage.discussionTopic} Group`,e.result.then(e=>{const t=e.filter(e=>0===this.chatMembers.filter(t=>t.contactID===e.contactID).length),n=[];t.forEach(e=>{n.push(this.discussionService.addMember({discussionID:this.activeMessage.discussionID,contactID:e.contactID,isAdmin:!0}))}),(n.length>0?Object(_.a)(n):Object(k.a)([])).subscribe(()=>{t.forEach(e=>{if(e.contactID===this.contactId)return;const t=this.user.firstName,n=this.user.surname,s=new Date,o=Object(i.y)(s,"yyyy-MM-dd HH:mm:ss","en-UK"),a=`${t} ${n} has invited you to join `+this.activeMessage.discussionTopic,c={notificationCategoryID:I.a.group_invitation_discussion,referenceID:this.activeMessage.discussionID,contactID:e.contactID,description:a,createdContact:this.contactId},r=o+"|"+this.activeMessage.discussionID,d={date:o,body:a,topic:a,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:c.referenceID,notificationType:S.a.groupConnectRequest,senderId:c.createdContact,receivers:[c.contactID],uniqueId:r,discussionId:0};this.notificationService.noticeNotification(c).subscribe(()=>{this.signalRService.transferMessage("dashboard",d)});const l=J.a.fullDomain()+"/chats",u={distributionTitle:`Invitation to ${this.activeMessage.discussionTopic} group`,distributionCategoryID:null,referenceID:this.activeMessage.discussionID,distributionDate:null,userID:this.contactId,emailBody:X.a.template(`\n      <p>Hi ${e.firstName}</p>\n\t\t\t<p>${t} has invited you to join ${this.activeMessage.discussionTopic}</p>\n\t\t\t<p>Sign into the Incubator Portal then click on Messages > Groups</p>\n\t\t\t<br>\n\t\t\t<p><span class="btn btn-primary" style="margin: 0; padding: 0"><a href="${l}">View Messages</a></span></p>\n\t\t\t<br>\n\t\t`),subjectLine:`Invitation to ${this.activeMessage.discussionTopic} group`,senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[e.contactID]};this.distributionService.create(u).subscribe(()=>{},()=>{})}),this.getMember(this.activeMessage.discussionID)})})}filterTask(e=1){this.taskStatus=e,this.filteredTasks=this.tasks.filter(t=>3===e?t.taskStatusID===e:3!==t.taskStatusID)}onTaskUpdate(e){const t=this.tasks.findIndex(t=>t.taskID===e.taskID);-1!==t&&(this.tasks[t]=e,this.filterTask())}onTaskDelete(e){const t=this.tasks.findIndex(t=>t.taskID===e.taskID);-1!==t&&(this.tasks.splice(t,1),this.filterTask())}taskEvents(){this.taskService.getDeletedTaskRx().pipe(Object(Z.a)(this.destroy$)).subscribe(e=>{this.onTaskDelete(e)}),this.taskService.getUpdatedTaskRx().pipe(Object(Z.a)(this.destroy$)).subscribe(e=>{this.onTaskUpdate(e)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.leaveChannel(),this.taskService.storeActiveTaskRx(null)}}return e.\u0275fac=function(t){return new(t||e)(j["\u0275\u0275directiveInject"](h.p),j["\u0275\u0275directiveInject"](N.a),j["\u0275\u0275directiveInject"](R.a),j["\u0275\u0275directiveInject"](Y.a),j["\u0275\u0275directiveInject"](ee.a),j["\u0275\u0275directiveInject"](V.b),j["\u0275\u0275directiveInject"](G.a),j["\u0275\u0275directiveInject"](f.a),j["\u0275\u0275directiveInject"](i.j),j["\u0275\u0275directiveInject"](f.c),j["\u0275\u0275directiveInject"](te.a),j["\u0275\u0275directiveInject"](ne.a),j["\u0275\u0275directiveInject"](ie.a))},e.\u0275cmp=j["\u0275\u0275defineComponent"]({type:e,selectors:[["app-chats"]],viewQuery:function(e,t){if(1&e&&(j["\u0275\u0275viewQuery"](ue,!0),j["\u0275\u0275viewQuery"](pe,!0),j["\u0275\u0275viewQuery"](Q.a,!0)),2&e){let e;j["\u0275\u0275queryRefresh"](e=j["\u0275\u0275loadQuery"]())&&(t.chatContainer=e.first),j["\u0275\u0275queryRefresh"](e=j["\u0275\u0275loadQuery"]())&&(t.perfectScroll=e.first),j["\u0275\u0275queryRefresh"](e=j["\u0275\u0275loadQuery"]())&&(t.commonChatAddComponent=e.first)}},hostBindings:function(e,t){1&e&&j["\u0275\u0275listener"]("resize",function(e){return t.onResize(e)},!1,j["\u0275\u0275resolveWindow"])},decls:37,vars:24,consts:[[1,"chat-container","d-flex"],[1,"side-nav","side-nav-cal","border-right",3,"ngClass"],[1,"page-title","d-flex"],[1,"d-flex","align-items-center","justify-content-between","w-100"],[1,"d-flex","justify-content-first"],[1,"display-inline","m-0"],[1,"d-flex","align-items-center"],[1,"btn-upload","new-message--icon","mr-1",3,"click"],[1,"fas","fa-envelope"],[1,"side-nav--wrapper"],[1,"form-group","flex-column","search-wrapper"],["type","text","placeholder","Search for people or groups",1,"form-control","search-radius","contact-search",3,"ngModel","ngModelChange"],[2,"max-width","100%","max-height","calc(100vh - 140px)",3,"config"],[1,"contact-list"],[1,"d-flex","align-items-center","pl-3","pr-3","pt-2","pb-2"],[1,"mb-0"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],["class","entry border-0 pl-3 pr-3 cursor-pointer",3,"list-active-fill","click",4,"ngFor","ngForOf"],[1,"d-flex","pt-2","pb-2","pl-3","pr-3","mt-2","border-top"],[1,"m-0"],[4,"ngFor","ngForOf"],[1,"chats-container","flex-grow-1",3,"ngClass"],[1,"card","card__chats","ml-auto","mr-auto",3,"avnonLoader"],[4,"ngIf","ngIfElse"],["elseNoTargetChat",""],[4,"ngIf"],[3,"documentCategoryID","referenceID2",4,"ngIf"],["class","attend-section w-100 pl-3 pr-3 update-invites",4,"ngIf"],[1,"entry","border-0","pl-3","pr-3","cursor-pointer",3,"click"],[1,"w-100"],["class","float-right contact-status status-indicator badge-primary notification-badge--last-message mt-1",4,"ngIf"],[1,"float-right","contact-status","status-indicator","badge-primary","notification-badge--last-message","mt-1"],[1,"contact-status","status-indicator","badge-success","notification-badge"],["class","entry border-0 pl-3 pr-3 cursor-pointer",3,"list-active-fill","click",4,"ngIf"],["class","contact-status status-indicator badge-primary float-right notification-badge--last-message mt-1",4,"ngIf"],[1,"contact-status","status-indicator","badge-primary","float-right","notification-badge--last-message","mt-1"],["class","cursor-pointer text-primary display-inline mr-2",3,"click",4,"ngIf"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","p-1","w-100"],[1,"ml-2"],[1,"fas","fa-angle-down","ml-1"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],["class","dropdown mr-1",4,"ngIf"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30","w-auto"],[1,"ico","dots-ico","dots-ico--gray"],[1,"dropdown","mr-1"],[1,"no-message-container"],[1,"btn","btn-sm","btn-add","ml-2","btn-primary","new-message",3,"click"],[2,"max-width","100%","max-height","100%",3,"config"],["perfectScroll",""],["class","chat-list-container p-2 pr-0 mr-3",3,"scroll",4,"ngIf"],["class","typing-indicator px-2",4,"ngIf"],["class","reply-chat px-2",4,"ngIf"],[1,"chat-list-container","p-2","pr-0","mr-3",3,"scroll"],["chatContainer",""],["class","company-mission",4,"ngIf"],["class","group-item",4,"ngFor","ngForOf"],[1,"company-mission"],[1,"group-item"],["class","group-item-date",4,"ngIf"],[3,"chatItem","members","editChat","removeChat","replyChat"],[1,"group-item-date"],[1,"date"],[1,"typing-indicator","px-2"],["class","typing-item",4,"ngFor","ngForOf"],[1,"typing-item"],[1,"reply-chat","px-2"],[1,"reply-chat-content"],[1,"reply-chat-body"],[1,"reply-chat-info"],[1,"cancel-reply","cursor-pointer","text-primary",3,"click"],["elseEditChat",""],[3,"members","repliedChat","channel","chat","contactId","instantPost","onChatAdd"],[3,"members","editChat","channel","chat","contactId","instantPost","onChatAdd","onChatEdit"],[1,"cursor-pointer","mr-2",3,"click"],[1,"cursor-pointer","ml-2",3,"click"],[3,"showDate","showStatus","showHeader","user","dateLabel","contactID","companyID","disableAdd","tasks"],[3,"documentCategoryID","referenceID2"],["class","common-list-item w-100 d-flex flex-row",4,"ngFor","ngForOf"],[1,"common-list-item","w-100","d-flex","flex-row"],[1,"avatar-wrapper"],["alt","Avatar",1,"avatar-48","avatar",3,"src"],[1,"list-data","d-flex","flex-column","ml-2","flex-grow-1"],[1,"d-flex","w-100","mb-1"],[1,"mb-0","mr-2"],["class","tag tag-orange mr-auto",4,"ngIf"],["class","tag tag-green mr-auto",4,"ngIf"],["class","btn btn-sm btn-primary ml-2",3,"disabled","click",4,"ngIf"],[1,"tag","tag-orange","mr-auto"],[1,"tag","tag-green","mr-auto"],[1,"btn","btn-sm","btn-primary","ml-2",3,"disabled","click"],[1,"attend-section","w-100","pl-3","pr-3","update-invites"],[1,"d-flex","align-items-center","w-100","p-2","bg-light","border","float-left"],[1,"mr-auto"],[1,"btn-primary","btn-sm","btn","mr-2",3,"click"],[1,"btn-outline-primary","btn","btn-sm",3,"click"]],template:function(e,t){if(1&e&&(j["\u0275\u0275elementStart"](0,"div",0),j["\u0275\u0275elementStart"](1,"div",1),j["\u0275\u0275elementStart"](2,"div",2),j["\u0275\u0275elementStart"](3,"div",3),j["\u0275\u0275elementStart"](4,"div",4),j["\u0275\u0275elementStart"](5,"h1",5),j["\u0275\u0275text"](6,"Messages"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](7,"div",6),j["\u0275\u0275elementStart"](8,"a",7),j["\u0275\u0275listener"]("click",function(){return t.newMessage()}),j["\u0275\u0275element"](9,"i",8),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](10,"div",9),j["\u0275\u0275elementStart"](11,"div",10),j["\u0275\u0275elementStart"](12,"input",11),j["\u0275\u0275listener"]("ngModelChange",function(e){return t.contactSearch=e}),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](13,"perfect-scrollbar",12),j["\u0275\u0275elementStart"](14,"div",13),j["\u0275\u0275elementStart"](15,"div",14),j["\u0275\u0275elementStart"](16,"h3",15),j["\u0275\u0275text"](17,"Groups"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](18,"span",16),j["\u0275\u0275listener"]("click",function(){return t.newGroupMessage()}),j["\u0275\u0275element"](19,"span",17),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](20,ge,6,8,"div",18),j["\u0275\u0275pipe"](21,"contactFilter"),j["\u0275\u0275elementStart"](22,"div",19),j["\u0275\u0275elementStart"](23,"h3",20),j["\u0275\u0275text"](24,"Direct Messages"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275template"](25,Ie,2,1,"ng-container",21),j["\u0275\u0275pipe"](26,"contactFilter"),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementStart"](27,"div",22),j["\u0275\u0275elementStart"](28,"div",23),j["\u0275\u0275template"](29,Ge,3,2,"ng-container",24),j["\u0275\u0275template"](30,Ne,7,0,"ng-template",null,25,j["\u0275\u0275templateRefExtractor"]),j["\u0275\u0275template"](32,Je,7,5,"ng-container",26),j["\u0275\u0275template"](33,Xe,8,13,"ng-container",26),j["\u0275\u0275template"](34,Ze,1,2,"app-documents-list",27),j["\u0275\u0275template"](35,it,2,1,"ng-container",26),j["\u0275\u0275template"](36,st,9,2,"div",28),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"](),j["\u0275\u0275elementEnd"]()),2&e){const e=j["\u0275\u0275reference"](31);j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngClass",j["\u0275\u0275pureFunction1"](20,ot,t.isResponsiveContactOn)),j["\u0275\u0275advance"](11),j["\u0275\u0275property"]("ngModel",t.contactSearch),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("config",t.config),j["\u0275\u0275advance"](7),j["\u0275\u0275property"]("ngForOf",j["\u0275\u0275pipeBind2"](21,14,t.groupMessages,t.contactSearch)),j["\u0275\u0275advance"](5),j["\u0275\u0275property"]("ngForOf",j["\u0275\u0275pipeBind2"](26,17,t.directMessages,t.contactSearch)),j["\u0275\u0275advance"](2),j["\u0275\u0275property"]("ngClass",j["\u0275\u0275pureFunction1"](22,at,t.isResponsiveContactOn)),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("avnonLoader",t.taskLoading),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",t.activeMessage)("ngIfElse",e),j["\u0275\u0275advance"](3),j["\u0275\u0275property"]("ngIf",t.activeMessage&&1===t.chatView&&(1===t.activeMessage.discussionCategoryID||1!==t.activeMessage.discussionCategoryID&&(t.activeMessage.hasAccepted||t.activeMessage.discussionCreatedByContactID===t.contactId))),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",2===t.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",3===t.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",4===t.chatView),j["\u0275\u0275advance"](1),j["\u0275\u0275property"]("ngIf",t.activeMessage&&1!==t.activeMessage.discussionCategoryID&&!t.activeMessage.hasAccepted&&t.activeMessage.discussionCreatedByContactID!==t.contactId)}},directives:[i.l,s.b,s.q,s.t,g.b,i.m,se.a,i.n,oe.a,Q.a,ae.a,ce.a],pipes:[re,de.a,i.e,le.a],styles:[".container[_ngcontent-%COMP%]{overflow:hidden;height:100vh}.chat-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:0}.chat-container[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{width:100%;min-height:calc(100vh - 56px);background:#fff}.chat-container[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]{float:left;max-width:40%;min-width:374.1px;background-color:#fff;height:100vh;overflow:hidden}.chat-container[_ngcontent-%COMP%]   .side-nav--wrapper[_ngcontent-%COMP%]{height:100%}.chat-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{padding:15px 16px 0}.chat-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]{padding:15px 16px}.chat-container[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%] + .page-content[_ngcontent-%COMP%]{width:100%}.chat-container[_ngcontent-%COMP%]   .search-radius[_ngcontent-%COMP%]{border-radius:30px}.chat-container[_ngcontent-%COMP%]   .avatar.avatar-30-circle[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:60px;-moz-border-radius:60px;-webkit-border-radius:60px;object-fit:cover;overflow-y:hidden}.chat-container[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.chat-container[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;display:inline-block}.chat-container[_ngcontent-%COMP%]   .name-contact-member[_ngcontent-%COMP%]{line-height:18px}.chat-container[_ngcontent-%COMP%]   .title-sm[_ngcontent-%COMP%]{font-weight:500}.chat-container[_ngcontent-%COMP%]   .contact-list[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.chat-container[_ngcontent-%COMP%]   .contact-list[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]{display:flex!important;padding-top:4px!important;padding-bottom:4px!important}.chat-container[_ngcontent-%COMP%]   .contact-chat-list[_ngcontent-%COMP%]{position:relative}.chat-container[_ngcontent-%COMP%]   .contact-chat-list[_ngcontent-%COMP%]   .contact-status[_ngcontent-%COMP%]{position:absolute;top:0;left:20px;width:10px;height:10px}.chats-container[_ngcontent-%COMP%]{height:100vh;float:left}.chats-container[_ngcontent-%COMP%]   .card__chats[_ngcontent-%COMP%]{height:100%;min-width:450px}.chats-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:0}.chats-container[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{width:100%;min-height:calc(100vh - 56px);background:#fff}.chats-container[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .container-chats[_ngcontent-%COMP%]{height:95vh}.chats-container[_ngcontent-%COMP%]   .last-seen[_ngcontent-%COMP%]{color:#6d6d6d;font-size:13px}.chats-container[_ngcontent-%COMP%]   .group-item-date[_ngcontent-%COMP%]{min-height:24px;margin-bottom:24px;border-bottom:1px solid #f0f0f0;text-align:center}.chats-container[_ngcontent-%COMP%]   .group-item-date[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{position:relative;top:12px;padding:2px 18px;font-size:14px;font-weight:500;background:#fff;color:rgba(42,42,42,.5)}.chats-container[_ngcontent-%COMP%]   .chat-list-container[_ngcontent-%COMP%]{position:relative;overflow-y:auto;overflow-x:hidden;height:100%}.chats-container[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   .typing-item[_ngcontent-%COMP%]{padding:0 12px;font-size:12px;line-height:1;color:#4d4f54;opacity:.5;margin-bottom:4px}.chats-container[_ngcontent-%COMP%]   .reply-chat[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.chats-container[_ngcontent-%COMP%]   .reply-chat[_ngcontent-%COMP%]   .reply-chat-content[_ngcontent-%COMP%]{border-left:4px solid grey;overflow:hidden;display:flex;flex-direction:column}.chats-container[_ngcontent-%COMP%]   .reply-chat[_ngcontent-%COMP%]   .reply-chat-content[_ngcontent-%COMP%]   .reply-chat-body[_ngcontent-%COMP%]{padding:0 8px;font-size:12px;color:#6f7480;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chats-container[_ngcontent-%COMP%]   .reply-chat[_ngcontent-%COMP%]   .reply-chat-content[_ngcontent-%COMP%]   .reply-chat-info[_ngcontent-%COMP%]{padding:0 8px;font-size:12px;color:#a1a7b4}.chats-container[_ngcontent-%COMP%]   .reply-chat[_ngcontent-%COMP%]   .cancel-reply[_ngcontent-%COMP%]{font-size:16px;margin-left:15px}.no-icon[_ngcontent-%COMP%]:after{display:none}.members-management[_ngcontent-%COMP%]{font-size:18px;margin-left:auto;cursor:pointer}.join-toggle[_ngcontent-%COMP%]{background-image:none!important;background-size:0!important}.join-toggle[_ngcontent-%COMP%]:after, .join-toggle[_ngcontent-%COMP%]:before{display:none}.chat-content[_ngcontent-%COMP%]{border-left:1px solid #d5d5d5;border-right:1px solid #d5d5d5;margin-top:55px;min-height:calc(100vh - 60px);margin-left:255px}.company-menu[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:0 .5rem}.company-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem}.content-header[_ngcontent-%COMP%]{margin-left:0;padding-left:0}.content-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-left:0}.center[_ngcontent-%COMP%]{margin:0 auto;padding:20px}.vertical-align[_ngcontent-%COMP%]{position:absolute;top:50%;margin-top:-50px;left:calc(50% - 150px)}.no-message-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;position:absolute;top:40vh;width:100%}.new-message[_ngcontent-%COMP%]{border-radius:15px}.contacts-header[_ngcontent-%COMP%]{display:flex;height:58px;border-bottom:1px solid #dfdfdf;padding:12px 0}.contacts-header__message[_ngcontent-%COMP%]{font-size:19px;font-weight:800}.contacts-header[_ngcontent-%COMP%]   .new-message--icon[_ngcontent-%COMP%]:hover{cursor:pointer}.contact-search[_ngcontent-%COMP%]{background-color:#ebeef0;margin:11px 0 13px}.contact-search[_ngcontent-%COMP%]:focus{background-color:#fff}.card__chats[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]     .modal-open .modal{overflow:hidden!important}[_nghost-%COMP%]     .modal-dialog.modal-md{height:100vh!important;top:calc(50% - 315px)!important}[_nghost-%COMP%]     app-common-chat-add{border-top:1px solid #dfdfdf}.chat-toggle[_ngcontent-%COMP%]{height:20px!important;background-position:100%;display:flex;align-items:center}.chat-toggle[_ngcontent-%COMP%]:after, .chat-toggle[_ngcontent-%COMP%]:before{display:none}.offset-10-negative[_ngcontent-%COMP%]{margin-right:-10px}@media (max-width:1239px){.side-nav-cal[_ngcontent-%COMP%]{display:none}.chats-container[_ngcontent-%COMP%]{width:100%}}.full-contact-block[_ngcontent-%COMP%]{display:block;max-width:100%!important}.entry[_ngcontent-%COMP%]{position:relative}.notification-badge[_ngcontent-%COMP%]{position:absolute;left:6px;top:4px;width:8px!important;height:8px!important}.notification-badge[_ngcontent-%COMP%], .notification-badge--last-message[_ngcontent-%COMP%]{z-index:5;border-radius:50%!important}.active[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#4d4f54}.date-stamp[_ngcontent-%COMP%]{position:absolute;right:0}.page-title[_ngcontent-%COMP%]{height:58.3px}"]}),e})();const rt=[{path:"",component:ct},{path:":discussionID",component:ct}];let dt=(()=>{class e{}return e.\u0275mod=j["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=j["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[f.g.forChild(rt)],f.g]}),e})();var lt=n("ccsH");const ut={suppressScrollX:!0};let pt=(()=>{class e{}return e.\u0275mod=j["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=j["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[{provide:g.a,useValue:ut}],imports:[[i.c,dt,s.l,lt.a,g.c,h.l,h.v,d.a,o.b,l.a,m.b,u.a,a.a,c.a,r.a,p.a]]}),e})()},EBtg:function(e,t,n){"use strict";var i=n("2KeD"),s=n("n73p"),o=n("2qMH"),a=n("LJ/p"),c=n("HZF8"),r=n("90cg"),d=n("yRPT"),l=n("0alx");t.scheduled=function(e,t){if(null!=e){if(c.isInteropObservable(e))return i.scheduleObservable(e,t);if(r.isPromise(e))return s.schedulePromise(e,t);if(d.isArrayLike(e))return o.scheduleArray(e,t);if(l.isIterable(e)||"string"==typeof e)return a.scheduleIterable(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},HZF8:function(e,t,n){"use strict";var i=n("zfKp");t.isInteropObservable=function(e){return e&&"function"==typeof e[i.observable]}},"LJ/p":function(e,t,n){"use strict";var i=n("Q1FS"),s=n("zB/H"),o=n("VKeD");t.scheduleIterable=function(e,t){if(!e)throw new Error("Iterable cannot be null");return new i.Observable(function(n){var i,a=new s.Subscription;return a.add(function(){i&&"function"==typeof i.return&&i.return()}),a.add(t.schedule(function(){i=e[o.iterator](),a.add(t.schedule(function(){if(!n.closed){var e,t;try{var s=i.next();e=s.value,t=s.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}}))})),a})}},OAkW:function(e,t,n){"use strict";t.subscribeToArray=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}}},VKeD:function(e,t,n){"use strict";function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}t.getSymbolIterator=i,t.iterator=i(),t.$$iterator=t.iterator},Z5tI:function(e,t,n){"use strict";var i=n("MkmW");t.subscribeToPromise=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.hostReportError),t}}},gTqA:function(e,t,n){"use strict";var i=n("Q1FS"),s=n("6qA3"),o=n("EBtg");t.from=function(e,t){return t?o.scheduled(e,t):e instanceof i.Observable?e:new i.Observable(s.subscribeTo(e))}},n73p:function(e,t,n){"use strict";var i=n("Q1FS"),s=n("zB/H");t.schedulePromise=function(e,t){return new i.Observable(function(n){var i=new s.Subscription;return i.add(t.schedule(function(){return e.then(function(e){i.add(t.schedule(function(){n.next(e),i.add(t.schedule(function(){return n.complete()}))}))},function(e){i.add(t.schedule(function(){return n.error(e)}))})})),i})}},ozli:function(e,t,n){"use strict";var i=n("zfKp");t.subscribeToObservable=function(e){return function(t){var n=e[i.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},poJ0:function(e,t,n){"use strict";var i=n("VKeD");t.subscribeToIterable=function(e){return function(t){for(var n=e[i.iterator]();;){var s=void 0;try{s=n.next()}catch(o){return t.error(o),t}if(s.done){t.complete();break}if(t.next(s.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}},q3Kh:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=n("FWf1");t.map=function(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(e,t))}};var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}();t.MapOperator=o;var a=function(e){function t(t,n,i){var s=e.call(this,t)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(s.Subscriber)},wjEo:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=n("FWf1"),o=n("Q1FS"),a=n("6qA3"),c=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(s.Subscriber);t.SimpleInnerSubscriber=c;var r=function(e){function t(t,n,i){var s=e.call(this)||this;return s.parent=t,s.outerValue=n,s.outerIndex=i,s}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(s.Subscriber);t.ComplexInnerSubscriber=r;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(s.Subscriber);t.SimpleOuterSubscriber=d;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,n,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(s.Subscriber);t.ComplexOuterSubscriber=l,t.innerSubscribe=function(e,t){if(!t.closed)return e instanceof o.Observable?e.subscribe(t):a.subscribeTo(e)(t)}},yRPT:function(e,t,n){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}}}]);