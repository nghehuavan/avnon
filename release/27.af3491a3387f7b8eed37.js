(window.webpackJsonp=window.webpackJsonp||[]).push([[27,62],{B1Kl:function(e,t,n){"use strict";n.r(t),n.d(t,"ProgramModule",function(){return yr});var a=n("ofXK"),r=n("3Pt+"),o=n("wr0u"),i=n("7AQL"),s=n("oAWB"),c=n("o4o7"),l=n("qgjj"),p=n("PCNd"),m=n("1kSV"),d=n("sYmb"),g=n("tyNb"),u=n("Fjb4"),I=n("sCZr"),h=n("Kj3r"),S=n("/uUt"),f=n("lJxs"),v=n("fXoL"),D=n("8CXc"),b=n("hpld"),y=n("kmKP"),x=n("Jn3s");function E(e,t){if(1&e&&v["\u0275\u0275element"](0,"ngb-highlight",31),2&e){const e=t.term;v["\u0275\u0275property"]("result",t.result.courseTitle)("term",e)}}function C(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",9),v["\u0275\u0275elementStart"](1,"label",28),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](4,E,1,2,"ng-template",null,29,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275elementStart"](6,"input",30),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().courseModel=t})("ngModelChange",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onChangeCourse()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275reference"](5),t=v["\u0275\u0275nextContext"](),n=v["\u0275\u0275reference"](9);v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,7,"PROGRAM.COURSE")),v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("error",(null==n.controls||null==n.controls.course?null:n.controls.course.touched)&&!t.courseModel.courseID),v["\u0275\u0275property"]("ngModel",t.courseModel)("ngbTypeahead",t.courseSearch)("resultTemplate",e)("inputFormatter",t.courseFormatter)}}let k=(()=>{class e{constructor(e,t,n,a,r,o){this.programService=e,this.router=t,this.courseService=n,this.userService=a,this.location=r,this.activatedRoute=o,this.program=new u.a,this.courses=[],this.courseModel=new I.a,this.courseFormatter=e=>e.courseTitle,this.courseSearch=e=>e.pipe(Object(h.a)(300),Object(S.a)(),Object(f.a)(e=>{let t=[];return t=""===e?this.courses:this.courses.filter(t=>new RegExp(e,"mi").test(t.courseTitle)),t.slice(0,10)})),this.user=this.userService.user.getValue(),this.companyID=this.user.companyID||0}ngOnInit(){this.programID=this.activatedRoute.snapshot.params.id,this.programID&&(this.editMode=1,this.initProfile()),this.preConfigure(),this.getCourses()}initProfile(){this.programLoading=!0,this.programService.getProgramProfile(this.programID).subscribe(e=>{this.program=e,2===this.program.programTypeID&&(this.courseModel.courseID=this.program.courseID,this.courseModel.courseTitle=this.program.courseTitle),this.programLoading=!1})}getCourses(){this.loading=!0,this.courseService.getCourses(this.companyID).subscribe(e=>{this.courses=e,this.loading=!1})}onChangeCourse(){}preConfigure(){1===this.editMode?this.pageMode="Edit":(this.pageMode="Add",this.program.companyID=this.companyID,this.program.courseID=0)}onSubmit(){this.loading=!0,2===this.program.programTypeID&&(this.program.courseID=this.courseModel.courseID),this.editMode?this.programService.updateProgram(this.program).subscribe(e=>{this.loading=!1,this.router.navigate(["/program/admin",this.program.programID])}):this.programService.createProgram(this.program).subscribe(e=>{this.loading=!1,this.program.programID=e.inOut_ProgramID,this.router.navigate(["/program/admin",this.program.programID])})}back(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](b.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](a.j),v["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-add"]],decls:62,vars:47,consts:[[3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"row","m-0","p-0"],[1,"form-block","pl-3","pr-3"],["f","ngForm"],[1,"form-group","form-group-options","title-actions"],[1,"form-group"],["for","title"],["type","text","id","title","required","","name","programTitle",1,"form-control",3,"ngModel","ngModelChange"],["for","programTypeID"],["name","programTypeID","required","","id","programTypeID",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],["class","form-group",4,"ngIf"],["for","programOverview"],["type","text","name","programOverview","id","programOverview","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["for","programProfile"],["rows","7","type","text","id","programProfile","name","programProfile",1,"form-control",3,"ngModel","ngModelChange"],["for","targetAudience"],["rows","7","type","text","id","targetAudience","name","targetAudience",1,"form-control",3,"ngModel","ngModelChange"],["for","entryRequirements"],["rows","7","id","entryRequirements","name","entryRequirements",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","form-group-block","text-right"],[1,"action-row"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],["for","course"],["courseResults",""],["type","text","placeholder","Course","name","course","id","course","required","",1,"form-control","form-control-material",3,"ngModel","ngbTypeahead","resultTemplate","inputFormatter","ngModelChange"],[3,"result","term"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span",2),v["\u0275\u0275listener"]("click",function(){return t.back()}),v["\u0275\u0275element"](3,"i",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"h1",4),v["\u0275\u0275text"](5),v["\u0275\u0275pipe"](6,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",5),v["\u0275\u0275elementStart"](8,"form",6,7),v["\u0275\u0275elementStart"](10,"div",8),v["\u0275\u0275elementStart"](11,"div",9),v["\u0275\u0275elementStart"](12,"label",10),v["\u0275\u0275text"](13),v["\u0275\u0275pipe"](14,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](15,"input",11),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.program.programTitle=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"div",9),v["\u0275\u0275elementStart"](17,"label",12),v["\u0275\u0275text"](18),v["\u0275\u0275pipe"](19,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"select",13),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.program.programTypeID=e}),v["\u0275\u0275elementStart"](21,"option",14),v["\u0275\u0275text"](22),v["\u0275\u0275pipe"](23,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](24,"option",14),v["\u0275\u0275text"](25),v["\u0275\u0275pipe"](26,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](27,"option",14),v["\u0275\u0275text"](28),v["\u0275\u0275pipe"](29,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](30,C,7,9,"div",15),v["\u0275\u0275elementStart"](31,"div",9),v["\u0275\u0275elementStart"](32,"div",9),v["\u0275\u0275elementStart"](33,"label",16),v["\u0275\u0275text"](34),v["\u0275\u0275pipe"](35,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](36,"input",17),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.program.programOverview=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](37,"div",9),v["\u0275\u0275elementStart"](38,"label",18),v["\u0275\u0275text"](39),v["\u0275\u0275pipe"](40,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](41,"textarea",19),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.program.programProfile=e}),v["\u0275\u0275text"](42,"\t\t\t\t\t\t\t\t"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](43,"div",9),v["\u0275\u0275elementStart"](44,"label",20),v["\u0275\u0275text"](45),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](46,"textarea",21),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.program.targetAudience=e}),v["\u0275\u0275text"](47,"\t\t\t\t\t\t\t\t"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](48,"div",9),v["\u0275\u0275elementStart"](49,"label",22),v["\u0275\u0275text"](50),v["\u0275\u0275pipe"](51,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](52,"textarea",23),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.program.entryRequirements=e}),v["\u0275\u0275text"](53,"\t\t\t\t\t\t\t\t"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](54,"div",24),v["\u0275\u0275elementStart"](55,"div",25),v["\u0275\u0275elementStart"](56,"button",26),v["\u0275\u0275listener"]("click",function(){return t.back()}),v["\u0275\u0275text"](57),v["\u0275\u0275pipe"](58,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](59,"button",27),v["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),v["\u0275\u0275text"](60),v["\u0275\u0275pipe"](61,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275reference"](9);v["\u0275\u0275property"]("avnonLoader",t.loading||t.programLoading),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate2"]("",t.pageMode," ",v["\u0275\u0275pipeBind1"](6,25,"COMMON.PROGRAM")," "),v["\u0275\u0275advance"](8),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](14,27,"PROGRAM.PROGRAM-TITLE")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.program.programTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](19,29,"PROGRAM.TYPE")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.program.programTypeID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngValue",null),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("- ",v["\u0275\u0275pipeBind1"](23,31,"COMMON.PLEASE-SELECT")," -"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue",1),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](26,33,"PROGRAM.BUSINESS-SUPPORT-PROGRAM")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue",2),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](29,35,"PROGRAM.LEARNING-PROGRAM")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",2===t.program.programTypeID),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](35,37,"PROGRAM.PROGRAM-BRIEF-OVERVIEW")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.program.programOverview),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](40,39,"PROGRAM.ABOUT-THIS-PROGRAM")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.program.programProfile),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",2===(null==t.program?null:t.program.programTypeID)?"Who should apply":"Type of companies that should apply"," "),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngModel",t.program.targetAudience),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](51,41,"PROGRAM.ENTRY-REQUIREMENTS")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.program.entryRequirements),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](58,43,"COMMON.CANCEL")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("disabled",e.invalid||t.loading||2===t.program.programTypeID&&!t.courseModel.courseID),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](61,45,"COMMON.SUBMIT")," ")}},directives:[x.a,r.E,r.r,r.s,r.b,r.A,r.q,r.t,r.B,r.v,r.D,a.n,m.E,m.n],pipes:[d.c],styles:[""]}),e})();var M=n("o+C+"),P=n("AytR"),O=n("eIep"),w=n("XNiG"),A=n("xgIS"),T=n("cp0P"),R=n("LRne"),j=n("8J6U"),L=n("1G5W"),V=n("pLZG"),F=n("WhH8"),B=n("euQB"),N=n("SdWN");const _=["searchInput"];function G(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",32),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.fullName)}}function U(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",32),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.firstName+" "+e.surname)}}const q=function(e){return{selected:e}};function $(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",26),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.index;return v["\u0275\u0275nextContext"](2).selectContact(n)}),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",20),v["\u0275\u0275element"](3,"input",27),v["\u0275\u0275element"](4,"label",28),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"td"),v["\u0275\u0275elementStart"](6,"div",29),v["\u0275\u0275element"](7,"img",30),v["\u0275\u0275pipe"](8,"avatar"),v["\u0275\u0275template"](9,G,2,1,"span",31),v["\u0275\u0275template"](10,U,2,1,"span",31),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"td"),v["\u0275\u0275text"](12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;v["\u0275\u0275property"]("ngClass",v["\u0275\u0275pureFunction1"](8,q,e.checked)),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("checked",e.checked),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("src",v["\u0275\u0275pipeBind1"](8,6,e.profilePhoto),v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.fullName),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.fullName),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.designation)}}function Q(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",16),v["\u0275\u0275elementStart"](1,"table",17),v["\u0275\u0275elementStart"](2,"thead",18),v["\u0275\u0275elementStart"](3,"tr"),v["\u0275\u0275elementStart"](4,"th",19),v["\u0275\u0275elementStart"](5,"div",20),v["\u0275\u0275elementStart"](6,"input",21),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().checkAllModel=t})("ngModelChange",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().selectAllContact()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](7,"label",22),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"th",23),v["\u0275\u0275text"](9,"Name"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"th",24),v["\u0275\u0275text"](11,"Position"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"tbody"),v["\u0275\u0275template"](13,$,13,10,"tr",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngModel",e.checkAllModel),v["\u0275\u0275advance"](7),v["\u0275\u0275property"]("ngForOf",e.contacts)}}function z(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",32),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.fullName)}}function Y(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",32),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.firstName+" "+e.surname)}}function H(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",26),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.index;return v["\u0275\u0275nextContext"](2).selectContact(n)}),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275element"](2,"i",33),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"td"),v["\u0275\u0275elementStart"](4,"div",29),v["\u0275\u0275element"](5,"img",30),v["\u0275\u0275pipe"](6,"avatar"),v["\u0275\u0275template"](7,z,2,1,"span",31),v["\u0275\u0275template"](8,Y,2,1,"span",31),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"td"),v["\u0275\u0275text"](10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;v["\u0275\u0275property"]("ngClass",v["\u0275\u0275pureFunction1"](7,q,e.checked)),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("src",v["\u0275\u0275pipeBind1"](6,5,e.profilePhoto),v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.fullName),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.fullName),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.designation)}}function K(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",16),v["\u0275\u0275elementStart"](1,"table",17),v["\u0275\u0275elementStart"](2,"thead",18),v["\u0275\u0275elementStart"](3,"tr"),v["\u0275\u0275element"](4,"th",19),v["\u0275\u0275elementStart"](5,"th",23),v["\u0275\u0275text"](6,"Name"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"th",24),v["\u0275\u0275text"](8,"Position"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"tbody"),v["\u0275\u0275template"](10,H,11,9,"tr",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](10),v["\u0275\u0275property"]("ngForOf",e.selectedContacts)}}let W=(()=>{class e{constructor(e,t,n,a){this.contactService=e,this.activeModal=t,this.userService=n,this.portfolioService=a,this.apiBlobUrl=P.a.apiBlobUrl,this.programInstanceStages=[],this.existingLearners=[],this.existingPortfolios=[],this.contacts=[],this.selectedContacts=[],this.activeTab=1,this.destroy$=new w.a,this.user=this.userService.user.getValue()}ngOnInit(){this.contactID=this.user.contactID,this.companyID=this.user.companyID||0,this.programInstanceStage&&this.checkPortfolios(),setTimeout(()=>{this.search()})}checkPortfolios(){this.portfolioLoading=!0,this.portfolioService.getCompanyRoadmapInstance(0,this.programInstance.programInstanceID,0,0,0,0,0).subscribe(e=>{this.existingPortfolios=e,this.portfolioLoading=!1})}search(){Object(A.a)(this.searchInput.nativeElement,"keyup").pipe(Object(L.a)(this.destroy$),Object(V.a)(e=>40!==e.keyCode&&38!==e.keyCode),Object(f.a)(e=>e.target.value),Object(h.a)(300),Object(S.a)(),Object(O.a)(e=>(this.contacts=[],this.contactService.getContactConnect(this.companyID,this.contactID,0,0,e,0,500)))).subscribe(e=>{e=e.map(e=>(e.checked=this.selectedContacts.some(t=>t.contactID===e.contactID),e)),this.checkAllModel=!1,this.contacts=e})}selectAllContact(){this.contacts=this.contacts.map(this.checkAllModel?e=>(e.checked=!0,-1===this.selectedContacts.findIndex(t=>t.contactID===e.contactID)&&this.selectedContacts.push(e),e):e=>{e.checked=!1;const t=this.selectedContacts.findIndex(t=>t.contactID===e.contactID);return-1!==t&&this.selectedContacts.splice(t,1),e})}selectContact(e){if(1===this.activeTab){const t=this.contacts[e],n=this.selectedContacts.findIndex(e=>e.contactID===t.contactID);-1!==n?this.selectedContacts.splice(n,1):this.selectedContacts.push(t),t.checked=!t.checked}else{const t=this.selectedContacts[e],n=this.contacts.findIndex(e=>e.contactID===t.contactID);-1!==n&&(this.contacts[n].checked=!1),this.selectedContacts.splice(e,1)}}onSubmit(){this.loading=!0;const e=[];this.selectedContacts.forEach(t=>{if(this.existingPortfolios.filter(e=>e.contactID===t.contactID||e.surname===t.surname&&e.firstname===t.firstName).length>0)return;const n={companyID:t.companyID||this.user.companyID,dateAccepted:Object(j.a)(new Date),programInstanceID:this.programInstance.programInstanceID,contactID:t.contactID};e.push(this.portfolioService.addPortfolio(n))}),(e.length>0?Object(T.a)(e):Object(R.a)(e)).subscribe(e=>{const t=[];e.forEach(e=>{const n=e;n&&(this.programInstanceStages.forEach(e=>{this.existingLearners.filter(e=>e.companyProgramInstanceID===n.inOut_CompanyProgramInstanceID).length>0||t.push(this.portfolioService.insertStage({programInstanceStageID:e.programInstanceStageID,companyProgramStageStartDate:e.programStageStartDate,companyProgramStageEndDate:e.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:n.companyLocationID,companyProgramInstanceID:n.inOut_CompanyProgramInstanceID,companyProgramInstanceStageTypeID:e.programStageTypeID}))}),this.programInstanceStage&&!this.existingLearners.filter(e=>e.companyProgramInstanceID===n.inOut_CompanyProgramInstanceID).length)&&t.push(this.portfolioService.insertStage({programInstanceStageID:this.programInstanceStage.programInstanceStageID,companyProgramStageStartDate:this.programInstanceStage.programStageStartDate,companyProgramStageEndDate:this.programInstanceStage.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:n.companyLocationID,companyProgramInstanceID:n.inOut_CompanyProgramInstanceID,companyProgramInstanceStageTypeID:this.programInstanceStage.programStageTypeID}))}),e.length||this.selectedContacts.forEach(e=>{const n=this.existingPortfolios.find(t=>t.contactID===e.contactID||t.surname===e.surname&&t.firstname===e.firstName);n&&this.programInstanceStage&&!this.existingLearners.filter(e=>e.companyProgramInstanceID===n.companyProgramInstanceID).length&&t.push(this.portfolioService.insertStage({programInstanceStageID:this.programInstanceStage.programInstanceStageID,companyProgramStageStartDate:this.programInstanceStage.programStageStartDate,companyProgramStageEndDate:this.programInstanceStage.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:n.companyLocationID,companyProgramInstanceID:n.companyProgramInstanceID,companyProgramInstanceStageTypeID:this.programInstanceStage.programStageTypeID}))}),(t.length>0?Object(T.a)(t):Object(R.a)([])).subscribe(()=>{this.loading=!1,this.activeModal.close(this.selectedContacts)})})}dismiss(){this.activeModal.dismiss()}availableTab(){this.activeTab=1,this.checkAllModel=!1,this.contacts=this.contacts.map(e=>(e.checked=this.selectedContacts.some(t=>t.contactID===e.contactID),e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](F.a),v["\u0275\u0275directiveInject"](m.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-group-learners-add"]],viewQuery:function(e,t){if(1&e&&v["\u0275\u0275viewQuery"](_,!0),2&e){let e;v["\u0275\u0275queryRefresh"](e=v["\u0275\u0275loadQuery"]())&&(t.searchInput=e.first)}},decls:26,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column",3,"avnonLoader"],[1,"form-group","col-sm-12"],[1,"fixed-modal-block"],[1,"float-left","floating-input","grid-input"],["placeholder","Search contact",1,"form-control"],["searchInput",""],[1,"nav","table-tabs","grid-tabs","float-right"],[1,"nav-item","cursor-pointer"],[1,"nav-link",3,"click"],["class","contact-selector-content",4,"ngIf"],[1,"text-right","pt-3"],[1,"btn","btn-primary",3,"disabled","click"],[1,"contact-selector-content"],[1,"table","inline-table","table-grid","table-compact","table-modal-search"],[1,"inline-header"],[1,"font-weight-normal","col-check"],[1,"custom-control","custom-checkbox"],["id","checkall","type","checkbox",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","checkall",1,"custom-control-label"],[1,"font-weight-normal"],[1,"font-weight-normal","col-position"],["class","cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"ngClass","click"],["type","checkbox",1,"custom-control-input",3,"checked"],[1,"custom-control-label"],[1,"d-flex","align-items-center"],["alt","",1,"img-fluid","avatar-rounded",3,"src"],["class","pl-2",4,"ngIf"],[1,"pl-2"],[1,"fas","fa-trash-alt","text-danger"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h5",1),v["\u0275\u0275text"](2," Add Learners "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"button",2),v["\u0275\u0275listener"]("click",function(){return t.dismiss()}),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",4),v["\u0275\u0275elementStart"](7,"div",5),v["\u0275\u0275elementStart"](8,"div",6),v["\u0275\u0275elementStart"](9,"span",7),v["\u0275\u0275element"](10,"input",8,9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"ul",10),v["\u0275\u0275elementStart"](13,"li",11),v["\u0275\u0275elementStart"](14,"a",12),v["\u0275\u0275listener"]("click",function(){return t.availableTab()}),v["\u0275\u0275text"](15,"Available"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"li",11),v["\u0275\u0275elementStart"](17,"a",12),v["\u0275\u0275listener"]("click",function(){return t.activeTab=2}),v["\u0275\u0275text"](18," Selected "),v["\u0275\u0275elementStart"](19,"span"),v["\u0275\u0275text"](20),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](21,Q,14,2,"div",13),v["\u0275\u0275template"](22,K,11,1,"div",13),v["\u0275\u0275elementStart"](23,"div",14),v["\u0275\u0275elementStart"](24,"button",15),v["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),v["\u0275\u0275text"](25," Submit "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("avnonLoader",t.loading||t.portfolioLoading),v["\u0275\u0275advance"](7),v["\u0275\u0275classProp"]("active",1===t.activeTab),v["\u0275\u0275advance"](3),v["\u0275\u0275classProp"]("active",2===t.activeTab),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"]("(",t.selectedContacts.length,")"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1===t.activeTab),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",2===t.activeTab),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("disabled",!t.selectedContacts.length))},directives:[x.a,a.n,r.a,r.q,r.t,a.m,a.l],pipes:[N.a],styles:[".contact-selector-content[_ngcontent-%COMP%]{height:400px;overflow:auto;position:relative}.fw-block.filter-sticky[_ngcontent-%COMP%]{background-color:#edf1f5;padding:10px 20px;font-size:12px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;padding:.5rem}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#edf1f5}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .col-check[_ngcontent-%COMP%]{width:40px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),e})();var X=n("9122"),J=n("Hu2X");function Z(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",5),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"]("",e.portfolios.length," ",v["\u0275\u0275pipeBind1"](2,2,"PROGRAM.ACTIVE-STARTUPS-ON-THIS"),"")}}function ee(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",5),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"]("",e.portfolios.length," ",v["\u0275\u0275pipeBind1"](2,2,"PROGRAM.ACTIVE-LEARNERS-ON-THIS"),"")}}function te(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",6),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().addLearners()}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("+ ",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ADD-LEARNERS")," "))}const ne=function(e){return["/company",e]};function ae(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275element"](1,"img",8),v["\u0275\u0275elementStart"](2,"div",9),v["\u0275\u0275elementStart"](3,"div",10),v["\u0275\u0275elementStart"](4,"h3",11),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](5,"a",12),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"span",13),v["\u0275\u0275text"](8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("src",e.profilePhoto?n.blobUrl+"256px/"+e.profilePhoto:"assets/img/trainer-holder.png",v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](5,ne,e.companyID)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"](" ",e.firstname," ",e.surname," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.companyName)}}let re=(()=>{class e{constructor(e,t,n,a,r){this.programService=e,this.activatedRoute=t,this.ngbModal=n,this.companyService=a,this.userService=r,this.programInstance=new M.a,this.programInstanceStages=[],this.adminCheck=!1,this.portfolios=[],this.originalPortfolios=[],this.blobUrl=P.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.companyID=this.user.companyID,this.programInstanceID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillProgramInstanceProfile(),this.getPortfolios(),this.getStages()}fillProgramInstanceProfile(){this.loading=!0,this.programService.getProgramInstanceProfile(this.programInstanceID).pipe(Object(O.a)(e=>(this.programInstance=e,this.programService.getProgramProfile(e.programID)))).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess,this.loading=!1})}addLearners(){const e=this.ngbModal.open(W,{backdrop:"static",size:"lg"});e.componentInstance.programInstance=this.programInstance,e.componentInstance.programInstanceStages=this.programInstanceStages,e.componentInstance.existingPortfolios=this.originalPortfolios,e.result.then(e=>{e.length>0&&this.getPortfolios()})}getPortfolios(){this.portfolioLoading=!0,this.companyService.getPortfolioList(0,this.programInstanceID,0,0,0,0,0).subscribe(e=>{this.originalPortfolios=e,this.portfolios=e.filter(e=>3===e.programStageTypeID||null===e.programStageTypeID),this.portfolioLoading=!1})}getStages(){this.stagesLoading=!0,this.programService.getProgramInstanceStages(this.programInstanceID).subscribe(e=>{this.programInstanceStages=e,this.stagesLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](J.a),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-instance-active-tab"]],decls:6,vars:5,consts:[[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"d-flex","align-items-center","border-bottom","float-left","w-100","filter-container"],["class","mr-4",4,"ngIf"],["class","cursor-pointer text-primary ml-auto",3,"click",4,"ngIf"],["class","common-list-item flex-row d-flex w-100 cursor-pointer",4,"ngFor","ngForOf"],[1,"mr-4"],[1,"cursor-pointer","text-primary","ml-auto",3,"click"],[1,"common-list-item","flex-row","d-flex","w-100","cursor-pointer"],["alt","network",1,"avatar","avatar-48",3,"src"],[1,"d-flex","flex-column","ml-2","flex-grow-1","mr-auto"],[1,"d-flex","w-100","mb-1"],[1,"mb-0","mr-2",3,"click"],[3,"routerLink"],[1,"meta"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275template"](2,Z,3,4,"span",2),v["\u0275\u0275template"](3,ee,3,4,"span",2),v["\u0275\u0275template"](4,te,3,3,"span",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,ae,9,7,"div",4),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading||t.portfolioLoading||t.stagesLoading),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.program&&2!==t.program.programTypeID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.program&&2===t.program.programTypeID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.program&&2===t.program.programTypeID&&t.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",t.portfolios))},directives:[x.a,a.n,a.m,g.f],pipes:[d.c],styles:[".avatar-60[_ngcontent-%COMP%]{height:60px;object-fit:cover}"]}),e})();var oe=n("0mlJ");function ie(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"date"),v["\u0275\u0275pipe"](3,"dateObject"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind2"](2,1,v["\u0275\u0275pipeBind1"](3,4,e.companyProgramStageStartDate),"dd MMM yyyy")," ")}}function se(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",9),v["\u0275\u0275elementStart"](1,"div",10),v["\u0275\u0275elementStart"](2,"span",11),v["\u0275\u0275element"](3,"img",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"span",13),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"span",14),v["\u0275\u0275text"](7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"div",15),v["\u0275\u0275template"](9,ie,4,6,"span",16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](10,"div",17),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("src",null!=e&&e.logoURL?n.blobUrl+e.logoURL:"../assets/img/trainer-holder.png",v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate2"]("",e.firstname," ",e.surname,""),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.companyName),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.companyProgramStageStartDate)}}let ce=(()=>{class e{constructor(e,t,n,a){this.programService=e,this.activatedRoute=t,this.companyService=n,this.userService=a,this.programInstance=new M.a,this.programInstanceStages=[],this.adminCheck=!1,this.portfolios=[],this.blobUrl=P.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.companyID=this.user.companyID,this.programInstanceID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillProgramInstanceProfile(),this.getPortfolios(),this.getStages()}fillProgramInstanceProfile(){this.loading=!0,this.programService.getProgramInstanceProfile(this.programInstanceID).pipe(Object(O.a)(e=>(this.programInstance=e,this.programService.getProgramProfile(e.programID)))).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess,this.loading=!1})}getPortfolios(){this.portfolioLoading=!0,this.companyService.getPortfolioList(0,this.programInstanceID,0,0,0,0,0).subscribe(e=>{this.portfolios=e,this.portfolios=this.portfolios.filter(e=>4===e.programStageTypeID),this.portfolioLoading=!1})}getStages(){this.stagesLoading=!0,this.programService.getProgramInstanceStages(this.programInstanceID).subscribe(e=>{this.programInstanceStages=e,this.stagesLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](J.a),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-instance-graduates-tab"]],decls:17,vars:16,consts:[[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"d-flex","align-items-center","float-left","w-100","border-bottom","filter-container"],[1,"mr-4"],[1,"d-flex","flex-column","float-left","w-100",3,"avnonLoader"],[1,"row","table-row","table-users","filter-container"],[1,"col-sm-5","d-flex","align-items-center","cursor-pointer"],[1,"col-sm-3","d-flex","align-items-center","cursor-pointer"],[1,"col-sm-4","d-flex","align-items-center","justify-content-end","cursor-pointer"],["class","row table-row table-users applicants-table filter-container",4,"ngFor","ngForOf"],[1,"row","table-row","table-users","applicants-table","filter-container"],[1,"col-sm-5","pl-3","title-avatar"],[1,"float-left"],["alt","",1,"img-fluid","avatar-rounded","avatar-60",3,"src"],[1,"table-title","s-block"],[1,"s-block"],[1,"col-sm-3","pr-0","d-flex","flex-column","align-items-start"],[4,"ngIf"],[1,"col-sm-4","last-right","text-right","d-flex","justify-content-between","flex-wrap"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span",2),v["\u0275\u0275text"](3),v["\u0275\u0275pipe"](4,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"div",3),v["\u0275\u0275elementStart"](6,"div",4),v["\u0275\u0275elementStart"](7,"div",5),v["\u0275\u0275text"](8),v["\u0275\u0275pipe"](9,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"div",6),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"div",7),v["\u0275\u0275text"](14),v["\u0275\u0275pipe"](15,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](16,se,11,5,"div",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading||t.portfolioLoading||t.stagesLoading),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate2"]("",t.portfolios.length," ",v["\u0275\u0275pipeBind1"](4,8,"PROGRAM.ACTIVE-STARTUPS-ON-THIS"),""),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("avnonLoader",t.portfolioLoading),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](9,10,"PROGRAM.LEARNER")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](12,12,"COMMON.START-DATE")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](15,14,"PROGRAM.PROGRESS")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",t.portfolios))},directives:[x.a,a.m,a.n],pipes:[d.c,a.e,oe.a],styles:[".avatar-60[_ngcontent-%COMP%]{height:60px;object-fit:cover}"]}),e})();var le=n("OzGw"),pe=n("Ll2f"),me=n("VgRj"),de=n("wgH9");function ge(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"small",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.PUBLIC-URL-IN-USE")," "))}function ue(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"small",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,1,"FORMS.NO-SPACE-ALLOWED")," "))}function Ie(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label"),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",21),v["\u0275\u0275elementStart"](5,"input",22,23),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().startDateModel=t})("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",24),v["\u0275\u0275elementStart"](8,"span",25),v["\u0275\u0275elementStart"](9,"span",26),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,2,"COMMON.START-DATE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngModel",e.startDateModel)}}function he(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label"),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",21),v["\u0275\u0275elementStart"](5,"input",27,28),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().endDateModel=t})("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",24),v["\u0275\u0275elementStart"](8,"span",25),v["\u0275\u0275elementStart"](9,"span",26),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,2,"COMMON.END-DATE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngModel",e.endDateModel)}}let Se=(()=>{class e{constructor(e,t,n,a){this.calendar=e,this.programService=t,this.activeModal=n,this.lookupService=a,this.startDateModel={year:null,month:null,day:null},this.endDateModel={year:null,month:null,day:null},this.programInstance=new M.a,this.rollingIntake=null,this.lookup=new pe.a}ngOnInit(){if(this.url=me.a.fullDomain()+"/apply/",console.log(this.programInstance,this.programTitle,this.programID,"sample inputs"),this.editMode){const e=new Date(this.programInstance.programInstanceStartDate),t=new Date(this.programInstance.programInstanceEndDate);this.startDateModel={year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate()+1},this.endDateModel={year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate()+1},this.rollingIntake=this.programInstance.rollingIntake?1:2,this.getLookup(),this.lookupService.deleteLookup(4).subscribe()}}checkLookup(){this.lookup.lookupName.trim().split(" ").length>1?this.lookupSpaceError=!0:(this.lookupSpaceError=!1,this.loading=!0,this.lookupService.getLookup(0,pe.b.Instance,0,this.lookup.lookupName).subscribe(e=>{if(0===e.length||1===e.length&&e[0].lookupID===this.lookup.lookupID)return this.lookupChecked=!0,void this.onSubmit();e.length>0&&(this.lookupChecked=!1,this.lookupFound=!0)}))}onSubmit(){if(this.lookupChecked){if(this.loading=!0,console.log("about to call update",this.editMode),2===this.rollingIntake){const e="yyyy-MM-dd HH:mm:ss",t=new Date(this.startDateModel.year,this.startDateModel.month-1,this.startDateModel.day,0,0),n=new Date(this.endDateModel.year,this.endDateModel.month-1,this.endDateModel.day,0,0),r="en-UK",o=Object(a.y)(t,e,r),i=Object(a.y)(n,e,r);this.programInstance.programInstanceStartDate=o,this.programInstance.programInstanceEndDate=i,this.programInstance.rollingIntake=!1}1===this.rollingIntake&&(this.programInstance.rollingIntake=!0),1===this.editMode?(console.log("about to call update"),this.programService.updateProgramInstance(this.programInstance).subscribe(e=>{this.lookup.lookupID?this.updateLookup():this.addLookup(this.programInstance.programInstanceID),console.log("called update"),this.activeModal.close(this.programInstance)})):(this.programInstance.programID=this.programID,this.programService.createProgramInstance(this.programInstance).subscribe(e=>{this.programInstance.programInstanceID=e.inOut_ProgramInstanceID,this.addLookup(this.programInstance.programInstanceID),this.activeModal.close(this.programInstance)}))}else this.checkLookup()}onChangeStartDate(){}onCancel(){this.activeModal.dismiss()}onTypeChange(){if(2===this.rollingIntake){const e=new Date,t=new Date;this.startDateModel={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.endDateModel={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}}addLookup(e){this.lookup.lookupCategoryID=pe.b.Instance,this.lookup.referenceID=e,this.lookupService.postLookup(this.lookup).subscribe()}updateLookup(){this.lookupService.updateLookup(this.lookup).subscribe()}getLookup(){this.lookupService.getLookup(0,pe.b.Instance,this.programInstance.programInstanceID,"NA").subscribe(e=>{e[0]&&(this.lookup=e[0])})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](m.d),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](m.a),v["\u0275\u0275directiveInject"](de.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-instance-add"]],decls:43,vars:32,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["type","text","required","","name","programInstanceTitle","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","d-flex","flex-column"],["for","lookupName"],[1,"d-flex","w-100","align-items-center"],[1,"mr-2"],["type","text","name","lookupName","id","lookupName","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["name","rollingIntake","required","",1,"form-control",3,"ngModel","change","ngModelChange"],[3,"ngValue"],["class","form-group",4,"ngIf"],[1,"text-right"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","startDate","required","","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["startDatePicker","ngbDatepicker"],[1,"input-group-append"],[1,"input-group-text","bg-transparent"],[1,"calendar-icon","icon-sm",3,"click"],["placeholder","dd-mm-yyyy","name","endDate","required","","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["endDatePicker","ngbDatepicker"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h5",1),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"button",2),v["\u0275\u0275listener"]("click",function(){return t.onCancel()}),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",4),v["\u0275\u0275elementStart"](7,"form",5,6),v["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),v["\u0275\u0275elementStart"](9,"div",7),v["\u0275\u0275elementStart"](10,"label"),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"input",8),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.programInstance.programInstanceTitle=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"div",9),v["\u0275\u0275elementStart"](15,"label",10),v["\u0275\u0275text"](16),v["\u0275\u0275pipe"](17,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](18,"div",11),v["\u0275\u0275elementStart"](19,"span",12),v["\u0275\u0275text"](20),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](21,"input",13),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.lookup.lookupName=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](22,ge,3,3,"small",14),v["\u0275\u0275template"](23,ue,3,3,"small",14),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](24,"div",7),v["\u0275\u0275elementStart"](25,"label"),v["\u0275\u0275text"](26),v["\u0275\u0275pipe"](27,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](28,"select",15),v["\u0275\u0275listener"]("change",function(){return t.onTypeChange()})("ngModelChange",function(e){return t.rollingIntake=e}),v["\u0275\u0275elementStart"](29,"option",16),v["\u0275\u0275text"](30),v["\u0275\u0275pipe"](31,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](32,"option",16),v["\u0275\u0275text"](33),v["\u0275\u0275pipe"](34,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](35,"option",16),v["\u0275\u0275text"](36),v["\u0275\u0275pipe"](37,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](38,Ie,10,4,"div",17),v["\u0275\u0275template"](39,he,10,4,"div",17),v["\u0275\u0275elementStart"](40,"div",18),v["\u0275\u0275elementStart"](41,"button",19),v["\u0275\u0275text"](42),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275reference"](8);v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",t.programInstance.programInstanceID>0?"Update Group":"Add Group"," "),v["\u0275\u0275advance"](9),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](12,20,"PROGRAM.GROUP-NAME")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.programInstance.programInstanceTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](17,22,"PROGRAM.CHOOSE-UNIQUE-NAME-FOR-PUBLIC-LINK")),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](t.url),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngModel",t.lookup.lookupName),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.lookupFound),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.lookupSpaceError),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](27,24,"PROGRAM.FORMAT")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngValue",null),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("- ",v["\u0275\u0275pipeBind1"](31,26,"COMMON.PLEASE-SELECT")," -"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue",1),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](34,28,"PROGRAM.ROLLING-INTAKE")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue",2),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](37,30,"PROGRAM.BATCH-COHORT-INTAKE")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",2===t.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",2===t.rollingIntake),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("disabled",!e.valid),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",t.programInstance.programInstanceID>0?"Update":"Add"," ")}},directives:[r.E,r.r,r.s,r.b,r.A,r.q,r.t,a.n,r.B,r.v,r.D,m.o],pipes:[d.c],styles:[""]}),e})();var fe=n("FvYy");function ve(e,t){if(1&e&&v["\u0275\u0275element"](0,"app-banner",20),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("referenceID",e.programInstance.programInstanceID)("bannerUrl",e.programInstance.programInstanceBanner)("documentCategoryID",15)("canEdit",e.adminCheck)}}function De(e,t){if(1&e&&v["\u0275\u0275element"](0,"img",21),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("src",e.programInstance.logo?e.blobUrl+"256px/"+e.programInstance.logo:"assets/img/placeholder.jpg",v["\u0275\u0275sanitizeUrl"])}}function be(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"button",22),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onEditProgramInstance()}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](2,1,"COMMON.EDIT")," "))}function ye(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",23),v["\u0275\u0275elementStart"](1,"div",24),v["\u0275\u0275elementStart"](2,"button",25),v["\u0275\u0275element"](3,"span",26),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",27),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",28),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onDeleteProgramInstance()}),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](7),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](8,1,"COMMON.DELETE")))}function xe(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",29),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ROLLING-INTAKE")))}function Ee(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",29),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"date"),v["\u0275\u0275pipe"](3,"dateObject"),v["\u0275\u0275pipe"](4,"date"),v["\u0275\u0275pipe"](5,"dateObject"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"]("",v["\u0275\u0275pipeBind2"](2,2,v["\u0275\u0275pipeBind1"](3,5,null==e.programInstance?null:e.programInstance.programInstanceStartDate),"dd MMM yyyy")," - ",v["\u0275\u0275pipeBind2"](4,7,v["\u0275\u0275pipeBind1"](5,10,null==e.programInstance?null:e.programInstance.programInstanceEndDate),"dd MMM yyyy"),"")}}const Ce=function(e){return["/program/admin",e]};function ke(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"p"),v["\u0275\u0275elementStart"](1,"a",30),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](2,Ce,e.program.programID)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.program.programTitle)}}const Me=function(e){return["/program/instance",e]},Pe=function(){return{exact:!0}},Oe=function(e){return["/program/instance",e,"active"]},we=function(e){return["/program/instance",e,"graduates"]};let Ae=(()=>{class e{constructor(e,t,n,a,r,o){this.programService=e,this.activatedRoute=t,this.ngbModal=n,this.userService=a,this.location=r,this.router=o,this.programInstance=new M.a,this.programInstanceStages=[],this.adminCheck=!1,this.programInstanceStagesScreening=[],this.blobUrl=P.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.companyID=this.user.companyID,this.programInstanceID=+this.activatedRoute.snapshot.paramMap.get("id"),this.fillProgramInstanceProfile()}onDeleteProgramInstance(){const e=this.ngbModal.open(le.a);e.componentInstance.objectType="Delete Group",e.componentInstance.objectDetails=this.programInstance.programInstanceTitle,e.result.then(e=>{console.log(e,"sample"),"Yes"===e&&this.programService.deleteProgramInstance(this.programInstanceID).subscribe(()=>{this.router.navigate(["/program/admin",this.program.programID,"groups"])})})}onEditProgramInstance(){const e=this.ngbModal.open(Se,{size:"lg"});e.componentInstance.programInstance=Object(j.l)(this.programInstance),e.componentInstance.editMode=1,e.componentInstance.programID=this.programInstance.programID,e.componentInstance.programTitle=this.programInstance.programTitle,e.result.then(e=>{this.programInstance=e,this.programService.instanceStoreRx(this.programInstance)})}fillProgramInstanceProfile(){this.loading=!0,this.programService.getProgramInstanceProfile(this.programInstanceID).pipe(Object(O.a)(e=>(this.programInstance=e,this.programService.getProgramProfile(e.programID)))).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess,this.loading=!1})}back(){this.router.navigate(["/program/admin",this.program.programID,"groups"])}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](a.j),v["\u0275\u0275directiveInject"](g.c))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-instance-profile"]],decls:35,vars:34,consts:[[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"page-header"],[1,"profile-photos","img-bottom-border"],["class","w-100",3,"referenceID","bannerUrl","documentCategoryID","canEdit",4,"ngIf"],[1,"user-photo"],["alt","logo","class","img-fluid profile-user",3,"src",4,"ngIf"],[1,"bottom-actions","d-flex","justify-content-end","align-items-center"],["class","btn btn-sm btn-outline-primary mr-3 mt-3",3,"click",4,"ngIf"],["class","actions",4,"ngIf"],[1,"profile-overview"],["class","meta",4,"ngIf"],[4,"ngIf"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],[1,"w-100",3,"referenceID","bannerUrl","documentCategoryID","canEdit"],["alt","logo",1,"img-fluid","profile-user",3,"src"],[1,"btn","btn-sm","btn-outline-primary","mr-3","mt-3",3,"click"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30","mr-3","mt-3"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"meta"],[1,"meta",3,"routerLink"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span",2),v["\u0275\u0275listener"]("click",function(){return t.back()}),v["\u0275\u0275element"](3,"i",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"h1",4),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",5),v["\u0275\u0275elementStart"](7,"div",6),v["\u0275\u0275template"](8,ve,1,4,"app-banner",7),v["\u0275\u0275elementStart"](9,"div",8),v["\u0275\u0275template"](10,De,1,1,"img",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"div",10),v["\u0275\u0275template"](12,be,3,3,"button",11),v["\u0275\u0275template"](13,ye,9,3,"div",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"div",13),v["\u0275\u0275elementStart"](15,"h2"),v["\u0275\u0275text"](16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](17,xe,3,3,"span",14),v["\u0275\u0275template"](18,Ee,6,12,"span",14),v["\u0275\u0275template"](19,ke,3,4,"p",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"div",16),v["\u0275\u0275elementStart"](21,"ul",17),v["\u0275\u0275elementStart"](22,"li",18),v["\u0275\u0275elementStart"](23,"a",19),v["\u0275\u0275text"](24),v["\u0275\u0275pipe"](25,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](26,"li",18),v["\u0275\u0275elementStart"](27,"a",19),v["\u0275\u0275text"](28),v["\u0275\u0275pipe"](29,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](30,"li",18),v["\u0275\u0275elementStart"](31,"a",19),v["\u0275\u0275text"](32),v["\u0275\u0275pipe"](33,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](34,"router-outlet"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](null==t.programInstance?null:t.programInstance.programInstanceTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",t.programInstance),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.programInstance),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.programInstance?null:t.programInstance.programInstanceTitle),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.programInstance.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!t.programInstance.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.program),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](25,Me,t.programInstanceID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](27,Pe)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](25,19,"PROGRAM.STAGE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](28,Oe,t.programInstanceID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](30,Pe)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](29,21,"PROGRAM.ACTIVE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](31,we,t.programInstanceID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](33,Pe)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](33,23,"PROGRAM.GRADUATES")))},directives:[x.a,a.n,g.f,g.e,g.h,fe.a],pipes:[d.c,a.e,oe.a],styles:[".group-content[_ngcontent-%COMP%]{margin-top:53px;min-height:calc(100vh - 55px)}  .group-banner .content-banner{max-height:196px!important;min-height:196px!important}  .group-banner .content-banner .banner-img{max-height:196px!important}"]}),e})();var Te=n("V6dO"),Re=n("WchS"),je=n("oini"),Le=n("ev4g"),Ve=n("xDUJ"),Fe=n("XAmU");function Be(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"option",15),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;v["\u0275\u0275property"]("ngValue",e.formID),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.formName)}}function Ne(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label",19),v["\u0275\u0275text"](2,"Applications Open "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"div",20),v["\u0275\u0275elementStart"](4,"input",21,22),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().startDateModel=t})("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](5).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",23),v["\u0275\u0275elementStart"](7,"button",24),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](5).toggle()}),v["\u0275\u0275element"](8,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",e.startDateModel)}}function _e(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label",26),v["\u0275\u0275text"](2,"Applications Close"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"div",20),v["\u0275\u0275elementStart"](4,"input",27,28),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().endDateModel=t})("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](5).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",23),v["\u0275\u0275elementStart"](7,"button",24),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](5).toggle()}),v["\u0275\u0275element"](8,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",e.endDateModel)}}let Ge=(()=>{class e{constructor(e,t,n,a,r,o,i){this.opportunityService=e,this.programService=t,this.taskService=n,this.ngbActiveModal=a,this.formService=r,this.userService=o,this.discussionService=i,this.programInstance=new M.a,this.opportunity=new Te.a,this.programInstanceStage=new Re.a,this.editMode=0,this.forms=[],this.startDateModel={year:null,month:null,day:null},this.endDateModel={year:null,month:null,day:null},this.companyID=this.userService.user.getValue().companyID||0,this.contactID=this.userService.user.getValue().contactID}ngOnInit(){this.minDate={year:2e3,month:1,day:1},this.maxDate={year:2025,month:1,day:1},this.fillForms(),this.programInstanceStage.programInstanceStageID&&(this.editMode=1,this.getMasterTask(),this.fillStage(),this.getOpportunity()),this.programInstance.rollingIntake&&!this.programInstanceStage.programInstanceStageID&&(this.defaultDates(),console.log("d"))}getOpportunity(){this.opportunityLoading=!0,this.opportunityService.getOpportunity(0,0,3,this.programInstance.programInstanceID).subscribe(e=>{this.opportunity=e[0],console.log(e,"sample opporutnity"),this.opportunityLoading=!1},()=>this.opportunityLoading=!1)}getMasterTask(){this.taskLoading=!0,this.taskService.getTask(0,22,this.programInstance.programInstanceID,0,0,0,0,0).subscribe(e=>{this.formID=e[0].formID,this.task=e[0],console.log(e,"task res"),this.taskLoading=!1},()=>this.taskLoading=!1)}fillStage(){const e=new Date(this.programInstanceStage.programStageStartDate),t=new Date(this.programInstanceStage.programStageEndDate);this.startDateModel={year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getDate()},this.endDateModel={year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getDate()}}defaultDates(){const e=new Date,t=new Date;this.startDateModel={year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getDate()},this.endDateModel={year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getDate()}}createOpportunity(){const e="yyyy-MM-dd HH:mm:ss",t=new Date(this.startDateModel.year,this.startDateModel.month-1,this.startDateModel.day,0,0),n="en-UK",r=Object(a.y)(t,e,n),o=new Date(this.endDateModel.year,this.endDateModel.month-1,this.endDateModel.day,0,0),i=Object(a.y)(o,e,n);this.opportunity.opportunity=this.programTitle,this.opportunity.opportunityCategoryID=3,this.opportunity.companyID=this.companyID,this.opportunity.referenceID=this.programInstance.programInstanceID,this.opportunity.opportunityValidFrom=r,this.opportunity.opportunityValidUntil=i,this.opportunityService.insertOpportunity(this.opportunity).subscribe(e=>{console.log(e)})}fillForms(){this.formLoading=!0,this.formService.getForms(this.companyID,0,0).subscribe(e=>{this.forms=e,this.formLoading=!1},()=>this.formLoading=!1)}updateOpportunity(){console.log("update");const e="yyyy-MM-dd HH:mm:ss",t=new Date(this.startDateModel.year,this.startDateModel.month-1,this.startDateModel.day,0,0),n="en-UK",r=Object(a.y)(t,e,n),o=new Date(this.endDateModel.year,this.endDateModel.month-1,this.endDateModel.day,0,0),i=Object(a.y)(o,e,n);this.opportunity.opportunityValidFrom=r,this.opportunity.opportunityValidUntil=i,this.opportunityService.updateOpportunity(this.opportunity).subscribe(e=>{console.log(e,"updated",this.opportunity)})}onSubmit(){const e="yyyy-MM-dd HH:mm:ss",t=new Date(this.startDateModel.year,this.startDateModel.month-1,this.startDateModel.day,0,0),n="en-UK",r=Object(a.y)(t,e,n),o=new Date(this.endDateModel.year,this.endDateModel.month-1,this.endDateModel.day,0,0),i=Object(a.y)(o,e,n),s={programInstanceStageID:0,programInstanceID:this.programInstance.programInstanceID,programStageTitle:"Initial Application",programStageTypeID:1,programStageStartDate:r,programStageEndDate:i,programStageOrderID:0,programStageOverview:this.programInstanceStage.programStageOverview,programStageMaxDurationTypeID:0,programStageMaxDuration:0};if(console.log("about to call",this.editMode,s),1===this.editMode){console.log("edit mode 1",this.editMode);const e={programStageStartDate:r,programStageEndDate:i},t=Object(j.c)(this.programInstanceStage,e);this.programService.updateProgramInstanceStage(t).subscribe(),this.updateOpportunity(),this.task&&(this.task.formID=this.formID,this.task.endDate=i,this.taskService.updateTask(this.task).subscribe()),this.ngbActiveModal.close()}else if(0===this.editMode){this.programService.createProgramInstanceStage(s).subscribe(e=>{s.programInstanceStageID=e.inOut_ProgramInstanceStageID,this.createOpportunity()});const e={taskTitle:"Application Form "+this.programInstance.programInstanceTitle,taskDescription:"",startDate:Object(j.a)(new Date),endDate:i,taskValue:0,taskCategoryID:22,referenceID:this.programInstance.programInstanceID,autoSignOff:!0,taskModeID:0,submittedBy:0,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:0,taskTypeID:0,formID:this.formID};console.log("About to add a task",e),this.taskService.addTask(e).subscribe(e=>{}),this.ngbActiveModal.close(s)}}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](je.a),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](Le.a),v["\u0275\u0275directiveInject"](m.a),v["\u0275\u0275directiveInject"](Ve.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](Fe.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-instance-application-stage-add"]],decls:36,vars:14,consts:[[1,"container","body"],[1,"row"],[1,"col-lg-9","content","form-page",3,"avnonLoader"],[1,"lead"],[3,"submit"],["f","ngForm"],[1,"form-block"],[1,"form-group"],["for","formID"],["name","formID","id","formID",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],[3,"ngValue",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["for","activeStatusID"],["name","activeStatusID","id","activeStatusID","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"form-group","form-group-block"],[1,"action-row"],[1,"btn","btn-outline-primary",3,"disabled"],["for","startDateModel"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","startDate","ngbDatepicker","","id","startDateModel",1,"form-control",3,"ngModel","ngModelChange","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","calendar",3,"click"],[1,"calendar-icon","icon-sm"],["for","endDate"],["placeholder","dd-mm-yyyy","id","endDate","name","endDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["d1","ngbDatepicker"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"div",2),v["\u0275\u0275elementStart"](3,"h1"),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"p",3),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",1),v["\u0275\u0275elementStart"](8,"form",4,5),v["\u0275\u0275listener"]("submit",function(){return t.onSubmit()}),v["\u0275\u0275elementStart"](10,"div",6),v["\u0275\u0275elementStart"](11,"div",7),v["\u0275\u0275elementStart"](12,"label",8),v["\u0275\u0275text"](13,"Which form do applicants need to submit?"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"select",9),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.formID=e}),v["\u0275\u0275elementStart"](15,"option",10),v["\u0275\u0275text"](16,"- Please select -"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](17,Be,2,2,"option",11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](18,Ne,9,1,"div",12),v["\u0275\u0275template"](19,_e,9,1,"div",12),v["\u0275\u0275elementStart"](20,"div",7),v["\u0275\u0275elementStart"](21,"label",13),v["\u0275\u0275text"](22,"Status "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](23,"select",14),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.opportunity.activeStatusID=e}),v["\u0275\u0275elementStart"](24,"option",15),v["\u0275\u0275text"](25,"- Please select -"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](26,"option",15),v["\u0275\u0275text"](27,"Active"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](28,"option",15),v["\u0275\u0275text"](29,"Paused"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](30,"option",15),v["\u0275\u0275text"](31,"Closed"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](32,"div",16),v["\u0275\u0275elementStart"](33,"div",17),v["\u0275\u0275elementStart"](34,"button",18),v["\u0275\u0275text"](35,"Submit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275reference"](9);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("avnonLoader",t.loading||t.formLoading||t.taskLoading||t.opportunityLoading),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate2"]("",t.pageAction," ",t.programStageType," Stage"),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("Please complete the form below to add a stage to the ",t.programInstance.programInstanceTitle," group "),v["\u0275\u0275advance"](8),v["\u0275\u0275property"]("ngModel",t.formID),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.forms),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!(null!=t.programInstance&&t.programInstance.rollingIntake)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!(null!=t.programInstance&&t.programInstance.rollingIntake)),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",t.opportunity.activeStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngValue",null),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue",2),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue",1),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue",3),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("disabled",e.invalid)}},directives:[x.a,r.E,r.r,r.s,r.B,r.q,r.t,r.v,r.D,a.m,a.n,r.A,m.o,r.b],styles:[""]}),e})();const Ue=function(e){return{programInstanceTitle:e}};function qe(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"p",23),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind2"](2,1,"PROGRAM.ADD-STAGE-FORM-FILLING-INFO",v["\u0275\u0275pureFunction1"](4,Ue,e.programInstance.programInstanceTitle))," ")}}function $e(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"option",28),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;v["\u0275\u0275property"]("value",e.formID),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.formName)}}function Qe(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label",24),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"select",25),v["\u0275\u0275listener"]("change",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().setFormSelected(t.target.value)})("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().formID=t}),v["\u0275\u0275elementStart"](5,"option",26),v["\u0275\u0275text"](6),v["\u0275\u0275pipe"](7,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](8,$e,2,2,"option",27),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,4,"PROGRAM.SELECT-FORM")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",e.formID),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("- ",v["\u0275\u0275pipeBind1"](7,6,"COMMON.PLEASE-SELECT")," -"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",e.forms)}}function ze(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"option",28),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;v["\u0275\u0275property"]("value",e.courseID),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.courseTitle)}}function Ye(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label",29),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"select",30),v["\u0275\u0275listener"]("change",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().setCourseSelected(t.target.value)})("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().courseID=t}),v["\u0275\u0275elementStart"](5,"option",26),v["\u0275\u0275text"](6),v["\u0275\u0275pipe"](7,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](8,ze,2,2,"option",27),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,4,"PROGRAM.SELECT-WORKSHOP-TO-ATTEND")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",e.courseID),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("- ",v["\u0275\u0275pipeBind1"](7,6,"COMMON.PLEASE-SELECT")," -"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",e.courses)}}function He(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label",31),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",32),v["\u0275\u0275elementStart"](5,"input",33,34),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().startDateModel=t})("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",35),v["\u0275\u0275elementStart"](8,"button",36),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275element"](9,"i",37),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,2,"COMMON.START-DATE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngModel",e.startDateModel)}}function Ke(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"label",38),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",32),v["\u0275\u0275elementStart"](5,"input",39,40),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().endDateModel=t})("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",35),v["\u0275\u0275elementStart"](8,"button",36),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275reference"](6).toggle()}),v["\u0275\u0275element"](9,"i",37),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,2,"COMMON.END-DATE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngModel",e.endDateModel)}}let We=(()=>{class e{constructor(e,t,n,a,r,o,i,s){this.programService=e,this.location=t,this.ngbActiveModal=n,this.formService=a,this.courseService=r,this.taskService=o,this.router=i,this.ngbModal=s,this.programInstanceStage=new Re.a,this.courses=[],this.forms=[],this.minDate={year:2e3,month:1,day:1},this.maxDate={year:2025,month:1,day:1}}ngOnInit(){this.companyID=+localStorage.getItem("CID"),console.log(this.programInstance,"here the initi code"),this.fillForms(),this.fillCourses(),this.editMode&&this.parseEditValues()}fillForms(){this.formService.getForms(this.companyID,0,0).subscribe(e=>{this.forms=e,console.log(this.forms,"Forms")})}setCourseSelected(e){}setFormSelected(e){}fillCourses(){this.courseService.getCourses(this.companyID).subscribe(e=>{this.courses=e,console.log(this.courses)})}onCourseAdd(e){console.log("Assign evaluators"),this.programService.submitProgramInstanceStageCourses({programInstanceStageID:e,courseID:this.courseID}).subscribe(e=>{})}onFormAdd(e){console.log("Assign evaluators");const t={formID:this.formID,referenceID:e,formCategoryID:1,formTaskID:0};console.log(t,"here's the form task"),this.formService.insertFormTask(t).subscribe(e=>{});const n={taskTitle:"Form Submission - "+this.formID,taskDescription:"",startDate:Object(j.a)(new Date),endDate:Object(j.a)(new Date),taskValue:0,taskCategoryID:17,referenceID:e,autoSignOff:!0,taskModeID:0,submittedBy:0,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:0,taskTypeID:0,formID:this.formID};console.log("About to add a task",n),this.taskService.addTask(n).subscribe(e=>{})}onInterviewAdd(e,t){const n={taskMasterID:0,taskTitle:"Attend Interview / Pitch",taskCategoryID:10,referenceID:e,deadline:t,targetValue:0};console.log(n,"Task Master"),this.taskService.insertTaskMaster(n).subscribe(e=>{console.log(n,"Task Master Done",e)})}onSubmit(){if(this.editMode){this.loading=!0;const e=new Date(this.startDateModel.year,this.startDateModel.month-1,this.startDateModel.day,0,0),t=new Date(this.endDateModel.year,this.endDateModel.month-1,this.endDateModel.day,0,0),n={programInstanceStageID:this.programInstanceStage.programInstanceStageID,programInstanceID:this.programInstance.programInstanceID,programStageTitle:this.programInstanceStage.programStageTitle,programStageTypeID:this.programInstanceStage.programStageTypeID,programStageStartDate:Object(j.a)(e),programStageEndDate:Object(j.a)(t),programStageOrderID:this.programInstanceStage.programStageOrderID,programStageOverview:this.programInstanceStage.programStageOverview,programStageMaxDurationTypeID:this.programInstanceStage.programStageMaxDurationTypeID,programStageMaxDuration:this.programInstanceStage.programStageMaxDuration};this.programService.updateProgramInstanceStage(n).subscribe(()=>{this.ngbActiveModal.close(n)}),this.loading=!1}else if(this.programInstance.rollingIntake){this.loading=!0,console.log("inside the rolling intake true");const e=Object(j.a)(new Date),t=Object(j.a)(new Date),n={programInstanceStageID:0,programInstanceID:this.programInstance.programInstanceID,programStageTitle:this.programInstanceStage.programStageTitle,programStageTypeID:this.programStageTypeID,programStageStartDate:e,programStageEndDate:t,programStageOrderID:0,programStageOverview:this.programInstanceStage.programStageOverview,programStageMaxDurationTypeID:0,programStageMaxDuration:0};this.programService.createProgramInstanceStage(n).subscribe(e=>{n.programInstanceStageID=e.inOut_ProgramInstanceStageID,console.log("stage add",this.stageFormatID),1===this.stageFormatID?this.onFormAdd(n.programInstanceStageID):2===this.stageFormatID?(console.log("interview add",n.programInstanceStageID,t),this.onInterviewAdd(n.programInstanceStageID,t)):3===this.stageFormatID&&this.onCourseAdd(n.programInstanceStageID),this.ngbActiveModal.close(n)}),console.log(n,"here's the object before we send it back"),this.loading=!1}else{this.loading=!0,console.log("inside the rolling intake false");const e=new Date(this.startDateModel.year,this.startDateModel.month-1,this.startDateModel.day,0,0),t=Object(j.a)(e),n=new Date(this.endDateModel.year,this.endDateModel.month-1,this.endDateModel.day,0,0),a=Object(j.a)(n);console.log(a,t,"Dates");const r={programInstanceStageID:0,programInstanceID:this.programInstance.programInstanceID,programStageTitle:this.programInstanceStage.programStageTitle,programStageTypeID:this.programStageTypeID,programStageStartDate:t,programStageEndDate:a,programStageOrderID:0,programStageOverview:this.programInstanceStage.programStageOverview,programStageMaxDurationTypeID:0,programStageMaxDuration:0};this.programService.createProgramInstanceStage(r).subscribe(e=>{r.programInstanceStageID=e.inOut_ProgramInstanceStageID,console.log(e,"heres the stage res",e.inOut_ProgramInstanceStageID),1===this.stageFormatID?this.onFormAdd(r.programInstanceStageID):2===this.stageFormatID?(console.log("interview add",r.programInstanceStageID,a),this.onInterviewAdd(r.programInstanceStageID,a)):3===this.stageFormatID&&this.onCourseAdd(r.programInstanceStageID),console.log(r,"here's the object before we send it back"),this.ngbActiveModal.close(r),this.loading=!1})}}parseEditValues(){if(this.programInstanceStage.programStageStartDate){const e=new Date(this.programInstanceStage.programStageStartDate);this.startDateModel={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}if(this.programInstanceStage.programStageEndDate){const e=new Date(this.programInstanceStage.programStageEndDate);this.endDateModel={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}}onCancel(){this.ngbActiveModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](a.j),v["\u0275\u0275directiveInject"](m.a),v["\u0275\u0275directiveInject"](Ve.a),v["\u0275\u0275directiveInject"](b.a),v["\u0275\u0275directiveInject"](Le.a),v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](m.p))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-instance-stage-add"]],decls:47,vars:39,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","form-block",3,"avnonLoader"],["f","ngForm"],["class","lead",4,"ngIf"],[1,"form-group"],["for","programStageTitle"],["type","text","id","programStageTitle","name","programStageTitle","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","programStageOverview",1,"label-options"],["rows","3","type","text","id","programStageOverview","name","programStageOverview",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","d-none"],["for","stageFormatID"],["id","stageFormatID","name","stageFormatID",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","4"],["class","form-group",4,"ngIf"],[1,"form-group","form-group-block"],[1,"action-row"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"lead"],["for","formID"],["id","formID","name","formID",1,"form-control",3,"ngModel","change","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","courseID"],["id","courseID","name","courseID",1,"form-control",3,"ngModel","change","ngModelChange"],["for","startDate"],[1,"input-group"],["placeholder","dd-mm-yyyy","id","startDate","name","startDate","required","","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","calendar",3,"click"],[1,"fa","fa","fa-calendar"],["for","endDate"],["required","","placeholder","dd-mm-yyyy","name","endDate","id","endDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["d1","ngbDatepicker"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h1",1),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"button",2),v["\u0275\u0275listener"]("click",function(){return t.onCancel()}),v["\u0275\u0275elementStart"](5,"span",3),v["\u0275\u0275text"](6,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"form",4,5),v["\u0275\u0275template"](9,qe,3,6,"p",6),v["\u0275\u0275elementStart"](10,"div",7),v["\u0275\u0275elementStart"](11,"label",8),v["\u0275\u0275text"](12),v["\u0275\u0275pipe"](13,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"input",9),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.programInstanceStage.programStageTitle=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](15,"div",7),v["\u0275\u0275elementStart"](16,"label",10),v["\u0275\u0275text"](17),v["\u0275\u0275pipe"](18,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](19,"textarea",11),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.programInstanceStage.programStageOverview=e}),v["\u0275\u0275text"](20,"\t\t\t\t\t\t"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](21,"div",12),v["\u0275\u0275elementStart"](22,"label",13),v["\u0275\u0275text"](23),v["\u0275\u0275pipe"](24,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](25,"select",14),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.stageFormatID=e}),v["\u0275\u0275elementStart"](26,"option",15),v["\u0275\u0275text"](27),v["\u0275\u0275pipe"](28,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](29,"option",16),v["\u0275\u0275text"](30),v["\u0275\u0275pipe"](31,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](32,"option",17),v["\u0275\u0275text"](33),v["\u0275\u0275pipe"](34,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](35,"option",18),v["\u0275\u0275text"](36),v["\u0275\u0275pipe"](37,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](38,Qe,9,8,"div",19),v["\u0275\u0275template"](39,Ye,9,8,"div",19),v["\u0275\u0275template"](40,He,10,4,"div",19),v["\u0275\u0275template"](41,Ke,10,4,"div",19),v["\u0275\u0275elementStart"](42,"div",20),v["\u0275\u0275elementStart"](43,"div",21),v["\u0275\u0275elementStart"](44,"button",22),v["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),v["\u0275\u0275text"](45),v["\u0275\u0275pipe"](46,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275reference"](8);v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate3"](" ",t.pageAction," ",t.programStageType," ",v["\u0275\u0275pipeBind1"](3,21,"PROGRAM.STAGE")," "),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!t.editMode),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](13,23,"PROGRAM.STAGE-TITLE")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.programInstanceStage.programStageTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](18,25,"PROGRAM.ADD-STAGE-DESCRIPTION-INFO")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.programInstanceStage.programStageOverview),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](24,27,"PROGRAM.PRIMARY-ACTIVITY-TO-PERFORM")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.stageFormatID),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](28,29,"PROGRAM.FORM-SUBMISSION")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](31,31,"PROGRAM.INTERVIEW-OR-PITCH")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](34,33,"PROGRAM.TRAINING-WORKSHOP")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](37,35,"PROGRAM.NO-ACTIVITY-REQUIRED")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",1==t.stageFormatID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",3==t.stageFormatID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",0==t.programInstance.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",0==t.programInstance.rollingIntake),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("disabled",e.invalid||t.loading),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](46,37,"COMMON.SUBMIT")," ")}},directives:[r.E,r.r,r.s,x.a,a.n,r.b,r.A,r.q,r.t,r.B,r.v,r.D,a.m,m.o],pipes:[d.c],styles:[""]}),e})();function Xe(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"p",10),v["\u0275\u0275elementStart"](1,"span",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onStageAdd(1)}),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,2,"COMMON.CLICK-HERE")),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](5,4,"PROGRAM.IS-APPLY-ONLINE-INFO")," "))}function Je(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"date"),v["\u0275\u0275pipe"](3,"dateObject"),v["\u0275\u0275pipe"](4,"date"),v["\u0275\u0275pipe"](5,"dateObject"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](2).$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"](" ",v["\u0275\u0275pipeBind2"](2,2,v["\u0275\u0275pipeBind1"](3,5,e.programStageStartDate),"dd MMM yyyy")," -",v["\u0275\u0275pipeBind2"](4,7,v["\u0275\u0275pipeBind1"](5,10,e.programStageEndDate),"dd MMM yyyy")," ")}}function Ze(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,1,"COMMON.PLEASE-SET-DATE")," "))}function et(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"td",18),v["\u0275\u0275template"](1,Je,6,12,"span",19),v["\u0275\u0275template"](2,Ze,3,3,"span",19),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.programStageStartDate&&e.programStageEndDate),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.programStageStartDate&&!e.programStageEndDate)}}function tt(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.APPLICATIONS-OPEN")," "))}function nt(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.APPLICATIONS-PAUSED")," "))}function at(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.APPLICATIONS-CLOSED")))}function rt(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.APPLICATIONS-PRIVATE")))}function ot(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"td",18),v["\u0275\u0275elementStart"](1,"span",20),v["\u0275\u0275elementStart"](2,"span"),v["\u0275\u0275template"](3,tt,3,3,"ng-container",21),v["\u0275\u0275template"](4,nt,3,3,"ng-container",21),v["\u0275\u0275template"](5,at,3,3,"ng-container",21),v["\u0275\u0275template"](6,rt,3,3,"ng-container",21),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&1===e.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&2===e.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&3===e.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&4===e.activationStatusID)}}function it(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",22),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.APPLICATIONS-OPEN-PUBLIC")))}function st(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",23),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.PAUSED")))}function ct(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",24),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.CLOSED")))}function lt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",22),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.APPLICATIONS-OPEN-PRIVATE")))}function pt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",12),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().viewStageProfile(n)}),v["\u0275\u0275template"](1,et,3,2,"td",13),v["\u0275\u0275template"](2,ot,7,4,"td",13),v["\u0275\u0275elementStart"](3,"td",14),v["\u0275\u0275template"](4,it,3,3,"span",15),v["\u0275\u0275template"](5,st,3,3,"span",16),v["\u0275\u0275template"](6,ct,3,3,"span",17),v["\u0275\u0275template"](7,lt,3,3,"span",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.programInstance&&!n.programInstance.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.programInstance&&n.programInstance.rollingIntake),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&1===e.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&2===e.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&3===e.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&4===e.activationStatusID)}}function mt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",25),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onStageAdd(2)}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("+ ",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ADD-STAGE"),""))}function dt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"p",10),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275element"](3,"br"),v["\u0275\u0275elementStart"](4,"span",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onStageAdd(2)}),v["\u0275\u0275text"](5),v["\u0275\u0275pipe"](6,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,2,"PROGRAM.SCREENING-AND-SELECTION-INFO")," "),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](6,4,"PROGRAM.ADD-SCREENING-SELECTION-STAGES")))}function gt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"date"),v["\u0275\u0275pipe"](3,"dateObject"),v["\u0275\u0275pipe"](4,"date"),v["\u0275\u0275pipe"](5,"dateObject"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](2).$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"](" ",v["\u0275\u0275pipeBind2"](2,2,v["\u0275\u0275pipeBind1"](3,5,e.programStageStartDate),"dd MMM yyyy")," -",v["\u0275\u0275pipeBind2"](4,7,v["\u0275\u0275pipeBind1"](5,10,e.programStageEndDate),"dd MMM yyyy")," ")}}function ut(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.CLICK-TO-ACTIVATE-STAGE")," "))}function It(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"td"),v["\u0275\u0275template"](1,gt,6,12,"span",19),v["\u0275\u0275template"](2,ut,3,3,"span",19),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.programStageStartDate&&e.programStageEndDate),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.programStageStartDate&&!e.programStageEndDate)}}function ht(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",22),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"]("",v["\u0275\u0275pipeBind1"](2,2,"COMMON.ACTIVE")," ",v["\u0275\u0275pipeBind1"](3,4,"PROGRAM.ACTIVE"),""))}function St(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",26),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().viewStageProfile(n)}),v["\u0275\u0275elementStart"](1,"td",27),v["\u0275\u0275elementStart"](2,"span",28),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](4,It,3,2,"td",21),v["\u0275\u0275elementStart"](5,"td",29),v["\u0275\u0275template"](6,ht,4,6,"span",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.programStageTitle),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.programInstance&&!n.programInstance.rollingIntake),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&1===e.activationStatusID)}}function ft(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",25),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onStageAdd(3)}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("+ ",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ADD-STAGE"),""))}function vt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"p",10),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275element"](3,"br"),v["\u0275\u0275elementStart"](4,"span",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onStageAdd(3)}),v["\u0275\u0275text"](5),v["\u0275\u0275pipe"](6,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,2,"PROGRAM.ACTIVATE-STAGE-INFO")," "),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](6,4,"PROGRAM.ADD-ACTIVE-STAGE")))}function Dt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"date"),v["\u0275\u0275pipe"](3,"dateObject"),v["\u0275\u0275pipe"](4,"date"),v["\u0275\u0275pipe"](5,"dateObject"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](2).$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"](" ",v["\u0275\u0275pipeBind2"](2,2,v["\u0275\u0275pipeBind1"](3,5,e.programStageStartDate),"dd MMM yyyy")," -",v["\u0275\u0275pipeBind2"](4,7,v["\u0275\u0275pipeBind1"](5,10,e.programStageEndDate),"dd MMM yyyy")," ")}}function bt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",20),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,1,"COMMON.PLEASE-SET-DATE")," "))}function yt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"td"),v["\u0275\u0275template"](1,Dt,6,12,"span",19),v["\u0275\u0275template"](2,bt,3,3,"span",19),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.programStageStartDate&&e.programStageEndDate),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.programStageStartDate&&!e.programStageEndDate)}}function xt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",22),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ACTIVE")))}function Et(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",12),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().viewStageProfile(n)}),v["\u0275\u0275elementStart"](1,"td",27),v["\u0275\u0275elementStart"](2,"span",28),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](4,yt,3,2,"td",21),v["\u0275\u0275elementStart"](5,"td",29),v["\u0275\u0275template"](6,xt,3,3,"span",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.programStageTitle),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.programInstance&&!n.programInstance.rollingIntake),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&1===e.activationStatusID)}}function Ct(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",25),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onStageAdd(4)}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("+ ",v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ADD-STAGE"),""))}function kt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"p",10),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275element"](3,"br"),v["\u0275\u0275elementStart"](4,"span",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onStageAdd(4)}),v["\u0275\u0275text"](5),v["\u0275\u0275pipe"](6,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](2,2,"PROGRAM.GRADUATE-STAGE-INFO")," "),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](6,4,"PROGRAM.ADD-GRADUATE-STAGE")))}function Mt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"td"),v["\u0275\u0275elementStart"](1,"span",20),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"date"),v["\u0275\u0275pipe"](4,"dateObject"),v["\u0275\u0275pipe"](5,"date"),v["\u0275\u0275pipe"](6,"dateObject"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate2"](" ",v["\u0275\u0275pipeBind2"](3,2,v["\u0275\u0275pipeBind1"](4,5,e.programStageStartDate),"dd MMM yyyy")," -",v["\u0275\u0275pipeBind2"](5,7,v["\u0275\u0275pipeBind1"](6,10,e.programStageEndDate),"dd MMM yyyy")," ")}}function Pt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",22),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"COMMON.ACTIVE")))}function Ot(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",12),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().viewStageProfile(n)}),v["\u0275\u0275elementStart"](1,"td",27),v["\u0275\u0275elementStart"](2,"span",28),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](4,Mt,7,12,"td",21),v["\u0275\u0275elementStart"](5,"td",29),v["\u0275\u0275template"](6,Pt,3,3,"span",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.programStageTitle),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.programInstance&&!n.programInstance.rollingIntake),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",e.activationStatusID&&1===e.activationStatusID)}}let wt=(()=>{class e{constructor(e,t,n,a,r,o,i){this.programService=e,this.userService=t,this.router=n,this.ngbModal=a,this.portfolioService=r,this.companyService=o,this.activatedRoute=i,this.programInstance=new M.a,this.programInstanceStages=[],this.programInstanceStagesActive=[],this.programInstanceStagesApplicant=[],this.programInstanceGraduate=[],this.programInstanceStagesScreening=[],this.portfolios=[],this.activePortfolios=[],this.completedPortfolios=[],this.blobUrl=P.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.contactID=this.user.contactID,this.companyID=this.user.companyID,this.programInstanceID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillProgramInstanceProfile(),this.getPortfolios(),this.getStages(),this.handleGroupSwitch()}fillProgramInstanceProfile(){this.loading=!0,this.programService.getProgramInstanceProfile(this.programInstanceID).pipe(Object(O.a)(e=>(this.programInstance=e,this.programService.getProgramProfile(e.programID)))).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess,this.loading=!1})}getStages(e=null){this.stagesLoading=!0,this.programService.getProgramInstanceStages(this.programInstanceID).subscribe(t=>{this.programInstanceStages=t,this.programInstanceStagesApplicant=this.programInstanceStages.filter(e=>1===e.programStageTypeID).map(t=>(e&&e.programInstanceStageID&&(t.initialTaskExist=e.initialTaskExist),t)),this.programInstanceStagesScreening=this.programInstanceStages.filter(e=>2===e.programStageTypeID),this.programInstanceStagesActive=this.programInstanceStages.filter(e=>3===e.programStageTypeID),this.programInstanceGraduate=this.programInstanceStages.filter(e=>4===e.programStageTypeID),this.stagesLoading=!1})}view(e){if(!this.adminCheck)return;const t=this.ngbModal.open(Ge,{backdrop:"static"});t.componentInstance.programInstance=this.programInstance,t.componentInstance.programInstanceStage=e,t.componentInstance.programStageType="Initial Application",t.componentInstance.programStageTypeID=1,t.componentInstance.programTitle=this.programInstance.programTitle,t.result.then(e=>{this.getStages()})}viewStageProfile(e){if(!e.rollingIntake&&!e.programStageStartDate&&!e.programStageEndDate){const t=this.ngbModal.open(We);return t.componentInstance.programInstanceStage=Object(j.l)(e),t.componentInstance.programInstance=Object(j.l)(this.programInstance),t.componentInstance.pageAction="Edit",t.componentInstance.editMode=!0,void t.result.then(t=>{t&&t.hasOwnProperty("programInstanceStageID")&&(1===e.programStageTypeID&&e.initialTaskExist&&this.updateStageActiveStatus(1,e.programInstanceStageID),this.router.navigate(["program/stage/timeline",e.programInstanceStageID]))})}this.router.navigate(["program/stage/timeline",e.programInstanceStageID])}viewApplicantStageProfile(e){const t=this.ngbModal.open(Ge,{backdrop:"static"});t.componentInstance.programInstance=this.programInstance,t.componentInstance.programInstanceStage=e,t.componentInstance.programStageType="Initial Application",t.componentInstance.programStageTypeID=1,t.componentInstance.programTitle=this.programInstance.programTitle,t.result.then(e=>{this.programInstanceStagesApplicant.push(e)})}onStageAdd(e){let t;if(1===e){this.loading=!0;const t={programInstanceStageID:0,programInstanceID:this.programInstance.programInstanceID,programStageTitle:"Initial Application",programStageTypeID:e,programStageStartDate:this.programInstance.programInstanceStartDate,programStageEndDate:this.programInstance.programInstanceEndDate,programStageOrderID:0,programStageOverview:"Initial Application",programStageMaxDurationTypeID:0,programStageMaxDuration:0};this.programService.createProgramInstanceStage(t).subscribe(e=>{t.programInstanceStageID=e.inOut_ProgramInstanceStageID,e.activationStatusID=2,this.programService.updateProgramInstanceStageActivation({programInstanceStageID:t.programInstanceStageID,activationStatusID:2,activatedByContactID:this.contactID}).subscribe(),this.router.navigate(["/program/stage/timeline",t.programInstanceStageID]),this.loading=!1,2===this.program.programTypeID&&this.portfolios.forEach(e=>{this.portfolioService.insertStage({programInstanceStageID:t.programInstanceStageID,companyProgramStageStartDate:t.programStageStartDate,companyProgramStageEndDate:t.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:e.companyLocationID,companyProgramInstanceID:e.companyProgramInstanceID,companyProgramInstanceStageTypeID:t.programStageTypeID}).subscribe()})},()=>{})}if(2===e){t="Screening and Selection";const n=this.ngbModal.open(We,{backdrop:"static"});n.componentInstance.programInstance=this.programInstance,n.componentInstance.programStageType=t,n.componentInstance.programStageTypeID=e,n.componentInstance.programTitle=this.programInstance.programTitle,n.result.then(e=>{this.programInstanceStagesScreening.push(e),2===this.program.programTypeID&&this.portfolios.forEach(t=>{this.portfolioService.insertStage({programInstanceStageID:e.programInstanceStageID,companyProgramStageStartDate:e.programStageStartDate,companyProgramStageEndDate:e.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:t.companyLocationID,companyProgramInstanceID:t.companyProgramInstanceID,companyProgramInstanceStageTypeID:e.programStageTypeID}).subscribe()}),console.log(e,this.programInstanceStages)},()=>{})}if(3===e){t="Active";const n=this.ngbModal.open(We,{backdrop:"static"});n.componentInstance.programInstance=this.programInstance,n.componentInstance.programStageType=t,n.componentInstance.programStageTypeID=e,n.componentInstance.programTitle=this.programInstance.programTitle,n.result.then(e=>{this.programInstanceStagesActive.push(e),2===this.program.programTypeID&&this.portfolios.forEach(t=>{this.portfolioService.insertStage({programInstanceStageID:e.programInstanceStageID,companyProgramStageStartDate:e.programStageStartDate,companyProgramStageEndDate:e.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:t.companyLocationID,companyProgramInstanceID:t.companyProgramInstanceID,companyProgramInstanceStageTypeID:e.programStageTypeID}).subscribe()}),console.log(e,this.programInstanceStages)},()=>{})}if(4===e){t="Graduate";const n=this.ngbModal.open(We,{backdrop:"static"});n.componentInstance.programInstance=this.programInstance,n.componentInstance.programStageType=t,n.componentInstance.programStageTypeID=e,n.componentInstance.programTitle=this.programInstance.programTitle,n.result.then(e=>{this.programInstanceGraduate.push(e),2===this.program.programTypeID&&this.portfolios.forEach(t=>{this.portfolioService.insertStage({programInstanceStageID:e.programInstanceStageID,companyProgramStageStartDate:e.programStageStartDate,companyProgramStageEndDate:e.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:t.companyLocationID,companyProgramInstanceID:t.companyProgramInstanceID,companyProgramInstanceStageTypeID:e.programStageTypeID}).subscribe()}),console.log(e,this.programInstanceStages)},()=>{})}console.log(this.programInstance,"here'st he program")}getPortfolios(){this.portfolioLoading=!0,this.companyService.getPortfolioList(0,this.programInstanceID,0,0,0,0,0).subscribe(e=>{this.portfolios=e,this.portfolioLoading=!1})}handleGroupSwitch(){this.programService.getInstanceStoreRx().subscribe(e=>{if(e){const t=this.programInstanceStagesApplicant[0];t?this.programInstance.rollingIntake&&!e.rollingIntake&&1===t.activationStatusID&&(this.updateStageActiveStatus(2,t.programInstanceStageID),this.getStages(t)):this.getStages(),this.programInstance=e}})}updateStageActiveStatus(e,t){this.programService.updateProgramInstanceStageActivation({programInstanceStageID:t,activationStatusID:e,activatedByContactID:this.contactID}).subscribe(()=>{})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](B.a),v["\u0275\u0275directiveInject"](J.a),v["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-instance-stages-tab"]],decls:38,vars:26,consts:[[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"section","section-alt","border-0","pb-2"],[1,"d-flex","w-100","filter-container","mt-2"],["class","pl-3 pr-3 mb-0",4,"ngIf"],[1,"table","check-list-table"],[3,"click",4,"ngFor","ngForOf"],[1,"d-flex","w-100","filter-container"],["class","cursor-pointer text-primary ml-auto",3,"click",4,"ngIf"],["class","filter-container",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","w-100","mt-1","filter-container"],[1,"pl-3","pr-3","mb-0"],[1,"cursor-pointer","text-primary",3,"click"],[3,"click"],["class","pl-3",4,"ngIf"],[1,"text-right","pr-3"],["class","tag tag-green",4,"ngIf"],["class","tag tag-orange",4,"ngIf"],["class","tag tag-red",4,"ngIf"],[1,"pl-3"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[4,"ngIf"],[1,"tag","tag-green"],[1,"tag","tag-orange"],[1,"tag","tag-red"],[1,"cursor-pointer","text-primary","ml-auto",3,"click"],[1,"filter-container",3,"click"],[1,"pl-3","pr-3"],[1,"title"],[1,"pr-3"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"div",2),v["\u0275\u0275elementStart"](3,"h1"),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,Xe,6,6,"p",3),v["\u0275\u0275elementStart"](7,"table",4),v["\u0275\u0275elementStart"](8,"tbody"),v["\u0275\u0275template"](9,pt,8,6,"tr",5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"div",1),v["\u0275\u0275elementStart"](11,"div",6),v["\u0275\u0275elementStart"](12,"h1"),v["\u0275\u0275text"](13),v["\u0275\u0275pipe"](14,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](15,mt,3,3,"span",7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](16,dt,7,6,"p",3),v["\u0275\u0275elementStart"](17,"table",4),v["\u0275\u0275elementStart"](18,"tbody"),v["\u0275\u0275template"](19,St,7,3,"tr",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"div",1),v["\u0275\u0275elementStart"](21,"div",6),v["\u0275\u0275elementStart"](22,"h1"),v["\u0275\u0275text"](23,"Active Stages"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](24,ft,3,3,"span",7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](25,vt,7,6,"p",3),v["\u0275\u0275elementStart"](26,"table",4),v["\u0275\u0275elementStart"](27,"tbody"),v["\u0275\u0275template"](28,Et,7,3,"tr",5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](29,"div",1),v["\u0275\u0275elementStart"](30,"div",9),v["\u0275\u0275elementStart"](31,"h1"),v["\u0275\u0275text"](32,"Graduate Stages"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](33,Ct,3,3,"span",7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](34,kt,7,6,"p",3),v["\u0275\u0275elementStart"](35,"table",4),v["\u0275\u0275elementStart"](36,"tbody"),v["\u0275\u0275template"](37,Ot,7,3,"tr",5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading||t.portfolioLoading||t.stagesLoading),v["\u0275\u0275advance"](3),v["\u0275\u0275classProp"]("mb-1",!t.programInstanceStagesScreening.length||!t.programInstanceStagesScreening),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](5,22,"PROGRAM.INITIAL-APPLICATION")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",(!t.programInstanceStagesApplicant.length||!t.programInstanceStagesApplicant)&&t.adminCheck),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.programInstanceStagesApplicant),v["\u0275\u0275advance"](3),v["\u0275\u0275classProp"]("mb-1",!t.programInstanceStagesScreening.length||!t.programInstanceStagesScreening),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](14,24,"PROGRAM.SCREENING-AND-SELECTION")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.adminCheck&&t.programInstanceStagesScreening.length),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(!t.programInstanceStagesScreening.length||!t.programInstanceStagesScreening)&&t.adminCheck),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.programInstanceStagesScreening),v["\u0275\u0275advance"](3),v["\u0275\u0275classProp"]("mb-0",!t.programInstanceStagesActive.length||!t.programInstanceStagesActive),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.adminCheck&&t.programInstanceStagesActive.length),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(!t.programInstanceStagesActive.length||!t.programInstanceStagesActive)&&t.adminCheck),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.programInstanceStagesActive),v["\u0275\u0275advance"](3),v["\u0275\u0275classProp"]("mb-0",!t.programInstanceGraduate.length||!t.programInstanceGraduate),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.adminCheck&&t.programInstanceGraduate.length),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(!t.programInstanceGraduate.length||!t.programInstanceGraduate)&&t.adminCheck),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.programInstanceGraduate))},directives:[x.a,a.n,a.m],pipes:[d.c,a.e,oe.a],styles:[".check-list-table[_ngcontent-%COMP%]{margin:0}.check-list-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .check-list-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #ededed}.check-list-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;font-weight:400}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.col-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:400}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after{content:none}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .icon-center[_ngcontent-%COMP%]{background-position:50%}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{display:none;background:transparent}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#edf1f5}.check-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{display:inline}"]}),e})();var At=n("cxbk"),Tt=n("w6ya"),Rt=n("4CJs"),jt=n("SVtl"),Lt=n("9nlD"),Vt=n("S2+F");const Ft=["companySearch"];function Bt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",19),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.index;return v["\u0275\u0275nextContext"]().selectCompany(n)}),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",12),v["\u0275\u0275element"](3,"input",22),v["\u0275\u0275element"](4,"label",23),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"td"),v["\u0275\u0275elementStart"](6,"div",24),v["\u0275\u0275element"](7,"img",25),v["\u0275\u0275elementStart"](8,"span",26),v["\u0275\u0275text"](9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275classProp"]("selected",n.selectedMembers.includes(e.networkMemberID)),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("checked",n.selectedMembers.includes(e.networkMemberID)),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("src",e.companyBanner?n.blobUrl+e.companyBanner:"/assest/img/card-placeholder.jpg",v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.companyName)}}let Nt=(()=>{class e{constructor(e,t,n,a,r,o,i){this.portfolioService=e,this.networkService=t,this.userService=n,this.notificationService=a,this.signalRService=r,this.contactService=o,this.activeModal=i,this.selectedMembers=[],this.filteredFilteredMembers=[],this.networkMembers=[],this.blobUrl=At.a.apiBlobUrl+"/",this.companyIDs=[],this.companyID=this.userService.user.getValue().companyID||0,this.contactID=this.userService.user.getValue().contactID}ngOnInit(){this.getNetwork()}getNetwork(){this.loading=!0,this.networkService.getNetwork(0,0,0,0,this.companyID,0,1).pipe(Object(O.a)(e=>this.networkService.getNetworkStartupGlobal(e[0].networkID,2,0,0,0))).subscribe(e=>{this.networkMembers=e,this.filteredFilteredMembers=e,this.loading=!1})}selectCompany(e){const t=this.filteredFilteredMembers[e],n=this.selectedMembers.findIndex(e=>e===t.networkMemberID);-1!==n?this.selectedMembers.splice(n,1):this.selectedMembers.push(t.networkMemberID),this.selectedCount=this.selectedMembers.length}filterCompany(e){const t=Object(j.l)(this.networkMembers);this.filteredFilteredMembers=e?t.filter(t=>-1!==t.companyName.toLowerCase().indexOf(e.toLowerCase())):t}selectAllCompanies(){this.selectedMembers=this.checkAll?this.filteredFilteredMembers.map(e=>e.networkMemberID):[],this.selectedCount=this.selectedMembers.length}unselectCompanies(){this.selectedMembers=[],this.selectedCount=this.selectedMembers.length,this.checkAll=!1}submit(){this.loading=!0,this.selectedMembers.forEach(e=>{const t=this.networkMembers.find(t=>t.networkMemberID===e);if(t){const e=[],n={companyID:t.companyID,dateAccepted:Object(j.a)(new Date),programInstanceID:this.programInstance.programInstanceID};e.push(this.portfolioService.addPortfolio(n)),(e.length>0?Object(T.a)(e):Object(R.a)([])).pipe(Object(O.a)(e=>{console.log(e);const t=[];return e.forEach(e=>{const n=e;n&&(t.push(this.portfolioService.insertStage({programInstanceStageID:this.stage.programInstanceStageID,companyProgramStageStartDate:this.stage.programStageStartDate,companyProgramStageEndDate:this.stage.programStageEndDate,companyProgramStageStatusID:2,companyLocationID:n.companyLocationID,companyProgramInstanceID:n.inOut_CompanyProgramInstanceID,companyProgramInstanceStageTypeID:this.stage.programStageTypeID})),this.companyIDs.push(n.companyID))}),t.length>0?Object(T.a)(t):Object(R.a)([])})).subscribe(e=>{e.forEach((e,t)=>{this.notifyApplicant(e,t)}),this.loading=!1,this.activeModal.close(e)})}})}notifyApplicant(e,t){this.companyIDs[t]&&(e.companyID=this.companyIDs[t],this.contactService.getContacts(e.companyID).subscribe(t=>{if(!t.length)return;if(e.contactID=t[0].contactID,e.contactID===this.contactID)return;const n=`Congratulations, you've progressed to the ${this.stage.programStageTitle} of ${this.programInstance.programInstanceTitle}`,a={notificationCategoryID:Tt.a.program_stage_accept,referenceID:this.stage.programInstanceStageID,contactID:e.contactID,description:n,createdContact:this.contactID},r=(new Date).getTime()+"|"+e.companyProgramInstanceStageID,o={date:Object(j.a)(new Date),body:n,topic:n,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:a.referenceID,notificationType:Rt.a.other,senderId:a.createdContact,receivers:[a.contactID],uniqueId:r,discussionId:0};this.notificationService.noticeNotification(a).subscribe(()=>{this.signalRService.transferMessage("dashboard",o)})}))}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](B.a),v["\u0275\u0275directiveInject"](jt.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](Lt.a),v["\u0275\u0275directiveInject"](Vt.a),v["\u0275\u0275directiveInject"](F.a),v["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-company-stage-add-modal"]],viewQuery:function(e,t){if(1&e&&v["\u0275\u0275viewQuery"](Ft,!0),2&e){let e;v["\u0275\u0275queryRefresh"](e=v["\u0275\u0275loadQuery"]())&&(t.contactSearch=e.first)}},decls:31,vars:7,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[1,"form-group"],["placeholder","Type any company name",1,"form-control",3,"input"],["search",""],[1,"contact-selector-content"],[1,"table","inline-table","table-grid","table-compact","table-modal-search"],[1,"inline-header"],[1,"font-weight-normal","col-check"],[1,"custom-control","custom-checkbox"],["id","checkall","type","checkbox",1,"custom-control-input",3,"checked","ngModel","ngModelChange"],["for","checkall",1,"custom-control-label"],[1,"font-weight-normal"],["class","cursor-pointer",3,"selected","click",4,"ngFor","ngForOf"],[1,"filter-sticky","filter-sticky-3","fw-block"],[1,"float-right","text-link"],[1,"cursor-pointer",3,"click"],[1,"text-right","pt-3"],[1,"btn","btn-primary",3,"disabled","click"],["type","checkbox",1,"custom-control-input",3,"checked"],[1,"custom-control-label"],[1,"d-flex"],["alt","",1,"avatar","avatar-square","avatar-60",3,"src"],[1,"ml-2","mt-2"]],template:function(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h5",1),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"button",2),v["\u0275\u0275listener"]("click",function(){return t.dismiss()}),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",4),v["\u0275\u0275elementStart"](7,"div",5),v["\u0275\u0275elementStart"](8,"input",6,7),v["\u0275\u0275listener"]("input",function(){v["\u0275\u0275restoreView"](e);const n=v["\u0275\u0275reference"](9);return t.filterCompany(n.value)}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"div",8),v["\u0275\u0275elementStart"](11,"table",9),v["\u0275\u0275elementStart"](12,"thead",10),v["\u0275\u0275elementStart"](13,"tr"),v["\u0275\u0275elementStart"](14,"th",11),v["\u0275\u0275elementStart"](15,"div",12),v["\u0275\u0275elementStart"](16,"input",13),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.checkAll=e})("ngModelChange",function(){return t.selectAllCompanies()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](17,"label",14),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](18,"th",15),v["\u0275\u0275text"](19,"Company"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"tbody"),v["\u0275\u0275template"](21,Bt,10,5,"tr",16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](22,"div",17),v["\u0275\u0275elementStart"](23,"span",18),v["\u0275\u0275elementStart"](24,"a",19),v["\u0275\u0275listener"]("click",function(){return t.unselectCompanies()}),v["\u0275\u0275text"](25,"Clear Filters "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](26,"span"),v["\u0275\u0275text"](27),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](28,"div",20),v["\u0275\u0275elementStart"](29,"button",21),v["\u0275\u0275listener"]("click",function(){return t.submit()}),v["\u0275\u0275text"](30," Submit Selections "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" Add Startups to ",t.stage.programStageTitle," "),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](10),v["\u0275\u0275property"]("checked",t.checkAll)("ngModel",t.checkAll),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("ngForOf",t.filteredFilteredMembers),v["\u0275\u0275advance"](6),v["\u0275\u0275textInterpolate1"](" ",t.selectedCount," selected "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("disabled",!t.selectedMembers.length))},directives:[x.a,r.a,r.q,r.t,a.m],styles:[".contact-selector-content[_ngcontent-%COMP%]{height:400px;overflow:auto;position:relative}.fw-block.filter-sticky[_ngcontent-%COMP%]{background-color:#edf1f5;padding:10px 20px;font-size:12px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;padding:.5rem}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#edf1f5}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .col-check[_ngcontent-%COMP%]{width:40px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),e})();function _t(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",7),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).addCompanyToStage()}),v["\u0275\u0275text"](1,"+ Add Company"),v["\u0275\u0275elementEnd"]()}}function Gt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",4),v["\u0275\u0275elementStart"](1,"span",5),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](3,_t,2,0,"span",6),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",e.activeStages.length," active startup on this stage"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck)}}function Ut(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",7),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).addLearners()}),v["\u0275\u0275text"](1,"+ Add Learner"),v["\u0275\u0275elementEnd"]()}}function qt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",8),v["\u0275\u0275elementStart"](1,"span",5),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](3,Ut,2,0,"span",6),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",e.activeStages.length," active learners on this stage"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck)}}function $t(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",17),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](1,"button",18),v["\u0275\u0275element"](2,"i",19),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"div",20),v["\u0275\u0275elementStart"](4,"button",21),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().$implicit;return v["\u0275\u0275nextContext"]().onDeletePortfolioStage(t.companyProgramInstanceStageID)}),v["\u0275\u0275text"](5," Delete "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}}const Qt=function(e){return["/company",e]};function zt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",9),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().viewCompany(n.companyID)}),v["\u0275\u0275element"](1,"img",10),v["\u0275\u0275elementStart"](2,"div",11),v["\u0275\u0275elementStart"](3,"div",12),v["\u0275\u0275elementStart"](4,"h3",13),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](5,"a",14),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](7,$t,6,0,"div",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"span",16),v["\u0275\u0275text"](9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("src",e.profilePhoto?n.blobUrl+"256px/"+e.profilePhoto:"assets/img/trainer-holder.png",v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](6,Qt,e.companyID)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"](" ",e.firstname," ",e.surname," "),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.adminCheck),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.companyName)}}let Yt=(()=>{class e{constructor(e,t,n,a,r,o){this.router=e,this.programService=t,this.ngbModal=n,this.activatedRoute=a,this.portfolioService=r,this.userService=o,this.programInstanceStage=new Re.a,this.programInstance=new M.a,this.activeTab=1,this.activeStages=[],this.existingLearners=[],this.blobUrl=At.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.programInstanceStageID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillStageProfile()}onDeletePortfolioStage(e){this.ngbModal.open(le.a).result.then(t=>{"Yes"===t&&this.portfolioService.deleteStage(e).subscribe(()=>{this.activeStages=this.activeStages.filter(t=>t.companyProgramInstanceStageID!==e)})})}fillStageProfile(){this.loading=!0,this.programService.getProgramInstanceStageProfile(this.programInstanceStageID).pipe(Object(O.a)(e=>(this.loading=!1,this.programInstanceStage=e,this.programService.getProgramInstanceProfile(this.programInstanceStage.programInstanceID)))).subscribe(e=>{this.programInstance=e,this.getStages(),this.programService.getProgramProfile(this.programInstance.programID).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess})})}viewCompany(e){this.router.navigate(["/company",e])}getStages(){this.stagesLoading=!0,this.portfolioService.getCompanyRoadmapStages(0,0,0,this.programInstance.programInstanceID,this.programInstanceStageID,0).subscribe(e=>{this.existingLearners=e,this.activeStages=e.filter(e=>2===e.companyProgramStageStatusID&&e.programInstanceStageID===this.programInstanceStageID),this.stagesLoading=!1})}addCompanyToStage(){const e=this.ngbModal.open(Nt,{backdrop:"static",size:"lg"});e.componentInstance.stage=this.programInstanceStage,e.componentInstance.programInstance=this.programInstance,e.result.then(e=>{e&&e.length>0&&this.getStages()})}addLearners(){const e=this.ngbModal.open(W,{backdrop:"static",size:"lg"});e.componentInstance.programInstance=this.programInstance,e.componentInstance.programInstanceStage=this.programInstanceStage,e.componentInstance.existingLearners=this.existingLearners,e.result.then(e=>{e.length>0&&this.getStages()})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](B.a),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-stage-timeline-active"]],decls:4,vars:4,consts:[[1,"d-flex","flex-column","w-100",3,"avnonLoader"],["class","d-flex align-items-center filter-container float-left w-100 border-bottom",4,"ngIf"],["class","d-flex align-items-center mb-2 mt-2 float-left w-100 pl-3 pr-3",4,"ngIf"],["class","common-list-item flex-row d-flex w-100 cursor-pointer border-bottom",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","filter-container","float-left","w-100","border-bottom"],[1,"mr-4"],["class","cursor-pointer text-primary ml-auto",3,"click",4,"ngIf"],[1,"cursor-pointer","text-primary","ml-auto",3,"click"],[1,"d-flex","align-items-center","mb-2","mt-2","float-left","w-100","pl-3","pr-3"],[1,"common-list-item","flex-row","d-flex","w-100","cursor-pointer","border-bottom",3,"click"],["alt","network",1,"avatar","avatar-48",3,"src"],[1,"d-flex","flex-column","ml-2","flex-grow-1","mr-auto"],[1,"d-flex","w-100","mb-1"],[1,"mb-0","mr-2",3,"click"],[3,"routerLink"],["ngbDropdown","","container","body","class","ml-auto action-dropdown",3,"click",4,"ngIf"],[1,"meta"],["ngbDropdown","","container","body",1,"ml-auto","action-dropdown",3,"click"],["type","button","ngbDropdownToggle","","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","no-icon","icon-center"],[1,"fas","fa-ellipsis-h"],["ngbDropdownMenu",""],["type","button","ngbDropdownItem","",3,"click"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275template"](1,Gt,4,2,"div",1),v["\u0275\u0275template"](2,qt,4,2,"div",2),v["\u0275\u0275template"](3,zt,10,8,"div",3),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.stagesLoading||t.loading),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1===(null==t.program?null:t.program.programTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",2===(null==t.program?null:t.program.programTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",t.activeStages))},directives:[x.a,a.n,a.m,g.f,m.i,m.m,m.k,m.j],styles:[".no-icon[_ngcontent-%COMP%]{background-position:50%}.no-icon[_ngcontent-%COMP%]:after, .no-icon[_ngcontent-%COMP%]:before{display:none}.avatar-60[_ngcontent-%COMP%]{height:60px;object-fit:cover}"]}),e})();const Ht=function(e){return["/company",e]};function Kt(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",2),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().viewCompany(n.companyID)}),v["\u0275\u0275element"](1,"img",3),v["\u0275\u0275elementStart"](2,"div",4),v["\u0275\u0275elementStart"](3,"h3",5),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](4,"a",6),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"span",7),v["\u0275\u0275text"](7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("src",e.profilePhoto?n.blobUrl+"256px/"+e.profilePhoto:"assets/img/trainer-holder.png",v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](5,Ht,e.companyID)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"](" ",e.firstname," ",e.surname," "),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.companyName)}}let Wt=(()=>{class e{constructor(e,t,n,a,r,o){this.router=e,this.programService=t,this.ngbModal=n,this.activatedRoute=a,this.portfolioService=r,this.userService=o,this.programInstanceStage=new Re.a,this.programInstance=new M.a,this.activeTab=1,this.completeStages=[],this.blobUrl=At.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.programInstanceStageID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillStageProfile(),this.getStages()}fillStageProfile(){this.loading=!0,this.programService.getProgramInstanceStageProfile(this.programInstanceStageID).pipe(Object(O.a)(e=>(this.loading=!1,this.programInstanceStage=e,this.programService.getProgramInstanceProfile(this.programInstanceStage.programInstanceID)))).subscribe(e=>{this.programInstance=e,this.programService.getProgramProfile(this.programInstance.programID).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess})})}viewCompany(e){this.router.navigate(["/company",e])}getStages(){this.portfolioService.getCompanyRoadmapStages(0,0,0,0,this.programInstanceStageID,0).subscribe(e=>{this.completeStages=e.filter(e=>3===e.companyProgramStageStatusID&&e.programInstanceStageID===this.programInstanceStageID)})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](B.a),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-stage-timeline-completed"]],decls:2,vars:2,consts:[[1,"d-flex","flex-column","w-100","pt-2",3,"avnonLoader"],["class","common-list-item flex-row d-flex w-100 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"common-list-item","flex-row","d-flex","w-100","cursor-pointer",3,"click"],["alt","network",1,"avatar","avatar-48",3,"src"],[1,"d-flex","flex-column","ml-2","mr-auto"],[3,"click"],[3,"routerLink"],[1,"meta"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275template"](1,Kt,8,7,"div",1),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.stagesLoading||t.loading),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",t.completeStages))},directives:[x.a,a.m,g.f],styles:[".no-icon[_ngcontent-%COMP%]{background-position:50%}.no-icon[_ngcontent-%COMP%]:after, .no-icon[_ngcontent-%COMP%]:before{display:none}.avatar-60[_ngcontent-%COMP%]{height:60px;object-fit:cover}"]}),e})();var Xt=n("esnG"),Jt=n("E7AJ"),Zt=n("9F88");function en(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",4),v["\u0275\u0275elementStart"](1,"p",5),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.REFERENCED-MATERIALS-FOR-ACTIVE-COMPANIES")," "))}function tn(e,t){if(1&e&&v["\u0275\u0275element"](0,"app-file-management",6),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("documentCategoryID",36)("referenceID",e.programInstanceStageID)("reference2ID",0)("uploadDirectly",!0)("hideHeader",!0)("paddingRemoved",!0)("smallUploadBtn",!0)("documents",e.documents)}}function nn(e,t){if(1&e&&v["\u0275\u0275element"](0,"app-documents-list",7),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("documentCategoryID",36)("referenceID",e.programInstanceStageID)("referenceID2",0)}}let an=(()=>{class e{constructor(e,t,n,a){this.activatedRoute=e,this.programService=t,this.documentService=n,this.userService=a,this.documents=[],this.user=this.userService.user.getValue(),this.companyID=this.user.companyID,this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.programInstanceStageID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillStageProfile(),this.fillStageDocuments()}fillStageProfile(){this.loading=!0,this.programService.getProgramInstanceStageProfile(this.programInstanceStageID).pipe(Object(O.a)(e=>(this.loading=!1,this.programInstanceStage=e,this.programService.getProgramInstanceProfile(this.programInstanceStage.programInstanceID)))).subscribe(e=>{this.programInstance=e,this.programService.getProgramProfile(this.programInstance.programID).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess})})}fillStageDocuments(){this.documentService.getDocument(this.programInstanceStageID,36,0,0,0).subscribe(e=>{this.documents=e})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](Xt.a),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-stage-timeline-documents"]],decls:4,vars:4,consts:[[1,"section","section-documents","border-0",3,"avnonLoader"],["class","filter-container",4,"ngIf"],[3,"documentCategoryID","referenceID","reference2ID","uploadDirectly","hideHeader","paddingRemoved","smallUploadBtn","documents",4,"ngIf"],[3,"documentCategoryID","referenceID","referenceID2",4,"ngIf"],[1,"filter-container"],[1,"m-0"],[3,"documentCategoryID","referenceID","reference2ID","uploadDirectly","hideHeader","paddingRemoved","smallUploadBtn","documents"],[3,"documentCategoryID","referenceID","referenceID2"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275template"](1,en,4,3,"div",1),v["\u0275\u0275template"](2,tn,1,8,"app-file-management",2),v["\u0275\u0275template"](3,nn,1,3,"app-documents-list",3),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!t.adminCheck))},directives:[x.a,a.n,Jt.a,Zt.a],pipes:[d.c],styles:[""]}),e})();var rn=n("MNGV"),on=n("p0ro"),sn=n("knhq");const cn=["courseSearch"];function ln(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",21),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.index;return v["\u0275\u0275nextContext"]().selectCourse(n)}),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",13),v["\u0275\u0275element"](3,"input",24),v["\u0275\u0275element"](4,"label",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"td"),v["\u0275\u0275elementStart"](6,"div",26),v["\u0275\u0275elementStart"](7,"span",27),v["\u0275\u0275text"](8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275classProp"]("selected",n.selectedCourses.includes(e.courseID)),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("checked",n.selectedCourses.includes(e.courseID)),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](e.courseTitle)}}function pn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",28),v["\u0275\u0275element"](1,"i",29),v["\u0275\u0275elementStart"](2,"span",30),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().openActiveStagesModal()}),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"translate"),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.activeStages.length),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](5,2,"PROGRAM.SELECTED-COURSES-BE-ADDED-TO-COMPANIES-INFO")," ")}}let mn=(()=>{class e{constructor(e,t,n,a){this.courseService=e,this.activeModal=t,this.portfolioService=n,this.modal=a,this.selectedCourses=[],this.filteredCourses=[],this.preselectedCourses=[],this.courses=[],this.activeStages=[]}ngOnInit(){this.fillCourses(),this.programInstanceStage&&this.getActiveStageCompanies()}fillCourses(){this.isProcessing=!0,this.courseService.getCourses(this.masterCompanyID).subscribe(e=>{this.courses=e,this.filteredCourses=e,this.selectedCourses=this.preselectedCourses.map(e=>e.courseID),this.selectedCount=this.selectedCourses.length,this.isNewCourse=!this.preselectedCourses.length,this.isProcessing=!1},e=>{this.isProcessing=!1,console.log(e)})}selectCourse(e){const t=this.filteredCourses[e],n=this.selectedCourses.findIndex(e=>e===t.courseID);-1!==n?this.selectedCourses.splice(n,1):this.selectedCourses.push(t.courseID),this.selectedCount=this.selectedCourses.length,this.isNewCourse=this.selectedCourses.filter(e=>0===this.preselectedCourses.filter(t=>t.courseID===e).length).length>0}filterCourses(e){const t=Object(j.l)(this.courses);this.filteredCourses=e?t.filter(t=>-1!==t.courseTitle.toLowerCase().indexOf(e.toLowerCase())):t}selectAllCourses(){this.selectedCourses=this.checkAll?this.filteredCourses.map(e=>e.courseID):[],this.selectedCount=this.selectedCourses.length}unSelectCourse(){this.selectedCourses=[],this.selectedCount=this.selectedCourses.length,this.checkAll=!1}submitSelections(){const e=Object(j.j)(this.filteredCourses.filter(e=>this.selectedCourses.includes(e.courseID)),"courseID");this.activeModal.close(this.programInstanceStage?{courses:e,companies:this.activeStages}:e)}dismiss(){this.activeModal.dismiss()}getActiveStageCompanies(){this.activeStagesLoading=!0,this.portfolioService.getCompanyRoadmapStages(0,0,0,0,this.programInstanceStage.programInstanceStageID,0).subscribe(e=>{this.activeStages=e.filter(e=>2===e.companyProgramStageStatusID&&e.programInstanceStageID===this.programInstanceStage.programInstanceStageID),this.activeStagesLoading=!1})}openActiveStagesModal(){const e=this.modal.open(sn.a,{backdrop:"static",size:"lg"});e.componentInstance.stage=this.programInstanceStage,e.componentInstance.activeStages=this.activeStages}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](b.a),v["\u0275\u0275directiveInject"](m.a),v["\u0275\u0275directiveInject"](B.a),v["\u0275\u0275directiveInject"](m.p))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-course-selector"]],viewQuery:function(e,t){if(1&e&&v["\u0275\u0275viewQuery"](cn,!0),2&e){let e;v["\u0275\u0275queryRefresh"](e=v["\u0275\u0275loadQuery"]())&&(t.contactSearch=e.first)}},decls:37,vars:19,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[1,"form-group"],["placeholder","Type any course name",1,"form-control",3,"input"],["search",""],[1,"contact-selector-content"],[1,"table","inline-table","table-grid","table-compact","table-modal-search"],[1,"inline-header"],[1,"font-weight-normal","col-check"],[1,"custom-control","custom-checkbox"],["id","checkall","type","checkbox",1,"custom-control-input",3,"checked","ngModel","ngModelChange"],["for","checkall",1,"custom-control-label"],[1,"font-weight-normal"],["class","cursor-pointer",3,"selected","click",4,"ngFor","ngForOf"],["class","alert pl-0 pt-2 pb-2 pr-2",4,"ngIf"],[1,"filter-sticky","filter-sticky-3","fw-block"],[1,"float-right","text-link"],[1,"cursor-pointer",3,"click"],[1,"text-right","pt-3"],[1,"btn","btn-primary",3,"click"],["type","checkbox",1,"custom-control-input",3,"checked"],[1,"custom-control-label"],[1,"d-flex","align-items-center"],[1,"pl-2"],[1,"alert","pl-0","pt-2","pb-2","pr-2"],[1,"fas","fa-info-circle","text-info","mr-1"],[1,"cursor-pointer","text-primary",3,"click"]],template:function(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"h1",2),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"button",3),v["\u0275\u0275listener"]("click",function(){return t.dismiss()}),v["\u0275\u0275elementStart"](5,"span",4),v["\u0275\u0275text"](6,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",5),v["\u0275\u0275elementStart"](8,"div",6),v["\u0275\u0275elementStart"](9,"input",7,8),v["\u0275\u0275listener"]("input",function(){v["\u0275\u0275restoreView"](e);const n=v["\u0275\u0275reference"](10);return t.filterCourses(n.value)}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"div",9),v["\u0275\u0275elementStart"](12,"table",10),v["\u0275\u0275elementStart"](13,"thead",11),v["\u0275\u0275elementStart"](14,"tr"),v["\u0275\u0275elementStart"](15,"th",12),v["\u0275\u0275elementStart"](16,"div",13),v["\u0275\u0275elementStart"](17,"input",14),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.checkAll=e})("ngModelChange",function(){return t.selectAllCourses()}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](18,"label",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](19,"th",16),v["\u0275\u0275text"](20),v["\u0275\u0275pipe"](21,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](22,"tbody"),v["\u0275\u0275template"](23,ln,9,4,"tr",17),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](24,pn,6,4,"div",18),v["\u0275\u0275elementStart"](25,"div",19),v["\u0275\u0275elementStart"](26,"span",20),v["\u0275\u0275elementStart"](27,"a",21),v["\u0275\u0275listener"]("click",function(){return t.unSelectCourse()}),v["\u0275\u0275text"](28),v["\u0275\u0275pipe"](29,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](30,"span"),v["\u0275\u0275text"](31),v["\u0275\u0275pipe"](32,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](33,"div",22),v["\u0275\u0275elementStart"](34,"button",23),v["\u0275\u0275listener"]("click",function(){return t.submitSelections()}),v["\u0275\u0275text"](35),v["\u0275\u0275pipe"](36,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](t.pageTitle||"Select Courses"),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("avnonLoader",t.isProcessing||t.activeStagesLoading),v["\u0275\u0275advance"](10),v["\u0275\u0275property"]("checked",t.checkAll)("ngModel",t.checkAll),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](21,11,"PROGRAM.TITLE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.filteredCourses),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.activeStages&&t.activeStages.length>0&&t.isNewCourse),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](29,13,"COMMON.CLEAR-FILTERS")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate2"](" ",t.selectedCount," ",v["\u0275\u0275pipeBind1"](32,15,"PROGRAM.SELECTED")," "),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](36,17,"COMMON.SUBMIT-SELECTIONS")," "))},directives:[x.a,r.a,r.q,r.t,a.m,a.n],pipes:[d.c],styles:[".contact-selector-content[_ngcontent-%COMP%]{height:400px;overflow:auto;position:relative}.fw-block.filter-sticky[_ngcontent-%COMP%]{background-color:#edf1f5;padding:10px 20px;font-size:12px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;padding:.5rem}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#edf1f5}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .col-check[_ngcontent-%COMP%]{width:40px}.contact-selector-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),e})();var dn=n("vdWK"),gn=n("FPrQ"),un=n("Q4ZP"),In=n("0snc");function hn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"number"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind2"](2,1,e.programInstanceStageMetric,"1.2-2")," ")}}function Sn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",e.checkCount," ")}}function fn(e,t){1&e&&v["\u0275\u0275element"](0,"span",15)}function vn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",10),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.index;return v["\u0275\u0275nextContext"](2).selectCriteria(n)}),v["\u0275\u0275elementStart"](1,"div",11),v["\u0275\u0275elementStart"](2,"span",12),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](4,hn,3,4,"span",13),v["\u0275\u0275template"](5,Sn,2,1,"span",13),v["\u0275\u0275template"](6,fn,1,0,"span",14),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=v["\u0275\u0275nextContext"](2);v["\u0275\u0275classProp"]("active",(null==a.criteria?null:a.criteria.programInstanceStageCriteriaCategoryID)===e.programInstanceStageCriteriaCategoryID),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.programInstanceStageCriteria),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n<5&&e.programInstanceStageMetric),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n>4&&e.checkCount),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.checkCount)}}function Dn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275elementStart"](1,"p",8),v["\u0275\u0275text"](2,"Select what needs to be done to complete this stage"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](3,vn,7,6,"div",9),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",e.criteriaList)}}function bn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"button",24),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).step=1}),v["\u0275\u0275text"](1,"Back "),v["\u0275\u0275elementEnd"]()}}function yn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"form",16,17),v["\u0275\u0275listener"]("submit",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onSubmit()}),v["\u0275\u0275elementStart"](2,"div",18),v["\u0275\u0275elementStart"](3,"label",19),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"input",20),v["\u0275\u0275listener"]("ngModelChange",function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().criteria.programInstanceStageMetric=t}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",21),v["\u0275\u0275template"](7,bn,2,0,"button",22),v["\u0275\u0275elementStart"](8,"button",23),v["\u0275\u0275text"](9," Submit "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](e.criteria.label||e.criteria.programInstanceStageCriteria),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngModel",e.criteria.programInstanceStageMetric),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!e.criteria.programInstanceStageCriteriaID)}}let xn=(()=>{class e{constructor(e,t){this.programsService=e,this.ngbActiveModal=t,this.criteria=new Re.b,this.criteriaList=Object(j.l)(Re.c),this.tasks=[],this.courses=[],this.events=[],this.existingList=[],this.step=1}ngOnInit(){this.criteriaList=this.criteriaList.map((e,t)=>{if(5===t&&(e.checkCount=this.tasks.length),6===t&&(e.checkCount=this.courses.length+this.events.length),t<5){const t=this.existingList.find(t=>e.programInstanceStageCriteriaCategoryID===t.programInstanceStageCriteriaCategoryID);t?(e.checkCount=1,e.programInstanceStageMetric=t.programInstanceStageMetric,e.programInstanceStageCriteriaID=t.programInstanceStageCriteriaID):(e.checkCount=null,e.programInstanceStageCriteriaID=null,e.programInstanceStageMetric=null)}return Object(j.l)(e)}),this.criteria.programInstanceStageCriteriaID&&(this.step=2)}selectCriteria(e){const t=this.criteriaList[e];[6,7].includes(t.programInstanceStageCriteriaCategoryID)?this.ngbActiveModal.close(t):(this.criteria=t,this.step=2)}onSubmit(){this.loading=!0,this.criteria.programInstanceStageCriteriaID?this.programsService.updateStageCriteria(this.criteria).subscribe(()=>{this.loading=!1,this.ngbActiveModal.close(this.criteria)}):(this.criteria.programInstanceStageID=this.stage.programInstanceStageID,this.programsService.addStageCriteria(this.criteria).subscribe(e=>{this.loading=!1,this.criteria.programInstanceStageCriteriaID=e.inOut_ProgramInstanceStageCriteriaID,this.ngbActiveModal.close(this.criteria)}))}dismiss(){this.ngbActiveModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-stage-criteria"]],decls:9,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column","pl-0","pr-0",3,"avnonLoader"],["class","w-100 d-flex flex-column",4,"ngIf"],["class","pl-3 pr-3",3,"submit",4,"ngIf"],[1,"w-100","d-flex","flex-column"],[1,"pl-3","pr-3"],["class","entry",3,"active","click",4,"ngFor","ngForOf"],[1,"entry",3,"click"],[1,"d-flex","w-100"],[1,"font-weight-bold","mr-auto"],[4,"ngIf"],["class","fas fa-check-circle text-success fz23 ml-2",4,"ngIf"],[1,"fas","fa-check-circle","text-success","fz23","ml-2"],[1,"pl-3","pr-3",3,"submit"],["f","ngForm"],[1,"form-group"],["for","programInstanceStageMetric",1,"font-weight-bold"],["type","number","required","","name","programInstanceStageMetric","id","programInstanceStageMetric",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["class","btn btn-outline-primary","type","button",3,"click",4,"ngIf"],[1,"btn","btn-primary","ml-auto"],["type","button",1,"btn","btn-outline-primary",3,"click"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h5",1),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"button",2),v["\u0275\u0275listener"]("click",function(){return t.dismiss()}),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",4),v["\u0275\u0275template"](7,Dn,4,1,"div",5),v["\u0275\u0275template"](8,yn,10,3,"form",6),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",null!=t.criteria&&t.criteria.programInstanceStageCriteriaCategoryID?"Edit":"Add"," Stage Sign Off Criteria "),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1===t.step),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",2===t.step))},directives:[x.a,a.n,a.m,r.E,r.r,r.s,r.w,r.b,r.A,r.q,r.t],pipes:[a.f],styles:[".entry.active[_ngcontent-%COMP%]{background:#f0f3ff}.form-control[_ngcontent-%COMP%]{max-width:150px}"]}),e})();var En=n("6BoG"),Cn=n("5eHb"),kn=n("f+9o"),Mn=n("oTus");function Pn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",4),v["\u0275\u0275elementStart"](1,"p",5),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.programInstanceStage.programStageOverview)}}function On(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",8),v["\u0275\u0275elementStart"](1,"p",5),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.INTERVIEWING-APPLICANTS-BE-ADDED-INFO")," "))}function wn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](4).addEvent()}),v["\u0275\u0275element"](1,"span",12),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.ADD-EVENT")," "))}function An(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",13),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](4).onActivityAdd()}),v["\u0275\u0275element"](1,"span",12),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.ASSIGN-TASK")," "))}function Tn(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,wn,4,3,"a",9),v["\u0275\u0275template"](2,An,4,3,"a",10),v["\u0275\u0275elementContainerEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck)}}function Rn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](3).addCriteria()}),v["\u0275\u0275element"](1,"span",12),v["\u0275\u0275text"](2," Add Criteria "),v["\u0275\u0275elementEnd"]()}}function jn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",8),v["\u0275\u0275template"](1,Tn,3,2,"ng-container",2),v["\u0275\u0275template"](2,Rn,3,0,"a",9),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",3!==(null==e.programInstanceStage?null:e.programInstanceStage.programStageTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck&&3===(null==e.programInstanceStage?null:e.programInstanceStage.programStageTypeID))}}function Ln(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",22),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](1,"div",23),v["\u0275\u0275elementStart"](2,"button",24),v["\u0275\u0275element"](3,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",26),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"](2).index;return v["\u0275\u0275nextContext"](3).onEditEvent(t)}),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"li"),v["\u0275\u0275elementStart"](10,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"](2).index;return v["\u0275\u0275nextContext"](3).deleteEvent(t)}),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](7),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](8,2,"COMMON.EDIT")),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](12,4,"COMMON.DELETE")))}function Vn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",18),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().$implicit;return v["\u0275\u0275nextContext"](3).timelineNavigate(t)}),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",19),v["\u0275\u0275elementStart"](3,"span",20),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,Ln,13,6,"div",21),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]().$implicit,t=v["\u0275\u0275nextContext"](3);v["\u0275\u0275classProp"]("list-active-fill",t.activeEvent&&t.activeEvent.eventID===e.event.eventID),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",e.event.eventTitle," "),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.event&&e.event.scheduledbyID===t.contactID)}}function Fn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",22),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](1,"div",23),v["\u0275\u0275elementStart"](2,"button",28),v["\u0275\u0275element"](3,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",29),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"](2).index;return v["\u0275\u0275nextContext"](3).editTask(t)}),v["\u0275\u0275text"](7,"Edit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"li"),v["\u0275\u0275elementStart"](9,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"](2).index;return v["\u0275\u0275nextContext"](3).deleteTask(t)}),v["\u0275\u0275text"](10),v["\u0275\u0275pipe"](11,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](10),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](11,1,"COMMON.DELETE")," "))}function Bn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",18),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().$implicit;return v["\u0275\u0275nextContext"](3).timelineNavigate(t)}),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",19),v["\u0275\u0275elementStart"](3,"span",20),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,Fn,12,3,"div",21),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]().$implicit,t=v["\u0275\u0275nextContext"](3);v["\u0275\u0275classProp"]("list-active-fill",t.activeTask&&t.activeTask.taskID===e.task.taskID),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",e.task.taskTitle," "),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.task&&e.task.submittedBy===t.contactID)}}function Nn(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,Vn,6,4,"tr",17),v["\u0275\u0275template"](2,Bn,6,4,"tr",17),v["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.event),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.task)}}function _n(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",31),v["\u0275\u0275elementStart"](1,"div",23),v["\u0275\u0275elementStart"](2,"button",32),v["\u0275\u0275element"](3,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",33),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).editCriteria(t)}),v["\u0275\u0275text"](7,"Edit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"li"),v["\u0275\u0275elementStart"](9,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).deleteCriteria(t)}),v["\u0275\u0275text"](10),v["\u0275\u0275pipe"](11,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](10),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](11,1,"COMMON.DELETE")," "))}function Gn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr"),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",19),v["\u0275\u0275elementStart"](3,"span",20),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,_n,12,3,"div",30),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate2"](" ",e.programInstanceStageCriteria," - ",v["\u0275\u0275pipeBind2"](5,3,e.programInstanceStageMetric,"1.2-2")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",n.adminCheck)}}function Un(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",14),v["\u0275\u0275elementStart"](1,"table",15),v["\u0275\u0275elementStart"](2,"tbody"),v["\u0275\u0275template"](3,Nn,3,2,"ng-container",16),v["\u0275\u0275template"](4,Gn,7,6,"tr",16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",e.timeline),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",e.criteriaList)}}function qn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](4).onActivityAdd()}),v["\u0275\u0275element"](1,"span",12),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.ASSIGN-TASK")," "))}function $n(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",39),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](4).addCourse()}),v["\u0275\u0275element"](1,"span",12),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.ADD-COURSE")," "))}function Qn(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,qn,4,3,"a",9),v["\u0275\u0275template"](2,$n,4,3,"a",38),v["\u0275\u0275elementContainerEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck)}}function zn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",11),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](3).addCriteria()}),v["\u0275\u0275element"](1,"span",12),v["\u0275\u0275text"](2," Add Criteria "),v["\u0275\u0275elementEnd"]()}}function Yn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",31),v["\u0275\u0275elementStart"](1,"div",23),v["\u0275\u0275elementStart"](2,"button",41),v["\u0275\u0275element"](3,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",42),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).deleteCourse(t)}),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](7),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](8,1,"COMMON.DELETE")," "))}function Hn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr"),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",40),v["\u0275\u0275elementStart"](3,"span",20),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,Yn,9,3,"div",30),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",e.courseTitle," "),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.adminCheck)}}function Kn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",22),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](1,"div",23),v["\u0275\u0275elementStart"](2,"button",44),v["\u0275\u0275element"](3,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",45),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).editTask(t)}),v["\u0275\u0275text"](7,"Edit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"li"),v["\u0275\u0275elementStart"](9,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).deleteTask(t)}),v["\u0275\u0275text"](10),v["\u0275\u0275pipe"](11,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](10),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](11,1,"COMMON.DELETE")," "))}function Wn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"tr",18),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"](3).navigateToTask(n)}),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",19),v["\u0275\u0275elementStart"](3,"span",43),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,Kn,12,3,"div",21),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",e.taskTitle," "),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.adminCheck||e.submittedBy===n.contactID)}}function Xn(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",31),v["\u0275\u0275elementStart"](1,"div",23),v["\u0275\u0275elementStart"](2,"button",46),v["\u0275\u0275element"](3,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",47),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).editCriteria(t)}),v["\u0275\u0275text"](7,"Edit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"li"),v["\u0275\u0275elementStart"](9,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).deleteCriteria(t)}),v["\u0275\u0275text"](10),v["\u0275\u0275pipe"](11,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](10),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](11,1,"COMMON.DELETE")," "))}function Jn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr"),v["\u0275\u0275elementStart"](1,"td"),v["\u0275\u0275elementStart"](2,"div",19),v["\u0275\u0275elementStart"](3,"span",20),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,Xn,12,3,"div",30),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate2"](" ",e.programInstanceStageCriteria," - ",v["\u0275\u0275pipeBind2"](5,3,e.programInstanceStageMetric,"1.2-2")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",n.adminCheck)}}function Zn(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",34),v["\u0275\u0275elementStart"](2,"p",35),v["\u0275\u0275text"](3),v["\u0275\u0275pipe"](4,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"div",36),v["\u0275\u0275template"](6,Qn,3,2,"ng-container",2),v["\u0275\u0275template"](7,zn,3,0,"a",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"table",15),v["\u0275\u0275template"](9,Hn,6,2,"tr",16),v["\u0275\u0275template"](10,Wn,6,2,"tr",37),v["\u0275\u0275template"](11,Jn,7,6,"tr",16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()),2&e){const e=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](4,6,"PROGRAM.COURSES-APPLICANTS-BE-ADDED-INFO")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",3!==(null==e.programInstanceStage?null:e.programInstanceStage.programStageTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck&&3===(null==e.programInstanceStage?null:e.programInstanceStage.programStageTypeID)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",e.courses),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",e.tasks),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",e.criteriaList)}}function ea(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",57),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).addForm(t)}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.SELECT-FORM")))}function ta(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",58),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.task.taskTitle)}}function na(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"li"),v["\u0275\u0275elementStart"](1,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"](2).index;return v["\u0275\u0275nextContext"](3).changeForm(t)}),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.CHANGE-FORM")))}function aa(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",59),v["\u0275\u0275elementStart"](1,"div",23),v["\u0275\u0275elementStart"](2,"button",60),v["\u0275\u0275element"](3,"span",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",61),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",27),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"](3).deleteTaskSection(t)}),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](9,na,4,3,"li",2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](7),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](8,2,"COMMON.DELETE")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&e.task)}}function ra(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",53),v["\u0275\u0275elementStart"](1,"h2"),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](3,ea,3,3,"span",54),v["\u0275\u0275template"](4,ta,2,1,"span",55),v["\u0275\u0275template"](5,aa,10,4,"div",56),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",e.taskSectionCategory," "),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&!e.task),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",12===e.taskSectionCategoryID&&e.task),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",n.adminCheck)}}function oa(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",48),v["\u0275\u0275elementStart"](2,"div",49),v["\u0275\u0275elementStart"](3,"span",50),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"a",51),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).openSectionModal()}),v["\u0275\u0275element"](7,"span",12),v["\u0275\u0275text"](8),v["\u0275\u0275pipe"](9,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](10,ra,6,4,"div",52),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](5,3,"PROGRAM.SECTIONS-BE-COMPLETED")," "),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](9,5,"PROGRAM.MANAGE-SECTIONS")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngForOf",e.taskSections)}}function ia(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,On,4,3,"div",6),v["\u0275\u0275template"](2,jn,3,2,"div",6),v["\u0275\u0275template"](3,Un,5,2,"div",7),v["\u0275\u0275template"](4,Zn,12,8,"ng-container",2),v["\u0275\u0275template"](5,oa,11,7,"ng-container",2),v["\u0275\u0275elementContainerEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.programInstance.rollingIntake&&1!==e.programInstanceStage.programStageTypeID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.programInstance.rollingIntake&&1!==e.programInstanceStage.programStageTypeID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!e.programInstance.rollingIntake&&1!==e.programInstanceStage.programStageTypeID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.programInstance.rollingIntake&&1!==e.programInstanceStage.programStageTypeID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1===e.programInstanceStage.programStageTypeID)}}function sa(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"app-event-rhp",62),v["\u0275\u0275listener"]("closed",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().activeEvent=null}),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("activeEvent",e.activeEvent)}}let ca=(()=>{class e{constructor(e,t,n,a,r,o,i,s,c,l,p){this.router=e,this.programService=t,this.ngbModal=n,this.formService=a,this.taskService=r,this.activatedRoute=o,this.eventService=i,this.toastrService=s,this.trainingPlanService=c,this.portfolioService=l,this.userService=p,this.activeStages=[],this.programInstanceStage=new Re.a,this.programInstance=new M.a,this.timeline=[],this.documents=[],this.courses=[],this.tasks=[],this.events=[],this.blobUrl=At.a.apiBlobUrl+"/",this.taskCategoryID=38,this.taskSections=[],this.criteriaList=[],this.destroy$=new w.a,this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.programInstanceStageID=+this.activatedRoute.snapshot.paramMap.get("id"),this.fillStageProfile(),this.programService.getStageStoreRx().subscribe(e=>{e&&(this.programInstanceStage=e)}),this.getStages(),this.programService.showInitialStageForm.asObservable().pipe(Object(L.a)(this.destroy$)).subscribe(e=>{e&&(this.initialStageBaseline||this.openSectionModal(!0))}),this.getCriteria(),this.taskEvents()}addEvent(){const e=this.ngbModal.open(un.a,{backdrop:"static",size:"md",keyboard:!1});e.componentInstance.programInstanceStage=this.programInstanceStage,e.componentInstance.programInstance=this.programInstance,e.componentInstance.hideToggles=!1,this.programInstance.rollingIntake||2!==this.programInstanceStage.programStageTypeID||(e.componentInstance.hideToggles=!1),e.result.then(e=>{e&&e.eventID&&(this.timeline.push({date:e.startDate,event:e}),this.timeline=this.timeline.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),this.events.push(e))})}onEditProgramInstanceStage(){const e=this.ngbModal.open(We);e.componentInstance.programInstanceStage=Object(j.l)(this.programInstanceStage),e.componentInstance.programInstance=Object(j.l)(this.programInstance),e.componentInstance.pageAction="Edit",e.componentInstance.editMode=!0,e.result.then(e=>{e&&e.hasOwnProperty("programInstanceStageID")&&(this.programInstanceStage=Object(j.c)(this.programInstanceStage,e))})}onDeleteProgramInstanceStage(){this.ngbModal.open(le.a).result.then(e=>{"Yes"===e&&this.programService.deleteProgramInstanceStage(this.programInstanceStage.programInstanceStageID).subscribe(()=>{this.toastrService.success("Stage has been deleted"),this.router.navigate(["/instance",this.programInstance.programInstanceID])})})}fillRequiredTasks(){return this.taskService.getTask(0,17,this.programInstanceStageID,0,0,0,0,0)}onActivityAdd(){const e=this.ngbModal.open(on.a,{backdrop:"static",size:"md"});e.componentInstance.programInstanceStage=this.programInstanceStage,e.componentInstance.programInstance=this.programInstance,e.result.then(e=>{e&&e.task&&this.taskService.getTask(e.task.taskID,0,0,0,0,0,0,0).subscribe(e=>{e.length&&(this.tasks.push(e[0]),this.programInstance.rollingIntake||(this.timeline.push({task:e[0],date:e[0].endDate,taskUnderway:e[0].taskOwners.filter(e=>1===e.taskStatusID).length,taskPending:e[0].taskOwners.filter(e=>2===e.taskStatusID).length,taskCompleted:e[0].taskOwners.filter(e=>3===e.taskStatusID).length}),this.timeline=this.timeline.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())))})})}fillStageEvents(){return this.eventService.selectEvents({EventCategoryID:0,CompanyID:0,ReferenceID:this.programInstanceStageID,EventSubCategoryID:8})}fillStageProfile(){this.loading=!0,this.programService.getProgramInstanceStageProfile(this.programInstanceStageID).pipe(Object(O.a)(e=>(this.loading=!1,this.programInstanceStage=e,this.programService.getProgramInstanceProfile(this.programInstanceStage.programInstanceID)))).subscribe(e=>{this.programInstance=e,this.programService.getProgramProfile(this.programInstance.programID).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess}),this.programInstance.rollingIntake&&1!==this.programInstanceStage.programStageTypeID?(this.fillCourses(),this.getTasks()):this.getTaskAndEvents(),1===this.programInstanceStage.programStageTypeID&&(this.getSections(),this.getTask())})}fillCourses(){this.programService.getProgramInstanceStageCourses(this.programInstanceStageID).subscribe(e=>{this.courses=e})}addCourse(){const e=this.ngbModal.open(mn);e.componentInstance.preselectedCourses=this.courses,e.componentInstance.masterCompanyID=this.companyID,e.componentInstance.programInstanceStage=this.programInstanceStage,e.result.then(e=>{if(e&&e.hasOwnProperty("courses")){const t=e.courses,n=e.companies,a=[],r=this.courses.filter(e=>0===t.filter(t=>t.courseID===e.courseID).length);t.forEach(e=>{const t={programInstanceStageID:this.programInstanceStageID,courseID:e.courseID};0===this.courses.filter(t=>t.courseID===e.courseID).length&&a.push(this.programService.submitProgramInstanceStageCourses(t))}),(a.length?Object(T.a)(a):Object(R.a)([])).subscribe(e=>{if(e&&e.length>0){const t=[];e.forEach(e=>{n.forEach(n=>{t.push(this.trainingPlanService.insertTrainingPlan({masterCompanyID:0,periodID:0,companyID:n.companyID,contactID:n.contactID,courseID:e.courseID,trainingPlanCategoryID:2,referenceID:this.programInstanceStage.programInstanceStageID,trainingPlanStatusID:0,budgetCost:0,budgetDuration:0,budgetDurationTypeID:0,addedby:0}))})}),(t.length>0?Object(T.a)(t):Object(R.a)([])).subscribe(()=>{this.fillCourses()})}}),r.length>0&&this.deleteCourses(r)}})}deleteCourses(e){const t=this.ngbModal.open(le.a);t.componentInstance.objectType="Stage Course",t.componentInstance.objectDetails="Course(s) from the stage plan",t.result.then(t=>{if(t&&"Yes"===t){const t=e.map(e=>this.programService.deleteProgramInstanceStageCourse(e.programInstanceStageCourseID));(t.length?Object(T.a)(t):Object(R.a)([])).subscribe(()=>{this.courses=this.courses.filter(t=>e.filter(e=>e.courseID!==t.courseID).length>0),e.forEach(e=>{this.trainingPlanService.getCompanyTrainingPlan(0,0,0,e.courseID,0,this.programInstanceStageID,2).subscribe(e=>{e.forEach(e=>{this.trainingPlanService.deleteTrainingPlan(e.trainingPlanID).subscribe()})})})})}})}deleteCourse(e){const t=this.courses[e],n=this.ngbModal.open(le.a);n.componentInstance.objectType="Stage Course",n.componentInstance.objectDetails=t.courseTitle+" from the stage plan",n.result.then(n=>{n&&"Yes"===n&&this.programService.deleteProgramInstanceStageCourse(t.programInstanceStageCourseID).subscribe(()=>{this.trainingPlanService.getCompanyTrainingPlan(0,0,0,t.courseID,0,this.programInstanceStageID,2).subscribe(e=>{e.forEach(e=>{this.trainingPlanService.deleteTrainingPlan(e.trainingPlanID).subscribe()})}),this.courses.splice(e,1)})})}editTask(e){let t;t=this.programInstance.rollingIntake||1===this.programInstanceStage.programStageTypeID?this.tasks[e]:this.timeline[e].task;const n=this.ngbModal.open(on.a,{backdrop:"static",size:"md"});n.componentInstance.task=Object(j.l)(t),n.componentInstance.referenceId=this.programInstanceStageID,n.componentInstance.taskCategoryID=17,n.result.then(n=>{n&&n.status&&this.taskService.getTask(t.taskID,17,this.programInstanceStageID,0,0,0,0,0).subscribe(t=>{if(t[0]){if(this.programInstance.rollingIntake||1===this.programInstanceStage.programStageTypeID)return void(this.tasks[e]=t[0]);this.timeline[e].task=t[0],this.timeline[e].date=t[0].endDate,this.timeline[e].taskUnderway=t[0].taskOwners.filter(e=>1===e.taskStatusID).length,this.timeline[e].taskPending=t[0].taskOwners.filter(e=>2===e.taskStatusID).length,this.timeline[e].taskCompleted=t[0].taskOwners.filter(e=>3===e.taskStatusID).length,this.timeline=this.timeline.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}})})}deleteTask(e){let t;t=this.programInstance.rollingIntake||1===this.programInstanceStage.programStageTypeID?this.tasks[e]:this.timeline[e].task;const n=this.ngbModal.open(le.a);n.componentInstance.objectType="Task",n.componentInstance.objectDetails=t.taskTitle+" from the stage plan",n.result.then(n=>{n&&"Yes"===n&&this.taskService.deleteTask(t.taskID).subscribe(()=>{if(this.activeTask&&this.activeTask.taskID===t.taskID&&this.taskService.storeActiveTaskRx(null),this.programInstance.rollingIntake||1===this.programInstanceStage.programStageTypeID)return this.tasks.splice(e,1),void(1===this.programInstanceStage.programStageTypeID&&(this.updateStageActiveStatus(2),this.programInstanceStage.initialTaskExist=!1,this.programService.stageStoreRx(this.programInstanceStage)));const n=this.tasks.findIndex(e=>e.taskID===t.taskID);-1!==n&&this.tasks.splice(n,1),this.timeline.splice(e,1)})})}getTaskAndEvents(){Object(T.a)(this.fillRequiredTasks(),this.fillStageEvents()).subscribe(e=>{const t=[],n=e[0];this.programInstanceStage.initialTaskExist=this.tasks.length>0,this.programService.stageStoreRx(this.programInstanceStage);const a=Object(j.j)(e[1],"eventID");this.events=a,this.tasks=n,n.forEach(e=>{t.push({date:e.endDate,task:e,taskUnderway:e.taskOwners.filter(e=>1===e.taskStatusID).length,taskPending:e.taskOwners.filter(e=>2===e.taskStatusID).length,taskCompleted:e.taskOwners.filter(e=>3===e.taskStatusID).length})}),a.forEach(e=>{t.push({date:e.startTime,event:e,delegatesConfirmed:e.delegates.filter(e=>1===e.eventDelegateTypeID&&2===e.eventDelegateStatusID).length,delegatesDeclined:e.delegates.filter(e=>1===e.eventDelegateTypeID&&2!==e.eventDelegateStatusID).length})}),this.timeline=t.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())})}onEditEvent(e){const t=this.timeline[e].event;Object(T.a)(this.eventService.getEventDelegates(0,0,t.eventID,0,0,0,0,0,0),this.eventService.getEventDates(t.eventID)).subscribe(n=>{t.delegates=n[0],t.dates=n[1],this.editEvent(e)})}editEvent(e){const t=this.timeline[e].event,n=this.ngbModal.open(un.a,{backdrop:"static",size:"md"});n.componentInstance.event=Object(j.l)(t),n.componentInstance.programInstanceStage=this.programInstanceStage,n.componentInstance.programInstance=this.programInstance,n.result.then(t=>{t&&t.eventID&&(this.timeline[e].event=t,this.timeline[e].date=t.startDate,this.timeline=this.timeline.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()))})}deleteEvent(e){const t=this.timeline[e].event,n=this.ngbModal.open(le.a);n.componentInstance.objectType="Event",n.componentInstance.objectDetails=t.eventTitle+" from the stage plan",n.result.then(n=>{n&&"Yes"===n&&this.eventService.deleteEvent(t.eventID).subscribe(()=>{this.activeEvent&&this.activeEvent.eventID===t.eventID&&(this.activeEvent=null),this.timeline.splice(e,1)})})}getTasks(){this.fillRequiredTasks().subscribe(e=>{this.tasks=e.map(e=>(e.underWayCount=e.taskOwners.filter(e=>1===e.taskStatusID).length,e.pendingCount=e.taskOwners.filter(e=>2===e.taskStatusID).length,e.completedCount=e.taskOwners.filter(e=>3===e.taskStatusID).length,e)),this.programService.stageStoreRx(this.programInstanceStage)})}timelineNavigate(e){e.task&&e.task.taskID?this.taskService.storeActiveTaskRx(e.task):this.activeEvent=e.event}navigateToTask(e){17===e.taskCategoryID?this.taskService.storeActiveTaskRx(e):this.router.navigate(["/task",e.taskID])}back(){this.router.navigate(["/instance",this.programInstanceStage.programInstanceID])}getStages(){this.activeStagesLoading=!0,this.portfolioService.getCompanyRoadmapStages(0,0,0,0,this.programInstanceStageID,0).subscribe(e=>{this.activeStages=e.filter(e=>2===e.companyProgramStageStatusID&&e.programInstanceStageID===this.programInstanceStageID),this.activeStagesLoading=!1})}formTaskInitialStage(e=!1){this.loading=!0;let t=new rn.a;t.formID=0,t.taskCategoryID=38,t.referenceID=this.programInstanceStageID,t.endDate=Object(j.a)(new Date),t.taskTitle=this.programInstance.programTitle+" Application",t.taskDescription=`Complete sections for complete ${this.programInstanceStage.programStageTitle} stage of ${this.programInstance.programTitle}`,t.submittedBy=this.contactID,this.taskService.addTask(t).subscribe(n=>{t=n,t.taskID=n.inOut_TaskID,this.initialStageBaseline=t,this.programInstanceStage.initialTaskExist=!0,this.programService.stageStoreRx(this.programInstanceStage),e&&this.updateStageActiveStatus(1),this.loading=!1})}updateStageActiveStatus(e){this.programService.updateProgramInstanceStageActivation({programInstanceStageID:this.programInstanceStage.programInstanceStageID,activationStatusID:e,activatedByContactID:this.contactID}).subscribe(()=>{this.programInstanceStage.activationStatusID=e,this.programService.stageStoreRx(this.programInstanceStage)})}getSections(e=!0,t=!1){e&&(this.sectionsLoading=!0),this.taskService.getTaskSection(this.companyID,this.taskCategoryID,this.programInstanceStageID).subscribe(n=>{this.taskSections=n,!e&&this.taskSections.length>0&&!this.initialStageBaseline&&this.formTaskInitialStage(t),n.some(e=>12===e.taskSectionCategoryID)&&this.getSectionTask(),this.sectionsLoading=!1})}getTask(){this.loading=!0,this.taskService.getTask(0,38,this.programInstanceStageID,0,0,0,0,0,!1).subscribe(e=>{this.initialStageBaseline=e[0]||null,this.programInstanceStage.initialTaskExist=e.length>0,this.programService.stageStoreRx(this.programInstanceStage),this.loading=!1})}openSectionModal(e=!1){const t=this.ngbModal.open(In.a);t.componentInstance.existingSections=this.taskSections,t.componentInstance.taskCategoryID=this.taskCategoryID,t.componentInstance.taskSectionReferenceID=this.programInstanceStageID,t.result.then(t=>{t&&this.getSections(!1,e)})}deleteTaskSection(e){const t=this.taskSections[e],n=this.ngbModal.open(le.a);n.componentInstance.objectType="Task Section",n.componentInstance.objectDetails=""+t.taskSectionCategory,n.result.then(n=>{"Yes"===n&&this.taskService.deleteTaskSection(t.taskSectionID).subscribe(()=>{this.taskSections.splice(e,1)})})}addForm(e){const t=this.taskSections[e],n=this.ngbModal.open(gn.a,{backdrop:"static"});n.componentInstance.customFormSection=!0,n.result.then(e=>{if(e[0]){this.loading=!0;let n=new rn.a;n.formID=e[0].formID,n.companyID=this.companyID,n.taskCategoryID=1,n.referenceID=t.taskSectionID,n.endDate=Object(j.a)(new Date),n.taskTitle=e[0].formName,n.taskDescription=`Complete form for complete ${t.taskSectionCategory} section`,n.submittedBy=this.contactID,n.parentTaskID=this.initialStageBaseline.taskID,this.taskService.addTask(n).subscribe(e=>{n=e,n.taskID=e.inOut_TaskID,t.task=n,this.loading=!1})}})}changeForm(e){const t=this.taskSections[e],n=new dn.c;n.formID=t.task.formID,n.formName=t.task.formName;const a=this.ngbModal.open(gn.a,{backdrop:"static"});a.componentInstance.form=Object(j.l)(n),a.componentInstance.returnForm=[Object(j.l)(n)],a.componentInstance.customFormSection=!0,a.result.then(e=>{if(e[0]&&e[0].formID!==n.formID){this.loading=!0;const n=Object(j.l)(t.task);n.formID=e[0].formID,n.taskTitle=e[0].formName,n.companyID=this.companyID,n.parentTaskID=this.initialStageBaseline.taskID,this.taskService.updateTask(n).subscribe(()=>{t.task=n,this.loading=!1})}})}getSectionTask(){this.loading=!0;const e=this.taskSections.findIndex(e=>12===e.taskSectionCategoryID),t=this.taskSections[e];this.taskService.getTask(0,1,t.taskSectionID,0,0,0,0,0,!1).subscribe(e=>{t.task=e[0]||null,this.loading=!1})}addCriteria(){const e=this.ngbModal.open(xn);e.componentInstance.stage=this.programInstanceStage,e.componentInstance.instance=this.programInstance,e.componentInstance.tasks=this.tasks,e.componentInstance.courses=this.courses,e.componentInstance.events=this.events,e.componentInstance.existingList=this.criteriaList,e.result.then(e=>{if(6===e.programInstanceStageCriteriaCategoryID)this.onActivityAdd();else if(7===e.programInstanceStageCriteriaCategoryID)this.programInstance.rollingIntake?this.addCourse():this.addEvent();else{const t=this.criteriaList.findIndex(t=>t.programInstanceStageCriteriaID===e.programInstanceStageCriteriaID);-1!==t?this.criteriaList[t]=e:this.criteriaList.push(e)}})}editCriteria(e){const t=this.criteriaList[e],n=this.ngbModal.open(xn);n.componentInstance.stage=this.programInstanceStage,n.componentInstance.instance=this.programInstance,n.componentInstance.tasks=this.tasks,n.componentInstance.courses=this.courses,n.componentInstance.events=this.events,n.componentInstance.criteria=Object(j.l)(t),n.result.then(t=>{this.criteriaList[e]=t})}deleteCriteria(e){const t=this.criteriaList[e],n=this.ngbModal.open(le.a);n.componentInstance.objectType="Criteria",n.componentInstance.objectDetails=t.programInstanceStageCriteria,n.result.then(n=>{"Yes"===n&&this.programService.deleteStageCriteria(t.programInstanceStageCriteriaID).subscribe(()=>{this.criteriaList.splice(e,1)})})}getCriteria(){this.loading=!0,this.programService.getStageCriteria(0,this.programInstanceStageID,0).pipe(Object(L.a)(this.destroy$)).subscribe(e=>{this.criteriaList=e,this.loading=!1})}eventEdited(e){this.timeline.findIndex(t=>t.event&&t.event.eventID===e.eventID);const t=this.timeline.findIndex(t=>t.event&&t.event.eventID===e.eventID);-1!==t&&(this.timeline[t].event=e)}eventDeleted(e){const t=this.timeline.findIndex(t=>t.event&&t.event.eventID===e.eventID);-1!==t&&(this.timeline[t].task?this.timeline[t].event=null:this.timeline.splice(t,1))}taskEvents(){this.taskService.getActiveTaskRx().pipe(Object(L.a)(this.destroy$)).subscribe(e=>{this.activeTask=e})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](Ve.a),v["\u0275\u0275directiveInject"](Le.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](En.a),v["\u0275\u0275directiveInject"](Cn.b),v["\u0275\u0275directiveInject"](kn.a),v["\u0275\u0275directiveInject"](B.a),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-stage-timeline-profile"]],decls:4,vars:4,consts:[[1,"d-flex","float-left","w-100","flex-column",3,"avnonLoader"],["class","section section-alt filter-container border-bottom",4,"ngIf"],[4,"ngIf"],[3,"activeEvent","closed",4,"ngIf"],[1,"section","section-alt","filter-container","border-bottom"],[1,"mb-0"],["class","section section-alt filter-container",4,"ngIf"],["class","d-flex flex-column w-100 list-container",4,"ngIf"],[1,"section","section-alt","filter-container"],["class","cursor-pointer",3,"click",4,"ngIf"],["class","ml-2 cursor-pointer",3,"click",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"plus-ico-2"],[1,"ml-2","cursor-pointer",3,"click"],[1,"d-flex","flex-column","w-100","list-container"],[1,"table","todo-table"],[4,"ngFor","ngForOf"],[3,"list-active-fill","click",4,"ngIf"],[3,"click"],[1,"d-flex","w-100","align-items-center"],[1,"mr-auto"],["class","actions ml-2",3,"click",4,"ngIf"],[1,"actions","ml-2",3,"click"],[1,"dropdown"],["type","button","id","tE","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","tE",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["type","button","id","tT","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],["aria-labelledby","tT",1,"dropdown-menu","dropdown-menu-end"],["class","actions ml-2",4,"ngIf"],[1,"actions","ml-2"],["type","button","id","cS","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],["aria-labelledby","cS",1,"dropdown-menu","dropdown-menu-end"],[1,"section","section-floats","section-timeline","mb-3"],[1,"pl-3","pr-3"],[1,"d-flex","align-items-center","w-100","pl-3","pr-3","pt-2","pb-2"],[3,"click",4,"ngFor","ngForOf"],["class","ml-4 cursor-pointer",3,"click",4,"ngIf"],[1,"ml-4","cursor-pointer",3,"click"],[1,"d-flex","align-items-center","w-100"],["type","button","id","c","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],["aria-labelledby","c",1,"dropdown-menu","dropdown-menu-end"],[1,"ml-auto"],["type","button","id","d1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],["aria-labelledby","d1",1,"dropdown-menu","dropdown-menu-end"],["type","button","id","cSs","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],["aria-labelledby","cSs",1,"dropdown-menu","dropdown-menu-end"],[1,"section","section-floats","section-timeline","mt-2","border-0"],[1,"filter-container","d-flex","w-100","align-items-center","border-bottom"],[1,"mr-4"],[1,"ml-auto","cursor-pointer","col-auto",3,"click"],["class","entry pb-3",4,"ngFor","ngForOf"],[1,"entry","pb-3"],["class","cursor-pointer text-primary",3,"click",4,"ngIf"],["class","cursor-pointer text-primary",4,"ngIf"],["class","actions",4,"ngIf"],[1,"cursor-pointer","text-primary",3,"click"],[1,"cursor-pointer","text-primary"],[1,"actions"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[3,"activeEvent","closed"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275template"](1,Pn,3,1,"div",1),v["\u0275\u0275template"](2,ia,6,5,"ng-container",2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](3,sa,1,1,"app-event-rhp",3)),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading||t.activeStagesLoading||t.criteriaLoading),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1!==(null==t.programInstanceStage?null:t.programInstanceStage.programStageTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.programInstance&&t.programInstanceStage&&t.programInstanceStage.programInstanceStageID&&t.program),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.activeEvent))},directives:[x.a,a.n,a.m,Mn.a],pipes:[d.c,a.f],styles:[".no-icon[_ngcontent-%COMP%]{background-position:50%}.no-icon[_ngcontent-%COMP%]:after, .no-icon[_ngcontent-%COMP%]:before{display:none}.todo-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.25rem 1rem;color:#495057}"]}),e})();var la=n("3DXX"),pa=n("1bi4");let ma=(()=>{class e{constructor(e,t,n,a,r,o,i,s){this.portfolioService=e,this.programsService=t,this.toastrService=n,this.distributionService=a,this.signalRService=r,this.notificationService=o,this.activeModal=i,this.userService=s,this.programInstanceStages=[],this.activeCompanies=[],this.user=this.userService.user.getValue(),this.contactID=this.user.contactID}ngOnInit(){this.currentStage=this.programInstanceStage,this.getStages(),this.getCompanies()}getStages(){this.programsService.getProgramInstanceStages(this.programInstance.programInstanceID).subscribe(e=>{this.programInstanceStages=e.sort((e,t)=>e.programStageTypeID-t.programStageTypeID);const t=this.programInstanceStages.findIndex(e=>e.programInstanceStageID===this.programInstanceStage.programInstanceStageID),n=this.programInstanceStages[t+1]||null;n&&(this.nextStage=n)})}getCompanies(){this.loading=!0,this.portfolioService.getCompanyRoadmapStages(0,0,0,0,this.programInstanceStage.programInstanceStageID,0).subscribe(e=>{this.activeCompanies=e.filter(e=>2===e.companyProgramStageStatusID&&e.programInstanceStageID===this.programInstanceStage.programInstanceStageID),this.loading=!1})}onSubmit(){this.loading=!0,this.programsService.updateProgramInstanceStageActivation({programInstanceStageID:this.programInstanceStage.programInstanceStageID,activationStatusID:1,activatedByContactID:this.contactID}).pipe(Object(O.a)(()=>{const e=[];return this.activeCompanies.forEach(t=>{const n=t.companyProgramStageStartDate;let a=t.companyProgramStageEndDate;if(this.currentStage.rollingIntake&&(a=Object(j.a)(new Date)),e.push(this.portfolioService.updateStage({companyProgramInstanceStageID:t.companyProgramInstanceStageID,companyProgramStageStartDate:n,companyProgramStageEndDate:a,companyProgramStageStatusID:3,companyLocationID:t.companyLocationID,companyProgramInstanceStageTypeID:t.companyProgramInstanceStageTypeID,programInstanceStageID:t.programInstanceStageID,companyProgramInstanceStageActivationStatusDate:t.companyProgramInstanceStageActivationStatusDate,companyProgramInstanceStageActivationStatusID:t.companyProgramInstanceStageActivationStatusID,programInstanceStageStatusID:t.programInstanceStageStatusID,companyProgramInstanceID:t.companyProgramInstanceID})),this.nextStage){let n=this.nextStage.programStageStartDate,a=this.nextStage.programStageEndDate;this.nextStage.rollingIntake&&(n=Object(j.a)(new Date),a=null),e.push(this.portfolioService.insertStage({programInstanceStageID:this.nextStage.programInstanceStageID,companyProgramStageStartDate:n,companyProgramStageEndDate:a,companyProgramStageStatusID:2,companyLocationID:t.companyLocationID,companyProgramInstanceID:t.companyProgramInstanceID,companyProgramInstanceStageTypeID:t.companyProgramInstanceStageTypeID}))}}),e.length>0?Object(T.a)(e):Object(R.a)([])})).subscribe(e=>{e.length>0&&this.activeCompanies.forEach(e=>{this.notifyApplicant(e)}),this.loading=!1,this.activeModal.close({status:"success"})})}notifyApplicant(e){if(e.contactID===this.contactID)return;const t=(this.nextStage.programStageTitle||this.currentStage.programStageTitle)+" is now active - please access your program to activate the stage and get started",n={notificationCategoryID:Tt.a.program_stage_accept,referenceID:this.nextStage.programInstanceStageID,contactID:e.contactID,description:t,createdContact:this.contactID},a=(new Date).getTime()+"|"+e.companyProgramInstanceID,r={date:Object(j.a)(new Date),body:t,topic:t,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:n.referenceID,notificationType:Rt.a.other,senderId:n.createdContact,receivers:[n.contactID],uniqueId:a,discussionId:0};this.notificationService.noticeNotification(n).subscribe(()=>{this.signalRService.transferMessage("dashboard",r),this.sendEmail(e)})}sendEmail(e){if(e.contactID===this.contactID)return;const t=this.nextStage.programStageTitle||this.programInstanceStage.programStageTitle,n=me.a.fullDomain()+"/enrollment/programs",a={distributionTitle:"Stage sign off status",distributionCategoryID:null,referenceID:e.programInstanceStageID,distributionDate:null,userID:this.user.contactID,emailBody:la.a.template(`\n\t\t\t\t\t<p>Hi ${e.firstname}</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p>${t} is now active - please access your program to activate stage and get started</p>\n\t\t\t\t\t<br>\n\t\t\t\t\t<a href="${n}">My Programs</a>\n\t\t\t\t\t<br>\n\t\t\t\t\t<br>\n\t\t\t\t\t<p>Thanks</p>\n\t\t\t\t\t<p>The Avnon Team</p>\n\t\t\t\t`),subjectLine:"Stage Activation",senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[e.contactID]};this.distributionService.create(a).subscribe(()=>{},()=>{})}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](B.a),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](Cn.b),v["\u0275\u0275directiveInject"](pa.a),v["\u0275\u0275directiveInject"](Vt.a),v["\u0275\u0275directiveInject"](Lt.a),v["\u0275\u0275directiveInject"](m.a),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-bulk-stage-activation"]],decls:14,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[3,"ngSubmit"],["f","ngForm"],[1,"text-right","pt-3"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h5",1),v["\u0275\u0275text"](2," Confirm Stage Activation "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"button",2),v["\u0275\u0275listener"]("click",function(){return t.dismiss()}),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",4),v["\u0275\u0275elementStart"](7,"form",5,6),v["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),v["\u0275\u0275elementStart"](9,"p"),v["\u0275\u0275text"](10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"div",7),v["\u0275\u0275elementStart"](12,"button",8),v["\u0275\u0275text"](13,"Submit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("avnonLoader",t.loading||t.stagesLoading),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate3"](" Activate ",t.programInstanceStage.programStageTitle," - all ",t.activeCompanies.length," companies enrolled on ",t.programInstance.programInstanceTitle," will be moved to this stage "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("disabled",!t.activeCompanies.length))},directives:[x.a,r.E,r.r,r.s],styles:[""]}),e})();var da=n("XSv+"),ga=n("pAQ2");function ua(e,t){if(1&e&&v["\u0275\u0275element"](0,"img",33),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("src",e.programInstance.logo?e.blobUrl+"256px/"+e.programInstance.logo:"assets/img/placeholder.jpg",v["\u0275\u0275sanitizeUrl"])}}function Ia(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",34),v["\u0275\u0275elementStart"](1,"div",35),v["\u0275\u0275elementStart"](2,"h3",36),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"p",21),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.question),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](e.questionAnswer)}}function ha(e,t){if(1&e&&v["\u0275\u0275element"](0,"app-photos-videos",37),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("title","Photo Gallery")("allowFilter",!1)("referenceID",null==e.program?null:e.program.programID)("documentCategoryID",5)("canEdit",!1)}}function Sa(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",28),v["\u0275\u0275elementStart"](1,"span",29),v["\u0275\u0275text"](2," Public url: "),v["\u0275\u0275elementStart"](3,"span",30),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"button",31),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().copyUrl(!0)}),v["\u0275\u0275text"](6,"Copy Link"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](e.publicUrl)}}let fa=(()=>{class e{constructor(e,t,n,a){this.activeModal=e,this.toastrService=t,this.lookupService=n,this.questionService=a,this.questions=[],this.blobUrl=P.a.apiBlobUrl+"/"}ngOnInit(){this.url=me.a.fullDomain()+"/apply/"+this.programInstanceID,this.fillQuestions(),this.lookupService.getLookup(0,pe.b.Instance,this.programInstanceID).subscribe(e=>{e[0]&&(this.lookup=e[0],this.publicUrl=me.a.fullDomain()+"/apply/"+this.lookup.lookupName)})}fillQuestions(){this.questionService.getQuestion(1,this.program.programID).subscribe(e=>{this.questions=e})}copyUrl(e=!1){const t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e?this.publicUrl:this.url,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.toastrService.success("Link copied")}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](m.a),v["\u0275\u0275directiveInject"](Cn.b),v["\u0275\u0275directiveInject"](de.a),v["\u0275\u0275directiveInject"](da.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-stage-preview"]],decls:55,vars:15,consts:[[1,"modal-body","p-0"],[1,"d-flex","flex-column","w-100","public-group-content",3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"page-header"],[1,"profile-photos"],[1,"w-100",3,"bannerUrl","canEdit"],[1,"user-photo"],["class","img-fluid profile-user",3,"src",4,"ngIf"],[1,"bottom-actions","d-flex","justify-content-end","align-items-center"],[1,"btn","btn-sm","btn-primary","mr-3","mt-3"],[1,"profile-overview"],[1,"meta"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],[1,"nav-link","active"],[1,"section","section-alt","alt-bordered","pl-3","pr-3","pt-3","mb-3"],[1,"mb-0"],[1,"pre-wrap"],[1,"section","section-alt","alt-bordered","pb-3","pl-3","pr-3","mb-3"],[1,"d-flex","align-items-center","w-100"],[1,"mb-3"],["class","question-item",4,"ngFor","ngForOf"],[1,"section","section-alt","pl-3","pr-3","pb-3"],[3,"title","allowFilter","referenceID","documentCategoryID","canEdit",4,"ngIf"],[1,"col-12","d-flex","border-top","bg-white","align-items-center","pt-2","pb-2","pl-3","pr-3"],[1,"mr-auto"],[1,"text-primary"],[1,"btn","btn-outline-primary","btn-sn","ml-2",3,"click"],["class","col-12 d-flex border-top bg-white align-items-center pt-2 pb-2 pl-3 pr-3",4,"ngIf"],[1,"img-fluid","profile-user",3,"src"],[1,"question-item"],[1,"d-flex","w-100"],[1,"m-0","mb-1"],[3,"title","allowFilter","referenceID","documentCategoryID","canEdit"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"div",2),v["\u0275\u0275elementStart"](3,"span",3),v["\u0275\u0275listener"]("click",function(){return t.dismiss()}),v["\u0275\u0275element"](4,"i",4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"h1",5),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",6),v["\u0275\u0275elementStart"](8,"div",7),v["\u0275\u0275element"](9,"app-banner",8),v["\u0275\u0275elementStart"](10,"div",9),v["\u0275\u0275template"](11,ua,1,1,"img",10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"div",11),v["\u0275\u0275elementStart"](13,"button",12),v["\u0275\u0275text"](14," Apply "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](15,"div",13),v["\u0275\u0275elementStart"](16,"h2"),v["\u0275\u0275text"](17),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](18,"span",14),v["\u0275\u0275text"](19),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"p"),v["\u0275\u0275text"](21),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](22,"div",15),v["\u0275\u0275elementStart"](23,"ul",16),v["\u0275\u0275elementStart"](24,"li",17),v["\u0275\u0275elementStart"](25,"a",18),v["\u0275\u0275text"](26,"Profile"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](27,"div",19),v["\u0275\u0275elementStart"](28,"h3",20),v["\u0275\u0275text"](29,"About this Program"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](30,"p",21),v["\u0275\u0275text"](31),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](32,"h3",20),v["\u0275\u0275text"](33," Who should apply"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](34,"p",21),v["\u0275\u0275text"](35),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](36,"h3",20),v["\u0275\u0275text"](37," Entry Requirements"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](38,"p",21),v["\u0275\u0275text"](39),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](40,"div",22),v["\u0275\u0275elementStart"](41,"div",23),v["\u0275\u0275elementStart"](42,"h1",24),v["\u0275\u0275text"](43,"Frequently Asked Questions"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](44,Ia,6,2,"div",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](45,"div",26),v["\u0275\u0275template"](46,ha,1,5,"app-photos-videos",27),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](47,"div",28),v["\u0275\u0275elementStart"](48,"span",29),v["\u0275\u0275text"](49," Private url: "),v["\u0275\u0275elementStart"](50,"span",30),v["\u0275\u0275text"](51),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](52,"button",31),v["\u0275\u0275listener"]("click",function(){return t.copyUrl()}),v["\u0275\u0275text"](53,"Copy Link"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](54,Sa,7,1,"div",32),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("bannerUrl",null!=t.programInstance&&t.programInstance.bannerImage?t.blobUrl+"512px/"+t.programInstance.bannerImage:"")("canEdit",!1),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.programInstance),v["\u0275\u0275advance"](6),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](null==t.programInstance?null:t.programInstance.programInstanceTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programOverview),v["\u0275\u0275advance"](10),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programProfile),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.targetAudience),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.entryRequirements),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("ngForOf",t.questions),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.program),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](t.url),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",t.lookup))},directives:[x.a,fe.a,a.n,a.m,ga.a],styles:[".public-group-content[_ngcontent-%COMP%]{max-height:73vh;overflow-y:auto;overflow-x:hidden}"]}),e})();function va(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275element"](1,"span",26),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.APPLICATIONS-OPEN-PUBLIC")," "))}function Da(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275element"](1,"span",26),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.APPLICATIONS-OPEN-PRIVATE")," "))}function ba(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275element"](1,"span",27),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.PAUSED")," "))}function ya(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275element"](1,"span",28),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](3,1,"PROGRAM.CLOSED")," "))}function xa(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",22),v["\u0275\u0275elementStart"](1,"button",23),v["\u0275\u0275template"](2,va,4,3,"ng-container",11),v["\u0275\u0275template"](3,Da,4,3,"ng-container",11),v["\u0275\u0275template"](4,ba,4,3,"ng-container",11),v["\u0275\u0275template"](5,ya,4,3,"ng-container",11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",24),v["\u0275\u0275elementStart"](7,"button",25),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).updateStageActiveStatus(1)}),v["\u0275\u0275text"](8),v["\u0275\u0275pipe"](9,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"button",25),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).updateStageActiveStatus(4)}),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"button",25),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).updateStageActiveStatus(2)}),v["\u0275\u0275text"](14),v["\u0275\u0275pipe"](15,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"button",25),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).updateStageActiveStatus(3)}),v["\u0275\u0275text"](17),v["\u0275\u0275pipe"](18,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",1===e.programInstanceStage.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",4===e.programInstanceStage.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",2===e.programInstanceStage.activationStatusID),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",3===e.programInstanceStage.activationStatusID),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](9,8,"PROGRAM.APPLICATIONS-OPEN-PUBLIC")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](12,10,"PROGRAM.APPLICATIONS-OPEN-PRIVATE")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](15,12,"PROGRAM.PAUSED")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](18,14,"PROGRAM.CLOSED")," ")}}function Ea(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,xa,19,16,"div",21),v["\u0275\u0275elementContainerEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.adminCheck)}}function Ca(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",34),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).previewStage()}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"COMMON.PREVIEW")))}function ka(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"li"),v["\u0275\u0275elementStart"](1,"a",34),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"](2).onDeleteProgramInstanceStage()}),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,1,"COMMON.ACTIVATE")))}function Ma(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",29),v["\u0275\u0275elementStart"](1,"div",30),v["\u0275\u0275elementStart"](2,"button",31),v["\u0275\u0275element"](3,"span",32),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",33),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",34),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onEditProgramInstanceStage()}),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"li"),v["\u0275\u0275elementStart"](10,"a",34),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onDeleteProgramInstanceStage()}),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"li"),v["\u0275\u0275template"](14,Ca,3,3,"a",35),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](15,ka,4,3,"li",11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](7),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](8,4,"COMMON.EDIT")),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](12,6,"COMMON.DELETE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",1===(null==e.programInstanceStage?null:e.programInstanceStage.programStageTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1!==(null==e.programInstanceStage?null:e.programInstanceStage.programStageTypeID)&&e.programInstance&&!e.programInstance.rollingIntake)}}function Pa(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span",9),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ROLLING-INTAKE")))}function Oa(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span",9),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("@",null==e.program?null:e.program.programTitle,"")}}function wa(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"p",9),v["\u0275\u0275element"](1,"i",36),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"date"),v["\u0275\u0275pipe"](4,"dateObject"),v["\u0275\u0275pipe"](5,"date"),v["\u0275\u0275pipe"](6,"dateObject"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate2"](" ",v["\u0275\u0275pipeBind2"](3,2,v["\u0275\u0275pipeBind1"](4,5,null==e.programInstanceStage?null:e.programInstanceStage.programStageStartDate),"dd MMM yyyy")," - ",v["\u0275\u0275pipeBind2"](5,7,v["\u0275\u0275pipeBind1"](6,10,null==e.programInstanceStage?null:e.programInstanceStage.programStageEndDate),"dd MMM yyyy")," ")}}const Aa=function(e){return["/program/stage/timeline",e,"active"]},Ta=function(){return{exact:!0}};function Ra(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"li",18),v["\u0275\u0275elementStart"](1,"a",19),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](5,Aa,e.programInstanceStageID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](7,Ta)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,3,"PROGRAM.ACTIVE"))}}const ja=function(e){return["/program/stage/timeline",e,"completed"]};function La(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"li",18),v["\u0275\u0275elementStart"](1,"a",19),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](5,ja,e.programInstanceStageID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](7,Ta)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,3,"PROGRAM.COMPLETED"))}}const Va=function(e){return["/program/stage/timeline",e]},Fa=function(e){return["/program/stage/timeline",e,"documents"]};let Ba=(()=>{class e{constructor(e,t,n,a,r,o){this.router=e,this.programService=t,this.ngbModal=n,this.activatedRoute=a,this.toastrService=r,this.userService=o,this.programInstanceStage=new Re.a,this.programInstance=new M.a,this.blobUrl=At.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.programInstanceStageID=+this.activatedRoute.snapshot.paramMap.get("id"),this.fillStageProfile()}onEditProgramInstanceStage(){const e=this.ngbModal.open(We);e.componentInstance.programInstanceStage=Object(j.l)(this.programInstanceStage),e.componentInstance.programInstance=Object(j.l)(this.programInstance),e.componentInstance.pageAction="Edit",e.componentInstance.editMode=!0,e.result.then(e=>{e&&e.hasOwnProperty("programInstanceStageID")&&(this.programInstanceStage=Object(j.c)(this.programInstanceStage,e),this.programService.stageStoreRx(this.programInstanceStage))})}onDeleteProgramInstanceStage(){this.ngbModal.open(le.a).result.then(e=>{"Yes"===e&&this.programService.deleteProgramInstanceStage(this.programInstanceStage.programInstanceStageID).subscribe(()=>{this.toastrService.success("Stage has been deleted"),this.router.navigate(["/program/instance",this.programInstance.programInstanceID])})})}setActiveStage(){const e=this.ngbModal.open(ma);e.componentInstance.programInstanceStage=this.programInstanceStage,e.componentInstance.programInstance=this.programInstance}fillStageProfile(){this.loading=!0,this.programService.getProgramInstanceStageProfile(this.programInstanceStageID).pipe(Object(O.a)(e=>(this.programInstanceStage=e,this.programService.getProgramInstanceProfile(this.programInstanceStage.programInstanceID)))).subscribe(e=>{this.programInstance=e,this.programService.getProgramProfile(this.programInstance.programID).subscribe(e=>{this.program=e,this.adminCheck=this.program.companyID===this.companyID||this.permissionAccess}),this.loading=!1}),this.programService.getStageStoreRx().subscribe(e=>{this.programInstanceStage=e})}updateStageActiveStatus(e){1!==e||this.programInstanceStage.initialTaskExist?this.programService.updateProgramInstanceStageActivation({programInstanceStageID:this.programInstanceStage.programInstanceStageID,activationStatusID:e,activatedByContactID:this.contactID}).subscribe(()=>{this.programInstanceStage.activationStatusID=e}):this.programService.showInitialStageForm.next(!0)}previewStage(){const e=this.ngbModal.open(fa,{backdrop:"static",size:"lg"});e.componentInstance.programInstanceStage=this.programInstanceStage,e.componentInstance.programInstance=this.programInstance,e.componentInstance.program=this.program,e.componentInstance.programInstanceID=this.programInstance.programInstanceID}back(){this.router.navigate(["/program/instance",this.programInstanceStage.programInstanceID])}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](Cn.b),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-stage-timeline"]],decls:39,vars:33,consts:[[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"entry","border-none"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48",3,"src"],[1,"mt-1"],[1,"meta"],[1,"bottom-actions","d-flex","justify-content-end","align-items-center"],[4,"ngIf"],["class","actions",4,"ngIf"],[1,"profile-overview","pb-0","pt-0","mt-0"],[1,"p-23"],["class","meta",4,"ngIf"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["class","nav-item",4,"ngIf"],["ngbDropdown","","container","body","class","ngdropdown status-dropdown-update mr-3 mt-3",4,"ngIf"],["ngbDropdown","","container","body",1,"ngdropdown","status-dropdown-update","mr-3","mt-3"],["ngbDropdownToggle","","type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-light","border-none"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],[1,"status","bg-success"],[1,"status","bg-warning"],[1,"status","bg-danger"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30","mr-3","mt-3"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"fas","fa-calendar-alt","mr-1","pt-3"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span",2),v["\u0275\u0275listener"]("click",function(){return t.back()}),v["\u0275\u0275element"](3,"i",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"h1",4),v["\u0275\u0275text"](5),v["\u0275\u0275pipe"](6,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div"),v["\u0275\u0275elementStart"](8,"div",5),v["\u0275\u0275elementStart"](9,"span",6),v["\u0275\u0275element"](10,"img",7),v["\u0275\u0275pipe"](11,"avatar"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"h2",8),v["\u0275\u0275text"](13),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"div",9),v["\u0275\u0275elementStart"](15,"span"),v["\u0275\u0275text"](16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](17,"div",10),v["\u0275\u0275template"](18,Ea,2,1,"ng-container",11),v["\u0275\u0275template"](19,Ma,16,8,"div",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"div",13),v["\u0275\u0275elementStart"](21,"p",14),v["\u0275\u0275text"](22),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](23,Pa,3,3,"span",15),v["\u0275\u0275template"](24,Oa,2,1,"span",15),v["\u0275\u0275template"](25,wa,7,12,"p",15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](26,"div",16),v["\u0275\u0275elementStart"](27,"ul",17),v["\u0275\u0275elementStart"](28,"li",18),v["\u0275\u0275elementStart"](29,"a",19),v["\u0275\u0275text"](30),v["\u0275\u0275pipe"](31,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](32,"li",18),v["\u0275\u0275elementStart"](33,"a",19),v["\u0275\u0275text"](34),v["\u0275\u0275pipe"](35,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](36,Ra,4,8,"li",20),v["\u0275\u0275template"](37,La,4,8,"li",20),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](38,"router-outlet"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](6,19,"PROGRAM.APPLICATION-STAGE-PROFILE")),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("src",v["\u0275\u0275pipeBind1"](11,21,null==t.programInstance?null:t.programInstance.logo),v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.programInstance?null:t.programInstance.programInstanceTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",1===(null==t.programInstanceStage?null:t.programInstanceStage.programStageTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.programInstanceStage?null:t.programInstanceStage.programStageTitle),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.programInstance&&t.programInstance.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.programInstance&&!t.programInstance.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.programInstance&&!t.programInstance.rollingIntake),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](27,Va,t.programInstanceStageID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](29,Ta)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](31,23,"PROGRAM.PROFILE")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](30,Fa,t.programInstanceStageID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](32,Ta)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](35,25,"PROGRAM.DOCUMENTS")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",1!==(null==t.programInstanceStage?null:t.programInstanceStage.programStageTypeID)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1!==(null==t.programInstanceStage?null:t.programInstanceStage.programStageTypeID)))},directives:[x.a,a.n,g.f,g.e,g.h,m.i,m.m,m.k,m.j],pipes:[d.c,N.a,a.e,oe.a],styles:[".stage-content[_ngcontent-%COMP%]{margin-top:53px;min-height:calc(100vh - 55px)}.no-icon[_ngcontent-%COMP%]{background-position:50%}.no-icon[_ngcontent-%COMP%]:after, .no-icon[_ngcontent-%COMP%]:before{display:none}.stage-name[_ngcontent-%COMP%]{font-size:23px!important}"]}),e})();function Na(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",4),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().addProgram()}),v["\u0275\u0275element"](1,"span",5),v["\u0275\u0275text"](2,"Add "),v["\u0275\u0275elementEnd"]()}}function _a(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",14),v["\u0275\u0275element"](1,"img",15),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit,t=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("src",e.programBanner?t.blobUrl+e.programBanner:"assets/img/program-banner.jpg",v["\u0275\u0275sanitizeUrl"])}}const Ga=function(e){return["/program/admin",e]};function Ua(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",6),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().showProgram(n)}),v["\u0275\u0275elementStart"](1,"span",7),v["\u0275\u0275element"](2,"img",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"h2",9),v["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),v["\u0275\u0275elementStart"](4,"a",10),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",11),v["\u0275\u0275elementStart"](7,"span"),v["\u0275\u0275text"](8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"div",12),v["\u0275\u0275elementStart"](10,"p"),v["\u0275\u0275text"](11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](12,_a,2,1,"div",13),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("src",e.logo?n.blobUrl+"256px/"+e.logo:"assets/img/card-placeholder.jpg",v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](6,Ga,e.programID)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](e.programTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("Powered by ",e.companyName,""),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.programOverview),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",null==e?null:e.programBanner)}}let qa=(()=>{class e{constructor(e,t,n){this.programService=e,this.router=t,this.userService=n,this.programs=[],this.blobUrl=P.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.companyID=this.user.companyID,this.superAdmin=this.user.permissions.some(e=>X.b.Admin===e.permissionAreaID),this.permissionAccess=this.user.permissions.some(e=>X.b.Programs===e.permissionAreaID)}ngOnInit(){this.fillProgrammes()}fillProgrammes(){this.loading=!0,this.programService.getPrograms(this.companyID).subscribe(e=>{this.programs=e,this.loading=!1})}addProgram(){this.router.navigate(["program/add"])}showProgram(e){this.router.navigate(["/program/admin",e.programID])}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-programs"]],decls:7,vars:3,consts:[[1,"m-3"],[1,"filter-actions","d-flex","w-100","align-items-center","pl-3","pr-3"],["class","cursor-pointer ml-auto",3,"click",4,"ngIf"],["class","entry",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer","ml-auto",3,"click"],[1,"plus-ico-2"],[1,"entry",3,"click"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","network",1,"img-fluid","img-48",3,"src"],[3,"click"],[3,"routerLink"],[1,"meta"],[1,"entry-content"],["class","entry-media",4,"ngIf"],[1,"entry-media"],[1,"img-fluid",3,"src"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"h1",0),v["\u0275\u0275text"](1,"Programs"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](2,"div",1),v["\u0275\u0275elementStart"](3,"span"),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,Na,3,0,"a",2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,Ua,13,8,"div",3)),2&e&&(v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"]("There are ",t.programs.length," program(s)"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.permissionAccess||t.superAdmin),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",t.programs))},directives:[a.n,a.m,g.f],styles:[".myCustomModalClass[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:765px}.filter-actions[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;border-bottom:1px solid #dfdfdf;border-top:1px solid #dfdfdf}.program-content[_ngcontent-%COMP%]{margin-top:55px;min-height:calc(100vh - 55px)}"]}),e})();function $a(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",5),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onAddGroup()}),v["\u0275\u0275element"](1,"span",6),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](3,1,"COMMON.ADD")," "))}function Qa(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"date"),v["\u0275\u0275pipe"](3,"dateObject"),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](2,1,v["\u0275\u0275pipeBind1"](3,4,null==e?null:e.programInstanceStartDate),"dd MMM yyyy"))}}function za(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"PROGRAM.ROLLING-INTAKE")))}function Ya(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",15),v["\u0275\u0275element"](1,"img",16),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit,t=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("src",e.bannerImage?t.apiBlobUrl+"512px/"+e.bannerImage:"assets/img/program-banner.jpg",v["\u0275\u0275sanitizeUrl"])}}function Ha(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",7),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.$implicit;return v["\u0275\u0275nextContext"]().viewInstanceProfile(n)}),v["\u0275\u0275elementStart"](1,"span",8),v["\u0275\u0275element"](2,"img",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"div",10),v["\u0275\u0275elementStart"](4,"h2"),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",11),v["\u0275\u0275template"](7,Qa,4,6,"span",12),v["\u0275\u0275template"](8,za,3,3,"span",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"div",13),v["\u0275\u0275template"](10,Ya,2,1,"div",14),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("src",e.logo?n.apiBlobUrl+e.logo:"assets/img/card-placeholder.jpg",v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](e.programInstanceTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!e.rollingIntake),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e.rollingIntake),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==e?null:e.bannerImage)}}const Ka=function(e){return{length:e}};let Wa=(()=>{class e{constructor(e,t,n,a,r){this.programsService=e,this.userService=t,this.ngbModal=n,this.router=a,this.activatedRoute=r,this.instances=[],this.apiBlobUrl=P.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.programID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillProfile(),this.fillInstances()}fillProfile(){this.loading=!0,this.programsService.getProgramProfile(this.programID).subscribe(e=>{var t;this.program=e,this.adminCheck=(null===(t=this.program)||void 0===t?void 0:t.companyID)===this.user.companyID||this.permissionAccess,this.loading=!1,console.log(this.program,"Sample")})}fillInstances(){this.instanceLoading=!0,this.programsService.getProgramcycles(this.programID).subscribe(e=>{this.instances=e,this.instanceLoading=!1})}onAddGroup(){const e=this.ngbModal.open(Se,{size:"lg"});e.componentInstance.programTitle=this.program.programTitle,e.componentInstance.programID=this.program.programID,e.result.then(e=>{this.fillInstances()})}viewInstanceProfile(e){console.log(e,"Sample instance"),this.router.navigate(["program/instance",e.programInstanceID])}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](g.c),v["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-groups-tab"]],decls:7,vars:8,consts:[[1,"col-12","d-flex","pl-3","pr-3","justify-content-between","align-items-center","filter-container","border-bottom"],[1,"post-count"],[1,"actions"],["class","text-dark d-flex align-items-center",3,"click",4,"ngIf"],["class","entry",3,"click",4,"ngFor","ngForOf"],[1,"text-dark","d-flex","align-items-center",3,"click"],[1,"plus-ico-2"],[1,"entry",3,"click"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48",3,"src"],[1,"d-flex"],[1,"meta"],[4,"ngIf"],[1,"entry-content"],["class","entry-media",4,"ngIf"],[1,"entry-media"],[1,"img-fluid",3,"src"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"span",1),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",2),v["\u0275\u0275template"](5,$a,4,3,"a",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,Ha,11,5,"div",4)),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind2"](3,3,"PROGRAM.THERE-ARE-X-GROUPS",v["\u0275\u0275pureFunction1"](6,Ka,t.instances.length))," "),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",t.instances))},directives:[a.n,a.m],pipes:[d.c,a.e,oe.a],styles:[".filter-actions[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.75rem;border-bottom:1px solid #dfdfdf}"]}),e})();class Xa{constructor(){this.questionID=null,this.question=null,this.questionAnswer=null,this.questionCategoryID=null,this.referenceID=null}}let Ja=(()=>{class e{constructor(e,t){this.questionService=e,this.activeModal=t}ngOnInit(){this.question||(this.question=new Xa)}onSubmit(){this.question&&this.question.questionID?this.updateQuestion():this.addQuestion()}addQuestion(){this.question.questionCategoryID=this.questionCategoryID,this.question.referenceID=this.referenceID,this.questionService.addQuestion(this.question).subscribe(()=>{this.activeModal.close(!0)})}updateQuestion(){this.question.questionCategoryID=this.questionCategoryID,this.question.referenceID=this.referenceID,this.questionService.updateQuestion({questionID:this.question.questionID,question:this.question.question,questionAnswer:this.question.questionAnswer}).subscribe(()=>{this.activeModal.close(this.question)})}onCancel(){this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](da.a),v["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-question"]],inputs:{question:"question",questionCategoryID:"questionCategoryID",referenceID:"referenceID"},decls:20,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-2"],[1,"mb-0"],["required","","name","question","rows","10",1,"form-control",3,"ngModel","ngModelChange"],["required","","name","questionAnswer","rows","10",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-right","pt-3"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h5",1),v["\u0275\u0275text"](2," Add Question "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"button",2),v["\u0275\u0275listener"]("click",function(){return t.onCancel()}),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"\xd7"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",4),v["\u0275\u0275elementStart"](7,"form",5,6),v["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),v["\u0275\u0275elementStart"](9,"div",7),v["\u0275\u0275elementStart"](10,"label",8),v["\u0275\u0275text"](11,"Question"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"textarea",9),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.question.question=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"div",7),v["\u0275\u0275elementStart"](14,"label",8),v["\u0275\u0275text"](15,"Answer"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"textarea",10),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.question.questionAnswer=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](17,"div",11),v["\u0275\u0275elementStart"](18,"button",12),v["\u0275\u0275text"](19,"Submit"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275reference"](8);v["\u0275\u0275advance"](12),v["\u0275\u0275property"]("ngModel",t.question.question),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",t.question.questionAnswer),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("disabled",!e.valid)}},directives:[r.E,r.r,r.s,r.b,r.A,r.q,r.t],styles:[""]}),e})();function Za(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"a",10),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onAddQuestion()}),v["\u0275\u0275element"](1,"span",11),v["\u0275\u0275text"](2,"Add "),v["\u0275\u0275elementEnd"]()}}function er(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",17),v["\u0275\u0275elementStart"](1,"div",18),v["\u0275\u0275elementStart"](2,"button",19),v["\u0275\u0275element"](3,"span",20),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",21),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",22),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"](2).index;return v["\u0275\u0275nextContext"]().editQuestion(t)}),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"li"),v["\u0275\u0275elementStart"](10,"a",22),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const t=v["\u0275\u0275nextContext"](2).index;return v["\u0275\u0275nextContext"]().deleteQuestion(t)}),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](7),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](8,2,"COMMON.EDIT")),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](12,4,"COMMON.DELETE")))}function tr(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",14),v["\u0275\u0275elementStart"](1,"h3",15),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](3,er,13,6,"div",16),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]().$implicit,t=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](null==e?null:e.question),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.adminCheck)}}function nr(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",12),v["\u0275\u0275template"](1,tr,4,2,"div",13),v["\u0275\u0275elementStart"](2,"p",2),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",e),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](null==e?null:e.questionAnswer)}}function ar(e,t){if(1&e&&v["\u0275\u0275element"](0,"app-photos-videos",23),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("title","Photo Gallery")("allowFilter",!1)("referenceID",null==e.program?null:e.program.programID)("documentCategoryID",5)("canEdit",e.adminCheck)}}let rr=(()=>{class e{constructor(e,t,n,a,r){this.programsService=e,this.questionService=t,this.activatedRoute=n,this.ngbModal=a,this.userService=r,this.questions=[],this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.programID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.fillProfile(),this.fillQuestions(),this.programsService.getProgramStoreRx().subscribe(e=>{e&&(this.program=e)})}fillProfile(){this.loading=!0,this.programsService.getProgramProfile(this.programID).subscribe(e=>{var t;this.program=e,this.adminCheck=(null===(t=this.program)||void 0===t?void 0:t.companyID)===this.user.companyID||this.permissionAccess,this.loading=!1,console.log(this.program,"Sample")})}fillQuestions(){this.questionService.getQuestion(1,this.programID).subscribe(e=>{this.questions=e})}onAddQuestion(){const e=this.ngbModal.open(Ja);e.componentInstance.referenceID=this.program.programID,e.componentInstance.questionCategoryID=1,e.result.then(e=>{this.fillQuestions()})}editQuestion(e){const t=this.ngbModal.open(Ja);t.componentInstance.referenceID=this.program.programID,t.componentInstance.questionCategoryID=1,t.componentInstance.question=Object(j.l)(this.questions[e]),t.result.then(t=>{this.questions[e]=t})}deleteQuestion(e){const t=this.ngbModal.open(le.a);t.componentInstance.objectType="Delete Question",t.componentInstance.objectDetails="Delete Question",t.componentInstance.program=this.program,t.result.then(t=>{"Yes"===t&&this.questionService.deleteQuestion(this.questions[e].questionID).subscribe(()=>{this.questions.splice(e,1)})})}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](da.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-profile-tab"]],decls:25,vars:18,consts:[[1,"section","section-alt","alt-bordered","pl-3","pr-3","pt-3","mb-3"],[1,"mb-1"],[1,"pre-wrap"],[1,"section","section-alt","alt-bordered","pb-1","pl-3","pr-3","mb-3"],[1,"d-flex","align-items-center","mb-3"],[1,"mr-auto","mb-0"],["class","text-dark d-flex align-items-center",3,"click",4,"ngIf"],["class","question-item",4,"ngFor","ngForOf"],[1,"section","section-alt","pl-3","pr-3","pb-1"],[3,"title","allowFilter","referenceID","documentCategoryID","canEdit",4,"ngIf"],[1,"text-dark","d-flex","align-items-center",3,"click"],[1,"plus-ico-2"],[1,"question-item"],["class","d-flex w-100",4,"ngIf"],[1,"d-flex","w-100"],[1,"mr-2"],["class","actions",4,"ngIf"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[3,"title","allowFilter","referenceID","documentCategoryID","canEdit"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"h3",1),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"p",2),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"h3",1),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"p",2),v["\u0275\u0275text"](10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"h3",1),v["\u0275\u0275text"](12),v["\u0275\u0275pipe"](13,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"p",2),v["\u0275\u0275text"](15),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"div",3),v["\u0275\u0275elementStart"](17,"div",4),v["\u0275\u0275elementStart"](18,"h1",5),v["\u0275\u0275text"](19),v["\u0275\u0275pipe"](20,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](21,Za,3,0,"a",6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](22,nr,4,2,"div",7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](23,"div",8),v["\u0275\u0275template"](24,ar,1,5,"app-photos-videos",9),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](3,10,"PROGRAM.ABOUT-THIS-PROGRAM")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programProfile),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](8,12,"PROGRAM.WHO-SHOULD-APPLY")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.targetAudience),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](13,14,"PROGRAM.ENTRY-REQUIREMENTS")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.entryRequirements),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](20,16,"PROGRAM.FAQ")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",t.questions),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.program))},directives:[a.n,a.m,ga.a],pipes:[d.c],styles:[""]}),e})();var or=n("CEMh");function ir(e,t){if(1&e&&v["\u0275\u0275element"](0,"app-banner",20),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("referenceID",e.program.programID)("documentCategoryID",4)("canEdit",e.adminCheck)}}function sr(e,t){if(1&e&&v["\u0275\u0275element"](0,"img",21),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("src",e.program.logo?e.apiBlobUrl+"256px/"+e.program.logo:"assets/img/placeholder.jpg",v["\u0275\u0275sanitizeUrl"])}}function cr(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"button",22),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onEditProgram()}),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](2,1,"COMMON.EDIT")," "))}function lr(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",23),v["\u0275\u0275elementStart"](1,"div",24),v["\u0275\u0275elementStart"](2,"button",25),v["\u0275\u0275element"](3,"span",26),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"ul",27),v["\u0275\u0275elementStart"](5,"li"),v["\u0275\u0275elementStart"](6,"a",28),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().onDeleteProgram()}),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}2&e&&(v["\u0275\u0275advance"](7),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](8,1,"PROGRAM.DELETE-PROGRAM")," "))}const pr=function(e){return["/program/admin",e,"managers"]},mr=function(){return{exact:!0}};function dr(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"li",17),v["\u0275\u0275elementStart"](1,"a",18),v["\u0275\u0275text"](2," Managers "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](2,pr,e.programID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](4,mr))}}const gr=function(e){return["/program/admin",e]},ur=function(e){return["/program/admin",e,"groups"]};let Ir=(()=>{class e{constructor(e,t,n,a,r,o){this.programService=e,this.activatedRoute=t,this.ngbModal=n,this.userService=a,this.location=r,this.router=o,this.apiBlobUrl=P.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.permissionAccess=this.user.permissions.some(e=>[X.b.Admin,X.b.Programs].includes(e.permissionAreaID))}ngOnInit(){this.programID=+this.activatedRoute.snapshot.paramMap.get("id"),this.fillProfile(),this.fillAdmins()}fillAdmins(){}onDeleteProgram(){const e=this.ngbModal.open(le.a);e.componentInstance.objectType="Delete Program",e.componentInstance.objectDetails=this.program.programTitle,e.componentInstance.program=this.program,e.result.then(e=>{"Yes"===e&&this.programService.deleteProgram(this.programID).subscribe(()=>{this.back()})})}onEditProgram(){this.router.navigate(["/program/edit",this.programID])}fillProfile(){this.loading=!0,this.programService.getProgramProfile(this.programID).subscribe(e=>{var t;this.program=e,this.adminCheck=(null===(t=this.program)||void 0===t?void 0:t.companyID)===this.user.companyID||this.permissionAccess,this.loading=!1})}back(){this.router.navigate(["/program"])}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](D.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](m.p),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](a.j),v["\u0275\u0275directiveInject"](g.c))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program"]],decls:34,vars:29,consts:[[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"page-header"],[1,"profile-photos","img-bottom-border"],["class","w-100",3,"referenceID","documentCategoryID","canEdit",4,"ngIf"],[1,"user-photo"],["alt","logo","class","img-fluid profile-user",3,"src",4,"ngIf"],[1,"bottom-actions","d-flex","justify-content-end","align-items-center"],["class","btn btn-sm btn-outline-primary mr-3 mt-3",3,"click",4,"ngIf"],["class","actions",4,"ngIf"],[1,"profile-overview"],[1,"meta"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["class","nav-item",4,"ngIf"],[1,"w-100",3,"referenceID","documentCategoryID","canEdit"],["alt","logo",1,"img-fluid","profile-user",3,"src"],[1,"btn","btn-sm","btn-outline-primary","mr-3","mt-3",3,"click"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30","mr-3","mt-3"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span",2),v["\u0275\u0275listener"]("click",function(){return t.back()}),v["\u0275\u0275element"](3,"i",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"h1",4),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",5),v["\u0275\u0275elementStart"](7,"div",6),v["\u0275\u0275template"](8,ir,1,3,"app-banner",7),v["\u0275\u0275elementStart"](9,"div",8),v["\u0275\u0275template"](10,sr,1,1,"img",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"div",10),v["\u0275\u0275template"](12,cr,3,3,"button",11),v["\u0275\u0275template"](13,lr,9,3,"div",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"div",13),v["\u0275\u0275elementStart"](15,"h2"),v["\u0275\u0275text"](16),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](17,"span",14),v["\u0275\u0275text"](18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](19,"p"),v["\u0275\u0275text"](20),v["\u0275\u0275pipe"](21,"ellipsis"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](22,"div",15),v["\u0275\u0275elementStart"](23,"ul",16),v["\u0275\u0275elementStart"](24,"li",17),v["\u0275\u0275elementStart"](25,"a",18),v["\u0275\u0275text"](26),v["\u0275\u0275pipe"](27,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](28,"li",17),v["\u0275\u0275elementStart"](29,"a",18),v["\u0275\u0275text"](30),v["\u0275\u0275pipe"](31,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](32,dr,3,5,"li",19),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](33,"router-outlet"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",t.program),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.program),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.adminCheck),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](null==t.program?null:t.program.programTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("@",null==t.program?null:t.program.programTitle,""),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](21,16,null==t.program?null:t.program.programOverview,250)),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](23,gr,t.programID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](25,mr)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](27,19,"PROGRAM.PROFILE")," "),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("routerLink",v["\u0275\u0275pureFunction1"](26,ur,t.programID))("routerLinkActiveOptions",v["\u0275\u0275pureFunction0"](28,mr)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](31,21,"PROGRAM.GROUPS")," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.adminCheck))},directives:[x.a,a.n,g.f,g.e,g.h,fe.a],pipes:[or.a,d.c],styles:[""]}),e})();var hr=n("frau"),Sr=n("f/iK");function fr(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",5),v["\u0275\u0275elementStart"](1,"span",6),v["\u0275\u0275element"](2,"img",7),v["\u0275\u0275pipe"](3,"avatar"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",8),v["\u0275\u0275elementStart"](5,"h2"),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",9),v["\u0275\u0275elementStart"](8,"div",10),v["\u0275\u0275elementStart"](9,"button",11),v["\u0275\u0275element"](10,"span",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"ul",13),v["\u0275\u0275elementStart"](12,"li"),v["\u0275\u0275elementStart"](13,"a",14),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.index;return v["\u0275\u0275nextContext"]().deletePermission(n)}),v["\u0275\u0275text"](14,"Delete"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](15,"div",15),v["\u0275\u0275elementStart"](16,"span"),v["\u0275\u0275text"](17),v["\u0275\u0275pipe"](18,"date"),v["\u0275\u0275pipe"](19,"dateObject"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("src",v["\u0275\u0275pipeBind1"](3,4,e.profilePhoto),v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,""),v["\u0275\u0275advance"](11),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](18,6,v["\u0275\u0275pipeBind1"](19,9,e.dateGranted),"dd MMM, yyyy"))}}const vr=[{path:"",component:qa},{path:"add",component:k},{path:"edit/:id",component:k},{path:"admin/:id",component:Ir,children:[{path:"",component:rr},{path:"groups",component:Wa},{path:"managers",component:(()=>{class e{constructor(e,t,n,a){this.permissionService=e,this.activatedRoute=t,this.userService=n,this.modal=a,this.permissions=[],this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}ngOnInit(){this.programID=+this.activatedRoute.parent.snapshot.paramMap.get("id"),this.getPermissions()}getPermissions(){this.loading=!0,this.permissionService.getPermission(X.b.ProgramManager,this.programID,0,0).subscribe(e=>{this.permissions=e,this.loading=!1})}postPermissions(){const e=this.modal.open(hr.a);e.componentInstance.selectedContacts=Object(j.l)(this.permissions),e.componentInstance.title="Program Managers",e.result.then(e=>{const t=e.filter(e=>0===this.permissions.filter(t=>t.contactID===e.contactID).length),n=[];t.forEach(e=>{const t={permissionAreaID:X.b.ProgramManager,permissionTypeID:0,referenceID:this.programID,contactID:e.contactID,companyID:this.companyID,grantedByContactID:this.contactID,dateGranted:Object(j.a)(new Date)};n.push(this.permissionService.create(t))}),n.length&&(this.loading=!0,Object(T.a)(n).subscribe(t=>{t.forEach(t=>{const n=e.find(e=>e.contactID===t.contactID);t.permissionID=t.inOut_PermissionID,t.firstName=n.firstName,t.surname=n.surname,t.profilePhoto=n.profilePhoto,this.permissions.push(t)}),this.loading=!1}))})}deletePermission(e){const t=this.permissions[e],n=this.modal.open(le.a);n.componentInstance.objectType="Permission",n.componentInstance.objectDetails=`${t.firstName} ${t.surname}`,n.result.then(n=>{"Yes"===n&&this.permissionService.delete(t.permissionID).subscribe(()=>{this.permissions.splice(e,1)})})}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](Sr.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](m.p))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-program-managers-tab"]],decls:8,vars:3,consts:[[3,"avnonLoader"],[1,"filter-container","d-flex","w-100","align-items-center","border-bottom"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],["class","entry",4,"ngFor","ngForOf"],[1,"entry"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48","cover",3,"src"],[1,"d-flex"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"meta"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span"),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"a",2),v["\u0275\u0275listener"]("click",function(){return t.postPermissions()}),v["\u0275\u0275element"](5,"span",3),v["\u0275\u0275text"](6,"Manage Permissions "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](7,fr,20,11,"div",4),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("",t.permissions.length," contacts"),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngForOf",t.permissions))},directives:[x.a,a.m],pipes:[N.a,a.e,oe.a],styles:[""]}),e})()}]},{path:"instance/:id",children:[{path:"",component:Ae,children:[{path:"",component:wt},{path:"active",component:re},{path:"graduates",component:ce}]}]},{path:"stage/timeline/:id",children:[{path:"",component:Ba,children:[{path:"",component:ca},{path:"documents",component:an},{path:"active",component:Yt},{path:"completed",component:Wt}]}]}];let Dr=(()=>{class e{}return e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[g.g.forChild(vr)],g.g]}),e})();var br=n("OZbp");let yr=(()=>{class e{}return e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.c,Dr,r.l,r.z,l.a,s.a,p.a,m.r,m.h,o.CourseModule,c.a,i.a,d.b,br.a]]}),e})()},CEMh:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("fXoL");let r=(()=>{class e{transform(e,t){return e?e.length<=t?e:e.substr(0,t)+"...":""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a["\u0275\u0275definePipe"]({name:"ellipsis",type:e,pure:!0}),e})()},FPrQ:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n("vdWK"),r=n("FSKZ"),o=n("fXoL"),i=n("xDUJ"),s=n("1kSV"),c=n("kmKP"),l=n("Jn3s"),p=n("ofXK"),m=n("3Pt+");function d(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",13),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("Choose the form you'd like to associate with this stage ",e.pageTitle,".")}}function g(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",13),o["\u0275\u0275text"](1,"Choose the form you'd like to associate with this stage Section."),o["\u0275\u0275elementEnd"]())}function u(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",13),o["\u0275\u0275text"](1," Select the form you'd like reviewers to complete when assessing this application. "),o["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p",13),o["\u0275\u0275text"](1," Please first select the form you'd like applicants to complete. "),o["\u0275\u0275elementEnd"]())}function h(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",14),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e.formID),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.formName)}}function S(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275elementStart"](1,"label",15),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().onAddNewForm()}),o["\u0275\u0275text"](2,"Add New Form"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}}const f=function(){return{standalone:!0}};let v=(()=>{class e{constructor(e,t,n,r){this.formService=e,this.ngbModal=t,this.userService=n,this.ngbActiveModal=r,this.forms=[],this.form=new a.c,this.returnForm=[],this.companyID=this.userService.user.getValue().companyID}onAddNewForm(){const e=this.ngbModal.open(r.a);e.componentInstance.referenceID=this.referenceID,e.componentInstance.formCategoryID=this.formCategoryID,e.componentInstance.companyID=this.companyID,this.ngbActiveModal.close(),e.result.then(e=>{})}ngOnInit(){this.fillForms()}fillForms(){this.loading=!0,this.formService.getForms(this.companyID,0,0).subscribe(e=>{this.forms=e,this.loading=!1})}setFormSelected(){this.returnForm=this.form.formID?this.forms.filter(e=>e.formID===this.form.formID):[]}onSubmit(){this.ngbActiveModal.close(this.returnForm)}dismiss(){this.ngbActiveModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](s.p),o["\u0275\u0275directiveInject"](c.a),o["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-selector"]],decls:21,vars:13,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],["class","lead",4,"ngIf"],[1,"form-group"],["id","formID","name","formID",1,"form-control",3,"ngModelOptions","ngModel","change","ngModelChange"],["value","0"],[3,"ngValue",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"action-row","d-flex"],[1,"btn","btn-primary","ml-auto","mr-0",3,"disabled","click"],[1,"lead"],[3,"ngValue"],[1,"label-options","cursor-pointer",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",function(){return t.dismiss()}),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275text"](5,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275template"](7,d,2,1,"p",5),o["\u0275\u0275template"](8,g,2,0,"p",5),o["\u0275\u0275template"](9,u,2,0,"p",5),o["\u0275\u0275template"](10,I,2,0,"p",5),o["\u0275\u0275elementStart"](11,"div",6),o["\u0275\u0275elementStart"](12,"select",7),o["\u0275\u0275listener"]("change",function(){return t.setFormSelected()})("ngModelChange",function(e){return t.form.formID=e}),o["\u0275\u0275elementStart"](13,"option",8),o["\u0275\u0275text"](14,"- Please select -"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](15,h,2,2,"option",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,S,3,0,"div",10),o["\u0275\u0275elementStart"](17,"div",6),o["\u0275\u0275elementStart"](18,"div",11),o["\u0275\u0275elementStart"](19,"button",12),o["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),o["\u0275\u0275text"](20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.isReviewForm?"Review Forms":"Select Form"," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("avnonLoader",t.loading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.isReviewForm&&!t.isApplyForm&&!t.customFormSection),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.customFormSection),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isReviewForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isApplyForm),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModelOptions",o["\u0275\u0275pureFunction0"](12,f))("ngModel",t.form.formID),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.forms),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.isReviewForm&&!t.isApplyForm&&!t.customFormSection),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.returnForm.length),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](t.isReviewForm?"Next":"Submit"))},directives:[l.a,p.n,m.B,m.q,m.t,m.v,m.D,p.m],styles:[""]}),e})()},FSKZ:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("vdWK"),r=n("fXoL"),o=n("xDUJ"),i=n("1kSV"),s=n("tyNb"),c=n("kmKP"),l=n("3Pt+"),p=n("5eqV"),m=n("ofXK");const d=function(){return{standalone:!0}};function g(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",23),r["\u0275\u0275elementStart"](1,"input",24),r["\u0275\u0275listener"]("ngModelChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().isArchive=t}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](2,"label",25),r["\u0275\u0275text"](3,"Archive"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("checked",e.isArchive)("ngModelOptions",r["\u0275\u0275pureFunction0"](3,d))("ngModel",e.isArchive)}}let u=(()=>{class e{constructor(e,t,n,r){this.formService=e,this.ngbActiveModal=t,this.router=n,this.userService=r,this.formCategoryID=1,this.referenceID=1,this.form=new a.c,this.isArchive=!1,this.user=this.userService.user.getValue()}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.form&&this.form.formID&&(this.isArchive=2===this.form.status,this.form.thankyouMessage&&(this.form.thankYouMessage=this.form.thankyouMessage)),console.log(this.form)}onCancel(){this.ngbActiveModal.close()}onSubmit(){this.form.companyID=this.companyID,this.form.formCategoryID=1,this.form.referenceID=1,this.form.createdByID=this.contactID,this.form.formID?(this.form.status=this.isArchive?2:1,this.formService.updateForm(this.form).subscribe(e=>{this.ngbActiveModal.close(this.form)})):(this.form.status=1,this.formService.insertForm(this.form).subscribe(e=>{this.form.formID=e.inOut_FormID,localStorage.setItem("formObject",JSON.stringify(this.form)),this.ngbActiveModal.close(),this.router.navigate(["forms/builder"])}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](s.c),r["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-add1"]],decls:42,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-add-content",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","formName"],["type","text","id","formName","name","formName","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","formDescription"],["name","formDescription","id","formDescription","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["for","introductionMessage"],["name","introductionMessage","id","introductionMessage","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["for","thankYouMessage"],["name","thankYouMessage","id","thankYouMessage","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group form-check",4,"ngIf"],["for","formTypeID"],["name","formTypeID","id","formTypeID",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"text-right"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary","ml-2",3,"disabled"],[1,"form-group","form-check"],["type","checkbox","id","archive",1,"form-check-input",3,"checked","ngModelOptions","ngModel","ngModelChange"],["for","archive",1,"form-check-label"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h1",1),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"button",2),r["\u0275\u0275listener"]("click",function(){return t.onCancel()}),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5,"\xd7"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275elementStart"](7,"form",5,6),r["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),r["\u0275\u0275elementStart"](9,"div",7),r["\u0275\u0275elementStart"](10,"label",8),r["\u0275\u0275text"](11,"Form Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"input",9),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formName=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",7),r["\u0275\u0275elementStart"](14,"label",10),r["\u0275\u0275text"](15,"Form Description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"textarea",11),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formDescription=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",7),r["\u0275\u0275elementStart"](18,"label",12),r["\u0275\u0275text"](19,"Introduction Message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"textarea",13),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.introductionMessage=e}),r["\u0275\u0275text"](21,"      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",7),r["\u0275\u0275elementStart"](23,"label",14),r["\u0275\u0275text"](24,"Thank you message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"textarea",15),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.thankYouMessage=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](26,g,4,4,"div",16),r["\u0275\u0275elementStart"](27,"div",7),r["\u0275\u0275elementStart"](28,"label",17),r["\u0275\u0275text"](29,"Form Type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"select",18),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formTypeID=e}),r["\u0275\u0275elementStart"](31,"option",19),r["\u0275\u0275text"](32,"Please Select"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"option",19),r["\u0275\u0275text"](34,"Standard"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"option",19),r["\u0275\u0275text"](36,"Diagnostic"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"div",20),r["\u0275\u0275elementStart"](38,"button",21),r["\u0275\u0275listener"]("click",function(){return t.onCancel()}),r["\u0275\u0275text"](39,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"button",22),r["\u0275\u0275text"](41,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275reference"](8);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",t.form&&t.form.formID?"Edit":"Add"," Form "),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngModel",t.form.formName),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.form.formDescription),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.form.introductionMessage),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.form.thankYouMessage),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.form&&t.form.formID),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",t.form.formTypeID),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngValue",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngValue",2),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("disabled",e.invalid)}},directives:[l.E,l.r,l.s,l.b,l.A,l.q,l.t,p.a,m.n,l.B,l.v,l.D,l.a],styles:[".form-add-content[_ngcontent-%COMP%]{max-height:86vh;overflow-x:hidden;overflow-y:auto}"]}),e})()},V6dO:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});class a{constructor(){this.companyID=null,this.opportunityID=null,this.opportunity=null,this.opportunityDescription=null,this.opportunityValidFrom=null,this.opportunityValidUntil=null,this.opportunityReference=null,this.opportunityInstructions=null,this.postedByID=0,this.contactID=0,this.opportunityCategoryID=0,this.referenceID=0,this.datePosted=null,this.activeStatusID=null,this.opportunityBanner=null,this.companyName=null,this.companyProfile=null,this.companyMission=null,this.items=[],this.taskOwnerID=null,this.masterFormID=null,this.masterTaskID=null,this.taskID=null,this.taskStatusID=null,this.opportunityResponseID=null,this.monthlySalaryEndRange=null,this.monthlySalaryStartRange=null,this.opportunities=[]}}class r{constructor(){this.opportunityID=0,this.opportunityResponseID=0,this.companyID=0,this.contactID=0,this.opportunityResponse="",this.opportunityResponseDate="",this.headline="",this.firstname="",this.surname="",this.profilePhoto="",this.personalProfile="",this.companyName="",this.companyProfile="",this.companyMission="",this.designation="",this.opportunityCategoryID=null,this.companyProgramInstanceStageID=null,this.opportunitityResponseStatusID=null,this.website="",this.combinedReviewerScore=null,this.companyLocationID=null,this.formID=null,this.formReviewMaxScore=null,this.opportunity=null,this.opportunityReferenceTitle=null,this.opportunityResponseStatusComment=null,this.opportunityResponseStatusDate=null,this.opportunityResponseStatusID=null,this.programInstanceStage=null,this.programInstanceStageID=null,this.reviewerCount=null,this.totalReviews=null,this.stageReviewScore=null,this.taskID=null,this.taskOwnerID=null,this.taskStatusID=null,this.programInstanceID=null,this.programInstanceStageStatusID=null,this.programInstanceStageStatus=null,this.programInstanceStageStatusColor=null,this.companyProgramInstanceID=null,this.programStageTypeID=null,this.companyProgramInstanceStageActivationStatusDate=null,this.companyProgramInstanceStageActivationStatusID=null,this.companyProgramInstanceStageTypeID=null,this.companyProgramStageEndDate=null,this.companyProgramStageStartDate=null,this.companyProgramStageStatusID=null,this.programStageTitle=null}}},WchS:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o});class a{constructor(e){if(this.programInstanceStageID=null,this.programInstanceID=null,this.programStageTypeID=null,this.programStageTitle=null,this.programStageOverview=null,this.programStageStartDate=null,this.programStageEndDate=null,this.programStageOrderID=null,this.programStageMaxDurationTypeID=null,this.programStageMaxDuration=null,this.active=!1,this.rollingIntake=null,this.programInstanceTitle=null,this.activatedByContactID=null,this.activationStatusDate=null,this.activationStatusID=null,this.companyName=null,e){const t=this;for(const n of Object.keys(e))t.hasOwnProperty(n)&&(t[n]=e[n])}}}class r{constructor(){this.programInstanceStageID=null,this.programInstanceStageCriteriaCategoryID=null,this.programInstanceStageCriteria=null,this.programInstanceStageMetric=null,this.programInstanceStageCriteriaID=null,this.checkCount=null,this.label=null}}const o=[{programInstanceStageCriteria:"Achieve minimum sales",programInstanceStageCriteriaCategoryID:1,label:"Achieve minimum sales per month"},{programInstanceStageCriteria:"Achieve minimum customer satisfaction",programInstanceStageCriteriaCategoryID:2},{programInstanceStageCriteria:"Achieve minimum hires",programInstanceStageCriteriaCategoryID:3},{programInstanceStageCriteria:"Minimum prospect conversion",programInstanceStageCriteriaCategoryID:4},{programInstanceStageCriteria:"Minimum demand level",programInstanceStageCriteriaCategoryID:5,label:"Minimum number of new qualified enquiries per month"},{programInstanceStageCriteria:"Complete a Task",programInstanceStageCriteriaCategoryID:6},{programInstanceStageCriteria:"Attend a course / workshop",programInstanceStageCriteriaCategoryID:7}]},"o+C+":function(e,t,n){"use strict";n.d(t,"a",function(){return a});class a{constructor(e){if(this.programInstanceID=null,this.programInstanceTitle=null,this.programID=null,this.programInstanceBanner=null,this.programInstanceStartDate=null,this.programInstanceEndDate=null,this.rollingIntake=null,this.programTitle=null,this.programInstanceManagerContactID=null,this.active=!1,this.companyLogo=null,this.bannerImage=null,this.logo=null,this.programOverview=null,this.stages=[],this.companyName=null,this.companyID=null,this.programProfile=null,this.targetAudience=null,this.entryRequirements=null,this.totalApplicants=null,this.activeApplicants=null,e){const t=this;for(const n of Object.keys(e))t.hasOwnProperty(n)&&(t[n]=e[n])}}}},pAQ2:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var a=n("rOaL"),r=n("OzGw"),o=n("HewK"),i=n("fXoL"),s=n("1kSV"),c=n("esnG"),l=n("kmKP"),p=n("ofXK"),m=n("nNlV"),d=n("pqhe"),g=n("Xdyb"),u=n("sYmb");function I(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",7),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onUploadDocument()}),i["\u0275\u0275element"](1,"span",8),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"COMMON.UPLOAD")," "))}const h=function(e){return{"mb-3":e}};function S(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"h1",5),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,I,4,3,"a",6),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](3,h,0!==(null==e.documentsFilted?null:e.documentsFilted.length))),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.canEdit)}}function f(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",16),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onUploadDocument()}),i["\u0275\u0275element"](1,"span",8),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"COMMON.UPLOAD-PHOTOS-VIDEOS")," "))}const v=function(e){return{active:e}};function D(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275elementStart"](1,"button",18),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onSwitchViewMode(1)}),i["\u0275\u0275element"](2,"img",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",20),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onSwitchViewMode(2)}),i["\u0275\u0275element"](4,"img",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,v,1===e.viewMode)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](4,v,2===e.viewMode))}}function b(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275elementStart"](2,"div",11),i["\u0275\u0275elementStart"](3,"a",12),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFilterDocument(2)}),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementStart"](6,"span",13),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"a",12),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFilterDocument(3)}),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementStart"](11,"span",13),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,f,4,3,"a",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](14,D,5,6,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](12,v,2===e.tabActive)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,8,"COMMON.PHOTOS")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.numberPhotos),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](14,v,3===e.tabActive)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](10,10,"COMMON.VIDEOS")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.numberVideos),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.disableAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",2===e.tabActive)}}function y(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"app-preview-file-upload",23),i["\u0275\u0275listener"]("removeFile",function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onDeleteDocument(t)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("documents",e.documentsFilted)}}function x(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",30),i["\u0275\u0275element"](1,"button",31),i["\u0275\u0275elementStart"](2,"div",32),i["\u0275\u0275elementStart"](3,"button",33),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](3).onDeleteDocument(t)}),i["\u0275\u0275text"](4," Delete "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function E(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td",27),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](3).onPreviewImage(n)}),i["\u0275\u0275element"](2,"app-document-thumbnail",28),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td",25),i["\u0275\u0275template"](6,x,5,0,"div",29),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("linkName",e.documentTitle)("isImage",e.documentType.includes("image"))("document",e)("isVideo",e.documentType.includes("video")||e.documentType.includes("application/octet-stream"))("documentPath",e.documentPath),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.dateUploaded),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.contactID===e.documentUploadedByID)}}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"table",24),i["\u0275\u0275elementStart"](1,"thead"),i["\u0275\u0275elementStart"](2,"tr"),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275elementStart"](4,"span"),i["\u0275\u0275text"](5,"Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"td"),i["\u0275\u0275elementStart"](7,"span"),i["\u0275\u0275text"](8,"Modified"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"td",25),i["\u0275\u0275text"](10,"Options"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"tbody"),i["\u0275\u0275template"](12,E,7,7,"tr",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngForOf",e.documentsFilted)}}function k(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,y,2,1,"ng-container",2),i["\u0275\u0275template"](2,C,13,1,"ng-template",null,22,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275reference"](3),t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",1===t.viewMode)("ngIfElse",e)}}function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275element"](1,"media-player",36),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("document",e)}}function P(e,t){if(1&e&&i["\u0275\u0275template"](0,M,2,1,"div",34),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngForOf",e.documentsFilted)}}let O=(()=>{class e{constructor(e,t,n){var a;this.modal=e,this.documentsService=t,this.userService=n,this.allowFilter=!0,this.title="",this.canEdit=!1,this.disableAdd=!1,this.isProcessing=!1,this.viewMode=1,this.tabActive=2,this.documentsFilted=[],this.allDocuments=[],this.TIME_RELOAD_DATA=60,this.numberPhotos=0,this.numberVideos=0,this.user=this.userService.user.getValue(),this.contactID=(null===(a=this.user)||void 0===a?void 0:a.contactID)||0}ngOnChanges(e){e.referenceID.currentValue&&!e.referenceID.isFirstChange()&&this.getDocuments()}ngOnInit(){this.getDocuments(),this.timerSub=setInterval(()=>{this.getDocuments()},1e3*this.TIME_RELOAD_DATA)}getDocuments(){this.referenceID&&this.documentsService.getDocuments(this.documentCategoryID,this.referenceID,0,0,0).subscribe(e=>{this.documentsFilted=e,this.allDocuments=[...this.documentsFilted],this.calculateDocuments(),this.onFilterDocument(this.tabActive)})}calculateDocuments(){this.numberPhotos=this.filterImages().length,this.numberVideos=this.filterVideos().length}onUploadDocument(){const e=this.modal.open(o.a,{size:"xl"});e.componentInstance.documents=[],e.componentInstance.referenceID=this.referenceID,e.componentInstance.reference2ID=0,e.componentInstance.documentCategoryID=this.documentCategoryID,e.componentInstance.documentFolderID=0,e.result.then(e=>{e&&this.getDocuments()},()=>{})}onFilterDocument(e){switch(this.tabActive=e,this.tabActive){case 1:this.documentsFilted=this.filterFiles();break;case 2:this.documentsFilted=this.filterImages();break;case 3:this.documentsFilted=this.filterVideos()}}filterVideos(){return this.allDocuments.filter(e=>e.documentType.includes("video"))}filterImages(){return this.allDocuments.filter(e=>e.documentType.includes("image"))}filterFiles(){return this.allDocuments.filter(e=>!e.documentType.includes("image")&&!e.documentType.includes("video"))}onPreviewImage(e){if(e.documentType.includes("image")&&2===this.tabActive){const t=this.modal.open(a.a,{size:"gallery",centered:!0});t.componentInstance.documents=this.documentsFilted,t.componentInstance.documentActive=e}}onDeleteDocument(e){const t=this.modal.open(r.a);t.componentInstance.objectType="Delete Document",t.componentInstance.objectDetails="document "+e.documentTitle,t.result.then(t=>{"Yes"===t&&this.deleteDocument(e)},()=>{})}deleteDocument(e){this.documentsService.deleteDocument(e.documentID).subscribe(()=>{this.documentsFilted=this.documentsFilted.filter(t=>t.documentID!==e.documentID),this.allDocuments=this.documentsFilted})}onSwitchViewMode(e){this.viewMode=e}ngOnDestroy(){this.timerSub&&clearInterval(this.timerSub)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.p),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-photos-videos"]],inputs:{referenceID:"referenceID",documentCategoryID:"documentCategoryID",allowFilter:"allowFilter",title:"title",canEdit:"canEdit",disableAdd:"disableAdd"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:4,consts:[["class","d-flex align-items-center",3,"ngClass",4,"ngIf"],["class","tabs-action-row delegate-filters border-bottom",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseDisplayVideo",""],[1,"d-flex","align-items-center",3,"ngClass"],[1,"mr-auto","mb-0"],["class","text-dark d-flex align-items-center",3,"click",4,"ngIf"],[1,"text-dark","d-flex","align-items-center",3,"click"],[1,"plus-ico-2"],[1,"tabs-action-row","delegate-filters","border-bottom"],[1,"d-flex","filter-documents","pb-2"],[1,"mr-auto"],[1,"btn","btn-rounded","btn-rounded-32","ml-2",3,"ngClass","click"],[1,"count-documents"],["class","action-main btn btn-rounded btn-rounded-link btn-rounded-32 btn-np",3,"click",4,"ngIf"],["class","switch-layout",4,"ngIf"],[1,"action-main","btn","btn-rounded","btn-rounded-link","btn-rounded-32","btn-np",3,"click"],[1,"switch-layout"],[1,"btn","btn-sm","border-0","btn-grid",3,"ngClass","click"],["src","assets/img/view-grid.svg","alt",""],[1,"btn","btn-sm","border-0","btn-list",3,"ngClass","click"],["src","assets/img/view-list.svg","alt",""],["elseTemplateList",""],[3,"documents","removeFile"],[1,"table","m-0"],[1,"text-right"],[4,"ngFor","ngForOf"],[3,"click"],[3,"linkName","isImage","document","isVideo","documentPath"],["ngbDropdown","","container","body",4,"ngIf"],["ngbDropdown","","container","body"],["ngbDropdownToggle","","type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","no-icon","icon-right"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"document"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,S,4,5,"div",0),i["\u0275\u0275template"](1,b,15,16,"div",1),i["\u0275\u0275template"](2,k,4,2,"ng-container",2),i["\u0275\u0275template"](3,P,1,1,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("ngIf",t.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.allowFilter),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",3!==t.tabActive)("ngIfElse",e)}},directives:[p.n,p.l,m.a,p.m,d.a,s.i,s.m,s.k,s.j,g.a],pipes:[u.c],styles:[".event-documents-tab[_ngcontent-%COMP%]   .table-photos-videos[_ngcontent-%COMP%]{width:100%;background:#fff;min-height:180px}.event-documents-tab[_ngcontent-%COMP%]   .table-photos-videos[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after{content:none}.event-documents-tab[_ngcontent-%COMP%]   .table-photos-videos[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{background-position:100%}.switch-layout[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:.5rem;padding:0!important}.switch-layout[_ngcontent-%COMP%]   .btn.btn-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px}.switch-layout[_ngcontent-%COMP%]   .btn.btn-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px}.switch-layout[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #406fe4}.filter-documents[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative}.filter-documents[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .count-documents[_ngcontent-%COMP%]{position:absolute;background:#406fe4;border-radius:50%;line-height:normal;padding:1px 6px;color:#fff;font-size:11px;top:-6px;right:-5px}"]}),e})()},qgjj:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n("ofXK"),r=n("3Pt+"),o=n("/ogr"),i=n("iv3V"),s=n("V6Zj"),c=n("1kSV"),l=n("Grqx"),p=n("sYmb"),m=n("fXoL");let d=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.c,r.l,c.l,o.a,i.a,s.a,l.a,p.b]]}),e})()}}]);