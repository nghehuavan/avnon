(window.webpackJsonp=window.webpackJsonp||[]).push([[30,62],{"7w9U":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("fXoL"),a=n("tk/3");let s=(()=>{class e{constructor(e){this.http=e,this.BaseURI="https://api.incubatorportal.com/api"}getEmailTemplate(e,t,n,i){return this.http.get(this.BaseURI+"/emailtemplate?emailTemplateCategoryID="+e+"&languageID="+t+"&companyID="+n+"&emailTemplateID="+i)}updateEmailTemplate(e){return this.http.put(this.BaseURI+"/emailtemplate",e)}addEmailTemplate(e){return this.http.post(this.BaseURI+"/emailtemplate",e)}deleteEmailTemplate(e){return this.http.delete(`${this.BaseURI}/emailtemplate/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](a.b))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},CEMh:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fXoL");let a=(()=>{class e{transform(e,t){return e?e.length<=t?e:e.substr(0,t)+"...":""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i["\u0275\u0275definePipe"]({name:"ellipsis",type:e,pure:!0}),e})()},JZpI:function(e,t,n){"use strict";n.d(t,"a",function(){return i});class i{constructor(){this.emailTemplateID=null,this.companyID=null,this.emailTemplateCategoryID=null,this.emailTemplateTitle=null,this.emailTemplateDescription=null,this.emailTemplateStatusID=null,this.emailBody=null,this.subjectLine=null,this.bannerImage=null,this.languageID=null,this.distributionCategoryID=null}}},kSZh:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("JZpI"),a=n("fXoL"),s=n("1kSV"),r=n("7w9U"),o=n("kmKP"),c=n("Jn3s"),l=n("3Pt+"),d=n("ofXK");function m(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"option",10),a["\u0275\u0275text"](1,"Application Declined Email"),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275property"]("ngValue",10)}function p(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"option",10),a["\u0275\u0275text"](1,"Stage successfully completed"),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275property"]("ngValue",9)}function g(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"option",10),a["\u0275\u0275text"](1,"Event Delegate Email"),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275property"]("ngValue",7)}function u(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"option",10),a["\u0275\u0275text"](1,"Event Email"),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275property"]("ngValue",2)}let h=(()=>{class e{constructor(e,t,n){this.ngbActiveModal=e,this.emailTemplateService=t,this.userService=n,this.emailTemplate=new i.a,this.user=n.user.getValue()}ngOnInit(){}onSubmit(){this.loading=!0,this.emailTemplate.companyID=this.user.companyID||0,this.emailTemplateService.addEmailTemplate(this.emailTemplate).subscribe(e=>{this.loading=!1,e.emailTemplateID=e.inOut_EmailTemplateID,this.ngbActiveModal.close(e)})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](r.a),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-email-template-add"]],decls:31,vars:11,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[1,"d-flex","flex-column","w-100","template-add",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","taskTitle"],["name","templateCategory","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngIf"],["type","text","name","taskTitle","id","taskTitle","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","emailTemplateDescription","id","emailTemplateDescription","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"h5",1),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"button",2),a["\u0275\u0275listener"]("click",function(){return t.ngbActiveModal.dismiss()}),a["\u0275\u0275elementStart"](4,"span",3),a["\u0275\u0275text"](5,"\xd7"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275elementStart"](7,"form",5,6),a["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),a["\u0275\u0275elementStart"](9,"div",7),a["\u0275\u0275elementStart"](10,"label",8),a["\u0275\u0275text"](11,"Template Category *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"select",9),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailTemplate.distributionCategoryID=e}),a["\u0275\u0275elementStart"](13,"option",10),a["\u0275\u0275text"](14,"- Please select -"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](15,m,2,1,"option",11),a["\u0275\u0275template"](16,p,2,1,"option",11),a["\u0275\u0275template"](17,g,2,1,"option",11),a["\u0275\u0275template"](18,u,2,1,"option",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",7),a["\u0275\u0275elementStart"](20,"label",8),a["\u0275\u0275text"](21,"Template Title *"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"input",12),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailTemplate.emailTemplateTitle=e}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"div",7),a["\u0275\u0275elementStart"](24,"label",8),a["\u0275\u0275text"](25,"Description "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"textarea",13),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailTemplate.emailTemplateDescription=e}),a["\u0275\u0275text"](27,"\t\t\t"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",14),a["\u0275\u0275elementStart"](29,"button",15),a["\u0275\u0275text"](30," Submit "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275reference"](8);a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",t.emailTemplate&&t.emailTemplate.emailTemplateID?"Edit":"Create"," Template "),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("avnonLoader",t.loading),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.emailTemplate.distributionCategoryID),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngValue",null),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.isDelegate&&!t.isEvent),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isDelegate&&!t.isEvent),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isStage&&!t.isEvent),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isStage&&!t.isDelegate),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngModel",t.emailTemplate.emailTemplateTitle),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngModel",t.emailTemplate.emailTemplateDescription),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",e.invalid)}},directives:[c.a,l.E,l.r,l.s,l.B,l.A,l.q,l.t,l.v,l.D,d.n,l.b],styles:["textarea.form-control[_ngcontent-%COMP%]{height:auto!important}"]}),e})()},t0yg:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("JZpI"),a=n("fXoL"),s=n("7w9U"),r=n("5eHb"),o=n("1kSV"),c=n("Jn3s"),l=n("3Pt+"),d=n("ofXK");function m(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",7),a["\u0275\u0275element"](1,"img",15),a["\u0275\u0275element"](2,"br"),a["\u0275\u0275elementStart"](3,"p",16),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("src",e.companyLogo,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("Hi ",e.firstName,",")}}let p=(()=>{class e{constructor(e,t,n){this.emailTemplateService=e,this.toastrService=t,this.activeModal=n,this.emailTemplate=new i.a}ngOnInit(){}onSubmit(){this.loading=!0,this.emailTemplateService.updateEmailTemplate(this.emailTemplate).subscribe(()=>{this.loading=!1,this.activeModal.close(this.emailTemplate)})}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](r.b),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-email-template-builder"]],decls:20,vars:6,consts:[[1,"modal-header"],["id","postModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[1,"w-100","d-flex","flex-column","builder-email",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","subjectLine"],["type","text","id","subjectLine","name","subjectLine","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","d-flex","flex-column","w-100","border","p-2"],["class","form-group",4,"ngIf"],["name","emailBody","id","emailBody","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","text-right"],[1,"btn","btn-primary",3,"disabled"],["alt","logo",1,"company-logo",3,"src"],[1,"mb-0"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"h5",1),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"button",2),a["\u0275\u0275listener"]("click",function(){return t.dismiss()}),a["\u0275\u0275elementStart"](4,"span",3),a["\u0275\u0275text"](5,"\xd7"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275elementStart"](7,"form",5,6),a["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),a["\u0275\u0275elementStart"](9,"div",7),a["\u0275\u0275elementStart"](10,"label",8),a["\u0275\u0275text"](11,"Subject Line "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"input",9),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailTemplate.subjectLine=e}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"div",10),a["\u0275\u0275template"](14,m,5,2,"div",11),a["\u0275\u0275elementStart"](15,"textarea",12),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailTemplate.emailBody=e}),a["\u0275\u0275text"](16,"      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",13),a["\u0275\u0275elementStart"](18,"button",14),a["\u0275\u0275text"](19," Submit "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275reference"](8);a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",t.emailTemplate.emailTemplateTitle," "),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("avnonLoader",t.loading),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngModel",t.emailTemplate.subjectLine),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.companyLogo&&t.firstName),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngModel",t.emailTemplate.emailBody),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",e.invalid)}},directives:[c.a,l.E,l.r,l.s,l.b,l.A,l.q,l.t,d.n],styles:["textarea.form-control[_ngcontent-%COMP%]{min-height:300px}.builder-email[_ngcontent-%COMP%]{max-height:80vh;overflow-x:hidden;overflow-y:auto}.company-logo[_ngcontent-%COMP%]{width:64px;height:64px;object-fit:contain;border-radius:5px;border:1px solid #dfdfdf}"]}),e})()},zB96:function(e,t,n){"use strict";n.r(t),n.d(t,"EventModule",function(){return fr});var i=n("ofXK"),a=n("3Pt+"),s=n("PCNd"),r=n("kvvH"),o=n("1kSV"),c=n("7itd"),l=n("pxUr"),d=n("KAtD"),m=n("5eqV"),p=n("tyNb"),g=n("p0ro"),u=n("1G5W"),h=n("8J6U"),v=n("XIp8"),f=n("XNiG"),I=n("9122"),D=n("fXoL"),b=n("ev4g"),C=n("5eHb"),x=n("kmKP"),S=n("6BoG"),y=n("Jn3s"),k=n("SdWN"),E=n("0mlJ");function w(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",4),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().openAddTaskModal()}),D["\u0275\u0275element"](1,"span",5),D["\u0275\u0275text"](2,"Assign Task "),D["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",13),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" +",e.taskOwners.length-1," ")}}function M(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"span"),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"date"),D["\u0275\u0275pipe"](3,"dateObject"),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](2,1,D["\u0275\u0275pipeBind1"](3,4,e.endDate),"dd MMM, yyyy")," ")}}function P(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"span"),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.taskDescription," ")}}function T(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",6),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.$implicit;return D["\u0275\u0275nextContext"]().onViewDetailTask(n)}),D["\u0275\u0275elementStart"](1,"div",7),D["\u0275\u0275elementStart"](2,"span",8),D["\u0275\u0275element"](3,"img",9),D["\u0275\u0275pipe"](4,"avatar"),D["\u0275\u0275template"](5,O,2,1,"div",10),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"h2"),D["\u0275\u0275text"](7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"div",11),D["\u0275\u0275template"](9,M,4,6,"span",12),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"div",11),D["\u0275\u0275template"](11,P,2,1,"span",12),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](4,5,null==e.taskOwners[0]?null:e.taskOwners[0].profilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",(null==e.taskOwners?null:e.taskOwners.length)>1),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](e.taskTitle),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.endDate),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.taskDescription)}}let j=(()=>{class e{constructor(e,t,n,i,a,s){this.taskService=e,this.toastrService=t,this.ngbModal=n,this.userService=i,this.router=a,this.eventService=s,this.delegates=[],this.tasks=[],this.delegateTasks=[],this.destroy$=new f.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.initEvent()}initEvent(){this.eventService.eventDetail.subscribe(e=>{e&&(this.event=e,this.adminCheck=this.event.scheduledbyID===this.contactID||this.superAdmin,this.delegates=this.event.delegates,this.initDelegates())})}initDelegates(){this.eventService.getEventDelegate(this.event.eventID).subscribe(e=>{this.delegates=e,this.delegate=this.delegates.find(e=>e.contactID===this.contactID&&1===e.eventDelegateTypeID),this.trainer=this.delegates.find(e=>e.contactID===this.contactID&&6===e.eventDelegateTypeID),this.initTasks()})}initTasks(){this.loading=!0,this.taskService.getTaskOwners(0,this.event.eventID,25,0,0,0).pipe(Object(u.a)(this.destroy$)).subscribe(e=>{e=Object(h.j)(e,"taskOwnerID");let t=Object(v.a)(e);const n=Object(v.a)(e);t=Object(h.j)(t,"taskID"),t=t.map(e=>(e.taskOwners=n.filter(t=>t.taskID===e.taskID),e)),this.tasks=t,this.loading=!1})}openAddTaskModal(){const e=this.ngbModal.open(g.a,{size:"lg"});e.componentInstance.contacts=Object(h.l)(this.delegates),e.componentInstance.referenceId=this.event.eventID,e.componentInstance.taskCategoryID=25,e.result.then(e=>{e&&e.task&&this.tasks.push(e.task)},()=>{})}onViewDetailTask(e){this.router.navigate(["/task",e.taskID])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](b.a),D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](S.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-assignments"]],decls:6,vars:4,consts:[[1,"d-flex","w-100","flex-column",3,"avnonLoader"],[1,"actions-header","d-flex","align-items-center","w-100","pl-3","pr-3","border-bottom"],["class","d-flex align-items-center cursor-pointer ml-auto",3,"click",4,"ngIf"],["class","entry",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","cursor-pointer","ml-auto",3,"click"],[1,"plus-ico-2"],[1,"entry",3,"click"],[1,"avatar-wrapper","d-inline"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48","cover",3,"src"],["class","more-owners",4,"ngIf"],[1,"meta"],[4,"ngIf"],[1,"more-owners"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"div",1),D["\u0275\u0275elementStart"](2,"span"),D["\u0275\u0275text"](3),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](4,w,3,0,"a",2),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](5,T,12,7,"div",3),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate1"]("",t.tasks.length," activities"),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.adminCheck),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",t.tasks))},directives:[y.a,i.n,i.m],pipes:[k.a,i.e,E.a],styles:[".actions-header[_ngcontent-%COMP%]{padding-bottom:.75rem;padding-top:.25rem}"]}),e})();var _=n("cp0P"),A=n("LRne"),V=n("eIep"),F=n("eUP4"),L=n("BN3N"),R=n("Wgwc"),B=n("r9as"),N=n("hpld"),$=n("AytR"),U=n("3DXX"),H=n("kSZh"),z=n("t0yg"),q=n("VgRj"),Y=n("9nlD"),K=n("1bi4"),G=n("7w9U");function J(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"option",11),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;D["\u0275\u0275property"]("ngValue",e),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate"](e.emailTemplateTitle)}}function W(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",20),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().previewTemplate()}),D["\u0275\u0275text"](1," Edit or Preview Template "),D["\u0275\u0275elementEnd"]()}}let X=(()=>{class e{constructor(e,t,n,i,a,s,r){this.notificationService=e,this.distributionService=t,this.toastrService=n,this.userService=i,this.emailTemplateService=a,this.activeModal=s,this.modal=r,this.emailTemplates=[],this.delegates=[],this.user=this.userService.user.getValue(),this.contactID=this.user.contactID}ngOnInit(){this.fillTemplates()}submit(){this.delegates.forEach(e=>{this.sendEmail(e)}),this.toastrService.success("Notifications has been sent"),this.dismiss()}dismiss(){this.activeModal.dismiss()}sendEmail(e){const t=q.a.fullDomain()+"/event/"+e.eventID;let n=this.emailTemplate.emailBody;n+=`<br><span class="btn btn-primary" style="margin: 0; padding: 0"><a href="${t}">Read More</a></span>`;const i={distributionTitle:"Event Notification",distributionCategoryID:13,referenceID:e.eventDelegateID,distributionDate:null,userID:this.user.contactID,emailBody:U.a.template(n),subjectLine:this.emailTemplate.subjectLine||"Delivery Test",senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[e.contactID]};this.distributionService.create(i).subscribe(()=>{},()=>{})}fillTemplates(){this.emailLoading=!0,this.emailTemplateService.getEmailTemplate(0,0,this.user.companyID,0).subscribe(e=>{this.emailTemplates=e.filter(e=>7===e.distributionCategoryID),this.emailLoading=!1},()=>this.emailLoading=!1)}addTemplate(){const e=this.modal.open(H.a,{backdrop:"static",size:"lg"});e.componentInstance.isDelegate=!0,e.result.then(e=>{e&&(this.emailTemplates.push(e),this.builderTemplate(e))})}previewTemplate(){const e=this.modal.open(z.a,{size:"lg",backdrop:"static"});e.componentInstance.isModal=!0,e.componentInstance.emailTemplate=Object(h.l)(this.emailTemplate),e.result.then(e=>{if(e&&e.emailTemplateID){const t=this.emailTemplates.findIndex(t=>t.emailTemplateID===e.emailTemplateID);-1!==t&&(this.emailTemplates[t]=e,this.emailTemplate=e)}})}builderTemplate(e){const t=this.modal.open(z.a,{size:"lg",backdrop:"static"});t.componentInstance.isModal=!0,t.componentInstance.emailTemplate=e,t.result.then(e=>{if(e&&e.emailTemplateID){const t=this.emailTemplates.findIndex(t=>t.emailTemplateID===e.emailTemplateID);-1!==t&&(this.emailTemplates[t]=e)}})}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](Y.a),D["\u0275\u0275directiveInject"](K.a),D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](G.a),D["\u0275\u0275directiveInject"](o.a),D["\u0275\u0275directiveInject"](o.p))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-delegate-email-notification-modal"]],decls:27,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column",3,"avnonLoader"],[1,"cursor-pointer","text-primary","mb-4"],[3,"submit"],["f","ngForm"],[1,"form-group"],[1,"input-group","mb-3"],["name","emailTemplate","id","emailTemplate","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"input-group-append","align-items-center"],[1,"ml-1","mr-1"],[1,"cursor-pointer","text-primary",3,"click"],[1,"preview-action","d-flex","align-items-center"],["type","button","class","btn btn-sm btn-outline-primary",3,"click",4,"ngIf"],[1,"form-group","text-right"],[1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"]],template:function(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"h5",1),D["\u0275\u0275text"](2," Send notifications "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"button",2),D["\u0275\u0275listener"]("click",function(){return t.dismiss()}),D["\u0275\u0275elementStart"](4,"span",3),D["\u0275\u0275text"](5,"\xd7"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"div",4),D["\u0275\u0275elementStart"](7,"span",5),D["\u0275\u0275text"](8),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"form",6,7),D["\u0275\u0275listener"]("submit",function(){return t.submit()}),D["\u0275\u0275elementStart"](11,"div",8),D["\u0275\u0275elementStart"](12,"div",9),D["\u0275\u0275elementStart"](13,"select",10),D["\u0275\u0275listener"]("ngModelChange",function(e){return t.emailTemplate=e}),D["\u0275\u0275elementStart"](14,"option",11),D["\u0275\u0275text"](15,"Select Template"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](16,J,2,2,"option",12),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](17,"div",13),D["\u0275\u0275elementStart"](18,"span",14),D["\u0275\u0275text"](19,"or"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](20,"span",15),D["\u0275\u0275listener"]("click",function(){return t.addTemplate()}),D["\u0275\u0275text"](21,"Add New"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](22,"div",16),D["\u0275\u0275template"](23,W,2,0,"button",17),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](24,"div",18),D["\u0275\u0275elementStart"](25,"button",19),D["\u0275\u0275text"](26," Confirm "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275reference"](10);D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("avnonLoader",t.loading||t.emailLoading),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"]("Sending to ",t.delegates.length," delegates"),D["\u0275\u0275advance"](5),D["\u0275\u0275property"]("ngModel",t.emailTemplate),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngValue",void 0),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngForOf",t.emailTemplates),D["\u0275\u0275advance"](7),D["\u0275\u0275property"]("ngIf",t.emailTemplate),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("disabled",t.loading||e.invalid&&!t.emailTemplate||!t.delegates.length)}},directives:[y.a,a.E,a.r,a.s,a.B,a.A,a.q,a.t,a.v,a.D,i.m,i.n],styles:[".selector-content[_ngcontent-%COMP%]{height:300px;overflow:auto;position:relative}.avatar-60[_ngcontent-%COMP%]{max-height:60px}"]}),e})();function Z(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",18),D["\u0275\u0275elementStart"](1,"div",19),D["\u0275\u0275elementStart"](2,"button",20),D["\u0275\u0275element"](3,"span",21),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"ul",22),D["\u0275\u0275elementStart"](5,"li"),D["\u0275\u0275elementStart"](6,"a",23),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](2).bulkUpdate(2,t)}),D["\u0275\u0275text"](7,"Attended"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"li"),D["\u0275\u0275elementStart"](9,"a",23),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](2).bulkUpdate(3,t)}),D["\u0275\u0275text"](10,"Absent"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function Q(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"th",15),D["\u0275\u0275elementStart"](1,"div",16),D["\u0275\u0275text"](2),D["\u0275\u0275pipe"](3,"date"),D["\u0275\u0275pipe"](4,"dateObject"),D["\u0275\u0275template"](5,Z,11,0,"div",17),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](3,2,D["\u0275\u0275pipeBind1"](4,5,e.startTime),"dd LLL")," "),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",!1)}}function ee(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"td"),D["\u0275\u0275elementStart"](1,"select",27),D["\u0275\u0275listener"]("ngModelChange",function(n){D["\u0275\u0275restoreView"](e);const i=t.index;return D["\u0275\u0275nextContext"]().$implicit.delegatesDate[i].attendanceStatusID=n})("change",function(){D["\u0275\u0275restoreView"](e);const n=t.index,i=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](2).onUpdateAttendance(n,i)}),D["\u0275\u0275elementStart"](2,"option",28),D["\u0275\u0275text"](3,"Select"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"option",28),D["\u0275\u0275text"](5,"Attended"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"option",28),D["\u0275\u0275text"](7,"Did not attend"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index,n=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngModel",n.delegatesDate[e].attendanceStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngValue",-1),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngValue",1),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngValue",0)}}function te(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",24),D["\u0275\u0275elementStart"](2,"span",25),D["\u0275\u0275element"](3,"img",26),D["\u0275\u0275pipe"](4,"avatar"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"h2"),D["\u0275\u0275text"](6),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](7,ee,8,4,"td",14),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](4,4,e.profilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,""),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",n.eventDates)}}function ne(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",8),D["\u0275\u0275elementStart"](1,"table",9),D["\u0275\u0275elementStart"](2,"thead",10),D["\u0275\u0275elementStart"](3,"tr",11),D["\u0275\u0275element"](4,"th",12),D["\u0275\u0275template"](5,Q,6,7,"th",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"tbody"),D["\u0275\u0275template"](7,te,8,6,"tr",14),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](5),D["\u0275\u0275property"]("ngForOf",e.eventDates),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngForOf",e.rowDelegates)}}function ie(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1," No one has been invited "),D["\u0275\u0275elementEnd"]())}let ae=(()=>{class e{constructor(e,t){this.eventService=e,this.activeModal=t,this.event=new F.a,this.eventDates=[],this.rowDelegates=[]}ngOnInit(){this.loading=!0,console.log("\ud83d\ude80 > EventAttendanceRegisterDialogComponent > ngOnInit > this.event",this.event),this.eventDates=this.event.dates,this.rowDelegates=this.event.delegates.filter(e=>1===e.eventDelegateStatusID).map(e=>(e.delegatesDate=[],this.eventDates.forEach(t=>{e.delegatesDate.push({eventDateID:t.eventDateID,attendanceStatusID:-1,eventDelegateID:e.eventDelegateID})}),console.log("\ud83d\ude80 > EventAttendanceRegisterDialogComponent > ngOnInit > this.rowDelegates",this.rowDelegates),console.log("\ud83d\ude80 > EventAttendanceRegisterDialogComponent > .map > row",e),e)),this.eventService.getDateDelegates(this.event.eventID).subscribe(e=>{this.rowDelegates=this.rowDelegates.map(t=>(t.delegatesDate=t.delegatesDate.map(n=>{const i=e.find(e=>e.eventDateID===n.eventDateID&&e.eventDelegateID===t.eventDelegateID);return i&&(i.attendanceStatusID=i.attendancestatusID,n=i),n}),t)),this.loading=!1})}onUpdateAttendance(e,t){const n=this.rowDelegates[t].delegatesDate[e];this.eventService.updateDateDelegate({eventDateDelegateID:n.eventDelegateID,nonAttendanceReason:"",attendanceStatusID:n.attendanceStatusID}).subscribe()}bulkUpdate(e,t){this.loading=!0;const n=[];this.rowDelegates=this.rowDelegates.map(i=>(i.delegatesDate[t].attendanceStatusID=e,n.push(this.eventService.updateDateDelegate(i.delegatesDate[t])),i)),Object(_.a)(n).subscribe(()=>{this.loading=!1})}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-attendance-register-dialog"]],decls:15,vars:16,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column",3,"avnonLoader"],[1,"page-sub-title"],["class","table-responsive freeze-table",4,"ngIf"],[4,"ngIf"],[1,"table-responsive","freeze-table"],[1,"table","table-attendance"],[1,"thead-row"],[1,"text-right"],[1,"placeholder","stick-top","stick-mixed"],["class","stick-top",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"stick-top"],[1,"d-flex","text-right"],["class","actions",4,"ngIf"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"stick-left"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","profile",1,"img-fluid","img-48",3,"src"],[1,"custom-select",3,"ngModel","ngModelChange","change"],[3,"ngValue"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"h1",1),D["\u0275\u0275text"](2," Attendance Register "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"button",2),D["\u0275\u0275listener"]("click",function(){return t.dismiss()}),D["\u0275\u0275elementStart"](4,"span",3),D["\u0275\u0275text"](5,"\xd7"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"div",4),D["\u0275\u0275elementStart"](7,"span",5),D["\u0275\u0275text"](8),D["\u0275\u0275pipe"](9,"date"),D["\u0275\u0275pipe"](10,"dateObject"),D["\u0275\u0275pipe"](11,"date"),D["\u0275\u0275pipe"](12,"dateObject"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](13,ne,8,2,"div",6),D["\u0275\u0275template"](14,ie,2,0,"p",7),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("avnonLoader",t.loading),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate3"](" ",t.event.eventTitle,", ",D["\u0275\u0275pipeBind2"](9,6,D["\u0275\u0275pipeBind1"](10,9,t.event.startDate),"dd MMM yyyy")," - ",D["\u0275\u0275pipeBind2"](11,11,D["\u0275\u0275pipeBind1"](12,14,t.event.endDate),"dd MMM yyyy")," "),D["\u0275\u0275advance"](5),D["\u0275\u0275property"]("ngIf",t.rowDelegates&&(null==t.rowDelegates?null:t.rowDelegates.length)>0),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.rowDelegates&&0===(null==t.rowDelegates?null:t.rowDelegates.length)))},directives:[y.a,i.n,i.m,a.B,a.q,a.t,a.v,a.D],pipes:[i.e,E.a,k.a],styles:[".stick-top[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff!important;z-index:2;box-shadow:0 0 1px #eaeaea}.stick-left[_ngcontent-%COMP%]{z-index:3}.stick-left[_ngcontent-%COMP%], .stick-mixed[_ngcontent-%COMP%]{position:sticky;left:0;background:#fff!important;box-shadow:0 0 1px #eaeaea}.stick-mixed[_ngcontent-%COMP%]{z-index:4}.dropdown-toggle[_ngcontent-%COMP%]:after, .dropdown-toggle[_ngcontent-%COMP%]:before{display:none}"]}),e})();var se=n("frau"),re=n("aFDK");function oe(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",9),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2);return t.onSelectDelegateToSendInvite(t.delegatesView,5)}),D["\u0275\u0275element"](1,"span",10),D["\u0275\u0275text"](2,"Invite "),D["\u0275\u0275elementEnd"]()}}function ce(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",11),D["\u0275\u0275elementStart"](1,"button",12),D["\u0275\u0275element"](2,"span",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"ul",14),D["\u0275\u0275elementStart"](4,"li"),D["\u0275\u0275elementStart"](5,"a",15),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onPrintCertificates()}),D["\u0275\u0275text"](6," Print certificates "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function le(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",6),D["\u0275\u0275template"](1,oe,3,0,"a",7),D["\u0275\u0275template"](2,ce,7,0,"div",8),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.isAdmin),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",4092===e.companyID)}}function de(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",16),D["\u0275\u0275elementStart"](1,"span"),D["\u0275\u0275text"](2," Delegates "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"div",17),D["\u0275\u0275elementStart"](4,"a",9),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().sortByStatus()}),D["\u0275\u0275text"](5," Status "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"div",18),D["\u0275\u0275elementStart"](7,"button",19),D["\u0275\u0275element"](8,"i",20),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"ul",14),D["\u0275\u0275elementStart"](10,"li"),D["\u0275\u0275elementStart"](11,"a",15),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().onMarkAllInvited()}),D["\u0275\u0275text"](12," Mark all invited "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](13,"li"),D["\u0275\u0275elementStart"](14,"a",15),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().onMarkAllConfirmed()}),D["\u0275\u0275text"](15," Mark all confirmed "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](16,"li"),D["\u0275\u0275elementStart"](17,"a",15),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().onMarkAllDeclined()}),D["\u0275\u0275text"](18," Mark all declined "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function me(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",34),D["\u0275\u0275text"](1,"Invited"),D["\u0275\u0275elementEnd"]())}function pe(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",35),D["\u0275\u0275text"](1,"Confirmed"),D["\u0275\u0275elementEnd"]())}function ge(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",36),D["\u0275\u0275text"](1,"Declined"),D["\u0275\u0275elementEnd"]())}function ue(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,me,2,0,"span",31),D["\u0275\u0275template"](2,pe,2,0,"span",32),D["\u0275\u0275template"](3,ge,2,0,"span",33),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.eventDelegateStatusID)}}function he(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",15),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"](2).onMarkAsConfirmed(n,i)}),D["\u0275\u0275text"](1,"Mark as confirmed"),D["\u0275\u0275elementEnd"]()}}function ve(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",15),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"](2).onMarkAsDeclined(n,i)}),D["\u0275\u0275text"](1,"Mark as declined"),D["\u0275\u0275elementEnd"]()}}function fe(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",15),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"](2).onMarkAsInvited(n,i)}),D["\u0275\u0275text"](1,"Mark as invite"),D["\u0275\u0275elementEnd"]()}}function Ie(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",37),D["\u0275\u0275elementStart"](1,"div",18),D["\u0275\u0275elementStart"](2,"button",12),D["\u0275\u0275element"](3,"span",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"ul",14),D["\u0275\u0275elementStart"](5,"li"),D["\u0275\u0275template"](6,he,2,0,"a",38),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"li"),D["\u0275\u0275template"](8,ve,2,0,"a",38),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"li"),D["\u0275\u0275template"](10,fe,2,0,"a",38),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"li"),D["\u0275\u0275elementStart"](12,"a",15),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"](2).onRemoveDelegate(n,i)}),D["\u0275\u0275text"](13,"Remove"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("ngIf",1===e.eventDelegateStatusID||3===e.eventDelegateStatusID),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",2===e.eventDelegateStatusID||1===e.eventDelegateStatusID),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",2===e.eventDelegateStatusID||3===e.eventDelegateStatusID)}}function De(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",41),D["\u0275\u0275text"](1,"Mentor"),D["\u0275\u0275elementEnd"]())}function be(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,De,2,0,"span",40),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2).$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",4===e.eventDelegateTypeID)}}function Ce(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",39),D["\u0275\u0275elementStart"](1,"span",29),D["\u0275\u0275template"](2,be,2,1,"ng-container",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.isAdmin)}}function xe(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",41),D["\u0275\u0275text"](1,"Mentor"),D["\u0275\u0275elementEnd"]())}function Se(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",41),D["\u0275\u0275text"](1,"Mentee"),D["\u0275\u0275elementEnd"]())}function ye(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,xe,2,0,"span",40),D["\u0275\u0275template"](2,Se,2,0,"span",40),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2).$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",4===e.eventDelegateTypeID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",5===e.eventDelegateTypeID)}}function ke(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",34),D["\u0275\u0275text"](1,"Invited"),D["\u0275\u0275elementEnd"]())}function Ee(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",35),D["\u0275\u0275text"](1,"Confirmed"),D["\u0275\u0275elementEnd"]())}function we(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",36),D["\u0275\u0275text"](1,"Declined"),D["\u0275\u0275elementEnd"]())}function Oe(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,ke,2,0,"span",31),D["\u0275\u0275template"](2,Ee,2,0,"span",32),D["\u0275\u0275template"](3,we,2,0,"span",33),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2).$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.eventDelegateStatusID)}}function Me(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",39),D["\u0275\u0275elementStart"](1,"span",29),D["\u0275\u0275template"](2,ye,3,2,"ng-container",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"span",29),D["\u0275\u0275template"](4,Oe,4,3,"ng-container",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.isAdmin),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.isAdmin)}}function Pe(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",22),D["\u0275\u0275elementStart"](1,"span",23),D["\u0275\u0275element"](2,"img",24),D["\u0275\u0275pipe"](3,"avatar"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",25),D["\u0275\u0275elementStart"](5,"h2"),D["\u0275\u0275text"](6),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"div",26),D["\u0275\u0275elementStart"](8,"span",27),D["\u0275\u0275template"](9,ue,4,3,"ng-container",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](10,Ie,14,3,"div",28),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"div",29),D["\u0275\u0275elementStart"](12,"span"),D["\u0275\u0275text"](13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](14,Ce,3,1,"div",30),D["\u0275\u0275template"](15,Me,5,2,"div",30),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](3,9,e.profileImage),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,""),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",n.isAdmin),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.isAdmin),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate2"]("",null==e?null:e.designation," ",null==e?null:e.department,""),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!1===n.isHideFilter&&4===e.eventDelegateTypeID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!0===n.isHideFilter)}}function Te(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,Pe,16,11,"div",21),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",e.delegatesView)}}function je(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1,"No one has been invited"),D["\u0275\u0275elementEnd"]())}function _e(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1,"No one has confirmed"),D["\u0275\u0275elementEnd"]())}function Ae(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1,"No one has declined"),D["\u0275\u0275elementEnd"]())}function Ve(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",42),D["\u0275\u0275template"](1,je,2,0,"p",4),D["\u0275\u0275template"](2,_e,2,0,"p",4),D["\u0275\u0275template"](3,Ae,2,0,"p",4),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.activeFilterEventDelegateStatus),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.activeFilterEventDelegateStatus),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.activeFilterEventDelegateStatus)}}let Fe=(()=>{class e{constructor(e,t,n){this.ngbModal=e,this.eventService=t,this.userService=n,this.unsubscribe=new f.a,this.onEventProfile=!1,this.isHideFilter=!1,this.apiBlobUrl=$.a.apiBlobUrl,this.event=new F.a,this.delegatesView=[],this.originalDelegates=[],this.activeFilterEventDelegateStatus=1,this.isAdmin=!1,this.sortOrder=!1,this.user=this.userService.user.getValue(),this.companyID=this.user.companyID||0,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.contactID=this.user.contactID,this.eventService.eventDetail.pipe(Object(u.a)(this.unsubscribe)).subscribe(e=>{e&&e.eventID&&(this.event=e,this.isAdmin=this.event.scheduledbyID===this.contactID||this.superAdmin,this.getDelegates())})}ngOnChanges(e){}getDelegates(){this.eventService.getEventDelegate(this.event.eventID).subscribe(e=>{e&&(this.originalDelegates=e.filter(e=>6!==e.eventDelegateTypeID),this.invitedDelegates=this.originalDelegates.filter(e=>1===e.eventDelegateStatusID),this.confirmedDelegates=this.originalDelegates.filter(e=>2===e.eventDelegateStatusID),this.delegatesView=this.originalDelegates,console.log("\ud83d\ude80 > DelegateSummaryComponent > .subscribe > this.delegatesView",this.delegatesView))})}sortByStatus(){this.delegatesView.sort(this.sortOrder?(e,t)=>e.eventDelegateStatusID>t.eventDelegateStatusID?1:-1:(e,t)=>e.eventDelegateStatusID<t.eventDelegateStatusID?1:-1),this.sortOrder=!this.sortOrder}addRemoveDelegates(e,t,n){const i=t.filter(t=>!e.some(e=>e.contactID===t.contactID));this.removeDelegates(i,t),e.forEach(e=>{t.filter(t=>t.contactID===e.contactID).length>0||this.addNewDelegate(e,n)}),this.getDelegates()}addNewDelegate(e,t){this.eventService.insertEventDelegate({eventID:this.event.eventID,contactID:e.contactID,addedByID:this.user.contactID,assessmentScore:0,contractNumber:"",eventDelegateTypeID:t,eventDelegateStatusID:1,setaID:0,endDate:"",startDate:"",projectedEndDate:""}).subscribe(t=>{t.eventDelegateID=t.inOut_EventDelegateID,t.firstName=e.firstName,t.surname=e.surname,t.profileImage=(null==e?void 0:e.profileImage)||(null==e?void 0:e.profilePhoto),t.eventDelegateStatusID=1,this.delegatesView.push(t)})}removeDelegates(e,t){e.forEach(e=>{this.eventService.deleteEventDelegate(e.eventDelegateID).subscribe(()=>{const n=t.findIndex(t=>t.contactID==e.contactID);t.splice(n,1)})})}onEventAttendance(){const e=this.ngbModal.open(ae,{size:"xl"});e.componentInstance.rowDelegates=this.originalDelegates,e.componentInstance.event=Object(h.l)(this.event)}onPrintCertificates(){const e=this.ngbModal.open(re.a,{size:"lg"});e.componentInstance.delegates=this.originalDelegates,e.componentInstance.event=Object(h.l)(this.event)}onSelectDelegateToSendInvite(e,t){const n=this.ngbModal.open(se.a,{size:"lg"});n.componentInstance.selectedContacts=Object(h.l)(e),n.componentInstance.companyID=this.user.companyID,n.componentInstance.allowNewContact=!0,n.componentInstance.isDelegateInvite=!0,n.componentInstance.emailValidationOn=!1,n.result.then(n=>{n&&n.length&&this.addRemoveDelegates(n,e,t)})}sendInvites(){const e=this.ngbModal.open(se.a,{size:"xl"});e.componentInstance.contacts=this.originalDelegates,e.componentInstance.allowNewContact=!0,e.componentInstance.isDelegateInvite=!0,e.componentInstance.emailValidationOn=!1,e.result.then(e=>{e&&e.length>0&&(this.ngbModal.open(X,{size:"lg",backdrop:"static"}).componentInstance.delegates=e)})}onMarkAsConfirmed(e,t){e.eventDelegateStatusID=t,this.updateEventDelegateStatus(2,e)}onMarkAllInvited(){this.delegatesView.forEach(e=>{1!==e.eventDelegateStatusID&&this.updateEventDelegateStatus(1,e)})}onMarkAllConfirmed(){this.delegatesView.forEach(e=>{2!==e.eventDelegateStatusID&&this.updateEventDelegateStatus(2,e)})}onMarkAllDeclined(){this.delegatesView.forEach(e=>{3!==e.eventDelegateStatusID&&this.updateEventDelegateStatus(3,e)})}onMarkAsDeclined(e,t){e.eventDelegateStatusID=t,this.updateEventDelegateStatus(3,e)}onMarkAsInvited(e,t){e.eventDelegateStatusID=t,this.updateEventDelegateStatus(1,e)}onRemoveDelegate(e,t){this.removeEventDelegate(e,t)}updateEventDelegateStatus(e,t){if(t.eventDelegateID){const n="yyyy-MM-dd HH:mm:ss",a="en-UK",s={eventDelegateID:t.eventDelegateID,confirmed:0,assessmentScore:0,assessmentResultID:0,eventDelegateStatusID:e,eventDelegateStatusDate:Object(i.y)(new Date,n,a),endDate:"",projectedEndDate:"",startDate:""};this.eventService.updateEventDelegate(s).subscribe(()=>{t.eventDelegateStatusID=e,this.confirmedDelegates=this.delegatesView.filter(e=>2===e.eventDelegateStatusID)})}}removeEventDelegate(e,t){e.eventDelegateID&&this.eventService.deleteEventDelegate(e.eventDelegateID).subscribe(()=>{this.delegatesView.splice(t,1)})}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-delegate-summary"]],inputs:{onEventProfile:"onEventProfile",isHideFilter:"isHideFilter"},features:[D["\u0275\u0275NgOnChangesFeature"]],decls:7,vars:6,consts:[[1,"col-12","d-flex","pl-3","pr-3","justify-content-between","align-items-center","filter-container","border-bottom"],[1,"post-count"],["class","actions d-flex align-items-center",4,"ngIf"],["class","filters-items filter-container d-flex justify-content-between",4,"ngIf"],[4,"ngIf"],["class","delegate-view",4,"ngIf"],[1,"actions","d-flex","align-items-center"],["class","cursor-pointer ml-3",3,"click",4,"ngIf"],["class","dropdown ml-3",4,"ngIf"],[1,"cursor-pointer","ml-3",3,"click"],[1,"plus-ico-2"],[1,"dropdown","ml-3"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"filters-items","filter-container","d-flex","justify-content-between"],[1,"d-flex","justify-content-end","align-items-center"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","pr-0"],[1,"fas","fa-chevron-down"],["class","entry",4,"ngFor","ngForOf"],[1,"entry"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48","cover",3,"src"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],[1,"meta","mr-2"],["class","actions",4,"ngIf"],[1,"meta"],["class","entry-content pt-2",4,"ngIf"],["class","tag tag-orange mr-auto",4,"ngIf"],["class","tag tag-green mr-auto",4,"ngIf"],["class","tag tag-red mr-auto",4,"ngIf"],[1,"tag","tag-orange","mr-auto"],[1,"tag","tag-green","mr-auto"],[1,"tag","tag-red","mr-auto"],[1,"actions"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"entry-content","pt-2"],["class","tag mr-2",4,"ngIf"],[1,"tag","mr-2"],[1,"delegate-view"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"span",1),D["\u0275\u0275text"](2),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](3,le,3,2,"div",2),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](4,de,19,0,"div",3),D["\u0275\u0275template"](5,Te,2,1,"ng-container",4),D["\u0275\u0275template"](6,Ve,4,3,"div",5)),2&e&&(D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate2"](" ",null==t.originalDelegates?null:t.originalDelegates.length," delegates, ",(null==t.confirmedDelegates?null:t.confirmedDelegates.length)||0," confirmed "),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.isAdmin),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.isAdmin&&!0!==t.isHideFilter),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.delegatesView&&0!==t.delegatesView.length),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.delegatesView&&0===(null==t.delegatesView?null:t.delegatesView.length)))},directives:[i.n,i.m],pipes:[k.a],styles:[".delegates-contact[_ngcontent-%COMP%], .delegates-contact[_ngcontent-%COMP%]   .box-grid[_ngcontent-%COMP%]{position:relative}.delegates-contact[_ngcontent-%COMP%]   .box-grid.box-grid[_ngcontent-%COMP%]:first-child:last-child{padding-top:18px;padding-left:0!important}.delegates-contact[_ngcontent-%COMP%]   .box-grid.box-grid[_ngcontent-%COMP%]:last-child{padding-top:18px;padding-left:18px!important}.delegates-contact[_ngcontent-%COMP%]   .box-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80px}.delegates-contact[_ngcontent-%COMP%]   .table-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:60px}.delegates-contact[_ngcontent-%COMP%]   .admin-edit[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.section-delegates[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px;font-size:17px}.filter-actions[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf;padding:.25rem 1rem .75rem}.filter-actions[_ngcontent-%COMP%]   .filters-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{opacity:.8}.delegate-view[_ngcontent-%COMP%]{padding:15px;height:49px}.delegate-list[_ngcontent-%COMP%]{padding-left:2px}.entry[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:inherit!important}"]}),e})();var Le=n("lkLw");let Re=(()=>{class e{transform(e){return Object(h.d)(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=D["\u0275\u0275definePipe"]({name:"humanizeDuration",type:e,pure:!0}),e})();function Be(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",2),D["\u0275\u0275element"](1,"app-delegate-summary"),D["\u0275\u0275elementEnd"]())}function Ne(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"formatDate"),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](2,1,e.lastAccess,"DD/MM/YYYY HH:mm")," ")}}function $e(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.score," % ")}}function Ue(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"tr",10),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.$implicit;return D["\u0275\u0275nextContext"](3).enrollmentDetail=n}),D["\u0275\u0275elementStart"](1,"td"),D["\u0275\u0275element"](2,"img",11),D["\u0275\u0275pipe"](3,"avatar"),D["\u0275\u0275elementStart"](4,"a",12),D["\u0275\u0275listener"]("click",function(n){D["\u0275\u0275restoreView"](e);const i=t.$implicit,a=D["\u0275\u0275nextContext"](3);return n.stopPropagation(),a.navigateToProfile(i)}),D["\u0275\u0275text"](5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"td"),D["\u0275\u0275text"](7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"td"),D["\u0275\u0275text"](9),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"td"),D["\u0275\u0275template"](11,Ne,3,4,"ng-container",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](12,"td"),D["\u0275\u0275template"](13,$e,2,1,"ng-container",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](3,7,e.profilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate2"](" ",e.firstname," ",e.surname," "),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.totalTimeSpent," "),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.score," "),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.lastAccess),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.score)}}function He(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"tr",14),D["\u0275\u0275elementStart"](1,"td"),D["\u0275\u0275text"](2,"No enrollments added yet"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]())}function ze(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"table",7),D["\u0275\u0275elementStart"](1,"thead"),D["\u0275\u0275elementStart"](2,"tr"),D["\u0275\u0275elementStart"](3,"th"),D["\u0275\u0275text"](4,"Students"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"th"),D["\u0275\u0275text"](6,"Total time"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"th"),D["\u0275\u0275text"](8,"Score"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"th"),D["\u0275\u0275text"](10,"Last Accessed"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"th"),D["\u0275\u0275text"](12,"% Complete"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](13,"tbody"),D["\u0275\u0275template"](14,Ue,14,9,"tr",8),D["\u0275\u0275template"](15,He,3,0,"tr",9),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](14),D["\u0275\u0275property"]("ngForOf",e.enrollments),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.enrollments&&0===e.enrollments.length)}}const qe=function(e,t){return{"text-danger":e,"text-success":t}};function Ye(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",21),D["\u0275\u0275text"](2,"Score"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td",22),D["\u0275\u0275text"](4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngClass",D["\u0275\u0275pureFunction2"](2,qe,"failed"===e.enrollmentDetail.satisfaction,"passed"===e.enrollmentDetail.satisfaction)),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.enrollmentDetail.score,"% ")}}function Ke(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",21),D["\u0275\u0275text"](2,"Status"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td",22),D["\u0275\u0275text"](4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngClass",D["\u0275\u0275pureFunction2"](2,qe,"failed"===e.enrollmentDetail.satisfaction,"passed"===e.enrollmentDetail.satisfaction)),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.enrollmentDetail.satisfaction," ")}}function Ge(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",21),D["\u0275\u0275text"](2," Active from "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td"),D["\u0275\u0275text"](4),D["\u0275\u0275pipe"](5,"formatDate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](5,1,e.enrollmentDetail.startDate,"DD/MM/YYYY")," ")}}function Je(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",21),D["\u0275\u0275text"](2," Deadline "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td"),D["\u0275\u0275text"](4),D["\u0275\u0275pipe"](5,"formatDate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](5,1,e.enrollmentDetail.endDate,"DD/MM/YYYY")," ")}}function We(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",21),D["\u0275\u0275text"](2," First access "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td"),D["\u0275\u0275text"](4),D["\u0275\u0275pipe"](5,"formatDate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](5,1,e.enrollmentDetail.firstAccess,"DD/MM/YYYY HH:mm")," ")}}function Xe(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",21),D["\u0275\u0275text"](2," Last access "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td"),D["\u0275\u0275text"](4),D["\u0275\u0275pipe"](5,"formatDate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](5,1,e.enrollmentDetail.lastAccess,"DD/MM/YYYY HH:mm")," ")}}function Ze(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td"),D["\u0275\u0275text"](2),D["\u0275\u0275pipe"](3,"formatDate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"td"),D["\u0275\u0275text"](5),D["\u0275\u0275pipe"](6,"formatDate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"td"),D["\u0275\u0275text"](8),D["\u0275\u0275pipe"](9,"formatDate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"td"),D["\u0275\u0275text"](11),D["\u0275\u0275pipe"](12,"humanizeDuration"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](D["\u0275\u0275pipeBind2"](3,4,e.launchTime,"DD MMM YYYY")),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate"](D["\u0275\u0275pipeBind2"](6,7,e.launchTime,"HH:mm")),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate"](D["\u0275\u0275pipeBind2"](9,10,e.lastUpdated,"HH:mm")),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate"](D["\u0275\u0275pipeBind1"](12,13,e.spendTimeSeconds))}}function Qe(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",27),D["\u0275\u0275text"](2,"No history"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]())}function et(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"h3",23),D["\u0275\u0275text"](2,"Launch history"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"table",24),D["\u0275\u0275elementStart"](4,"thead",25),D["\u0275\u0275elementStart"](5,"tr"),D["\u0275\u0275elementStart"](6,"th"),D["\u0275\u0275text"](7,"Date"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"th"),D["\u0275\u0275text"](9,"Launched"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"th"),D["\u0275\u0275text"](11,"Last updated"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](12,"th"),D["\u0275\u0275text"](13,"Duration"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](14,"tbody"),D["\u0275\u0275template"](15,Ze,13,15,"tr",26),D["\u0275\u0275template"](16,Qe,3,0,"tr",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](15),D["\u0275\u0275property"]("ngForOf",null==e.enrollmentDetail.enrollmentHistory?null:e.enrollmentDetail.enrollmentHistory.result),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!(null!=e.enrollmentDetail.enrollmentHistory&&e.enrollmentDetail.enrollmentHistory.result.length))}}function tt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",15),D["\u0275\u0275elementStart"](1,"div",16),D["\u0275\u0275elementStart"](2,"h3",17),D["\u0275\u0275text"](3),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"i",18),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).enrollmentDetail=null}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"div",19),D["\u0275\u0275elementStart"](6,"table",20),D["\u0275\u0275elementStart"](7,"tbody"),D["\u0275\u0275template"](8,Ye,5,5,"tr",13),D["\u0275\u0275template"](9,Ke,5,5,"tr",13),D["\u0275\u0275template"](10,Ge,6,4,"tr",13),D["\u0275\u0275template"](11,Je,6,4,"tr",13),D["\u0275\u0275template"](12,We,6,4,"tr",13),D["\u0275\u0275template"](13,Xe,6,4,"tr",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](14,et,17,2,"ng-container",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate"](e.enrollmentDetail.courseTitle),D["\u0275\u0275advance"](5),D["\u0275\u0275property"]("ngIf",e.enrollmentDetail.score),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.enrollmentDetail.satisfaction),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.enrollmentDetail.startDate),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.enrollmentDetail.endDate),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.enrollmentDetail.firstAccess),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.enrollmentDetail.lastAccess),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",null==e.enrollmentDetail.enrollmentHistory?null:e.enrollmentDetail.enrollmentHistory.result)}}function nt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",3),D["\u0275\u0275elementStart"](1,"h3",4),D["\u0275\u0275text"](2),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](3,ze,16,2,"table",5),D["\u0275\u0275template"](4,tt,15,8,"div",6),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"]("There are ",e.enrollments.length," enrollments"),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!e.enrollmentDetail),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.enrollmentDetail)}}let it=(()=>{class e{constructor(e,t,n,i){this.eventService=e,this.enrollmentService=t,this.courseService=n,this.router=i,this.unsubscribe=new f.a,this.event=new F.a,this.delegates=[],this.enrollments=[]}ngOnInit(){this.eventService.eventDetail.pipe(Object(u.a)(this.unsubscribe)).subscribe(e=>{e&&(this.event=e,this.getDelegates())})}getDelegates(){this.eventService.getEventDelegate(this.event.eventID).subscribe(e=>{this.delegates=e.filter(e=>e.scormRegistrationID),this.delegates.length&&this.event.courseID&&this.initEnrollments()})}initEnrollments(){this.enrollmentService.getAllEnrollments({CompanyID:0,CourseID:this.event.courseID,ContactID:0,EnrollmentID:0,EnrollmentGroupID:0}).pipe(Object(V.a)(e=>{const t=[];return(e=e.filter(e=>this.delegates.filter(t=>t.scormRegistrationID===e.scormRegistrationID).length)).map(e=>{const n=R(e.startDate,L.c),i=R(e.endDate,L.c).diff(n,"seconds");return console.log("\ud83d\ude80 > EventDelegateComponent > .pipe > difference",i),e.overdue=!!e.endDate&&i<0,e.remaining=!e.overdue&&e.endDate?Object(h.d)(i):null,e.satisfaction="",t.push(this.courseService.getScormLaunchHistory({RegistrationId:e.scormRegistrationID})),e}),this.enrollments=e,t.length?Object(_.a)(t):Object(A.a)(t)})).subscribe(e=>{e.forEach(e=>{const t=this.enrollments.findIndex(t=>t.scormRegistrationID===e.registrationId);if(-1!==t&&e.result&&e.result.length>0){const n=e.result[e.result.length-1],i=e.result[0],a=e.result.reduce((e,t)=>e+t.spendTimeSeconds,0);this.enrollments[t].score=100*Number(i.normalizedMeasure),this.enrollments[t].satisfaction=i.satisfaction,this.enrollments[t].firstAccess=n.lastUpdated,this.enrollments[t].lastAccess=i.lastUpdated,this.enrollments[t].totalTimeSpent=Object(h.d)(a),this.enrollments[t].enrollmentHistory=e}})})}navigateToProfile(e){this.router.navigate(["/contacts/profile",e.contactID,"enrollments"])}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](B.a),D["\u0275\u0275directiveInject"](N.a),D["\u0275\u0275directiveInject"](p.c))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-delegate"]],decls:2,vars:2,consts:[["class","section section-delegates pl-0 pr-0 border-bottom",4,"ngIf"],["class","section section-delegates",4,"ngIf"],[1,"section","section-delegates","pl-0","pr-0","border-bottom"],[1,"section","section-delegates"],[1,"mt-4","mb-4"],["class","table table-hover",4,"ngIf"],["class","card",4,"ngIf"],[1,"table","table-hover"],[3,"click",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[3,"click"],["alt","photo",1,"profile-img",3,"src"],["href","javascript:void(0)",3,"click"],[4,"ngIf"],[1,"text-danger"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-times","close-enrollment",3,"click"],[1,"card-body"],[1,"table","table-borderless"],[1,"text-secondary"],[3,"ngClass"],[1,"history-title"],[1,"table"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["colspan","4",1,"text-danger"]],template:function(e,t){1&e&&(D["\u0275\u0275template"](0,Be,2,0,"div",0),D["\u0275\u0275template"](1,nt,5,3,"div",1)),2&e&&(D["\u0275\u0275property"]("ngIf",t.event&&100!==t.event.courseClassificationID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event&&100===t.event.courseClassificationID))},directives:[i.n,Fe,i.m,i.l],pipes:[k.a,Le.a,Re],styles:[""]}),e})();var at=n("4CJs"),st=n("dmN6"),rt=n("p+bo"),ot=n("3DtY"),ct=n("a395"),lt=n("nvKq"),dt=n("OzGw"),mt=n("w6ya"),pt=n("Ps3d"),gt=n("S2+F"),ut=n("XAmU"),ht=n("k9EJ"),vt=n("xDUJ"),ft=n("f3yp");function It(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",8),D["\u0275\u0275elementStart"](1,"div",9),D["\u0275\u0275elementStart"](2,"div",10),D["\u0275\u0275elementStart"](3,"strong"),D["\u0275\u0275text"](4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275text"](5," invited you to this event "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"button",11),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onAcceptInvite()}),D["\u0275\u0275text"](7," Accept "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"button",12),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeclineInvite()}),D["\u0275\u0275text"](9," Decline "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate"](e.event.coordinatedBy)}}function Dt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",8),D["\u0275\u0275elementStart"](1,"div",13),D["\u0275\u0275elementStart"](2,"div",10),D["\u0275\u0275elementStart"](3,"strong"),D["\u0275\u0275text"](4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275text"](5," invited you to this event "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"button",11),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onAcceptInvite()}),D["\u0275\u0275text"](7," Accept "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"button",12),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeclineInvite()}),D["\u0275\u0275text"](9," Decline "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate"](e.event.coordinatedBy)}}function bt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div"),D["\u0275\u0275elementStart"](1,"div",14),D["\u0275\u0275elementStart"](2,"div",15),D["\u0275\u0275text"](3," You're booked on this event "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",16),D["\u0275\u0275element"](5,"button",17),D["\u0275\u0275elementStart"](6,"div",18),D["\u0275\u0275elementStart"](7,"button",19),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeclineInvite()}),D["\u0275\u0275text"](8," Change my response to Declined "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function Ct(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div"),D["\u0275\u0275elementStart"](1,"div",13),D["\u0275\u0275elementStart"](2,"div",20),D["\u0275\u0275text"](3," You've declined this event invite "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",16),D["\u0275\u0275element"](5,"button",17),D["\u0275\u0275elementStart"](6,"div",18),D["\u0275\u0275elementStart"](7,"button",19),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onAcceptInvite()}),D["\u0275\u0275text"](8," Change my response to Confirmed "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function xt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",4),D["\u0275\u0275elementStart"](1,"div",5),D["\u0275\u0275template"](2,It,10,1,"div",6),D["\u0275\u0275template"](3,Dt,10,1,"div",6),D["\u0275\u0275template"](4,bt,9,0,"div",7),D["\u0275\u0275template"](5,Ct,9,0,"div",7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitch",e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",0),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",1),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",2),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",3)}}function St(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"date"),D["\u0275\u0275pipe"](3,"dateObject"),D["\u0275\u0275pipe"](4,"date"),D["\u0275\u0275pipe"](5,"dateObject"),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate2"](" You're invited to present on ",D["\u0275\u0275pipeBind2"](2,2,D["\u0275\u0275pipeBind1"](3,5,e.bookingCheck.delegateStartDate),"dd MMM")," at ",D["\u0275\u0275pipeBind2"](4,7,D["\u0275\u0275pipeBind1"](5,10,e.bookingCheck.delegateStartDate),"HH:mm aa")," ")}}function yt(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1," You've been selected as a Panel Member. "),D["\u0275\u0275elementContainerEnd"]())}function kt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",8),D["\u0275\u0275elementStart"](1,"div",13),D["\u0275\u0275elementStart"](2,"div",10),D["\u0275\u0275template"](3,St,6,12,"ng-container",3),D["\u0275\u0275template"](4,yt,2,0,"ng-container",3),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"button",11),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onAcceptInvite()}),D["\u0275\u0275text"](6," Accept "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"button",12),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeclineInvite()}),D["\u0275\u0275text"](8," Decline "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",3===e.bookingCheck.eventDelegateTypeID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.bookingCheck.eventDelegateTypeID)}}function Et(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"date"),D["\u0275\u0275pipe"](3,"dateObject"),D["\u0275\u0275pipe"](4,"date"),D["\u0275\u0275pipe"](5,"dateObject"),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate2"](" You're invited to present on ",D["\u0275\u0275pipeBind2"](2,2,D["\u0275\u0275pipeBind1"](3,5,e.bookingCheck.delegateStartDate),"dd MMM")," at ",D["\u0275\u0275pipeBind2"](4,7,D["\u0275\u0275pipeBind1"](5,10,e.bookingCheck.delegateStartDate),"HH:mm aa")," ")}}function wt(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1," You're been selected as a Panel Member. "),D["\u0275\u0275elementContainerEnd"]())}function Ot(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",8),D["\u0275\u0275elementStart"](1,"div",13),D["\u0275\u0275elementStart"](2,"div",10),D["\u0275\u0275template"](3,Et,6,12,"ng-container",3),D["\u0275\u0275template"](4,wt,2,0,"ng-container",3),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"button",11),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onAcceptInvite()}),D["\u0275\u0275text"](6," Accept "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"button",12),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeclineInvite()}),D["\u0275\u0275text"](8," Decline "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",3===e.bookingCheck.eventDelegateTypeID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.bookingCheck.eventDelegateTypeID)}}function Mt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div"),D["\u0275\u0275elementStart"](1,"div",13),D["\u0275\u0275elementStart"](2,"div",15),D["\u0275\u0275text"](3," You're booked on this event "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",16),D["\u0275\u0275element"](5,"button",17),D["\u0275\u0275elementStart"](6,"div",18),D["\u0275\u0275elementStart"](7,"button",19),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeclineInvite()}),D["\u0275\u0275text"](8," Change my response to Declined "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function Pt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div"),D["\u0275\u0275elementStart"](1,"div",13),D["\u0275\u0275elementStart"](2,"div",20),D["\u0275\u0275text"](3," You've declined this event invite "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",16),D["\u0275\u0275element"](5,"button",17),D["\u0275\u0275elementStart"](6,"div",18),D["\u0275\u0275elementStart"](7,"button",19),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onAcceptInvite()}),D["\u0275\u0275text"](8," Change my response to Confirmed "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function Tt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",4),D["\u0275\u0275elementStart"](1,"div",5),D["\u0275\u0275template"](2,kt,9,2,"div",6),D["\u0275\u0275template"](3,Ot,9,2,"div",6),D["\u0275\u0275template"](4,Mt,9,0,"div",7),D["\u0275\u0275template"](5,Pt,9,0,"div",7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitch",e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",0),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",1),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",2),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngSwitchCase",3)}}function jt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",21),D["\u0275\u0275elementStart"](1,"div",22),D["\u0275\u0275elementStart"](2,"p",23),D["\u0275\u0275text"](3),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate1"]("Event ",e.event.eventProfile,"")}}function _t(e,t){1&e&&D["\u0275\u0275element"](0,"app-spinner")}function At(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",27),D["\u0275\u0275element"](1,"img",28),D["\u0275\u0275pipe"](2,"avatar"),D["\u0275\u0275elementStart"](3,"div",29),D["\u0275\u0275elementStart"](4,"h3",30),D["\u0275\u0275text"](5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"span",31),D["\u0275\u0275text"](7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"button",32),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.index;return D["\u0275\u0275nextContext"](2).dmTrainer(n)}),D["\u0275\u0275template"](9,_t,1,0,"app-spinner",3),D["\u0275\u0275text"](10," Message "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](2,6,e.profileImage),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,""),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",null==e?null:e.companyName," "),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("disabled",e.dmAction),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.dmAction)}}function Vt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",21),D["\u0275\u0275elementStart"](1,"div",24),D["\u0275\u0275elementStart"](2,"h1",23),D["\u0275\u0275text"](3,"Trainers"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",25),D["\u0275\u0275template"](5,At,11,8,"div",26),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](5),D["\u0275\u0275property"]("ngForOf",e.trainers)}}function Ft(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",14),D["\u0275\u0275elementStart"](1,"div",10),D["\u0275\u0275element"](2,"i",36),D["\u0275\u0275text"](3),D["\u0275\u0275pipe"](4,"date"),D["\u0275\u0275pipe"](5,"dateObject"),D["\u0275\u0275pipe"](6,"date"),D["\u0275\u0275pipe"](7,"dateObject"),D["\u0275\u0275pipe"](8,"date"),D["\u0275\u0275pipe"](9,"dateObject"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate3"](" You're booked for ",D["\u0275\u0275pipeBind2"](4,3,D["\u0275\u0275pipeBind1"](5,6,e.bookingCheck.delegateStartDate),"HH:mm aa")," on ",D["\u0275\u0275pipeBind2"](6,8,D["\u0275\u0275pipeBind1"](7,11,e.bookingCheck.delegateStartDate),"EEEE")," , ",D["\u0275\u0275pipeBind2"](8,13,D["\u0275\u0275pipeBind1"](9,16,e.bookingCheck.delegateStartDate),"dd MMM yyyy")," ")}}const Lt=function(e){return{active:e}};function Rt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",39),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.$implicit;return D["\u0275\u0275nextContext"](3).filterPresenter(n)}),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"date"),D["\u0275\u0275pipe"](3,"dateObject"),D["\u0275\u0275elementStart"](4,"span",40),D["\u0275\u0275text"](5),D["\u0275\u0275pipe"](6,"delegateDateFilter"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("ngClass",D["\u0275\u0275pureFunction1"](12,Lt,n.activeDate&&n.activeDate.eventDateID===e.eventDateID)),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](2,3,D["\u0275\u0275pipeBind1"](3,6,e.startTime),"dd MMM yyyy")," "),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind3"](6,8,n.presenters,e,!0)," ")}}function Bt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",37),D["\u0275\u0275template"](1,Rt,7,14,"a",38),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",e.dates)}}function Nt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"span",45),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"delegateDateFilter"),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind3"](2,1,e.presenters,e.activeDate,!0)," Presenters ")}}function $t(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",46),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).openApplicantSelector()}),D["\u0275\u0275element"](1,"span",47),D["\u0275\u0275text"](2,"Add "),D["\u0275\u0275elementEnd"]()}}function Ut(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",41),D["\u0275\u0275template"](1,Nt,3,5,"span",42),D["\u0275\u0275elementStart"](2,"div",43),D["\u0275\u0275template"](3,$t,3,0,"a",44),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.activeDate),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.adminCheck)}}function Ht(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",63),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).$implicit;return D["\u0275\u0275nextContext"](3).updateStatus(t,2)}),D["\u0275\u0275text"](1,"Mark as confirmed"),D["\u0275\u0275elementEnd"]()}}function zt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",63),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).$implicit;return D["\u0275\u0275nextContext"](3).updateStatus(t,1)}),D["\u0275\u0275text"](1,"Mark as declined"),D["\u0275\u0275elementEnd"]()}}function qt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",43),D["\u0275\u0275elementStart"](1,"div",59),D["\u0275\u0275elementStart"](2,"button",60),D["\u0275\u0275element"](3,"span",61),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"ul",62),D["\u0275\u0275elementStart"](5,"li"),D["\u0275\u0275elementStart"](6,"a",63),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](4).toggleTime=!0}),D["\u0275\u0275text"](7,"Edit time"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"li"),D["\u0275\u0275template"](9,Ht,2,0,"a",64),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"li"),D["\u0275\u0275template"](11,zt,2,0,"a",64),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](12,"li"),D["\u0275\u0275elementStart"](13,"a",63),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().$implicit;return D["\u0275\u0275nextContext"](3).removeDelegate(t)}),D["\u0275\u0275text"](14,"Remove"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](9),D["\u0275\u0275property"]("ngIf",2==e.eventDelegateStatusID),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",1!==e.eventDelegateStatusID)}}function Yt(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"span",65),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"date"),D["\u0275\u0275pipe"](3,"dateObject"),D["\u0275\u0275pipe"](4,"date"),D["\u0275\u0275pipe"](5,"dateObject"),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate2"](" ",D["\u0275\u0275pipeBind2"](2,2,D["\u0275\u0275pipeBind1"](3,5,e.delegateStartDate),"HH:mm")," - ",D["\u0275\u0275pipeBind2"](4,7,D["\u0275\u0275pipeBind1"](5,10,e.delegateEndDate),"HH:mm")," ")}}function Kt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"span",72),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](5).toggleDatePicker(!1)}),D["\u0275\u0275elementEnd"]()}}function Gt(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",73),D["\u0275\u0275text"](1,"Please enter correct time"),D["\u0275\u0275elementEnd"]())}const Jt=function(){return{standalone:!0}};function Wt(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",66),D["\u0275\u0275elementStart"](1,"div",52),D["\u0275\u0275elementStart"](2,"ngb-timepicker",67),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().$implicit.startTimeModel=t})("ngModelChange",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](3).onChangeTime(t)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"span",68),D["\u0275\u0275text"](4,"-"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"ngb-timepicker",69),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().$implicit.endTimeModel=t})("ngModelChange",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](3).onChangeTime(t)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](6,Kt,1,0,"span",70),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](7,Gt,2,0,"span",71),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]().$implicit,t=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("spinners",!1)("ngModel",e.startTimeModel)("ngModelOptions",D["\u0275\u0275pureFunction0"](8,Jt)),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("spinners",!1)("ngModel",e.endTimeModel)("ngModelOptions",D["\u0275\u0275pureFunction0"](9,Jt)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.toggleTime),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.validDate)}}function Xt(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",77),D["\u0275\u0275text"](1,"Confirmed"),D["\u0275\u0275elementEnd"]())}function Zt(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",78),D["\u0275\u0275text"](1,"Declined"),D["\u0275\u0275elementEnd"]())}function Qt(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",79),D["\u0275\u0275text"](1,"Pending"),D["\u0275\u0275elementEnd"]())}function en(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",79),D["\u0275\u0275text"](1,"Pending"),D["\u0275\u0275elementEnd"]())}function tn(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,Xt,2,0,"span",74),D["\u0275\u0275template"](2,Zt,2,0,"span",75),D["\u0275\u0275template"](3,Qt,2,0,"span",76),D["\u0275\u0275template"](4,en,2,0,"span",76),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",0===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.eventDelegateStatusID)}}function nn(e,t){1&e&&D["\u0275\u0275element"](0,"app-spinner")}function an(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1,"Review"),D["\u0275\u0275elementContainerEnd"]())}function sn(e,t){1&e&&D["\u0275\u0275element"](0,"i",82)}function rn(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1," Reviewed "),D["\u0275\u0275template"](2,sn,1,0,"i",81),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2).$implicit;D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.hasReview)}}function on(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",80),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().$implicit;return D["\u0275\u0275nextContext"](3).postReview(t)}),D["\u0275\u0275template"](1,nn,1,0,"app-spinner",3),D["\u0275\u0275template"](2,an,2,0,"ng-container",3),D["\u0275\u0275template"](3,rn,3,1,"ng-container",3),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275classProp"]("btn-outline-primary",!e.hasReview)("btn-outline-success",e.hasReview),D["\u0275\u0275property"]("disabled",e.reviewPosting),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.reviewPosting),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!e.hasReview),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.hasReview)}}function cn(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",49),D["\u0275\u0275elementStart"](1,"span",50),D["\u0275\u0275element"](2,"img",51),D["\u0275\u0275pipe"](3,"avatar"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",52),D["\u0275\u0275elementStart"](5,"h2"),D["\u0275\u0275text"](6),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](7,qt,15,2,"div",53),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"div",54),D["\u0275\u0275elementStart"](9,"div",55),D["\u0275\u0275template"](10,Yt,6,12,"span",56),D["\u0275\u0275template"](11,Wt,8,10,"div",57),D["\u0275\u0275template"](12,tn,5,4,"ng-container",3),D["\u0275\u0275template"](13,on,4,8,"button",58),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](3,8,e.profileImage),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,""),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.adminCheck),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",!n.toggleTime),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.toggleTime),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.adminCheck||(null==n.bookingCheck?null:n.bookingCheck.contactID)===e.contactID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!n.toggleTime&&(null==n.bookingCheck?null:n.bookingCheck.contactID)!==e.contactID&&2===(null==n.bookingCheck?null:n.bookingCheck.eventDelegateStatusID))}}function ln(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,cn,14,10,"div",48),D["\u0275\u0275pipe"](2,"delegateDateFilter"),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",D["\u0275\u0275pipeBind2"](2,1,e.presenters,e.activeDate))}}function dn(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div"),D["\u0275\u0275template"](1,Ft,10,18,"div",33),D["\u0275\u0275template"](2,Bt,2,1,"div",34),D["\u0275\u0275template"](3,Ut,4,2,"div",35),D["\u0275\u0275template"](4,ln,3,4,"ng-container",3),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===(null==e.bookingCheck?null:e.bookingCheck.eventDelegateTypeID)&&2===(null==e.bookingCheck?null:e.bookingCheck.eventDelegateStatusID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.dates.length>1&&(e.adminCheck||2===(null==e.bookingCheck?null:e.bookingCheck.eventDelegateTypeID))),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.adminCheck||2===(null==e.bookingCheck?null:e.bookingCheck.eventDelegateTypeID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.adminCheck||2===(null==e.bookingCheck?null:e.bookingCheck.eventDelegateTypeID))}}const mn=function(){return[0,1]};let pn=(()=>{class e{constructor(e,t,n,i,a,s,r,o,c,l,d,m,p){this.toastr=e,this.notificationService=t,this.eventService=n,this.signalRService=i,this.modal=a,this.discussionService=s,this.userService=r,this.taskService=o,this.contractService=c,this.formService=l,this.router=d,this.activatedRoute=m,this.changeDetectorRef=p,this.unsubscribe=new f.a,this.event=new F.a,this.isEditEventInstructions=!1,this.tmpEditEventInstructions=null,this.tmpEventProfile=null,this.isEditEventProfile=!1,this.courseWorkShop=!1,this.courseMeeting=!1,this.members=[],this.mentorForm=new st.a,this.menteeForm=new st.a,this.presenters=[],this.dates=[],this.trainers=[],this.user=this.userService.user.getValue(),this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.activatedRoute.parent.params.subscribe(e=>{this.eventID=e.eventID,this.loadData()}),this.eventService.eventDetail.subscribe(e=>{var t;if(e){this.dates=e.dates.sort((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()),this.activeDate=this.dates[0];let n=Object(h.l)(e.delegates);n=n.filter(e=>e.eventDelegateTypeID===ot.b.APPLICANT),this.presenters=n.map(e=>{const t=+Object(h.a)(new Date(e.delegateStartDate),"H")||0,n=+Object(h.a)(new Date(e.delegateEndDate),"H")||0,i=+Object(h.a)(new Date(e.delegateStartDate),"m")||0,a=+Object(h.a)(new Date(e.delegateEndDate),"m")||0;return e.startTimeModel={hour:t,minute:i},e.endTimeModel={hour:n,minute:a},e.profilePhoto=e.profileImage,e}),this.event=e,this.courseWorkShop=1===this.event.eventCategoryID||8===this.event.eventCategoryID,this.courseMeeting=5===this.event.eventCategoryID||6===this.event.eventCategoryID||7===this.event.eventCategoryID,this.bookingCheck=null===(t=this.event.delegates)||void 0===t?void 0:t.find(e=>e.contactID===this.contactID),this.trainers=this.event.delegates.filter(e=>6===e.eventDelegateTypeID)}})}loadData(){this.loading=!0,this.contactID=this.user.contactID,this.eventService.selectEvent(0,this.eventID).pipe(Object(u.a)(this.unsubscribe)).subscribe(e=>{var t;const n=e[0]||null;if(n){this.dates=n.dates.sort((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()),this.activeDate=this.dates[0];let e=Object(h.l)(n.delegates);e=e.filter(e=>e.eventDelegateTypeID===ot.b.APPLICANT),this.presenters=e.map(e=>{const t=+Object(h.a)(new Date(e.delegateStartDate),"H")||0,n=+Object(h.a)(new Date(e.delegateEndDate),"H")||0,i=+Object(h.a)(new Date(e.delegateStartDate),"m")||0,a=+Object(h.a)(new Date(e.delegateEndDate),"m")||0;return e.startTimeModel={hour:t,minute:i},e.endTimeModel={hour:n,minute:a},e.profilePhoto=e.profileImage,e}),this.event=n,this.courseWorkShop=1===this.event.eventCategoryID||8===this.event.eventCategoryID,this.courseMeeting=5===this.event.eventCategoryID||6===this.event.eventCategoryID||7===this.event.eventCategoryID,this.tmpEditEventInstructions=this.event.eventInstructions,this.tmpEventProfile=this.event.eventProfile,this.bookingCheck=null===(t=this.event.delegates)||void 0===t?void 0:t.find(e=>e.contactID===this.contactID),this.getDiscussions(),this.adminCheck=this.event.scheduledbyID===this.contactID||this.superAdmin,2===this.event.eventCategoryID&&this.getFormTask(),this.eventService.loadEventDetail(n),this.bookingCheck&&2===this.event.eventCategoryID&&this.getReviews(),this.trainers=this.event.delegates.filter(e=>6===e.eventDelegateTypeID),this.loading=!1}})}getReviews(){this.reviewsLoading=!0;const e=[];this.presenters.forEach(t=>{e.push(this.formService.panelMemberAnswers(0,t.eventDelegateID,16,0,0))}),Object(_.a)(e).subscribe(e=>{e.forEach(e=>{e.forEach(e=>{if(e.contactID===this.bookingCheck.contactID&&e.dateSentForSignOff){const t=this.presenters.findIndex(t=>t.eventDelegateID===e.taskReferenceID);-1!==t&&(this.presenters[t].hasReview=!0)}})}),this.reviewsLoading=!1})}prepareDataForUpdateEvent(){return{eventID:this.event.eventID,eventTitle:this.event.eventTitle,courseID:this.event.courseID,venueID:this.event.venueID,providerID:this.event.providerID,trainerID:null,publicEvent:this.event.publicEvent,eventProfile:this.event.eventProfile,minimumScore:this.event.minimumScore,maxScore:this.event.maxScore,eventCategoryID:this.event.eventCategoryID,eventSubCategoryID:this.event.eventSubCategoryID,awardCredits:this.event.awardCredits,referenceID:this.event.referenceID,eventPitch:this.event.eventPitch,venueName:this.event.venueName,eventFormatID:this.event.eventFormatID,eventInstructions:this.event.eventInstructions,googleURL:this.event.googleURL,latitude:this.event.latitude,longitude:this.event.longitude}}onAcceptInvite(){this.updateEventDelegateStatus(2)}onDeclineInvite(){this.updateEventDelegateStatus(3)}updateEventDelegateStatus(e){this.bookingCheck.eventDelegateStatusID=e;const t={eventDelegateID:this.bookingCheck.eventDelegateID,confirmed:0,assessmentScore:0,assessmentResultID:0,eventDelegateStatusID:e,eventDelegateStatusDate:Object(i.y)(new Date,"yyyy-MM-dd HH:mm:ss","en-UK"),endDate:this.bookingCheck.delegateEndDate,projectedEndDate:"",startDate:this.bookingCheck.delegateStartDate};this.eventService.updateEventDelegate(t).subscribe(()=>{if(this.toastr.success("You're now "+(2===e?"accepted ":"declined ")+this.event.eventTitle),this.discussion){const t=this.bookingCheck.contactID;this.members.filter(e=>e.contactID===t).length||2===e&&this.insertMember(t),3===e&&this.deleteMember(t)}this.bookingCheck.eventDelegateStatusID=t.eventDelegateStatusID,localStorage.setItem("eventObject",JSON.stringify(this.event)),this.noticeNotification(2===e?8:7,this.event.eventID,this.event.scheduledbyID),4===this.event.eventCategoryID&&[2,3].includes(this.bookingCheck.eventDelegateStatusID)&&this.handleMeetingTaskReview()})}noticeNotification(e,t,n){const a=localStorage.getItem("firstName"),s=localStorage.getItem("surname"),r=new Date,o=Object(i.y)(r,"yyyy-MM-dd HH:mm:ss","en-UK"),c=`${a} ${s} has ${8===e?"accepted":"declined"} invitation to "${this.event.eventTitle}" event`,l={notificationCategoryID:e,referenceID:t,contactID:n,description:c,createdContact:this.contactID},d=o+"|"+this.event.eventID,m={date:o,body:c,topic:c,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:l.referenceID,notificationType:at.a.eventRequest,senderId:l.createdContact,receivers:[l.contactID],uniqueId:d,discussionId:0};this.notificationService.noticeNotification(l).subscribe(()=>{this.signalRService.transferMessage("dashboard",m)})}getDiscussions(){this.discussionService.fetchDiscussions(0,this.event.eventID,2,0,0).subscribe(e=>{e[0]&&(this.discussion=e[0],this.getMembers(e[0].discussionID))})}insertMember(e){const t=new Date,n=Object(i.y)(t,"yyyy-MM-dd HH:mm:ss","en-UK");this.discussionService.addMember({discussionID:this.discussion.discussionID,contactID:e,isAdmin:!0,submittedByContactID:this.contactID,hasAccepted:!0,dateAccepted:n}).subscribe(()=>{this.getMembers(this.discussion.discussionID)})}deleteMember(e){this.discussionService.deleteMember(this.discussion.discussionID,e).subscribe(()=>{this.members=this.members.filter(t=>t.contactID!==e)})}getMembers(e){this.discussionService.getAllMembers(e).subscribe(e=>{this.members=e})}handleMeetingTaskReview(){this.contractService.getContractAssignment(0,this.event.referenceID,0,0,0,0,0).pipe(Object(V.a)(e=>(this.contractAssignment=e[0],this.formService.getFormTask(this.contractAssignment.contractAssignmentID,0)))).subscribe(e=>{this.mentorForm=e.find(e=>10===e.formCategoryID),this.menteeForm=e.find(e=>11===e.formCategoryID)})}getTask(e){this.taskService.getTask(0,16,this.event.eventID,0,0,0,0,e).subscribe(t=>{if(t[0]){if(3===this.bookingCheck.eventDelegateStatusID){const e=t[0].taskOwners,n=e.find(e=>e.contactID===this.bookingCheck.contactID);return void(n&&e.length>1?this.taskService.deleteTaskOwner(n).subscribe():n&&1===e.length&&this.taskService.deleteTask(t[0].taskID).subscribe())}this.addTaskOwner(t[0].taskID)}else 2===this.bookingCheck.eventDelegateStatusID&&this.addTask(e)})}addTask(e){const t=new Date(this.event.startDate),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+2,t.getHours(),t.getMinutes());let a="Meeting Feedback - "+this.contractAssignment.companyName;if(5===this.bookingCheck.eventDelegateTypeID){const e=this.event.delegates.find(e=>4===e.eventDelegateTypeID);a=`Meeting Feedback - ${e.firstName} ${e.surname}`}const s={taskTitle:a,taskDescription:a,startDate:this.event.startDate,endDate:Object(i.y)(n,"yyyy-MM-dd HH:mm:ss","en-UK"),taskValue:0,taskCategoryID:16,referenceID:this.event.eventID,autoSignOff:!0,taskModeID:0,submittedBy:this.event.scheduledbyID,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:0,taskTypeID:0,formID:e};this.taskService.addTask(s).subscribe(e=>{this.addTaskOwner(e.inOut_TaskID)})}addTaskOwner(e){const t=new rt.a;t.taskID=e,t.contactID=this.bookingCheck.contactID,t.taskOwnerCategoryID=16,t.referenceID=this.bookingCheck.eventDelegateID,this.taskService.addTaskOwner(t).subscribe(e=>{})}filterPresenter(e){this.activeDate=e,this.activeDate=Object(h.l)(this.activeDate)}openApplicantSelector(){const e=this.modal.open(ct.a,{backdrop:"static",size:"md"});e.componentInstance.activeDate=this.activeDate,e.componentInstance.referenceID=this.event.eventID,e.componentInstance.companyProgramInstanceStageID=this.event.referenceID,e.componentInstance.event=this.event,e.result.then(e=>{e&&e.length>0&&(e=e.map(e=>{e.delegateStartDate=e.startDate,e.delegateEndDate=e.endDate,e.confirmed=1;const t=+Object(h.a)(new Date(e.delegateStartDate),"H")||0,n=+Object(h.a)(new Date(e.delegateEndDate),"H")||0,i=+Object(h.a)(new Date(e.delegateStartDate),"m")||0,a=+Object(h.a)(new Date(e.delegateEndDate),"m")||0;return e.startTimeModel={hour:t,minute:i},e.endTimeModel={hour:n,minute:a},e}),this.presenters=this.presenters.concat(e),this.changeDetectorRef.detectChanges(),e.forEach(e=>{this.notifyDelegate(e)}),this.toastr.success("Presenters has been added"))})}onChangeTime(e){const t=(new lt.a).transform(this.presenters,this.activeDate),n=Object(h.l)(t[e]),i=this.presenters.findIndex(e=>e.eventDelegateID===n.eventDelegateID);let a=!1;if(a=!(n.startTimeModel.hour>n.endTimeModel.hour)&&(n.startTimeModel.hour!==n.endTimeModel.hour||n.startTimeModel.minute<n.endTimeModel.minute),-1!==i&&(this.presenters[i].validDate=!a),a){const e=n.startTimeModel.hour>9?n.startTimeModel.hour:"0"+n.startTimeModel.hour,t=n.startTimeModel.minute>9?n.startTimeModel.minute:"0"+n.startTimeModel.minute,a=n.endTimeModel.hour>9?n.endTimeModel.hour:"0"+n.endTimeModel.hour,s=n.endTimeModel.minute>9?n.endTimeModel.minute:"0"+n.endTimeModel.minute,r=Object(h.a)(new Date(n.delegateStartDate),"yyyy.MM.dd")+` ${e}:${t}:00`,o=Object(h.a)(new Date(n.delegateEndDate),"yyyy.MM.dd")+` ${a}:${s}:00`;n.startDate=Object(h.a)(new Date(r)),n.endDate=Object(h.a)(new Date(o)),this.eventService.updateEventDelegate(n).subscribe(()=>{-1!==i&&(this.presenters[i].delegateStartDate=n.startDate,this.presenters[i].delegateEndDate=n.endDate,this.presenters=Object(h.l)(this.presenters))})}}toggleDatePicker(e){this.presenters=this.presenters.map(e=>{const t=+Object(h.a)(new Date(e.delegateStartDate),"H")||0,n=+Object(h.a)(new Date(e.delegateEndDate),"H")||0,i=+Object(h.a)(new Date(e.delegateStartDate),"m")||0,a=+Object(h.a)(new Date(e.delegateEndDate),"m")||0;return e.startTimeModel={hour:t,minute:i},e.endTimeModel={hour:n,minute:a},e}),this.toggleTime=e}removeDelegate(e){const t=this.presenters.findIndex(t=>t.eventDelegateID===e.eventDelegateID),n=this.modal.open(dt.a);n.componentInstance.objectType="Delegate",n.componentInstance.objectDetails=`${e.firstName} ${e.surname} Delegate`,n.result.then(n=>{n&&"Yes"===n&&-1!==t&&this.eventService.deleteEventDelegate(e.eventDelegateID).subscribe(()=>{this.presenters.splice(t,1),this.presenters=Object(h.l)(this.presenters),this.changeDetectorRef.detectChanges()})})}updateStatus(e,t){const n=this.presenters.findIndex(t=>t.eventDelegateID===e.eventDelegateID);-1!==n&&(e.eventDelegateStatusID=t,this.eventService.updateEventDelegate(e).subscribe(()=>{this.presenters[n].eventDelegateStatusID=t}))}notifyDelegate(e){if(e.contactID!==this.contactID){const t=Object(h.a)(new Date),n=`You've been selected as a presenter at ${this.event.eventTitle} on ${e.delegateStartDate}`,i={notificationCategoryID:mt.a.event_invite_event_deligate,referenceID:this.event.eventID,contactID:e.contactID,description:n,createdContact:this.contactID},a=t+"|"+this.event.eventID,s={date:t,body:n,topic:n,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:i.referenceID,notificationType:at.a.eventRequest,senderId:i.createdContact,receivers:[i.contactID],uniqueId:a,discussionId:0};this.notificationService.noticeNotification(i).subscribe(()=>{this.signalRService.transferMessage("dashboard",s)})}}postReview(e){const t=this.presenters.findIndex(t=>t.eventDelegateID===e.eventDelegateID);this.presenters[t].reviewPosting=!0,this.taskService.getTask(0,16,e.eventDelegateID,0,0,0,0,0,!0).subscribe(n=>{var i;const a=n[0]||null;a?a.taskOwners.filter(e=>e.contactID===this.contactID).length>0?(this.presenters[t].reviewPosting=!1,this.presenters=Object(h.l)(this.presenters),this.openFeedbackModal(a)):this.createOwner(e,a):(null===(i=this.panelForm)||void 0===i?void 0:i.formID)?this.createTask(e,this.panelForm.formID):(this.toastr.warning("Unable to proceed, please ask the event coordinator to select a feedback form first"),this.presenters[t].reviewPosting=!1,this.presenters=Object(h.l)(this.presenters))})}createTask(e,t){const n=new Date(this.activeDate.startTime),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,n.getHours(),n.getMinutes()),a={taskTitle:"Feedback - "+e.companyName,taskDescription:"",startDate:this.event.startDate,endDate:Object(h.a)(i),taskValue:0,taskCategoryID:16,referenceID:e.eventDelegateID,autoSignOff:!0,taskModeID:0,submittedBy:this.event.scheduledbyID,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:0,taskTypeID:0,formID:t};this.taskService.addTask(a).subscribe(t=>{const n=Object.assign(Object.assign({},a),t);n.taskID=t.inOut_TaskID,n.taskOwners=[],this.createOwner(e,n)})}createOwner(e,t){const n=this.presenters.findIndex(t=>t.eventDelegateID===e.eventDelegateID),i=new rt.a;i.taskID=t.taskID,i.contactID=this.contactID,i.taskOwnerCategoryID=16,i.referenceID=e.eventDelegateID,this.taskService.addTaskOwner(i).pipe(Object(V.a)(e=>this.taskService.getTaskOwners(0,0,0,0,e.taskOwnerID))).subscribe(e=>{this.presenters[n].reviewPosting=!1,this.presenters=Object(h.l)(this.presenters),t.taskOwners.push(e[0]),this.openFeedbackModal(t)})}getFormTask(){this.formLoading=!0,this.formService.getFormTask(this.event.eventID,3).subscribe(e=>{e[0]&&(this.panelForm=e[0]),this.formLoading=!1})}openFeedbackModal(e){const t=this.modal.open(pt.a,{size:"lg",backdrop:"static"});t.componentInstance.task=e,t.componentInstance.event=this.event,t.componentInstance.presenters=this.presenters,t.componentInstance.statusUpdate.subscribe(e=>{if(e&&e.taskOwnerID&&3===e.taskStatusID){const t=this.presenters.findIndex(t=>t.eventDelegateID===e.referenceID);-1!==t&&(this.presenters[t].reviewPosting=!1,this.presenters[t].hasReview=!0,this.presenters=Object(h.l)(this.presenters))}})}toContactProfile(e){this.router.navigate(["/contacts/profile",e])}toCompanyProfile(e){this.router.navigate(["/company",e])}dmTrainer(e){const t=this.contactID,n=this.trainers[e],i={contactId:n.contactID,loggedInContactId:t};n.dmAction=!0,this.discussionService.getDiscussionByContact(i).subscribe(n=>{n&&n.discussionID?this.router.navigate(["/chats"]):this.createChat(t,e)},()=>{n.dmAction=!1})}createChat(e,t){const n=this.trainers[t];let i=0;this.discussionService.insertDiscussion({discussionTopic:"DM",discussionCategoryID:1,isDirectMessage:!0,discussionCreatedByContactID:e,discussionBody:"DM"}).pipe(Object(V.a)(t=>{i=t.discussionID;const a={discussionID:t.discussionID,contactID:e,isAdmin:!0},s={discussionID:t.discussionID,contactID:n.contactID,isAdmin:!0};return Object(_.a)(this.discussionService.addMember(a),this.discussionService.addMember(s))})).subscribe(()=>{n.dmAction=!1,this.router.navigate(["/chats"])},()=>{n.dmAction=!1})}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](Y.a),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](gt.a),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](ut.a),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](b.a),D["\u0275\u0275directiveInject"](ht.a),D["\u0275\u0275directiveInject"](vt.a),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](p.a),D["\u0275\u0275directiveInject"](D.ChangeDetectorRef))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-detail"]],decls:6,vars:7,consts:[[1,"d-flex","w-100","flex-column",3,"avnonLoader"],["class","border-bottom",4,"ngIf"],["class","section section-overview pt-0 border-bottom",4,"ngIf"],[4,"ngIf"],[1,"border-bottom"],[1,"attend-section","w-100","update-invites",3,"ngSwitch"],["class","w-100",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"w-100"],[1,"d-flex","align-items-center","p-2","bg-light","border"],[1,"mr-auto"],[1,"btn-primary","btn-sm","btn","mr-2",3,"click"],[1,"btn-outline-primary","btn","btn-sm",3,"click"],[1,"d-flex","align-items-center","p-2","m-2","bg-light","border"],[1,"d-flex","align-items-center","p-2","m-2","bg-light","border","border-bottom"],[1,"mr-auto","text-success"],["ngbDropdown","","container","body",1,"ngdropdown"],["ngbDropdownToggle","","type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","no-icon","icon-right"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],[1,"mr-auto","text-danger"],[1,"section","section-overview","pt-0","border-bottom"],[1,"filter-container"],[1,"mb-0"],[1,"filter-container","border-bottom"],[1,"d-flex","w-100","flex-column"],["class","common-list-item w-100 d-flex flex-row",4,"ngFor","ngForOf"],[1,"common-list-item","w-100","d-flex","flex-row"],["alt","Avatar",1,"avatar-48","avatar",3,"src"],[1,"list-data","d-flex","flex-column","ml-2","flex-grow-1","mr-1"],[1,"mb-1"],[1,"meta","mb-2"],[1,"btn","btn-primary","btn-sm","ml-auto",3,"disabled","click"],["class","d-flex align-items-center p-2 m-2 bg-light border border-bottom",4,"ngIf"],["class","d-flex justify-content-first filter-applicants align-items-center pb-2 pt-2 pl-2 pr-2 border-bottom",4,"ngIf"],["class","col-12 d-flex pl-3 pr-3 justify-content-between align-items-center filter-container border-bottom",4,"ngIf"],[1,"fas","fa-info-circle","mr-1","text-primary"],[1,"d-flex","justify-content-first","filter-applicants","align-items-center","pb-2","pt-2","pl-2","pr-2","border-bottom"],["class","btn btn-rounded btn-rounded-32 m-1 btn-sm",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn","btn-rounded","btn-rounded-32","m-1","btn-sm",3,"ngClass","click"],[1,"badge","badge-primary"],[1,"col-12","d-flex","pl-3","pr-3","justify-content-between","align-items-center","filter-container","border-bottom"],["class","post-count",4,"ngIf"],[1,"actions"],["class","ml-auto cursor-pointer",3,"click",4,"ngIf"],[1,"post-count"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],["class","entry",4,"ngFor","ngForOf"],[1,"entry"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48","cover",3,"src"],[1,"d-flex"],["class","actions",4,"ngIf"],[1,"entry-content","pt-2","pr-4","mr-2"],[1,"d-flex","w-100","align-items-center"],["class","mr-2",4,"ngIf"],["class","d-flex flex-column mr-auto",4,"ngIf"],["class","btn btn-sm ml-auto",3,"btn-outline-primary","btn-outline-success","disabled","click",4,"ngIf"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"mr-2"],[1,"d-flex","flex-column","mr-auto"],["name","startTimeModel","size","small","required","",3,"spinners","ngModel","ngModelOptions","ngModelChange"],[1,"pt-2","mx-2"],["name","endTimeModel","size","small","required","",3,"spinners","ngModel","ngModelOptions","ngModelChange"],["class","fas fa-check cursor-pointer ml-2",3,"click",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"fas","fa-check","cursor-pointer","ml-2",3,"click"],[1,"text-danger"],["class","tag tag-green mr-auto",4,"ngIf"],["class","tag tag-red mr-auto",4,"ngIf"],["class","tag tag-orange mr-auto",4,"ngIf"],[1,"tag","tag-green","mr-auto"],[1,"tag","tag-red","mr-auto"],[1,"tag","tag-orange","mr-auto"],[1,"btn","btn-sm","ml-auto",3,"disabled","click"],["class","fas fa-check",4,"ngIf"],[1,"fas","fa-check"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275template"](1,xt,6,5,"div",1),D["\u0275\u0275template"](2,Tt,6,5,"div",1),D["\u0275\u0275template"](3,jt,4,1,"div",2),D["\u0275\u0275template"](4,Vt,6,1,"div",2),D["\u0275\u0275template"](5,dn,5,4,"div",3),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading||t.formLoading),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!t.event.publicEvent&&t.bookingCheck&&2!==t.event.courseClassificationID&&2!==t.event.eventCategoryID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!t.event.publicEvent&&t.bookingCheck&&2===t.event.eventCategoryID&&D["\u0275\u0275pureFunction0"](6,mn).includes(t.bookingCheck.eventDelegateStatusID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event.eventProfile),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===t.event.eventCategoryID&&(null==t.trainers?null:t.trainers.length)>0),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event&&t.event.eventID&&2===t.event.eventCategoryID))},directives:[y.a,i.n,i.p,i.q,o.i,o.m,o.k,o.j,i.m,ft.a,i.l,o.z,a.A,a.q,a.t],pipes:[i.e,E.a,k.a,lt.a],styles:["agm-map[_ngcontent-%COMP%]{height:300px}.update-event-detail[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after, .update-invites[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after{content:none}.update-event-detail[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%], .update-invites[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{background-position:100%}.attend-section[_ngcontent-%COMP%]:hover   .btn-cancel-attend[_ngcontent-%COMP%]{display:inline}.attend-section[_ngcontent-%COMP%]   .btn-cancel-attend[_ngcontent-%COMP%]{display:none}.textarea-event-profile[_ngcontent-%COMP%]{height:auto}.edit-description[_ngcontent-%COMP%]{background-color:rgba(9,30,66,.04);box-shadow:none;border:none;border-radius:3px;display:block;min-height:40px;padding:8px 12px;text-decoration:none}.avatar-60[_ngcontent-%COMP%]{max-height:60px;object-fit:cover}.applicants-table[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{font-size:16px!important}.applicants-table[_ngcontent-%COMP%]   .s-block[_ngcontent-%COMP%]{font-size:15px}.applicants-table[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:14px}.applicants-table[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{border-color:#a5a5a5}.applicants-table[_ngcontent-%COMP%]   .title-avatar[_ngcontent-%COMP%]   .s-block[_ngcontent-%COMP%]{padding-left:70px}.filter-applicants[_ngcontent-%COMP%]{flex-wrap:wrap}.filter-applicants[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative;border:1px solid #c8c8c8;margin-bottom:10px}.filter-applicants[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{border:1px solid #406fe4!important;color:#406fe4}.filter-applicants[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#406fe4!important}  ngb-timepicker .form-control{border-left:none;border-right:none;border-top:none;box-shadow:none;border-radius:0;outline:none}  ngb-timepicker .form-control:focus{box-shadow:none}.dropdown-toggle[_ngcontent-%COMP%]:after, .dropdown-toggle[_ngcontent-%COMP%]:before{display:none}"]}),e})();var gn=n("xJDW"),un=n("BoU9"),hn=n("zmD5");function vn(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"option",14),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;D["\u0275\u0275property"]("ngValue",e.companyProgramInstanceIndicatorID),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.indicator," ")}}let fn=(()=>{class e{constructor(e,t,n,i){this.discussionService=e,this.indicatorService=t,this.activeModal=n,this.userService=i,this.discussion=new un.a,this.indicators=[],this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}ngOnInit(){this.discussion.referenceID=0,this.getIndicators()}getIndicators(){this.indicatorsLoading=!0,this.indicatorService.getCompanyProgramInstanceIndicator(0,0,0,0,0,this.companyID).subscribe(e=>{this.indicators=Object(h.j)(e.filter(e=>e.companyID&&e.companyID===this.companyID),"companyProgramInstanceIndicatorID"),this.indicatorsLoading=!1})}submit(){this.loading=!0,this.discussion.discussionCreatedByContactID=this.contactID,this.discussion.parentDiscussionID=this.parentDiscussion.discussionID,this.discussion.discussionCategoryID=2,this.discussion.isDirectMessage=!0,this.discussionService.createDiscussion(this.discussion).subscribe(e=>{this.loading=!1,this.discussion.discussionID=e.inOut_DiscussionID,this.discussion.firstName=this.user.firstName,this.discussion.surname=this.user.surname,this.discussion.profilePhoto=this.user.profilePhoto,this.activeModal.close(this.discussion)})}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](ut.a),D["\u0275\u0275directiveInject"](hn.a),D["\u0275\u0275directiveInject"](o.a),D["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-agenda-create-modal"]],decls:27,vars:7,consts:[[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column",3,"avnonLoader"],[3,"submit"],["f","ngForm"],[1,"form-group"],["for","discussionTopic"],["type","text","id","discussionTopic","name","discussionTopic","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","discussionBody"],["name","discussionBody","id","discussionBody",1,"form-control",3,"ngModel","ngModelChange"],["for","referenceID"],["name","referenceID","id","referenceID",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","text-right","mt-4"],[1,"btn","btn-primary",3,"disabled"]],template:function(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"h5",1),D["\u0275\u0275text"](2," Add Agenda "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"button",2),D["\u0275\u0275listener"]("click",function(){return t.dismiss()}),D["\u0275\u0275elementStart"](4,"span",3),D["\u0275\u0275text"](5,"\xd7"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"div",4),D["\u0275\u0275elementStart"](7,"form",5,6),D["\u0275\u0275listener"]("submit",function(){return t.submit()}),D["\u0275\u0275elementStart"](9,"div",7),D["\u0275\u0275elementStart"](10,"label",8),D["\u0275\u0275text"](11,"Agenda Title"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](12,"input",9),D["\u0275\u0275listener"]("ngModelChange",function(e){return t.discussion.discussionTopic=e}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](13,"div",7),D["\u0275\u0275elementStart"](14,"label",10),D["\u0275\u0275text"](15,"Details"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](16,"textarea",11),D["\u0275\u0275listener"]("ngModelChange",function(e){return t.discussion.discussionBody=e}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](17,"div",7),D["\u0275\u0275elementStart"](18,"label",12),D["\u0275\u0275text"](19,"Related indicator"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](20,"select",13),D["\u0275\u0275listener"]("ngModelChange",function(e){return t.discussion.referenceID=e}),D["\u0275\u0275elementStart"](21,"option",14),D["\u0275\u0275text"](22,"General Discussion - Not related to specific indicator"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](23,vn,2,2,"option",15),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](24,"div",16),D["\u0275\u0275elementStart"](25,"button",17),D["\u0275\u0275text"](26," Submit "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275reference"](8);D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("avnonLoader",t.loading||t.indicatorsLoading),D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("ngModel",t.discussion.discussionTopic),D["\u0275\u0275advance"](4),D["\u0275\u0275property"]("ngModel",t.discussion.discussionBody),D["\u0275\u0275advance"](4),D["\u0275\u0275property"]("ngModel",t.discussion.referenceID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngValue",0),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngForOf",t.indicators),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("disabled",e.invalid||t.indicatorsLoading||t.loading)}},directives:[y.a,a.E,a.r,a.s,a.b,a.A,a.q,a.t,a.B,a.v,a.D,i.m],styles:[""]}),e})();var In=n("SL35"),Dn=n("jGZE"),bn=n("MEae");const Cn=["chatContainer"];function xn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"app-post-news",5),D["\u0275\u0275listener"]("created",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().onCreate(t)}),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275property"]("discussionCategoryID",3)("placeholder","Ask a question or share information")("referenceID",e.event.eventID)}}function Sn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"app-news-item",7),D["\u0275\u0275listener"]("delete",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"]().onDeleteDiscussionModal(n.discussionID,i)})("edit",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"]().onEditDiscussionModal(n,i)}),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]().$implicit,t=D["\u0275\u0275nextContext"]();D["\u0275\u0275property"]("discussion",e)("canPreview",t.canPost)}}function yn(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,Sn,1,2,"app-news-item",6),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.discussionID)}}let kn=(()=>{class e{constructor(e,t,n,i,a,s){this.signalRService=e,this.discussionService=t,this.eventService=n,this.modal=i,this.router=a,this.userService=s,this.config={},this.typingIndicator=[],this.apiBlobUrl=$.a.apiBlobUrl,this.profilePhoto="assets/img/program-banner.jpg",this.discussions=[],this.chats=[],this.chatMembers=[],this.isEmptyChat=!1,this.activeChatIndex=0,this.destroy$=new f.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.eventService.eventDetail.subscribe(e=>{e&&(this.event=e,this.canPost=this.event.scheduledbyID===this.contactID||this.event.delegates.some(e=>e.contactID===this.contactID)||this.superAdmin,[1,4].includes(this.event.eventCategoryID)||(this.initSignalHub(),this.checkChat()),1===this.event.eventCategoryID&&this.getDiscussions())})}checkChat(){this.discussionService.fetchDiscussions(0,this.event.eventID,2,0,0).subscribe(e=>{e[0]&&(this.isEmptyChat=!1,this.activeMessage=e[0],this.channel="chat"+this.activeMessage.discussionID,this.signalRService.joinChannel(this.channel),this.getMember(this.activeMessage.discussionID),this.getChats(0,this.activeMessage.discussionID,0))})}getMember(e){this.chatMembers=[],this.discussionService.getAllMembers(e).subscribe(t=>{this.chatMembers=t,this.chatMembers.filter(e=>e.contactID===this.contactID).length||this.discussionService.addMember({contactID:this.contactID,discussionID:e,isAdmin:!1}).subscribe(()=>{this.getMember(e)})})}initSignalHub(){this.signalRService.transferMessageEvent.subscribe(e=>{if(this.channel===e.channel){const t=e.message,n=t.data;if(t.type===gn.a.chatAdd&&this.onChatAdd(n),t.type===gn.a.chatDelete&&this.onDeleteChat(n.discussionID),t.type===gn.a.chatEdit&&this.onChatEdit(n),e.message&&e.message.hasOwnProperty("newDiscussionID")&&this.getReplyChat(e.message.newDiscussionID),t.type===gn.a.typingIndicator){const e=t.data,n=this.typingIndicator.findIndex(t=>t.id===e.id);-1!==n?e.typing||this.typingIndicator.splice(n,1):e.typing&&this.typingIndicator.push(e)}}})}onChatAdd(e){const t=this.chats.length-1;e.isSameTime=t>=0&&Object(h.b)(this.chats[t],e),e.isSameDate=t>=0&&Object(h.f)(this.chats[t],e),this.chats.push(e),this.scrollToLatest()}onChatEdit(e){if(!e)return void(this.editChat=null);const t=this.chats.findIndex(t=>t.discussionID===e.discussionID);if(-1!==t){const n=this.chats.length-1;e.isSameTime=n>=0&&Object(h.b)(this.chats[n],e),e.isSameDate=n>=0&&Object(h.f)(this.chats[n],e),this.chats[t]=Object(v.a)(e)}this.editChat=null,this.scrollToLatest()}leaveChannel(){this.signalRService.leaveChannel(this.channel)}getChats(e,t,n){this.loading=!0,this.discussionService.fetchDiscussions(e,0,n,t,0).subscribe(e=>{(e=e.reverse()).map((t,n)=>(t.isSameTime=n>0&&Object(h.b)(e[n-1],t),t.isSameDate=n>0&&Object(h.f)(e[n-1],t),t)),e[0]&&(e[0].visible=!0),this.chats=e,4!==this.event.eventCategoryID&&this.scrollToBottom(),this.loading=!1})}scrollToBottom(){setTimeout(()=>{var e,t;this.chatContainer&&(this.chatContainer.nativeElement.scrollTop=null===(t=null===(e=this.chatContainer)||void 0===e?void 0:e.nativeElement)||void 0===t?void 0:t.scrollHeight)},0)}scrollToLatest(){this.isScrollUp||this.scrollToBottom()}onScrollChat(e){const t=e.target||e.srcElement;this.isScrollUp=t.scrollHeight-t.scrollTop-t.offsetHeight>100}onEditChatItem(e){this.editChat=e}onDeleteChatItem(e){this.discussionService.deleteDiscussion(e).subscribe(()=>{this.onDeleteChat(e),this.signalRService.transferMessage(this.channel,{type:gn.a.chatDelete,data:{discussionID:e}})})}onDeleteChat(e){var t;const n=null===(t=this.chats)||void 0===t?void 0:t.findIndex(t=>t.discussionID===e);-1!==n&&this.chats.splice(n,1),this.scrollToLatest()}getReplyChat(e){this.discussionService.fetchDiscussions(0,this.activeMessage.referenceID,40,this.activeMessage.discussionID,e).subscribe(e=>{e[0]&&this.onChatAdd(e[0])})}addAgenda(){const e=this.modal.open(fn,{backdrop:"static",size:"lg"});e.componentInstance.parentDiscussion=this.activeMessage,e.result.then(e=>{e.discussionID&&this.chats.push(e)})}nextItem(){this.activeChatIndex+=1,this.chats=this.chats.map(e=>(e.visible=!1,e)),this.chats[this.activeChatIndex].visible=!0}prevItem(){this.activeChatIndex-=1,this.chats=this.chats.map(e=>(e.visible=!1,e)),this.chats[this.activeChatIndex].visible=!0}postSession(){this.router.navigate(["/session/post"],{queryParams:{refID:this.event.referenceID}})}onInstantAdd(e){const t=this.chats.findIndex(t=>t.tempKey===e.tempKey);-1!==t&&(this.chats[t].discussionID=e.discussionID)}openCreateDiscussionModal(){const e=this.modal.open(In.a);e.componentInstance.referenceID=this.event.eventID,e.componentInstance.discussionCategoryID=3,e.result.then(e=>{this.discussions.unshift(e)},()=>{})}onDeleteDiscussionModal(e,t){this.modal.open(dt.a,{}).result.then(()=>{this.discussionService.deleteDiscussion(e).subscribe(()=>{this.discussions.splice(t,1)})},()=>{})}onEditDiscussionModal(e,t){const n=this.modal.open(In.a);n.componentInstance.discussion=Object(h.l)(e),n.result.then(e=>{this.discussions[t]=e},()=>{})}getDiscussions(){this.discussionsLoading=!0,this.discussionService.fetchDiscussions(0,this.event.eventID,3,0).subscribe(e=>{this.discussions=e,this.discussionsLoading=!1})}onCreate(e){this.discussions.unshift(e)}ngOnDestroy(){this.leaveChannel(),this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](gt.a),D["\u0275\u0275directiveInject"](ut.a),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-discussions"]],viewQuery:function(e,t){if(1&e&&D["\u0275\u0275viewQuery"](Cn,!0),2&e){let e;D["\u0275\u0275queryRefresh"](e=D["\u0275\u0275loadQuery"]())&&(t.chatContainer=e.first)}},decls:5,vars:3,consts:[[1,"d-flex","align-items-start","flex-column","w-100",3,"avnonLoader"],[1,"row","p-0","m-0","w-100"],[1,"col-12","p-0"],[3,"discussionCategoryID","placeholder","referenceID","created",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"discussionCategoryID","placeholder","referenceID","created"],[3,"discussion","canPreview","delete","edit",4,"ngIf"],[3,"discussion","canPreview","delete","edit"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"div",1),D["\u0275\u0275elementStart"](2,"div",2),D["\u0275\u0275template"](3,xn,1,3,"app-post-news",3),D["\u0275\u0275template"](4,yn,2,1,"ng-container",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading||t.discussionsLoading),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",t.canPost),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",t.discussions))},directives:[y.a,i.n,i.m,Dn.a,bn.a],styles:[".container-chats[_ngcontent-%COMP%]{max-height:calc(100vh - 300px);min-height:calc(100vh - 300px)}.container-chats[_ngcontent-%COMP%]   .group-item-date[_ngcontent-%COMP%]{min-height:24px;margin-bottom:24px;border-bottom:1px solid #f0f0f0;text-align:center}.container-chats[_ngcontent-%COMP%]   .group-item-date[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{position:relative;top:12px;padding:2px 18px;font-size:14px;font-weight:500;background:#fff;color:rgba(42,42,42,.5)}.container-chats[_ngcontent-%COMP%]   .chat-list-container[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.container-chats[_ngcontent-%COMP%]   .typing-indicator[_ngcontent-%COMP%]   .typing-item[_ngcontent-%COMP%]{padding:0 12px;font-size:12px;line-height:1;color:#4d4f54;opacity:.5;margin-bottom:4px}.btn-grey[_ngcontent-%COMP%]{background:#eaeaea}  .avatar.avatar-30-circle{width:30px;height:30px;border-radius:60px;-moz-border-radius:60px;-webkit-border-radius:60px;object-fit:cover;overflow-y:hidden}  .avatar.avatar-36-circle{width:36px;height:36px;border-radius:72px;-moz-border-radius:72px;-webkit-border-radius:72px;object-fit:cover;overflow-y:hidden}"]}),e})();var En=n("qe9b");let wn=(()=>{class e{constructor(e,t){this.eventService=e,this.userService=t,this.event=new F.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.eventService.eventDetail.subscribe(e=>{console.log("\ud83d\ude80 > EventFilesComponent > .subscribe > event",e),e&&(this.event=e,this.isAdmin=this.event.scheduledbyID===this.contactID||this.superAdmin,this.delegate=this.event.delegates.find(e=>e.contactID===this.contactID&&6===e.eventDelegateTypeID))})}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-files"]],decls:2,vars:4,consts:[[1,"d-flex","w-100","flex-column"],[3,"referenceID","hideDate","disableUpload","documentCategoryID"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275element"](1,"app-documents-files",1),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("referenceID",null==t.event?null:t.event.eventID)("hideDate",!0)("disableUpload",!t.isAdmin)("documentCategoryID",10))},directives:[En.a],styles:[".event-documents-tab[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background:#fff;min-height:180px}.event-documents-tab[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after{content:none}.event-documents-tab[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{background-position:100%}"]}),e})();function On(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"tr",16),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.$implicit;return D["\u0275\u0275nextContext"]().onChangeSelect(n)}),D["\u0275\u0275elementStart"](1,"td",17),D["\u0275\u0275elementStart"](2,"div",18),D["\u0275\u0275element"](3,"input",19),D["\u0275\u0275element"](4,"label",20),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"td",17),D["\u0275\u0275elementStart"](6,"span",21),D["\u0275\u0275text"](7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"td",17),D["\u0275\u0275text"](9),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"td",17),D["\u0275\u0275text"](11),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("checked",e.checked),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate"](e.firstName),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.courseTitle," "),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.provider," ")}}let Mn=(()=>{class e{constructor(e){this.activeModal=e,this.onSelect=new D.EventEmitter,this.searchValue=null}ngOnInit(){this.delegates.map(e=>(e.checked||(e.checked=!1),e)),this.filterDelegates=this.delegates}search(){this.filterDelegates=this.filterDelegate(this.searchValue)}filterDelegate(e){const t=null==e?void 0:e.toLowerCase();return this.delegates.filter(e=>{var n;return null===(n=e.firstName)||void 0===n?void 0:n.toLowerCase().includes(t)})}onChangeSelect(e){e.checked=!e.checked;const t=this.delegates.filter(e=>!0===e.checked);this.onSelect.emit(t)}addDelegates(){const e=this.delegates.filter(e=>!0===e.checked);this.activeModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-financial-delegate-modal"]],outputs:{onSelect:"onSelect"},decls:30,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","filter-search"],["for","location-search",1,"sr-only"],["type","text","placeholder","Search for contacts",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-striped"],[1,"inline-header"],[3,"click",4,"ngFor","ngForOf"],[1,"text-right"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary","ml-2",3,"click"],[3,"click"],[1,"align-middle"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"checked"],[1,"custom-control-label","cursor-pointer"],[1,"title"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"div",1),D["\u0275\u0275elementStart"](2,"h5",2),D["\u0275\u0275text"](3,"Add Delegates"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"button",3),D["\u0275\u0275listener"]("click",function(){return t.activeModal.dismiss("Cross click")}),D["\u0275\u0275elementStart"](5,"span",4),D["\u0275\u0275text"](6,"\xd7"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"div",5),D["\u0275\u0275elementStart"](8,"div",6),D["\u0275\u0275elementStart"](9,"label",7),D["\u0275\u0275text"](10,"Search for a delegate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"input",8),D["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchValue=e})("ngModelChange",function(){return t.search()}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](12,"div",9),D["\u0275\u0275elementStart"](13,"table",10),D["\u0275\u0275elementStart"](14,"thead",11),D["\u0275\u0275elementStart"](15,"tr"),D["\u0275\u0275element"](16,"th"),D["\u0275\u0275elementStart"](17,"th"),D["\u0275\u0275text"](18,"Name"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](19,"th"),D["\u0275\u0275text"](20,"Position"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](21,"th"),D["\u0275\u0275text"](22,"Company"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](23,"tbody"),D["\u0275\u0275template"](24,On,12,4,"tr",12),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](25,"div",13),D["\u0275\u0275elementStart"](26,"button",14),D["\u0275\u0275listener"]("click",function(){return t.activeModal.dismiss("Close click")}),D["\u0275\u0275text"](27," Close "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](28,"button",15),D["\u0275\u0275listener"]("click",function(){return t.addDelegates()}),D["\u0275\u0275text"](29," Add Delegates "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275advance"](11),D["\u0275\u0275property"]("ngModel",t.searchValue),D["\u0275\u0275advance"](13),D["\u0275\u0275property"]("ngForOf",t.filterDelegates))},directives:[a.b,a.q,a.t,i.m],styles:[""]}),e})();var Pn=n("uk6F");function Tn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"td",10),D["\u0275\u0275text"](2),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td",11),D["\u0275\u0275text"](4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"td"),D["\u0275\u0275elementStart"](6,"i",21),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"]().onEdit(t)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"i",22),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"]().deleteCategory(t)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.financialCategoryCode," "),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.financialCategory," ")}}function jn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"td",10),D["\u0275\u0275element"](2,"input",14),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"td"),D["\u0275\u0275element"](4,"input",15),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"td",16),D["\u0275\u0275elementStart"](6,"button",17),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"]().updateCategory(t)}),D["\u0275\u0275text"](7," Update "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"i",23),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).editIndex=null}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("disabled",e.updateCategoryForm&&e.updateCategoryForm.invalid)}}function _n(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr",13),D["\u0275\u0275template"](1,Tn,8,2,"ng-container",20),D["\u0275\u0275template"](2,jn,9,1,"ng-container",20),D["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=D["\u0275\u0275nextContext"]();D["\u0275\u0275property"]("formGroup",n.updateCategoryForm),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",null===n.editIndex),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",null!==n.editIndex&&n.editIndex===e)}}const An=function(e){return{active:e}};let Vn=(()=>{class e{constructor(e,t,n,i){this.activeModal=e,this.formBuilder=t,this.financial=n,this.modal=i,this.onAdded=new D.EventEmitter,this.updated=new D.EventEmitter,this.deleted=new D.EventEmitter,this.categoryList=[],this.categoryExpenseList=[],this.categoryIncomeList=[],this.selectedCategoryList=[],this.selectedType=1,this.editIndex=null}ngOnInit(){this.createFormGroup(),this.updateFormGroup(),this.addCategoryForm.controls.companyID.setValue(+localStorage.getItem("CID")),this.categoryList&&(this.categoryIncomeList=this.categoryList.filter(e=>1===e.financialCategoryTypeID),this.categoryExpenseList=this.categoryList.filter(e=>2===e.financialCategoryTypeID),this.selectedCategoryList=this.categoryIncomeList)}createFormGroup(){this.addCategoryForm=this.formBuilder.group({companyID:[""],financialCategoryTypeID:["1"],financialCategoryCode:["",a.C.required],financialCategory:["",a.C.required]})}updateFormGroup(){this.updateCategoryForm=this.formBuilder.group({financialCategoryID:[""],financialCategoryTypeID:["1"],financialCategoryCode:["",a.C.required],financialCategory:["",a.C.required]})}selectType(e){this.selectedType=e,this.editIndex=null,1===e?(this.selectedCategoryList=this.categoryIncomeList,this.addCategoryForm.controls.financialCategoryTypeID.setValue("1")):(this.selectedCategoryList=this.categoryExpenseList,this.addCategoryForm.controls.financialCategoryTypeID.setValue("2"))}onEdit(e){this.editIndex=e,this.updateCategoryForm.patchValue(this.selectedCategoryList[e])}updateCategory(e){const t=this.selectedCategoryList[e];this.financial.updateCategory(this.updateCategoryForm.value).subscribe(()=>{t.financialCategory=this.updateCategoryForm.value.financialCategory,t.financialCategoryCode=this.updateCategoryForm.value.financialCategoryCode,this.categoryList=this.categoryList.map(e=>(e.financialCategoryID===t.financialCategoryID&&(e=t),e)),this.categoryIncomeList=this.categoryIncomeList.map(e=>(e.financialCategoryID===t.financialCategoryID&&(e=t),e)),this.categoryExpenseList=this.categoryExpenseList.map(e=>(e.financialCategoryID===t.financialCategoryID&&(e=t),e)),this.updated.emit(t),this.editIndex=null})}addCategory(){this.financial.addCategory(this.addCategoryForm.value).subscribe(()=>{1===this.selectedType?this.categoryIncomeList.push(Object.assign(Object.assign({},this.addCategoryForm.value),{financialCategoryID:0})):this.categoryExpenseList.push(Object.assign(Object.assign({},this.addCategoryForm.value),{financialCategoryID:0})),this.categoryList.push(Object.assign(Object.assign({},this.addCategoryForm.value),{financialCategoryID:0})),this.addCategoryForm.controls.financialCategoryCode.setValue(""),this.addCategoryForm.controls.financialCategory.setValue(""),this.onAdded.emit("addNew")})}deleteCategory(e){const t=this.selectedCategoryList[e],n=this.modal.open(dt.a);n.componentInstance.objectType="Financial Category",n.componentInstance.objectDetails=t.financialCategory+" - Financial Category",n.result.then(e=>{"Yes"===e&&this.financial.deleteCategory(t.financialCategoryID).subscribe(()=>{this.deleted.emit(t.financialCategoryID),this.categoryIncomeList=this.categoryIncomeList.filter(e=>e.financialCategoryID!==t.financialCategoryID),this.categoryExpenseList=this.categoryExpenseList.filter(e=>e.financialCategoryID!==t.financialCategoryID),this.categoryList=this.categoryList.filter(e=>e.financialCategoryID!==t.financialCategoryID),this.selectedCategoryList=this.selectedCategoryList.filter(e=>e.financialCategoryID!==t.financialCategoryID)})})}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](o.a),D["\u0275\u0275directiveInject"](a.e),D["\u0275\u0275directiveInject"](Pn.a),D["\u0275\u0275directiveInject"](o.p))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-financial-category-modal"]],outputs:{onAdded:"onAdded",updated:"updated",deleted:"deleted"},decls:35,vars:9,consts:[[1,"modal-content"],[1,"modal-header"],["id","financialCategoryModal",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"tabs-action-row"],[1,"btn","btn-rounded","btn-rounded-32",3,"ngClass","click"],[1,"btn","btn-rounded","btn-rounded-32","ml-2",3,"ngClass","click"],[1,"table","inline-table","table-grid","table-compact","category-add-form"],[1,"pl-0","w-33"],[1,"pr-0"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],["type","text","formControlName","financialCategoryCode","placeholder","Code","name","financialCategoryCode",1,"form-control","w-75"],["type","text","formControlName","financialCategory","placeholder","Description","name","financialCategory",1,"form-control"],[1,"pr-0","pl-0","align-middle"],[1,"btn","btn-sm","btn-outline-primary",3,"disabled","click"],[1,"text-right"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"fas","fa-pencil-alt","mr-4",3,"click"],[1,"fas","fa-trash-alt",3,"click"],[1,"fas","fa-times","ml-2","mr-2",3,"click"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"div",1),D["\u0275\u0275elementStart"](2,"h5",2),D["\u0275\u0275text"](3," Manage Financial Categories "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"button",3),D["\u0275\u0275listener"]("click",function(){return t.activeModal.dismiss("Cross click")}),D["\u0275\u0275elementStart"](5,"span",4),D["\u0275\u0275text"](6,"\xd7"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"div",5),D["\u0275\u0275elementStart"](8,"div",6),D["\u0275\u0275elementStart"](9,"a",7),D["\u0275\u0275listener"]("click",function(){return t.selectType(1)}),D["\u0275\u0275text"](10,"Income"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"a",8),D["\u0275\u0275listener"]("click",function(){return t.selectType(2)}),D["\u0275\u0275text"](12,"Expenses"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](13,"table",9),D["\u0275\u0275elementStart"](14,"thead"),D["\u0275\u0275elementStart"](15,"tr"),D["\u0275\u0275elementStart"](16,"th",10),D["\u0275\u0275text"](17,"Code"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](18,"th",11),D["\u0275\u0275text"](19,"Description"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275element"](20,"td"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](21,"tbody"),D["\u0275\u0275template"](22,_n,3,3,"tr",12),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](23,"tfoot"),D["\u0275\u0275elementStart"](24,"tr",13),D["\u0275\u0275elementStart"](25,"td",10),D["\u0275\u0275element"](26,"input",14),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](27,"td"),D["\u0275\u0275element"](28,"input",15),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](29,"td",16),D["\u0275\u0275elementStart"](30,"button",17),D["\u0275\u0275listener"]("click",function(){return t.addCategory()}),D["\u0275\u0275text"](31," Add "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](32,"div",18),D["\u0275\u0275elementStart"](33,"button",19),D["\u0275\u0275listener"]("click",function(){return t.activeModal.dismiss("Done click")}),D["\u0275\u0275text"](34," Done "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275advance"](9),D["\u0275\u0275property"]("ngClass",D["\u0275\u0275pureFunction1"](5,An,1===t.selectedType)),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngClass",D["\u0275\u0275pureFunction1"](7,An,2===t.selectedType)),D["\u0275\u0275advance"](11),D["\u0275\u0275property"]("ngForOf",t.selectedCategoryList),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("formGroup",t.addCategoryForm),D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("disabled",t.addCategoryForm&&t.addCategoryForm.invalid))},directives:[i.l,i.m,a.r,a.j,a.b,a.q,a.h,i.n],styles:[".btn-primary.disabled[_ngcontent-%COMP%], .btn-primary.disabled[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:disabled, .btn-primary[_ngcontent-%COMP%]:disabled:hover{color:#fff;background-color:grey;border-color:grey}i[_ngcontent-%COMP%]{color:#2a2a2a;cursor:pointer}i[_ngcontent-%COMP%]:hover{opacity:.8}.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.w-33[_ngcontent-%COMP%]{width:33%}"]}),e})();var Fn=n("S65P"),Ln=n("FhWM");function Rn(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"span",9),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"number"),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" Total Spent on this event, R",D["\u0275\u0275pipeBind2"](2,1,e.totalAmount,"1.1-2")," ")}}function Bn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",10),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().addTransaction()}),D["\u0275\u0275element"](1,"span",11),D["\u0275\u0275text"](2,"Add Transaction "),D["\u0275\u0275elementEnd"]()}}function Nn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",3),D["\u0275\u0275elementStart"](1,"div",15),D["\u0275\u0275elementStart"](2,"button",16),D["\u0275\u0275element"](3,"span",17),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"ul",18),D["\u0275\u0275elementStart"](5,"li"),D["\u0275\u0275elementStart"](6,"a",19),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"]().editTransaction(t)}),D["\u0275\u0275text"](7,"Edit"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"li"),D["\u0275\u0275elementStart"](9,"a",19),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"]().deleteTransactionItem(t)}),D["\u0275\u0275text"](10,"Delete"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function $n(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275elementStart"](1,"td",6),D["\u0275\u0275text"](2),D["\u0275\u0275pipe"](3,"date"),D["\u0275\u0275pipe"](4,"dateObject"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"td"),D["\u0275\u0275elementStart"](6,"span"),D["\u0275\u0275text"](7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"p",12),D["\u0275\u0275text"](9),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"td"),D["\u0275\u0275text"](11),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](12,"td"),D["\u0275\u0275elementStart"](13,"div",13),D["\u0275\u0275elementStart"](14,"span"),D["\u0275\u0275text"](15),D["\u0275\u0275pipe"](16,"number"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](17,Nn,11,0,"div",14),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](3,6,D["\u0275\u0275pipeBind1"](4,9,e.transactionDate),"dd MM yyyy")," "),D["\u0275\u0275advance"](5),D["\u0275\u0275textInterpolate"](e.financialCategory),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](e.transactionDescription),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.delegateName," "),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate1"]("R",D["\u0275\u0275pipeBind2"](16,11,e.transactionamount,"1.1-2"),""),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.submittedByContactID===n.contactID)}}let Un=(()=>{class e{constructor(e,t,n,i,a,s,r,o,c){this.cdr=e,this.calendar=t,this.formBuilder=n,this.modalService=i,this.financialService=a,this.listService=s,this.eventService=r,this.userService=o,this.changeDetectorRef=c,this.unsubscribe=new f.a,this.isProcessing=!1,this.event=new F.a,this.delegateList=[],this.userCurrency={currency:"USD Dollar",currencyID:1,currencySymbol:"$"},this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.eventService.eventDetail.pipe(Object(u.a)(this.unsubscribe)).subscribe(e=>{e&&(this.event=e,this.adminCheck=e.scheduledbyID===this.contactID||this.superAdmin,this.createAddFinancialFormGroup(),this.loadFinancialTransactionList(),this.loadFinancialCategoryList(),this.getDelegates(),this.getCurrencies())})}createAddFinancialFormGroup(){this.addFinancialForm=this.formBuilder.group({transactionDate:[this.calendar.getToday(),a.C.required],category:[null,a.C.required],delegate:[null,a.C.nullValidator],amount:[null,a.C.required],split:[null]})}getCurrencies(){this.listService.getCurrencyList().subscribe(e=>{if(e){const t=+localStorage.getItem("currencyID");this.userCurrency=e.find(e=>e.currencyID===t),this.cdr.detectChanges()}})}loadFinancialTransactionList(){this.isProcessing=!0,this.financialService.getListTransactionByEventId(0,this.event?this.event.eventID:0).subscribe(e=>{e.length>0&&(this.financialTransactionList=e,this.calculateTotalTransaction()),this.isProcessing=!1,this.cdr.detectChanges()})}calculateTotalTransaction(){this.totalAmount=0,this.financialTransactionList.forEach(e=>{this.totalAmount+=e.transactionamount}),this.financialTransactionList=this.financialTransactionList.sort((e,t)=>e.transactionDate>t.transactionDate?1:e.transactionDate<t.transactionDate?-1:0)}loadFinancialCategoryList(){this.financialService.getCategories(+localStorage.getItem("CID")).subscribe(e=>{e.length>0&&(this.categoryList=e,this.cdr.detectChanges())})}getDelegates(){this.eventService.getEventDelegate(this.event.eventID).subscribe(e=>{e&&this.filterDelegateConfirmed(e)})}filterDelegateConfirmed(e){this.delegateList=e.filter(e=>2===e.eventDelegateStatusID)}openFinancialDelegateModal(e){e.srcElement.blur(),e.preventDefault();const t=this.modalService.open(Mn,{windowClass:"animation",size:"lg"});t.componentInstance.delegates=this.delegateList,t.result.then(e=>{this.selectedDelegates=e;let t="";this.selectedDelegates.forEach(e=>{this.selectedDelegates.indexOf(e)!==this.selectedDelegates.length-1?t+=e.firstName+", ":t+=e.firstName}),this.addFinancialForm.controls.delegate.setValue(t)}).catch(()=>{})}openFinancialCategoryModal(){const e=this.modalService.open(Vn,{windowClass:"animation",size:"lg"});e.componentInstance.user=null,e.componentInstance.categoryList=this.categoryList,e.componentInstance.onAdded.subscribe(e=>{"addNew"===e&&this.loadFinancialCategoryList()}),e.componentInstance.updated.subscribe(e=>{const t=this.categoryList.findIndex(t=>t.financialCategoryID===e.financialCategoryID);-1!==t&&(this.categoryList[t]=e)}),e.componentInstance.deleted.subscribe(e=>{const t=this.categoryList.findIndex(t=>t.financialCategoryID===e);-1!==t&&this.categoryList.splice(t,1)})}selectDelegate(){this.delegatesName="",this.getListDelegateSelected().forEach((e,t)=>{e.checked&&(t>0&&(this.delegatesName+=", "),this.delegatesName+=e.firstName+" "+e.surname)})}getListDelegateSelected(){let e=[];return this.delegateList&&(e=this.delegateList.filter(e=>e.checked)),e}resetDelagateSelected(){this.delegatesName="",this.delegateList&&this.delegateList.forEach(e=>{e.checked=!1})}addFinancial(){let e=this.addFinancialForm.controls.amount.value;const t=this.addFinancialForm.controls.category.value,n=this.getDelegateIds();this.addFinancialForm.controls.split.value&&(e=Number(Math.round(parseFloat(e/(n?n.length:1)+"e4"))+"e-4"));const a=this.addFinancialForm.controls.transactionDate.value;let s=null;if(a){const e="yyyy-MM-dd HH:mm:ss",t="en-US",n=new Date(a.year,a.month-1,a.day,0,0);s=Object(i.y)(n,e,t)}const r={companyAccountID:0,financialCategoryID:t,invoiceID:0,submittedByContactID:+localStorage.getItem("UserID"),transactionDate:s,transactionamount:e,vat:!0,referenceIDs:n,batch:null,transactionCategoryID:0};this.isProcessing=!0,this.financialService.createBatch(r).subscribe(()=>{this.loadFinancialTransactionList(),this.resetDelagateSelected(),this.addFinancialForm.controls.category.setValue(null),this.addFinancialForm.controls.delegate.setValue(null),this.addFinancialForm.controls.amount.setValue(null),this.addFinancialForm.controls.split.setValue(!1)},()=>{this.isProcessing=!1,this.cdr.detectChanges()})}getDelegateIds(){let e=[];if(this.delegateList){const t=this.getListDelegateSelected();e=t&&t.length>0?t.map(e=>e.eventDelegateID):this.delegateList.map(e=>e.eventDelegateID)}return e}deleteTransaction(e,t){const n=this.modalService.open(dt.a,{backdrop:"static"});n.componentInstance.objectType="Event Transaction",n.result.then(n=>{"Yes"==n&&(this.isProcessing=!0,this.cdr.detectChanges(),this.financialService.deleteTransaction(e.transactionID).subscribe(()=>{this.financialTransactionList.splice(t,1),this.calculateTotalTransaction(),this.isProcessing=!1,this.cdr.detectChanges()},()=>{this.isProcessing=!1,this.cdr.detectChanges()}))})}selectTransaction(e){this.financialTransactionList.forEach(e=>e.isEdit=!1),e.isEdit=!0;const t=new Date(e.transactionDate);e.transactionDatePicker={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}cancelSelect(e){e.isEdit=!1}updateTransaction(e){let t=null;if(e&&e.transactionDatePicker){const n="yyyy-MM-dd HH:mm:ss",a="en-US",s=new Date(e.transactionDatePicker.year,e.transactionDatePicker.month-1,e.transactionDatePicker.day,0,0);t=Object(i.y)(s,n,a)}const n={transactionID:e.transactionID,companyAccountID:0,financialCategoryID:e.financialCategoryID,transactionAmount:e.transactionamount,transactionDate:t,invoiceID:0,submittedByContactID:+localStorage.getItem("UserID"),vat:!0};this.isProcessing=!0,this.financialService.updateTransaction(n).subscribe(()=>{this.loadFinancialTransactionList(),this.cancelSelect(e)},()=>{this.isProcessing=!1,this.cdr.detectChanges()})}onSubmit(e){}addTransaction(){const e=this.modalService.open(Fn.a,{backdrop:"static",size:"lg"});e.componentInstance.delegates=this.delegateList,e.result.then(e=>{e&&e.status&&this.loadFinancialTransactionList()})}editTransaction(e){const t=this.financialTransactionList[e],n=this.modalService.open(Fn.a,{backdrop:"static",size:"lg"});n.componentInstance.delegates=this.delegateList,n.componentInstance.transaction=Object(h.l)(t),n.result.then(t=>{t&&t.transactionID&&(this.financialTransactionList[e]=t,this.calculateTotalTransaction(),this.cdr.detectChanges())})}deleteTransactionItem(e){const t=this.modalService.open(dt.a),n=this.financialTransactionList[e];t.componentInstance.objectType="Transaction",t.componentInstance.objectDetails="amount "+n.transactionamount+" Transaction",t.result.then(t=>{t&&"Yes"===t&&this.financialService.deleteTransaction(n.transactionID).subscribe(()=>{this.financialTransactionList.splice(e,1)})})}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](D.ChangeDetectorRef),D["\u0275\u0275directiveInject"](o.d),D["\u0275\u0275directiveInject"](a.e),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](Pn.a),D["\u0275\u0275directiveInject"](Ln.a),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](D.ChangeDetectorRef))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-financials"]],decls:18,vars:4,consts:[[1,"d-flex","w-100","flex-column",3,"avnonLoader"],[1,"col-12","d-flex","pl-3","pr-3","justify-content-end","align-items-center","filter-container","border-bottom"],["class","post-count",4,"ngIf"],[1,"actions"],["class","ml-auto cursor-pointer",3,"click",4,"ngIf"],[1,"table","table-dotted-border","w-100"],[1,"pl-3"],[1,"pr-3"],[4,"ngFor","ngForOf"],[1,"post-count"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],[1,"meta"],[1,"d-flex","justify-content-between","align-items-center"],["class","actions",4,"ngIf"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"div",1),D["\u0275\u0275template"](2,Rn,3,4,"span",2),D["\u0275\u0275elementStart"](3,"div",3),D["\u0275\u0275template"](4,Bn,3,0,"a",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"table",5),D["\u0275\u0275elementStart"](6,"thead"),D["\u0275\u0275elementStart"](7,"tr"),D["\u0275\u0275elementStart"](8,"th",6),D["\u0275\u0275text"](9,"Date"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"th"),D["\u0275\u0275text"](11,"Category"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](12,"th"),D["\u0275\u0275text"](13,"Delegate"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](14,"th",7),D["\u0275\u0275text"](15,"Amount"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](16,"tbody"),D["\u0275\u0275template"](17,$n,18,14,"tr",8),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.isProcessing),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",t.totalAmount),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",t.adminCheck),D["\u0275\u0275advance"](13),D["\u0275\u0275property"]("ngForOf",t.financialTransactionList))},directives:[y.a,i.n,i.m],pipes:[i.f,i.e,E.a],styles:[".table-dotted-border[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:15px}.table-dotted-border[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-dotted-border[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;padding:.5rem}.table-dotted-border[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:0;border-bottom:1px dotted #aaa;font-weight:500}.table-dotted-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border:0}.table-dotted-border[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:0;border-bottom:1px dotted #aaa}.dropdown-toggle[_ngcontent-%COMP%]{width:20px;height:20px;background-position:50%}.dropdown-toggle[_ngcontent-%COMP%]:after, .dropdown-toggle[_ngcontent-%COMP%]:before{display:none}"],changeDetection:0}),e})();var Hn=n("7Ow8");function zn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",2),D["\u0275\u0275elementStart"](1,"div",3),D["\u0275\u0275text"](2),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"div",8),D["\u0275\u0275elementStart"](4,"span",9),D["\u0275\u0275element"](5,"img",10),D["\u0275\u0275pipe"](6,"avatar"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"span",11),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.index;return D["\u0275\u0275nextContext"](2).viewScore(n)}),D["\u0275\u0275text"](8),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"span",12),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.index;return D["\u0275\u0275nextContext"](2).viewScore(n)}),D["\u0275\u0275text"](10),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"div",13),D["\u0275\u0275elementStart"](12,"span",14),D["\u0275\u0275text"](13),D["\u0275\u0275pipe"](14,"number"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](15,"span",15),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.index;return D["\u0275\u0275nextContext"](2).viewScore(n)}),D["\u0275\u0275text"](16),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](n+1),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](6,7,e.presenterProfilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate2"]("",null==e?null:e.presenterFirstname," ",e.presenterSurname,""),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](null==e?null:e.presenterCompany),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](14,9,e.percentange,"1.1-2"),"% "),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate1"]("",e.submissionCount," Reviews")}}function qn(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"div",2),D["\u0275\u0275elementStart"](2,"div",3),D["\u0275\u0275text"](3,"#"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",4),D["\u0275\u0275elementStart"](5,"span",5),D["\u0275\u0275text"](6," Presenter "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"div",6),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().onSort()}),D["\u0275\u0275elementStart"](8,"span",5),D["\u0275\u0275text"](9," Score "),D["\u0275\u0275element"](10,"i"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](11,zn,17,12,"div",7),D["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](10),D["\u0275\u0275classMapInterpolate1"]("fas fa-caret-","ASC"===e.sort?"up":"down"," ml-1"),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",e.reviews)}}let Yn=(()=>{class e{constructor(e,t,n,i,a){this.activatedRoute=e,this.eventService=t,this.formService=n,this.modal=i,this.userService=a,this.delegates=[],this.reviews=[],this.sort="DESC",this.unsubscribe=new f.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.activatedRoute.parent.params.subscribe(e=>{this.eventID=+e.eventID,this.loadData()})}loadData(){this.loading=!0,this.contactID=this.user.contactID,this.eventService.selectEvent(0,this.eventID).pipe(Object(u.a)(this.unsubscribe)).subscribe(e=>{const t=e[0]||null;if(t){let e=Object(h.l)(t.delegates);e=e.filter(e=>e.eventDelegateTypeID===ot.b.PANEL_MEMBER),this.delegates=e,this.event=t,this.adminCheck=this.event.scheduledbyID===this.contactID||this.superAdmin,this.eventService.loadEventDetail(t),this.loadLeaderBoard(),this.loading=!1}})}loadLeaderBoard(){this.boardLoading=!0,this.formService.panelMemberAnswers(0,0,0,0,this.eventID,0).subscribe(e=>{this.reviews=Object(h.j)(e.sort((e,t)=>t.percentange-e.percentange),"taskReferenceID"),this.boardLoading=!1})}viewScore(e){this.modal.open(Hn.a,{backdrop:"static",size:"lg",scrollable:!0}).componentInstance.panelMemberAnswer=this.reviews[e]}onSort(){this.sort="ASC"===this.sort?"DESC":"ASC",this.reviews=this.reviews.sort((e,t)=>{const n=e.percentange,i=t.percentange;return"DESC"===this.sort?n>i?-1:n<i?1:0:n>i?1:n<i?-1:0})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](p.a),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](vt.a),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-leaderboard"]],decls:2,vars:2,consts:[[1,"d-flex","w-100","flex-column",3,"avnonLoader"],[4,"ngIf"],[1,"d-flex","table-row","table-users"],[1,"col-sm-1"],[1,"col-sm-6","d-flex","align-items-center"],[1,"filter","d-flex","align-items-center"],[1,"col-sm-5","d-flex","align-items-center","justify-content-end","cursor-pointer",3,"click"],["class","d-flex table-row table-users",4,"ngFor","ngForOf"],[1,"col-sm-6","title-avatar"],[1,"float-left"],["alt","",1,"img-fluid","avatar-rounded","avatar-60",3,"src"],[1,"table-title","s-block",2,"cursor","pointer",3,"click"],[1,"s-block",2,"cursor","pointer",3,"click"],[1,"col-sm-5","last-right","text-right","d-flex","flex-column","align-items-end"],[1,"meta"],[1,"cursor-pointer","text-primary",3,"click"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275template"](1,qn,12,4,"ng-container",1),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading||t.boardLoading),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event&&t.event.eventID))},directives:[y.a,i.n,i.m],pipes:[k.a,i.f],styles:[".avatar-60[_ngcontent-%COMP%]{height:60px;object-fit:cover}a[_ngcontent-%COMP%]:disabled{opacity:.8;pointer-events:none}"]}),e})();function Kn(e,t){1&e&&D["\u0275\u0275element"](0,"app-delegate-summary",2),2&e&&D["\u0275\u0275property"]("onEventProfile",!0)("isHideFilter",!0)}let Gn=(()=>{class e{constructor(e){this.eventService=e}ngOnInit(){this.eventService.eventDetail.subscribe(e=>{e&&(this.event=e)})}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-minutes-delegates"]],decls:2,vars:1,consts:[[1,"attendees"],[3,"onEventProfile","isHideFilter",4,"ngIf"],[3,"onEventProfile","isHideFilter"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275template"](1,Kn,1,2,"app-delegate-summary",1),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event&&t.event.eventID))},directives:[i.n,Fe],styles:[""]}),e})();var Jn=n("mFMl"),Wn=n("w/zQ");const Xn=["chatContainer"],Zn=["commonChatAdd"];function Qn(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"p",9),D["\u0275\u0275text"](1,"No notes added yet"),D["\u0275\u0275elementEnd"]())}function ei(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",10),D["\u0275\u0275elementStart"](1,"app-chat-card",11),D["\u0275\u0275listener"]("editChat",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().onEditChatItem(t)})("removeChat",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().onDeleteChatItem(t)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("isAgenda",!0)("chatItem",e)("members",n.chatMembers)}}function ti(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"app-common-chat-add",16),D["\u0275\u0275listener"]("instantPost",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onInstantAdd(t)})("onChatAdd",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onChatAdd(t)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("members",e.chatMembers)("isAgenda",!0)("delegates",e.event.delegates)("channel",e.channel)("chat",e.activeMessage)("contactId",e.contactID)}}function ni(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"app-common-chat-add",17),D["\u0275\u0275listener"]("instantPost",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onInstantAdd(t)})("onChatAdd",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onChatAdd(t)})("onChatEdit",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onChatEdit(t)}),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275property"]("members",e.chatMembers)("editChat",e.editChat)("channel",e.channel)("chat",e.activeMessage)("contactId",e.contactID)("isAgenda",!0)("delegates",e.event.delegates)}}function ii(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",12,13),D["\u0275\u0275template"](2,ti,2,6,"ng-container",14),D["\u0275\u0275template"](3,ni,1,7,"ng-template",null,15,D["\u0275\u0275templateRefExtractor"]),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275reference"](4),t=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",!t.editChat)("ngIfElse",e)}}let ai=(()=>{class e{constructor(e,t,n,i,a,s,r,o){this.eventService=e,this.signalRService=t,this.userService=n,this.notificationService=i,this.taskService=a,this.toastrService=s,this.modal=r,this.discussionService=o,this.config={},this.typingIndicator=[],this.apiBlobUrl=$.a.apiBlobUrl,this.profilePhoto="assets/img/program-banner.jpg",this.chats=[],this.chatMembers=[],this.isEmptyChat=!1,this.activeChatIndex=0,this.isEditEventInstructions=!1,this.tmpEditEventInstructions=null,this.tmpEventProfile=null,this.isEditEventProfile=!1,this.destroy$=new f.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}ngOnInit(){this.eventService.eventDetail.pipe(Object(u.a)(this.destroy$)).subscribe(e=>{e&&(this.event=e,this.eventService.getEventDelegates(0,0,this.event.eventID,0,0,0).subscribe(e=>{this.event.delegates=e}),this.adminCheck=this.event.scheduledbyID===this.contactID,4!==this.event.eventCategoryID&&this.initSignalHub(),this.checkChat())})}checkChat(){this.discussionService.fetchDiscussions(0,this.event.eventID,2,0,0).subscribe(e=>{e[0]&&(this.isEmptyChat=!1,this.activeMessage=e[0],this.channel="chat"+this.activeMessage.discussionID,this.signalRService.joinChannel(this.channel),this.getMember(this.activeMessage.discussionID),this.getChats(0,this.activeMessage.discussionID,0))})}getMember(e){this.chatMembers=[],this.discussionService.getAllMembers(e).subscribe(t=>{this.chatMembers=t,this.chatMembers.filter(e=>e.contactID===this.contactID).length||this.discussionService.addMember({contactID:this.contactID,discussionID:e,isAdmin:!1}).subscribe(()=>{this.getMember(e)})})}initSignalHub(){this.signalRService.transferMessageEvent.subscribe(e=>{if(this.channel===e.channel){const t=e.message,n=t.data;if(t.type===gn.a.chatAdd&&this.onChatAdd(n),t.type===gn.a.chatDelete&&this.onDeleteChat(n.discussionID),t.type===gn.a.chatEdit&&this.onChatEdit(n),e.message&&e.message.hasOwnProperty("newDiscussionID")&&this.getReplyChat(e.message.newDiscussionID),t.type===gn.a.typingIndicator){const e=t.data,n=this.typingIndicator.findIndex(t=>t.id===e.id);-1!==n?e.typing||this.typingIndicator.splice(n,1):e.typing&&this.typingIndicator.push(e)}}})}onChatAdd(e){const t=this.chats.length-1;e.isSameTime=t>=0&&Object(h.b)(this.chats[t],e),e.isSameDate=t>=0&&Object(h.f)(this.chats[t],e),this.chats.push(e),this.scrollToLatest()}onChatEdit(e){if(!e)return void(this.editChat=null);const t=this.chats.findIndex(t=>t.discussionID===e.discussionID);if(-1!==t){const n=this.chats.length-1;e.isSameTime=n>=0&&Object(h.b)(this.chats[n],e),e.isSameDate=n>=0&&Object(h.f)(this.chats[n],e),this.chats[t]=Object(v.a)(e)}this.editChat=null,this.scrollToLatest()}onInstantAdd(e){const t=this.chats.findIndex(t=>t.tempKey===e.tempKey);-1!==t&&(this.chats[t].discussionID=e.discussionID)}leaveChannel(){this.signalRService.leaveChannel(this.channel)}getChats(e,t,n){this.loading=!0,this.discussionService.fetchDiscussions(e,0,n,t,0).subscribe(e=>{(e=e.reverse()).map((t,n)=>(t.isSameTime=n>0&&Object(h.b)(e[n-1],t),t.isSameDate=n>0&&Object(h.f)(e[n-1],t),t)),e[0]&&(e[0].visible=!0),this.chats=e,this.loading=!1})}scrollToBottom(){setTimeout(()=>{this.commonChatAdd.nativeElement.scrollIntoView()},0)}scrollToLatest(){this.isScrollUp||this.scrollToBottom()}onScrollChat(e){const t=e.target||e.srcElement;this.isScrollUp=t.scrollHeight-t.scrollTop-t.offsetHeight>100}onEditChatItem(e){this.editChat=e}onDeleteChatItem(e){this.discussionService.deleteDiscussion(e).subscribe(()=>{this.onDeleteChat(e),this.signalRService.transferMessage(this.channel,{type:gn.a.chatDelete,data:{discussionID:e}})})}onDeleteChat(e){var t;const n=null===(t=this.chats)||void 0===t?void 0:t.findIndex(t=>t.discussionID===e);-1!==n&&this.chats.splice(n,1),this.scrollToLatest()}getReplyChat(e){this.discussionService.fetchDiscussions(0,this.activeMessage.referenceID,40,this.activeMessage.discussionID,e).subscribe(e=>{e[0]&&this.onChatAdd(e[0])})}ngOnDestroy(){this.leaveChannel(),this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](gt.a),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](Y.a),D["\u0275\u0275directiveInject"](b.a),D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](ut.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-minutes"]],viewQuery:function(e,t){if(1&e&&(D["\u0275\u0275viewQuery"](Xn,!0),D["\u0275\u0275viewQuery"](Zn,!0)),2&e){let e;D["\u0275\u0275queryRefresh"](e=D["\u0275\u0275loadQuery"]())&&(t.chatContainer=e.first),D["\u0275\u0275queryRefresh"](e=D["\u0275\u0275loadQuery"]())&&(t.commonChatAdd=e.first)}},decls:9,vars:5,consts:[[1,"d-flex","flex-column","float-left","w-100",3,"avnonLoader"],[1,"d-flex","align-items-start","flex-column","w-100","float-left","mt-2","pl-3","pr-3"],[1,"col-12","p-0"],[1,"card-body","p-0","w-100","minutes-chats","d-flex","flex-column",3,"avnonLoader"],[1,"chat-list-container","flex-grow-1",3,"scroll"],["chatContainer",""],["class","meta no-notes",4,"ngIf"],["class","group-item",4,"ngFor","ngForOf"],["class","d-flex w-100",4,"ngIf"],[1,"meta","no-notes"],[1,"group-item"],[3,"isAgenda","chatItem","members","editChat","removeChat"],[1,"d-flex","w-100"],["commonChatAdd",""],[4,"ngIf","ngIfElse"],["elseEditChat",""],[1,"w-100",3,"members","isAgenda","delegates","channel","chat","contactId","instantPost","onChatAdd"],[1,"w-100",3,"members","editChat","channel","chat","contactId","isAgenda","delegates","instantPost","onChatAdd","onChatEdit"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275elementStart"](1,"div",1),D["\u0275\u0275elementStart"](2,"div",2),D["\u0275\u0275elementStart"](3,"div",3),D["\u0275\u0275elementStart"](4,"div",4,5),D["\u0275\u0275listener"]("scroll",function(e){return t.onScrollChat(e)}),D["\u0275\u0275template"](6,Qn,2,0,"p",6),D["\u0275\u0275template"](7,ei,2,3,"div",7),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](8,ii,5,2,"div",8),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("avnonLoader",t.loading),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",!t.chats.length),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",t.chats),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.activeMessage))},directives:[y.a,i.n,i.m,Jn.a,Wn.a],styles:[".edit-description[_ngcontent-%COMP%]{background-color:rgba(9,30,66,.04);box-shadow:none;border:none;border-radius:3px;display:block;min-height:40px;padding:8px 12px;text-decoration:none;font-size:15px}p[_ngcontent-%COMP%]{font-size:15px}h3[_ngcontent-%COMP%]{font-size:16px}  app-chat-card .chat-item{padding:.5rem 0!important}  app-chat-card .btn .dots-ico{display:inline-block;background-size:18px 18px;width:18px;height:18px}  app-chat-card .chat-item--first-item{margin-top:0!important}"]}),e})();var si=n("WZWj"),ri=n("SCsZ"),oi=n("yDbM"),ci=n("Cbnz");function li(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"span",7),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).activeTab=1}),D["\u0275\u0275element"](1,"i",8),D["\u0275\u0275text"](2," Back to owners "),D["\u0275\u0275elementEnd"]()}}function di(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate2"]("Please tell us about your session with ",e.assignment.assigneeFirstName," ",e.assignment.assigneeSurname,"")}}function mi(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"]("Please tell us about your session with ",null==e.assignment?null:e.assignment.companyName," ")}}function pi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"input",15),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).search=t}),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("ngModel",e.search)}}function gi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"tr",16),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const n=t.$implicit;return D["\u0275\u0275nextContext"](3).onTaskOwnerSelect(n)}),D["\u0275\u0275elementStart"](1,"td"),D["\u0275\u0275elementStart"](2,"div",17),D["\u0275\u0275element"](3,"img",18),D["\u0275\u0275pipe"](4,"avatar"),D["\u0275\u0275elementStart"](5,"span",19),D["\u0275\u0275text"](6),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](3);D["\u0275\u0275classProp"]("active",n.taskOwner&&e.taskOwnerID===n.taskOwner.taskOwnerID),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](4,5,e.profilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,"")}}function ui(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",9),D["\u0275\u0275elementStart"](1,"table",10),D["\u0275\u0275elementStart"](2,"thead"),D["\u0275\u0275elementStart"](3,"tr"),D["\u0275\u0275elementStart"](4,"th",11),D["\u0275\u0275text"](5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"th",12),D["\u0275\u0275template"](7,pi,1,1,"input",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"tbody"),D["\u0275\u0275template"](9,gi,7,7,"tr",14),D["\u0275\u0275pipe"](10,"contactSelectorFilter"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](5),D["\u0275\u0275textInterpolate1"]("This activity has been assigned to ",e.task.taskOwners.length," people "),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.task.taskOwners.length>1),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngForOf",D["\u0275\u0275pipeBind2"](10,3,e.task.taskOwners,e.search))}}function hi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"i",33),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](4).isEdit=!0}),D["\u0275\u0275elementEnd"]()}}function vi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",40),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).index;return D["\u0275\u0275nextContext"](4).postExcelling(t)}),D["\u0275\u0275text"](1," Add "),D["\u0275\u0275elementEnd"]()}}function fi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"i",41),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).index;return D["\u0275\u0275nextContext"](4).deleteExcelling(t)}),D["\u0275\u0275elementEnd"]()}}function Ii(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"td"),D["\u0275\u0275elementStart"](1,"div",35),D["\u0275\u0275elementStart"](2,"input",36,37),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().$implicit.comment=t})("keyup",function(t){D["\u0275\u0275restoreView"](e);const n=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](4).excellingSentiment(t,n)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](4,vi,2,0,"button",38),D["\u0275\u0275template"](5,fi,1,0,"i",39),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,i=D["\u0275\u0275nextContext"](4);D["\u0275\u0275classProp"]("error",!t.sentimentID&&t.comment),D["\u0275\u0275advance"](2),D["\u0275\u0275propertyInterpolate1"]("name","excelling-",n,""),D["\u0275\u0275property"]("ngModel",t.comment)("readOnly",t.sentimentID&&i.taskOwner.contactID!==i.contactID||3===i.taskOwner.taskStatusID&&!i.isEdit)("focus",i.focusingSentiment==="excelling_"+n),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",!t.sentimentID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",i.taskOwner.contactID===i.contactID&&t.sentimentID)}}function Di(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275template"](1,Ii,6,8,"td",34),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](4);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.sentimentID&&3===n.taskOwner.taskStatusID||n.isEdit||3!==n.taskOwner.taskStatusID)}}function bi(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",29),D["\u0275\u0275elementStart"](1,"label",23),D["\u0275\u0275text"](2," 1.Which areas is the company excelling at? "),D["\u0275\u0275template"](3,hi,1,0,"i",30),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"table",31),D["\u0275\u0275template"](5,Di,2,1,"tr",32),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",e.taskOwner.contactID===e.contactID&&3===e.task.taskStatusID&&!e.isEdit),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngForOf",e.excelling)}}function Ci(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",40),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).index;return D["\u0275\u0275nextContext"](4).postImproving(t)}),D["\u0275\u0275text"](1," Add "),D["\u0275\u0275elementEnd"]()}}function xi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"i",41),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).index;return D["\u0275\u0275nextContext"](4).deleteImproving(t)}),D["\u0275\u0275elementEnd"]()}}function Si(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"td"),D["\u0275\u0275elementStart"](1,"div",35),D["\u0275\u0275elementStart"](2,"input",36),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().$implicit.comment=t})("keyup",function(t){D["\u0275\u0275restoreView"](e);const n=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](4).improvingSentiment(t,n)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](3,Ci,2,0,"button",38),D["\u0275\u0275template"](4,xi,1,0,"i",39),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,i=D["\u0275\u0275nextContext"](4);D["\u0275\u0275classProp"]("error",!t.sentimentID&&t.comment),D["\u0275\u0275advance"](2),D["\u0275\u0275propertyInterpolate1"]("name","improving-",n,""),D["\u0275\u0275property"]("ngModel",t.comment)("readOnly",t.sentimentID&&i.taskOwner.contactID!==i.contactID||3===i.taskOwner.taskStatusID&&!i.isEdit)("focus",i.focusingSentiment==="improving_"+n),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!t.sentimentID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",i.taskOwner.contactID===i.contactID&&t.sentimentID)}}function yi(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275template"](1,Si,5,8,"td",34),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](4);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.sentimentID&&3===n.taskOwner.taskStatusID||n.isEdit||3!==n.taskOwner.taskStatusID)}}function ki(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",29),D["\u0275\u0275elementStart"](1,"label",23),D["\u0275\u0275text"](2," 2.Doing okay but needs improvement? "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"table",31),D["\u0275\u0275template"](4,yi,2,1,"tr",32),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](4),D["\u0275\u0275property"]("ngForOf",e.needsImprovement)}}function Ei(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",40),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).index;return D["\u0275\u0275nextContext"](4).postRisk(t)}),D["\u0275\u0275text"](1," Add "),D["\u0275\u0275elementEnd"]()}}function wi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"i",41),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2).index;return D["\u0275\u0275nextContext"](4).deleteRisk(t)}),D["\u0275\u0275elementEnd"]()}}function Oi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"td"),D["\u0275\u0275elementStart"](1,"div",35),D["\u0275\u0275elementStart"](2,"input",36),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().$implicit.comment=t})("keyup",function(t){D["\u0275\u0275restoreView"](e);const n=D["\u0275\u0275nextContext"]().index;return D["\u0275\u0275nextContext"](4).riskSentiment(t,n)}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](3,Ei,2,0,"button",38),D["\u0275\u0275template"](4,wi,1,0,"i",39),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,i=D["\u0275\u0275nextContext"](4);D["\u0275\u0275classProp"]("error",!t.sentimentID&&t.comment),D["\u0275\u0275advance"](2),D["\u0275\u0275propertyInterpolate1"]("name","risks-",n,""),D["\u0275\u0275property"]("ngModel",t.comment)("readOnly",t.sentimentID&&i.taskOwner.contactID!==i.contactID||3===i.taskOwner.taskStatusID&&!i.isEdit)("focus",i.focusingSentiment==="risks_"+n),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!t.sentimentID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",i.taskOwner.contactID===i.contactID&&t.sentimentID)}}function Mi(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"tr"),D["\u0275\u0275template"](1,Oi,5,8,"td",34),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](4);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.sentimentID&&3===n.taskOwner.taskStatusID||n.isEdit||3!==n.taskOwner.taskStatusID)}}function Pi(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",29),D["\u0275\u0275elementStart"](1,"label",23),D["\u0275\u0275text"](2," 3.Problem areas / risks "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"table",31),D["\u0275\u0275template"](4,Mi,2,1,"tr",32),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](4),D["\u0275\u0275property"]("ngForOf",e.risks)}}function Ti(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate2"](" Your overall impression of ",e.assignment.assigneeFirstName," ",e.assignment.assigneeSurname," ")}}function ji(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1," Your overall impression of this company "),D["\u0275\u0275elementContainerEnd"]())}function _i(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1,"Very Bad"),D["\u0275\u0275elementContainerEnd"]())}function Ai(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1,"Bad"),D["\u0275\u0275elementContainerEnd"]())}function Vi(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1,"Good"),D["\u0275\u0275elementContainerEnd"]())}function Fi(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1,"Very Good"),D["\u0275\u0275elementContainerEnd"]())}function Li(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275template"](1,_i,2,0,"ng-container",5),D["\u0275\u0275template"](2,Ai,2,0,"ng-container",5),D["\u0275\u0275template"](3,Vi,2,0,"ng-container",5),D["\u0275\u0275template"](4,Fi,2,0,"ng-container",5),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",4===e.sentiment.sentimentRatingID)}}function Ri(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",42),D["\u0275\u0275elementStart"](1,"button",43),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.sentimentRatingID=4}),D["\u0275\u0275text"](2," Very Good "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"button",43),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.sentimentRatingID=3}),D["\u0275\u0275text"](4," Good "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"button",43),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.sentimentRatingID=2}),D["\u0275\u0275text"](6," Bad "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"button",44),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.sentimentRatingID=1}),D["\u0275\u0275text"](8," Very Bad "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275classProp"]("btn-info",4===e.sentiment.sentimentRatingID)("btn-light",4!==e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](2),D["\u0275\u0275classProp"]("btn-info",3===e.sentiment.sentimentRatingID)("btn-light",3!==e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](2),D["\u0275\u0275classProp"]("btn-info",2===e.sentiment.sentimentRatingID)("btn-light",2!==e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](2),D["\u0275\u0275classProp"]("btn-info",1===e.sentiment.sentimentRatingID)("btn-light",1!==e.sentiment.sentimentRatingID)}}function Bi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"textarea",45),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.comment=t}),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("placeholder",24===e.task.taskCategoryID?"Please provide a brief summary of the key lessons you learnt, and any comments or suggestions relating to the session":"Please provide a brief review of company, highlighting any strengths and weakness")("ngModel",e.sentiment.comment)}}function Ni(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"small"),D["\u0275\u0275text"](1," Min 50 characters "),D["\u0275\u0275elementEnd"]())}function $i(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.sentiment.comment," ")}}function Ui(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",46),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).isEdit=!1}),D["\u0275\u0275text"](1,"Cancel "),D["\u0275\u0275elementEnd"]()}}function Hi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",47),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).submit()}),D["\u0275\u0275text"](1,"Next "),D["\u0275\u0275elementEnd"]()}if(2&e){D["\u0275\u0275nextContext"]();const e=D["\u0275\u0275reference"](1),t=D["\u0275\u0275nextContext"](2);D["\u0275\u0275property"]("disabled",e.invalid||t.loading||!t.sentiment.sentimentRatingID)}}function zi(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"form",null,20),D["\u0275\u0275template"](2,bi,6,2,"div",21),D["\u0275\u0275template"](3,ki,5,1,"div",21),D["\u0275\u0275template"](4,Pi,5,1,"div",21),D["\u0275\u0275elementStart"](5,"div",22),D["\u0275\u0275elementStart"](6,"label",23),D["\u0275\u0275template"](7,Ti,2,2,"ng-container",5),D["\u0275\u0275template"](8,ji,2,0,"ng-container",5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](9,Li,5,4,"p",5),D["\u0275\u0275template"](10,Ri,9,16,"div",24),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"div",22),D["\u0275\u0275template"](12,Bi,1,2,"textarea",25),D["\u0275\u0275template"](13,Ni,2,0,"small",5),D["\u0275\u0275template"](14,$i,2,1,"p",5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](15,"div",26),D["\u0275\u0275template"](16,Ui,2,0,"button",27),D["\u0275\u0275template"](17,Hi,2,1,"button",28),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",23===e.task.taskCategoryID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",23===e.task.taskCategoryID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",23===e.task.taskCategoryID),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",24===e.task.taskCategoryID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",23===e.task.taskCategoryID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!e.isEdit&&3===e.taskOwner.taskStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner.contactID===e.contactID&&3!==e.task.taskStatusID||e.isEdit),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.taskOwner.contactID===e.contactID&&3!==e.taskOwner.taskStatusID||e.isEdit),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner.contactID===e.contactID&&3!==e.taskOwner.taskStatusID||e.isEdit),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!e.isEdit&&3===e.taskOwner.taskStatusID),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.isEdit),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner.contactID===e.contactID&&3!==e.taskOwner.taskStatusID||e.isEdit)}}function qi(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",2),D["\u0275\u0275elementStart"](1,"div",3),D["\u0275\u0275template"](2,li,3,0,"span",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](3,di,2,2,"p",5),D["\u0275\u0275template"](4,mi,2,1,"p",5),D["\u0275\u0275template"](5,ui,11,6,"div",6),D["\u0275\u0275template"](6,zi,18,12,"form",5),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",2===e.activeTab&&e.isAdmin&&e.task.taskOwners.length>1),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",24===(null==e.task?null:e.task.taskCategoryID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",23===(null==e.task?null:e.task.taskCategoryID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.activeTab&&e.isAdmin),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.activeTab&&e.taskOwner)}}let Yi=(()=>{class e{constructor(e,t,n,i,a,s,r){this.eventService=e,this.contractService=t,this.taskService=n,this.toastrService=i,this.sentimentService=a,this.router=s,this.userService=r,this.activeTab=1,this.sentiment=new si.a,this.excelling=[],this.needsImprovement=[],this.risks=[],this.originSentiments=[],this.search="",this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}ngOnInit(){this.eventService.eventDetail.subscribe(e=>{e&&(this.event=e,this.getAssignment(this.event.referenceID),this.getTask())})}getTask(){this.taskLoading=!0;let e=23;this.event.delegates.filter(e=>e.contactID===this.contactID&&5===e.eventDelegateTypeID).length>0&&(e=24),this.taskService.getTask(0,e,this.event.eventID,this.contactID,0,0,0,0,!0).subscribe(e=>{const t=e[0],n=t.taskOwners.findIndex(e=>e.contactID===this.contactID);-1!==n?(this.activeTab=2,this.taskOwner=t.taskOwners[n]):this.taskOwner=t.taskOwners[0],this.isAdmin=t.submittedBy===this.contactID,this.isAdmin&&1===t.taskOwners.length&&(this.taskOwner=t.taskOwners[0],this.activeTab=2),this.task=t,this.taskOwner&&this.getSentiment(),24===this.task.taskCategoryID||this.getCompanySentiments(),this.taskLoading=!1})}getAssignment(e){this.loading=!0,this.contractService.getContractAssignment(0,e,0,0,0,0,0,0).subscribe(e=>{this.assignment=e[0],this.loading=!1})}submit(){this.loading=!0,this.sentiment.contactID=this.taskOwner.contactID,this.sentiment.referenceID=this.taskOwner.taskOwnerID,this.sentiment.sentimentCategoryID=24===this.task.taskCategoryID?6:5,this.sentiment.createdByCompanyID=this.assignment.companyID,this.sentiment.datePosted=Object(h.a)(new Date),24===this.task.taskCategoryID&&(this.sentiment.createdByContactID=this.task.submittedBy),this.sentiment.sentimentID?this.sentimentService.updateSentiment(this.sentiment).subscribe(()=>{this.taskOwner.dateSentForSignOff=Object(h.a)(new Date),this.taskOwner.taskStatusID=3,this.taskService.updateTaskOwner(this.taskOwner).subscribe(()=>{this.router.navigate(["/forms/complete"])})}):this.sentimentService.addSentiment(this.sentiment).subscribe(()=>{this.loading=!1,this.taskOwner.taskStatusID=3,this.taskOwner.dateSentForSignOff=Object(h.a)(new Date),this.taskService.updateTaskOwner(this.taskOwner).subscribe(),this.router.navigate(["/forms/complete"])})}onTaskOwnerSelect(e){this.taskOwner=e,this.activeTab=2,this.getSentiment()}getSentiment(){this.sentimentLoading=!0,this.sentimentService.getSentiments(0,0,0,0,24===this.task.taskCategoryID?6:5,this.taskOwner.taskOwnerID,0,0).subscribe(e=>{e[0]&&(this.sentiment=e[0]),this.sentimentLoading=!1})}getCompanySentiments(){this.sentimentsLoading=!0,this.sentimentService.getSentiments(0,0,0,0,7,this.taskOwner.taskOwnerID,0,0).subscribe(e=>{e.forEach(e=>{this.originSentiments.push(Object(h.l)(e))}),this.excelling=e.filter(e=>4===e.sentimentRatingID),this.needsImprovement=e.filter(e=>3===e.sentimentRatingID),this.risks=e.filter(e=>1===e.sentimentRatingID),this.excelling.push(new si.a),this.needsImprovement.push(new si.a),this.risks.push(new si.a),this.sentimentsLoading=!1})}excellingSentiment(e,t){e.keyCode===L.a.ENTER&&(this.excelling[t].sentimentID?this.updateExcelling(e,t):this.postExcelling(t))}postExcelling(e){const t=this.excelling[e];t.comment&&(t.contactID=this.contactID,t.referenceID=this.taskOwner.taskOwnerID,t.sentimentCategoryID=7,t.sentimentRatingID=4,t.createdByCompanyID=this.assignment.companyID,t.datePosted=Object(h.a)(new Date),this.excelling.push(new si.a),this.focusingSentiment="excelling_"+(this.excelling.length-1),this.sentimentService.addSentiment(t).subscribe(e=>{t.sentimentID=e.inOut_SentimentID,this.originSentiments.push(t)}))}updateExcelling(e,t){const n=e.target.value;if(!n)return void this.toastrService.error("Comment required");const i=this.excelling[t],a=this.originSentiments.find(e=>e.sentimentID===i.sentimentID),s=this.originSentiments.findIndex(e=>e.sentimentID===i.sentimentID);a.comment!==n&&(this.originSentiments[s].comment=n,this.sentimentService.updateSentiment(i).subscribe())}deleteExcelling(e){const t=this.excelling.splice(e,1);t[0].sentimentID&&this.sentimentService.deleteSentiment(t[0].sentimentID).subscribe(()=>{},()=>{this.excelling.push(t[0])})}improvingSentiment(e,t){e.keyCode===L.a.ENTER&&(this.needsImprovement[t].sentimentID?this.updateImproving(e,t):this.postImproving(t))}postImproving(e){const t=this.needsImprovement[e];t.comment&&(t.contactID=this.contactID,t.referenceID=this.taskOwner.taskOwnerID,t.sentimentCategoryID=7,t.sentimentRatingID=3,t.createdByCompanyID=this.assignment.companyID,t.datePosted=Object(h.a)(new Date),this.needsImprovement.push(new si.a),this.focusingSentiment="improving_"+(this.needsImprovement.length-1),this.sentimentService.addSentiment(t).subscribe(e=>{t.sentimentID=e.inOut_SentimentID,this.originSentiments.push(t)}))}updateImproving(e,t){const n=e.target.value;if(!n)return void this.toastrService.error("Comment required");const i=this.needsImprovement[t],a=this.originSentiments.find(e=>e.sentimentID===i.sentimentID),s=this.originSentiments.findIndex(e=>e.sentimentID===i.sentimentID);a.comment!==n&&(this.originSentiments[s].comment=n,this.sentimentService.updateSentiment(i).subscribe())}deleteImproving(e){const t=this.needsImprovement.splice(e,1);t[0].sentimentID&&this.sentimentService.deleteSentiment(t[0].sentimentID).subscribe(()=>{},()=>{this.needsImprovement.push(t[0])})}riskSentiment(e,t){e.keyCode===L.a.ENTER&&(this.risks[t].sentimentID?this.updateRisk(e,t):this.postRisk(t))}postRisk(e){const t=this.risks[e];t.comment&&(t.contactID=this.contactID,t.referenceID=this.taskOwner.taskOwnerID,t.sentimentCategoryID=7,t.sentimentRatingID=1,t.createdByCompanyID=this.assignment.companyID,t.datePosted=Object(h.a)(new Date),this.risks.push(new si.a),this.focusingSentiment="risks_"+(this.risks.length-1),this.sentimentService.addSentiment(t).subscribe(e=>{t.sentimentID=e.inOut_SentimentID,this.originSentiments.push(t)}))}updateRisk(e,t){const n=e.target.value;if(!n)return void this.toastrService.error("Comment required");const i=this.risks[t],a=this.originSentiments.find(e=>e.sentimentID===i.sentimentID),s=this.originSentiments.findIndex(e=>e.sentimentID===i.sentimentID);a.comment!==n&&(this.originSentiments[s].comment=n,this.sentimentService.updateSentiment(i).subscribe())}deleteRisk(e){const t=this.risks.splice(e,1);t[0].sentimentID&&this.sentimentService.deleteSentiment(t[0].sentimentID).subscribe(()=>{},()=>{this.risks.push(t[0])})}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](ht.a),D["\u0275\u0275directiveInject"](b.a),D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](ri.a),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-meeting-feedback"]],decls:2,vars:2,consts:[[1,"d-flex","w-100","pl-3","pr-3",3,"avnonLoader"],["class","card-body d-flex flex-column pl-0 pt-0 hidden-body",4,"ngIf"],[1,"card-body","d-flex","flex-column","pl-0","pt-0","hidden-body"],[1,"d-flex","w-100","p-2","sticky-top-item"],["class","cursor-pointer text-primary",3,"click",4,"ngIf"],[4,"ngIf"],["class","owners-list mb-4",4,"ngIf"],[1,"cursor-pointer","text-primary",3,"click"],[1,"fas","fa-chevron-left"],[1,"owners-list","mb-4"],[1,"table"],[1,"sticky-top-item"],[1,"text-right","sticky-top-item"],["type","text","class","form-control search-input","placeholder","Search",3,"ngModel","ngModelChange",4,"ngIf"],[3,"active","click",4,"ngFor","ngForOf"],["type","text","placeholder","Search",1,"form-control","search-input",3,"ngModel","ngModelChange"],[3,"click"],[1,"owner-item","d-flex","align-items-center"],[1,"avatar","avatar-rounded","avatar-36",3,"src"],[1,"ml-2","mr-1","mb-auto","mt-1"],["f","ngForm"],["class","form-group mb-4",4,"ngIf"],[1,"form-group"],[1,"font-semi-bold"],["class","d-flex flex-wrap w-100 mt-2",4,"ngIf"],["name","comment","class","form-control","minlength","50","required","",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"form-group","text-right"],["class","btn btn-light","type","button",3,"click",4,"ngIf"],["class","btn btn-primary ml-2","type","button",3,"disabled","click",4,"ngIf"],[1,"form-group","mb-4"],["class","fas fa-pencil-alt cursor-pointer ml-2",3,"click",4,"ngIf"],[1,"sentiments-table","w-100"],[4,"ngFor","ngForOf"],[1,"fas","fa-pencil-alt","cursor-pointer","ml-2",3,"click"],[3,"error",4,"ngIf"],[1,"d-flex","align-items-center"],["type","text","placeholder","Add a message and press enter",1,"form-control",3,"ngModel","name","readOnly","focus","ngModelChange","keyup"],["excelling",""],["class","btn btn-sm btn-outline-primary mr-1","type","button",3,"click",4,"ngIf"],["class","fas fa-trash-alt delete-action",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-outline-primary","mr-1",3,"click"],[1,"fas","fa-trash-alt","delete-action",3,"click"],[1,"d-flex","flex-wrap","w-100","mt-2"],["type","button",1,"btn","btn-sm","mb-1","mr-1",3,"click"],["type","button",1,"btn","btn-sm","mb-1",3,"click"],["name","comment","minlength","50","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-primary","ml-2",3,"disabled","click"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275template"](1,qi,7,5,"div",1),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading||t.taskLoading||t.sentimentLoading||t.sentimentsLoading),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.task&&t.event&&t.assignment))},directives:[y.a,i.n,i.m,a.b,a.q,a.t,a.E,a.r,a.s,oi.a,a.n,a.A],pipes:[ci.a,k.a],styles:[".avatar-60[_ngcontent-%COMP%]{min-width:60px;max-height:60px}.avatar-36[_ngcontent-%COMP%]{max-height:36px;object-fit:cover}.btn-light[_ngcontent-%COMP%]{border-color:#a5a5a5;color:#a5a5a5}.fs-16[_ngcontent-%COMP%]{font-size:16px}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.owners-list[_ngcontent-%COMP%]{width:100%;float:left}.owners-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;padding-top:0;border-top:0}.owners-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .owners-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px dotted #aaa}.owners-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody.active[_ngcontent-%COMP%], .owners-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#edf1f5}.sticky-top-item[_ngcontent-%COMP%]{background:#fff;position:sticky;top:0;z-index:1}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.logo-box[_ngcontent-%COMP%]{display:flex;height:60px;width:60px;border:1px solid #f3f3f3;align-items:center;min-width:60px}.logo-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:auto}label[_ngcontent-%COMP%]{font-size:17px}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px solid #eaeaea;vertical-align:middle;margin-bottom:6px}.sentiments-table[_ngcontent-%COMP%]   td.error[_ngcontent-%COMP%]{border-bottom:1px solid #a71d2a!important}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #eaeaea}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover{border-bottom-color:#15aaf5}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover   .delete-action[_ngcontent-%COMP%], .sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{display:inline-block}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:0;margin-right:24px}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:read-only{background:#fff}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete-action[_ngcontent-%COMP%]{font-size:16px;cursor:pointer;color:#ed0012;display:none;margin-right:12px;margin-left:12px}.sentiments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete-action[_ngcontent-%COMP%]:hover{opacity:.8}"]}),e})();var Ki=n("6d/g"),Gi=n("WhH8");function Ji(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",7),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onMemberAdd()}),D["\u0275\u0275element"](1,"span",8),D["\u0275\u0275text"](2,"Add "),D["\u0275\u0275elementEnd"]()}}function Wi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",25),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"](2).updateStatus(n,2,i)}),D["\u0275\u0275text"](1,"Mark as confirmed"),D["\u0275\u0275elementEnd"]()}}function Xi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"a",25),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](2),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"](2).updateStatus(n,1,i)}),D["\u0275\u0275text"](1,"Mark as declined"),D["\u0275\u0275elementEnd"]()}}function Zi(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",4),D["\u0275\u0275elementStart"](1,"div",20),D["\u0275\u0275elementStart"](2,"button",21),D["\u0275\u0275element"](3,"span",22),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"ul",23),D["\u0275\u0275elementStart"](5,"li"),D["\u0275\u0275template"](6,Wi,2,0,"a",24),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"li"),D["\u0275\u0275template"](8,Xi,2,0,"a",24),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"li"),D["\u0275\u0275elementStart"](10,"a",25),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](),n=t.$implicit,i=t.index;return D["\u0275\u0275nextContext"](2).removeDelegate(n,i)}),D["\u0275\u0275text"](11,"Remove"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](6),D["\u0275\u0275property"]("ngIf",2!==e.eventDelegateStatusID),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",1!==e.eventDelegateStatusID)}}function Qi(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",26),D["\u0275\u0275text"](1,"Confirmed"),D["\u0275\u0275elementEnd"]())}function ea(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",27),D["\u0275\u0275text"](1,"Declined"),D["\u0275\u0275elementEnd"]())}function ta(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",27),D["\u0275\u0275text"](1,"Pending"),D["\u0275\u0275elementEnd"]())}function na(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"span",28),D["\u0275\u0275text"](1,"Pending"),D["\u0275\u0275elementEnd"]())}function ia(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"span",29),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"]().$implicit;return D["\u0275\u0275nextContext"](2).openReviewsModal(t)}),D["\u0275\u0275text"](1," Read reviews "),D["\u0275\u0275elementEnd"]()}}function aa(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",9),D["\u0275\u0275elementStart"](1,"span",10),D["\u0275\u0275element"](2,"img",11),D["\u0275\u0275pipe"](3,"avatar"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",12),D["\u0275\u0275elementStart"](5,"h2"),D["\u0275\u0275text"](6),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](7,Zi,12,2,"div",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"div",14),D["\u0275\u0275elementStart"](9,"div",15),D["\u0275\u0275template"](10,Qi,2,0,"span",16),D["\u0275\u0275template"](11,ea,2,0,"span",17),D["\u0275\u0275template"](12,ta,2,0,"span",17),D["\u0275\u0275template"](13,na,2,0,"span",18),D["\u0275\u0275template"](14,ia,2,0,"span",19),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](3,9,e.profileImage),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,""),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.adminCheck),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",2===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",0===e.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.adminCheck&&e.hasReview)}}function sa(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div"),D["\u0275\u0275elementStart"](1,"div",2),D["\u0275\u0275elementStart"](2,"span",3),D["\u0275\u0275text"](3),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",4),D["\u0275\u0275template"](5,Ji,3,0,"a",5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](6,aa,15,11,"div",6),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate1"](" ",e.members.length," Panel Members "),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.adminCheck),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",e.members)}}let ra=(()=>{class e{constructor(e,t,n,i,a,s,r,o,c){this.eventService=e,this.modal=t,this.router=n,this.contactService=i,this.notificationService=a,this.signalRService=s,this.activatedRoute=r,this.formService=o,this.userService=c,this.unsubscribe=new f.a,this.event=new F.a,this.members=[],this.contacts=[],this.panelMemberAnswers=[],this.user=this.userService.user.getValue(),this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.activatedRoute.parent.params.subscribe(e=>{this.eventID=+e.eventID,this.loadData()})}loadData(){this.loading=!0,this.contactID=this.user.contactID,this.eventService.selectEvent(0,this.eventID).pipe(Object(u.a)(this.unsubscribe)).subscribe(e=>{const t=e[0]||null;if(t){let e=Object(h.l)(t.delegates);e=e.filter(e=>e.eventDelegateTypeID===ot.b.PANEL_MEMBER),this.members=e,this.event=t,this.adminCheck=this.event.scheduledbyID===this.contactID||this.superAdmin,this.getContactConnect(),this.eventService.loadEventDetail(t),this.loadReviews(),this.loading=!1}})}loadReviews(){this.reviewsLoading=!0,this.formService.panelMemberAnswers(0,0,0,0,this.eventID,0).subscribe(e=>{this.panelMemberAnswers=e,this.members=this.members.map(t=>(t.hasReview=e.filter(e=>e.contactID===t.contactID).length>0,t)),this.reviewsLoading=!1})}onMemberAdd(){const e=this.modal.open(se.a,{backdrop:"static",size:"md"});e.componentInstance.selectedContacts=Object(h.l)(this.members),e.componentInstance.teamMember=!0,e.result.then(e=>{e&&e.length&&this.addRemoveDelegates(e,this.members,ot.b.PANEL_MEMBER)})}removeDelegate(e,t){const n=this.modal.open(dt.a);n.componentInstance.objectType="Delegate",n.componentInstance.objectDetails=`${e.firstName} ${e.surname} Delegate`,n.result.then(n=>{n&&"Yes"===n&&this.eventService.deleteEventDelegate(e.eventDelegateID).subscribe(()=>{this.members.splice(t,1)})})}updateStatus(e,t,n){e.eventDelegateStatusID=t,this.eventService.updateEventDelegate(e).subscribe(()=>{this.members[n].eventDelegateStatusID=t})}getContactConnect(){this.contactService.getContactConnect(0,this.contactID,0,0,"",0,1e3).subscribe(e=>{this.contacts=e})}addRemoveDelegates(e,t,n){const i=t.filter(t=>!e.some(e=>e.contactID===t.contactID));this.removeDelegates(i,t),e.forEach(e=>{t.filter(t=>t.contactID===e.contactID).length>0||this.addNewDelegate(e,n,t)})}addNewDelegate(e,t,n){this.eventService.insertEventDelegate({eventID:this.event.eventID,contactID:e.contactID,addedByID:this.contactID,assessmentScore:0,contractNumber:"",eventDelegateTypeID:t,eventDelegateStatusID:1,setaID:0,endDate:"",startDate:"",projectedEndDate:""}).subscribe(t=>{t.eventDelegateID=t.inOut_EventDelegateID,(t=Object.assign(Object.assign({},t),e)).profileImage=t.profilePhoto,n.push(t),this.notifyDelegate(t)})}removeDelegates(e,t){e.forEach(e=>{this.eventService.deleteEventDelegate(e.eventDelegateID).subscribe(()=>{const n=t.findIndex(t=>t.contactID===e.contactID);t.splice(n,1)})})}notifyDelegate(e){if(e.contactID!==this.contactID){const t=Object(h.a)(new Date),n=`You've been selected as a Panel Member at ${this.event.eventTitle} on ${e.delegateStartDate}`,i={notificationCategoryID:mt.a.event_invite_event_deligate,referenceID:this.event.eventID,contactID:e.contactID,description:n,createdContact:this.contactID},a=t+"|"+this.event.eventID,s={date:t,body:n,topic:n,senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:i.referenceID,notificationType:at.a.eventRequest,senderId:i.createdContact,receivers:[i.contactID],uniqueId:a,discussionId:0};this.notificationService.noticeNotification(i).subscribe(()=>{this.signalRService.transferMessage("dashboard",s)})}}openReviewsModal(e){const t=this.modal.open(Ki.a,{backdrop:"static",size:"lg"});t.componentInstance.panelMember=e,t.componentInstance.answers=this.panelMemberAnswers.filter(t=>t.contactID===e.contactID)}toContactProfile(e){this.router.navigate(["/contacts/profile",e])}toCompanyProfile(e){this.router.navigate(["/company",e])}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](Gi.a),D["\u0275\u0275directiveInject"](Y.a),D["\u0275\u0275directiveInject"](gt.a),D["\u0275\u0275directiveInject"](p.a),D["\u0275\u0275directiveInject"](vt.a),D["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-panel-members"]],decls:2,vars:2,consts:[[1,"d-flex","w-100","flex-column",3,"avnonLoader"],[4,"ngIf"],[1,"col-12","d-flex","pl-3","pr-3","justify-content-between","align-items-center","filter-container","border-bottom"],[1,"post-count"],[1,"actions"],["class","ml-auto cursor-pointer",3,"click",4,"ngIf"],["class","entry",4,"ngFor","ngForOf"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],[1,"entry"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48","cover",3,"src"],[1,"d-flex"],["class","actions",4,"ngIf"],[1,"entry-content","pt-2"],[1,"d-flex","w-100","align-items-center"],["class","tag tag-green mr-auto",4,"ngIf"],["class","tag tag-red mr-auto",4,"ngIf"],["class","tag tag-orange mr-auto",4,"ngIf"],["class","cursor-pointer text-primary",3,"click",4,"ngIf"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"tag","tag-green","mr-auto"],[1,"tag","tag-red","mr-auto"],[1,"tag","tag-orange","mr-auto"],[1,"cursor-pointer","text-primary",3,"click"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275template"](1,sa,7,3,"div",1),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading||t.contactsLoading||t.reviewsLoading),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event&&t.event.eventID&&2===t.event.eventCategoryID))},directives:[y.a,i.n,i.m],pipes:[k.a],styles:["agm-map[_ngcontent-%COMP%]{height:300px}.update-event-detail[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after, .update-invites[_ngcontent-%COMP%]   .dropdown-toggle.no-icon[_ngcontent-%COMP%]:after{content:none}.update-event-detail[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%], .update-invites[_ngcontent-%COMP%]   .icon-right[_ngcontent-%COMP%]{background-position:100%}.attend-section[_ngcontent-%COMP%]{min-height:60px}.attend-section[_ngcontent-%COMP%]:hover   .btn-cancel-attend[_ngcontent-%COMP%]{display:inline}.attend-section[_ngcontent-%COMP%]   .btn-cancel-attend[_ngcontent-%COMP%]{display:none}.section-overview[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:20px}.textarea-event-profile[_ngcontent-%COMP%]{height:auto}.edit-description[_ngcontent-%COMP%]{background-color:rgba(9,30,66,.04);box-shadow:none;border:none;border-radius:3px;display:block;min-height:40px;padding:8px 12px;text-decoration:none}.avatar-60[_ngcontent-%COMP%]{max-height:60px;object-fit:cover}.applicants-table[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{font-size:16px!important}.applicants-table[_ngcontent-%COMP%]   .s-block[_ngcontent-%COMP%]{font-size:15px}.applicants-table[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:14px}.applicants-table[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{border-color:#a5a5a5}.applicants-table[_ngcontent-%COMP%]   .title-avatar[_ngcontent-%COMP%]   .s-block[_ngcontent-%COMP%]{padding-left:70px}.filter-applicants[_ngcontent-%COMP%]{flex-wrap:wrap}.filter-applicants[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative;border:1px solid #c8c8c8;margin-bottom:10px}.filter-applicants[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{border:1px solid #406fe4!important;color:#406fe4}.filter-applicants[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#406fe4!important}.filter-applicants[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:14px}  ngb-timepicker .form-control{border-left:none;border-right:none;border-top:none;box-shadow:none;border-radius:0;outline:none}  ngb-timepicker .form-control:focus{box-shadow:none}.dropdown-toggle[_ngcontent-%COMP%]:after, .dropdown-toggle[_ngcontent-%COMP%]:before{display:none}"]}),e})();var oa=n("CEMh");function ca(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",6),D["\u0275\u0275elementStart"](1,"span"),D["\u0275\u0275text"](2),D["\u0275\u0275pipe"](3,"number"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"a",7),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).sendFeedback()}),D["\u0275\u0275element"](5,"span",8),D["\u0275\u0275text"](6,"Send "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate2"](" ",e.sentiments.length," feedback forms have been submitted and overall score is ",D["\u0275\u0275pipeBind2"](3,2,e.overallScore,"1.1-2"),"/5 ")}}function la(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"p",10),D["\u0275\u0275text"](1," Your feedback is pending. "),D["\u0275\u0275elementStart"](2,"button",11),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).adminSentiment=!0}),D["\u0275\u0275text"](3,"Post Feedback"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function da(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,la,4,0,"p",9),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3!==e.taskOwner.taskStatusID)}}function ma(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",15),D["\u0275\u0275element"](1,"img",16),D["\u0275\u0275pipe"](2,"avatar"),D["\u0275\u0275elementStart"](3,"div",17),D["\u0275\u0275elementStart"](4,"h3",18),D["\u0275\u0275text"](5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"span",19),D["\u0275\u0275text"](7,"Pending Feedback"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]().$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](2,3,e.profilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," ")}}function pa(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,ma,8,5,"div",14),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3!==e.taskStatusID)}}function ga(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"i",23),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](4);return t.isEdit=!0,t.adminSentiment=!0}),D["\u0275\u0275elementEnd"]()}}function ua(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",15),D["\u0275\u0275element"](1,"img",16),D["\u0275\u0275pipe"](2,"avatar"),D["\u0275\u0275elementStart"](3,"div",17),D["\u0275\u0275elementStart"](4,"h3",18),D["\u0275\u0275text"](5),D["\u0275\u0275template"](6,ga,1,0,"i",20),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"span",21),D["\u0275\u0275element"](8,"i"),D["\u0275\u0275text"](9),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](10,"p",22),D["\u0275\u0275text"](11),D["\u0275\u0275pipe"](12,"ellipsis"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](2,9,e.profilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate2"](" ",e.firstname," ",e.surname," "),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.contactID===n.contactID),D["\u0275\u0275advance"](2),D["\u0275\u0275classMapInterpolate1"]("mr-1 fas fa-thumbs-",5===e.sentimentRatingID?"up":"down",""),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",5===e.sentimentRatingID?"Recommends":"Not recommends"," this event "),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](D["\u0275\u0275pipeBind2"](12,11,null==e?null:e.comment,150))}}function ha(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,pa,2,1,"ng-container",12),D["\u0275\u0275template"](2,ua,13,14,"div",13),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",e.taskOwners),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngForOf",e.sentiments)}}function va(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"i",23),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](4).isEdit=!0}),D["\u0275\u0275elementEnd"]()}}function fa(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"div",15),D["\u0275\u0275element"](2,"img",16),D["\u0275\u0275pipe"](3,"avatar"),D["\u0275\u0275elementStart"](4,"div",17),D["\u0275\u0275elementStart"](5,"h3",18),D["\u0275\u0275text"](6),D["\u0275\u0275template"](7,va,1,0,"i",20),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"span",21),D["\u0275\u0275element"](9,"i"),D["\u0275\u0275text"](10),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"p",22),D["\u0275\u0275text"](12),D["\u0275\u0275pipe"](13,"ellipsis"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("src",D["\u0275\u0275pipeBind1"](3,9,e.sentiment.profilePhoto),D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](4),D["\u0275\u0275textInterpolate2"](" ",e.sentiment.firstname," ",e.sentiment.surname," "),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.sentiment.contactID===e.contactID),D["\u0275\u0275advance"](2),D["\u0275\u0275classMapInterpolate1"]("mr-1 fas fa-thumbs-",5===e.sentiment.sentimentRatingID?"up":"down",""),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",5===e.sentiment.sentimentRatingID?"Recommends":"Not recommends"," this event "),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](D["\u0275\u0275pipeBind2"](13,11,null==e.sentiment?null:e.sentiment.comment,150))}}function Ia(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"div",29),D["\u0275\u0275elementStart"](2,"label",30),D["\u0275\u0275text"](3," Do you recommend this event? "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",31),D["\u0275\u0275elementStart"](5,"button",32),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.sentimentRatingID=5}),D["\u0275\u0275text"](6," Yes "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"button",33),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.sentimentRatingID=1}),D["\u0275\u0275text"](8," No "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"div",29),D["\u0275\u0275elementStart"](10,"textarea",34),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).sentiment.comment=t}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"small"),D["\u0275\u0275text"](12," Min 50 characters "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](5),D["\u0275\u0275classProp"]("btn-info",5===e.sentiment.sentimentRatingID)("btn-light",5!==e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](2),D["\u0275\u0275classProp"]("btn-info",1===e.sentiment.sentimentRatingID)("btn-light",1!==e.sentiment.sentimentRatingID),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("placeholder","Your thoughts about this event and any suggestions on how we can improve")("ngModel",e.sentiment.comment)}}function Da(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",35),D["\u0275\u0275listener"]("click",function(){D["\u0275\u0275restoreView"](e);const t=D["\u0275\u0275nextContext"](3);return t.isEdit=!1,t.adminSentiment=!1}),D["\u0275\u0275text"](1,"Cancel "),D["\u0275\u0275elementEnd"]()}}function ba(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",36),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).submit()}),D["\u0275\u0275text"](1,"Submit "),D["\u0275\u0275elementEnd"]()}if(2&e){D["\u0275\u0275nextContext"]();const e=D["\u0275\u0275reference"](1),t=D["\u0275\u0275nextContext"](2);D["\u0275\u0275property"]("disabled",e.invalid||t.loading||!t.sentiment.sentimentRatingID)}}function Ca(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"form",24,25),D["\u0275\u0275template"](2,fa,14,14,"ng-container",4),D["\u0275\u0275template"](3,Ia,13,10,"ng-container",4),D["\u0275\u0275elementStart"](4,"div",26),D["\u0275\u0275template"](5,Da,2,0,"button",27),D["\u0275\u0275template"](6,ba,2,1,"button",28),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",!e.isEdit&&3===e.taskOwner.taskStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner.contactID===e.contactID&&3!==e.taskOwner.taskStatusID||e.isEdit),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.isEdit||e.adminSentiment),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner.contactID===e.contactID&&3!==e.taskOwner.taskStatusID||e.isEdit)}}function xa(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",2),D["\u0275\u0275template"](1,ca,7,5,"div",3),D["\u0275\u0275template"](2,da,2,1,"ng-container",4),D["\u0275\u0275template"](3,ha,3,2,"ng-container",4),D["\u0275\u0275template"](4,Ca,7,4,"form",5),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.isAdmin),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.isAdmin&&e.taskOwner&&!e.adminSentiment),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.isAdmin&&!e.adminSentiment),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner&&(e.adminSentiment||2===e.activeTab))}}let Sa=(()=>{class e{constructor(e,t,n,i,a,s,r,o,c,l){this.eventService=e,this.taskService=t,this.distributionService=n,this.toastrService=i,this.signalRService=a,this.sentimentService=s,this.router=r,this.modal=o,this.userService=c,this.notificationService=l,this.delegates=[],this.sentiment=new si.a,this.sentiments=[],this.taskOwners=[],this.activeTab=2,this.overallScore=0,this.adminSentiment=!1,this.destroy$=new f.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.eventService.eventDetail.pipe(Object(u.a)(this.destroy$)).subscribe(e=>{e&&(this.event=e,this.isAdmin=this.event.scheduledbyID===this.contactID||this.superAdmin,this.isAdmin&&(this.activeTab=1),this.delegates=this.event.delegates,this.getTask())})}sendFeedback(){const e=this.modal.open(se.a,{size:"md",backdrop:"static"});e.componentInstance.selectedContacts=Object(h.l)(this.taskOwners),e.componentInstance.contacts=Object(h.l)(this.delegates),e.componentInstance.staticSelector=!0,e.result.then(e=>{e.length>0&&this.postFeedbacks(e)})}postFeedbacks(e){this.loading=!0;const t={taskTitle:"Feedback: "+this.event.eventTitle,taskDescription:"",endDate:Object(h.a)(new Date),taskValue:0,taskCategoryID:18,referenceID:this.event.eventID,autoSignOff:!0,taskModeID:0,submittedBy:this.event.scheduledbyID,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:0,taskTypeID:0,formID:0};(this.taskOwners.length?Object(A.a)([]):this.taskService.addTask(t)).pipe(Object(V.a)(t=>{const n=this.taskOwners.length?this.taskOwners[0].taskID:t.inOut_TaskID,i=[];return e.forEach(e=>{if(this.taskOwners.some(t=>t.contactID===e.contactID))return;const t=new rt.a;t.taskID=n,t.contactID=e.contactID,t.taskOwnerCategoryID=18,t.referenceID=this.event.eventID,t.companyID=e.companyID,i.push(this.taskService.addTaskOwner(t))}),i.length?Object(_.a)(i):Object(A.a)([])})).subscribe(e=>{e.length>0&&this.toastrService.success("Feedback sent"),e.forEach(e=>{const t=this.delegates.find(t=>t.contactID===e.contactID);t&&(e.firstName=t.firstName,e.surname=t.surname),this.taskOwners.push(e),this.noticeTaskOwners(e.taskID,e.contactID)}),this.loading=!1})}noticeTaskOwners(e,t){if(this.contactID===t)return;const n=new Date,a=Object(i.y)(n,"yyyy-MM-dd HH:mm:ss","en-UK"),s="We'd like to find out what you thought of "+this.event.eventTitle,r={notificationCategoryID:mt.a.activity_task_owner,referenceID:e,contactID:t,description:s,createdContact:this.contactID},o=a+"|"+e,c={date:a,body:s.replace("|",""),topic:s.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:r.referenceID,notificationType:at.a.applicantRequest,senderId:r.createdContact,receivers:[r.contactID],uniqueId:o,discussionId:0};this.notificationService.noticeNotification(r).subscribe(()=>{this.signalRService.transferMessage("dashboard",c)})}getTask(){this.taskLoading=!0,this.taskService.getTaskOwners(0,this.event.eventID,18,0,0,0).subscribe(e=>{this.taskOwners=Object(h.j)(e,"taskOwnerID"),this.taskOwner=this.taskOwners.find(e=>e.contactID===this.contactID),this.getSentiments(),this.taskLoading=!1})}submit(){this.loading=!0,this.sentiment.contactID=this.taskOwner.contactID,this.sentiment.referenceID=this.event.eventID,this.sentiment.sentimentCategoryID=8,this.sentiment.createdByCompanyID=this.event.providerID,this.sentiment.datePosted=Object(h.a)(new Date),this.sentiment.createdByContactID=this.taskOwner.submittedBy,this.sentiment.sentimentID?this.sentimentService.updateSentiment(this.sentiment).subscribe(()=>{this.taskOwner.dateSentForSignOff=Object(h.a)(new Date),this.taskOwner.taskStatusID=3,this.noticeAdmin(this.taskOwner.taskID,this.taskOwner.submittedBy),this.taskService.updateTaskOwner(this.taskOwner).subscribe(()=>{this.router.navigate(["/forms/complete"])})}):this.sentimentService.addSentiment(this.sentiment).subscribe(()=>{this.loading=!1,this.noticeAdmin(this.taskOwner.taskID,this.taskOwner.submittedBy),this.taskOwner.taskStatusID=3,this.taskOwner.dateSentForSignOff=Object(h.a)(new Date),this.taskService.updateTaskOwner(this.taskOwner).subscribe(),this.router.navigate(["/forms/complete"])})}getSentiments(){let e=this.contactID;this.isAdmin&&(e=0),this.sentimentService.getSentiments(e,0,0,0,8,this.event.eventID,0,this.event.scheduledbyID).subscribe(e=>{if(this.sentiments=e,!this.isAdmin&&this.taskOwner&&e.length){const t=e.find(e=>e.contactID===this.contactID);t&&(this.sentiment=t)}if(this.isAdmin&&this.taskOwner&&e.length){const t=e.find(e=>e.contactID===this.contactID);t&&(this.sentiment=t)}this.overallScore=e.reduce((e,t)=>e+t.sentimentRatingID,0)/e.length||0,this.sentimentsLoading=!1})}noticeAdmin(e,t){const n=new Date,a=Object(i.y)(n,"yyyy-MM-dd HH:mm:ss","en-UK"),s=`${this.user.firstName} ${this.user.surname}|has ${3===this.taskOwner.taskStatusID?"updated":"posted"} a review for ${this.event.eventTitle}`,r={notificationCategoryID:mt.a.activity_task_owner,referenceID:e,contactID:t,description:s,createdContact:this.contactID},o=a+"|"+e,c={date:a,body:s.replace("|",""),topic:s.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:r.referenceID,notificationType:at.a.applicantRequest,senderId:r.createdContact,receivers:[r.contactID],uniqueId:o,discussionId:0};this.notificationService.noticeNotification(r).subscribe(()=>{this.signalRService.transferMessage("dashboard",c)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](b.a),D["\u0275\u0275directiveInject"](K.a),D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](gt.a),D["\u0275\u0275directiveInject"](ri.a),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](Y.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-sentiment"]],decls:2,vars:2,consts:[[1,"d-flex","w-100",3,"avnonLoader"],["class","card-body d-flex flex-column p-0 filter-container",4,"ngIf"],[1,"card-body","d-flex","flex-column","p-0","filter-container"],["class","actions-filter w-100 d-flex align-items-center pl-3 pr-3 filter-container",4,"ngIf"],[4,"ngIf"],["class","pt-2",4,"ngIf"],[1,"actions-filter","w-100","d-flex","align-items-center","pl-3","pr-3","filter-container"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],["class","pl-3 pt-3 pr-3",4,"ngIf"],[1,"pl-3","pt-3","pr-3"],[1,"btn","btn-primary","btn-sm",3,"click"],[4,"ngFor","ngForOf"],["class","common-list-item w-100 d-flex flex-row border-top-0",4,"ngFor","ngForOf"],["class","common-list-item w-100 d-flex flex-row border-top-0",4,"ngIf"],[1,"common-list-item","w-100","d-flex","flex-row","border-top-0"],["alt","Avatar",1,"avatar-48","avatar",3,"src"],[1,"list-data","d-flex","flex-column","ml-2","flex-grow-1"],[1,"mb-1"],[1,"tag","tag-orange","mr-auto"],["class","fas fa-pencil-alt cursor-pointer ml-2",3,"click",4,"ngIf"],[1,"meta","mb-2"],[1,"mb-0"],[1,"fas","fa-pencil-alt","cursor-pointer","ml-2",3,"click"],[1,"pt-2"],["f","ngForm"],[1,"pl-3","pr-3","form-group","d-flex","justify-content-between"],["class","btn btn-light btn-sm","type","button",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm ml-auto","type","button",3,"disabled","click",4,"ngIf"],[1,"form-group","pl-3","pr-3"],[1,"font-semi-bold"],[1,"d-flex","flex-wrap","w-100","mt-2"],["type","button",1,"btn","btn-sm","mb-1","mr-1",3,"click"],["type","button",1,"btn","btn-sm","mb-1",3,"click"],["name","comment","minlength","50","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","ml-auto",3,"disabled","click"]],template:function(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"div",0),D["\u0275\u0275template"](1,xa,5,4,"div",1),D["\u0275\u0275elementEnd"]()),2&e&&(D["\u0275\u0275property"]("avnonLoader",t.loading||t.taskLoading||t.sentimentsLoading),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event&&(t.isAdmin||t.taskOwner)))},directives:[y.a,i.n,i.m,a.E,a.r,a.s,a.b,a.n,a.A,a.q,a.t],pipes:[i.f,k.a,oa.a],styles:[".actions-filter[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf;padding-top:.25rem;padding-bottom:.75rem}"]}),e})();var ya=n("uYqz"),ka=n("K3/c"),Ea=n("Q4ZP"),wa=n("3nm2"),Oa=n("f/iK"),Ma=n("FvYy");function Pa(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275element"](1,"i",28),D["\u0275\u0275text"](2," Confirmed "),D["\u0275\u0275elementContainerEnd"]())}function Ta(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275element"](1,"i",29),D["\u0275\u0275text"](2," Declined "),D["\u0275\u0275elementContainerEnd"]())}function ja(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",30),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).onAcceptInvite()}),D["\u0275\u0275text"](1," Accept "),D["\u0275\u0275elementEnd"]()}}function _a(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",30),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).onDeclineInvite()}),D["\u0275\u0275text"](1," Decline "),D["\u0275\u0275elementEnd"]()}}function Aa(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",24),D["\u0275\u0275elementStart"](1,"button",25),D["\u0275\u0275template"](2,Pa,3,0,"ng-container",23),D["\u0275\u0275template"](3,Ta,3,0,"ng-container",23),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",26),D["\u0275\u0275template"](5,ja,2,0,"button",27),D["\u0275\u0275template"](6,_a,2,0,"button",27),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",2===e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",3===e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.bookingCheck.eventDelegateStatusID)}}function Va(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",31),D["\u0275\u0275elementStart"](1,"div",32),D["\u0275\u0275elementStart"](2,"button",33),D["\u0275\u0275element"](3,"span",34),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"ul",35),D["\u0275\u0275elementStart"](5,"li"),D["\u0275\u0275elementStart"](6,"a",36),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onEditEvent()}),D["\u0275\u0275text"](7,"Edit"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"li"),D["\u0275\u0275elementStart"](9,"a",36),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeleteEvent()}),D["\u0275\u0275text"](10,"Delete"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function Fa(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p",37),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"]("Hosted By ",e.event.provider,"")}}function La(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"span",40),D["\u0275\u0275element"](1,"i",43),D["\u0275\u0275elementStart"](2,"span",37),D["\u0275\u0275text"](3),D["\u0275\u0275pipe"](4,"date"),D["\u0275\u0275pipe"](5,"dateObject"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](4,1,D["\u0275\u0275pipeBind1"](5,4,e.event.startDate),"dd MMM, yyyy")," ")}}function Ra(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"span",40),D["\u0275\u0275element"](1,"i",43),D["\u0275\u0275elementStart"](2,"span",37),D["\u0275\u0275text"](3),D["\u0275\u0275pipe"](4,"date"),D["\u0275\u0275pipe"](5,"dateObject"),D["\u0275\u0275pipe"](6,"date"),D["\u0275\u0275pipe"](7,"dateObject"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate2"](" ",D["\u0275\u0275pipeBind2"](4,2,D["\u0275\u0275pipeBind1"](5,5,e.event.startDate),"dd MMM, yyyy HH:mm aa"),"- ",D["\u0275\u0275pipeBind2"](6,7,D["\u0275\u0275pipeBind1"](7,10,e.event.endDate),"dd MMM, yyyy HH:mm aa")," ")}}function Ba(e,t){1&e&&D["\u0275\u0275element"](0,"i",45)}function Na(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,Ba,1,0,"i",44),D["\u0275\u0275text"](2),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.event.eventInstructions),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.event.eventInstructions," ")}}function $a(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"a",47),D["\u0275\u0275element"](1,"i",45),D["\u0275\u0275text"](2),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](4);D["\u0275\u0275property"]("href",e.event.googleURL,D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate1"](" ",e.event.venueName," ")}}function Ua(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](4);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.event.venueName," ")}}function Ha(e,t){if(1&e&&(D["\u0275\u0275template"](0,$a,3,2,"a",46),D["\u0275\u0275template"](1,Ua,2,1,"ng-container",23)),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("ngIf",e.event.googleURL),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!e.event.googleURL)}}function za(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",38),D["\u0275\u0275template"](1,La,6,6,"span",39),D["\u0275\u0275template"](2,Ra,8,12,"span",39),D["\u0275\u0275elementStart"](3,"span",40),D["\u0275\u0275elementStart"](4,"span",37),D["\u0275\u0275template"](5,Na,3,2,"ng-container",41),D["\u0275\u0275template"](6,Ha,2,2,"ng-template",null,42,D["\u0275\u0275templateRefExtractor"]),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275reference"](7),t=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",(null==t.event?null:t.event.startDate)&&(!t.bookingCheck||2!==(null==t.bookingCheck?null:t.bookingCheck.eventDelegateTypeID))),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",(null==t.event?null:t.event.startDate)&&2===(null==t.bookingCheck?null:t.bookingCheck.eventDelegateTypeID)),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",2===t.event.eventFormatID)("ngIfElse",e)}}const qa=function(e){return["/event",e,"files"]},Ya=function(){return{exact:!0}};function Ka(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"li",20),D["\u0275\u0275elementStart"](1,"a",21),D["\u0275\u0275text"](2,"Files"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](2,qa,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](4,Ya))}}const Ga=function(e){return["/event",e,"delegates"]};function Ja(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"li",20),D["\u0275\u0275elementStart"](1,"a",21),D["\u0275\u0275text"](2,"Delegates"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](2,Ga,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](4,Ya))}}const Wa=function(e){return["/event",e,"feedback"]},Xa=function(e){return["/event",e,"assignments"]};function Za(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"li",20),D["\u0275\u0275elementStart"](2,"a",21),D["\u0275\u0275text"](3,"Feedback"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"li",20),D["\u0275\u0275elementStart"](5,"a",21),D["\u0275\u0275text"](6,"Activities"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](4,Wa,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](6,Ya)),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](7,Xa,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](9,Ya))}}const Qa=function(e){return["/event",e,"financials"]};function es(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"li",20),D["\u0275\u0275elementStart"](1,"a",21),D["\u0275\u0275text"](2,"Financials"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](2,Qa,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](4,Ya))}}const ts=function(){return["image/*"]},ns=function(){return[3,2]},is=function(e){return["/event",e]},as=function(e){return["/event",e,"feed"]};function ss(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",1),D["\u0275\u0275elementStart"](1,"div",2),D["\u0275\u0275elementStart"](2,"span",3),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().back()}),D["\u0275\u0275element"](3,"i",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"h1",5),D["\u0275\u0275text"](5,"Event"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"div",6),D["\u0275\u0275elementStart"](7,"div",7),D["\u0275\u0275element"](8,"app-banner",8),D["\u0275\u0275elementStart"](9,"div",9),D["\u0275\u0275element"](10,"img",10),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"div",11),D["\u0275\u0275template"](12,Aa,7,4,"div",12),D["\u0275\u0275template"](13,Va,11,0,"div",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](14,"div",14),D["\u0275\u0275elementStart"](15,"h2"),D["\u0275\u0275text"](16),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](17,Fa,2,1,"p",15),D["\u0275\u0275elementStart"](18,"p",16),D["\u0275\u0275text"](19),D["\u0275\u0275pipe"](20,"ellipsis"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](21,za,8,4,"div",17),D["\u0275\u0275elementStart"](22,"div",18),D["\u0275\u0275elementStart"](23,"ul",19),D["\u0275\u0275elementStart"](24,"li",20),D["\u0275\u0275elementStart"](25,"a",21),D["\u0275\u0275text"](26," Profile "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](27,"li",20),D["\u0275\u0275elementStart"](28,"a",21),D["\u0275\u0275text"](29," Feed "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](30,Ka,3,5,"li",22),D["\u0275\u0275template"](31,Ja,3,5,"li",22),D["\u0275\u0275template"](32,Za,7,10,"ng-container",23),D["\u0275\u0275template"](33,es,3,5,"li",22),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275advance"](8),D["\u0275\u0275property"]("referenceID",e.event.eventID)("documentCategoryID",9)("fileTypes",D["\u0275\u0275pureFunction0"](22,ts))("canEdit",e.adminCheck),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("src",e.event.providerLogo?e.apiBlob+"256px/"+e.event.providerLogo:"assets/img/placeholder.jpg",D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.bookingCheck&&D["\u0275\u0275pureFunction0"](23,ns).includes(e.bookingCheck.eventDelegateStatusID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.adminCheck),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate"](null==e.event?null:e.event.eventTitle),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",1===e.event.eventCategoryID),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](D["\u0275\u0275pipeBind2"](20,19,null==e.event?null:e.event.eventPitch,150)),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",null==e.event?null:e.event.startDate),D["\u0275\u0275advance"](4),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](24,is,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](26,Ya)),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](27,as,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](29,Ya)),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.adminCheck||e.bookingCheck),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.adminCheck),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.adminCheck||e.bookingCheck),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.adminCheck)}}const rs=function(){return[2,4,12,13]};let os=(()=>{class e{constructor(e,t,n,i,a,s,r,o,c,l,d,m,p,g){this.modal=e,this.router=t,this.eventService=n,this.notificationService=i,this.toastr=a,this.courseService=s,this.enrollmentService=r,this.discussionService=o,this.userService=c,this.contractService=l,this.location=d,this.permissionService=m,this.taskService=p,this.signalRService=g,this.unsubscribe=new f.a,this.apiBlobUrl=$.a.apiBlobUrl,this.event=new F.a,this.adminCheck=!1,this.members=[],this.presenters=[],this.apiBlob=$.a.apiBlobUrl+"/",this.isEditEventInstructions=!1,this.tmpEditEventInstructions=null,this.tmpEventProfile=null,this.user=this.userService.user.getValue(),this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.contactID=this.user.contactID,this.fillEventProfile(),this.getContractAssignment(),console.log("EVENT: ",this.event)}fillEventProfile(){this.eventService.eventDetail.pipe(Object(u.a)(this.unsubscribe)).subscribe(e=>{var t;e&&(this.presenters=e.delegates.filter(e=>e.eventDelegateTypeID===ot.b.APPLICANT),this.event=e,this.adminCheck=this.event.scheduledbyID===this.contactID||this.superAdmin,this.bookingCheck=null===(t=this.event.delegates)||void 0===t?void 0:t.find(e=>e.contactID===this.contactID),this.getDiscussions(),this.event.courseID&&this.initCourse(this.event.courseID),[4,11,12].includes(this.event.eventCategoryID)&&this.getTask())})}onAttendEvent(){this.insertEventDelegateStatus(2)}insertEventDelegateStatus(e){this.eventService.insertEventDelegate({eventID:this.event.eventID,contactID:this.contactID,addedByID:this.contactID,assessmentScore:0,contractNumber:"",eventDelegateTypeID:1,eventDelegateStatusID:e,setaID:0,endDate:"",startDate:"",projectedEndDate:""}).subscribe(t=>{if(t){this.toastr.success("You're now attending "+this.event.eventTitle);const n=new ya.a;n.eventDelegateID=t.inOut_EventDelegateID,n.eventDelegateStatusID=t.eventDelegateStatusID,n.contactID=t.contactID,this.discussion&&(this.members.filter(e=>e.contactID===t.contactID).length||this.insertMember(t.contactID)),this.event.delegates.push(n),this.bookingCheck=n,this.noticeNotification(2===e?8:7,this.event.eventID,this.event.scheduledbyID),this.insertEventDateDelegate(this.bookingCheck.eventDelegateID,this.event.eventDateID,e)}this.eventService.loadEventDetail(this.event)})}onCancelEvent(){this.eventService.deleteEventDelegate(this.bookingCheck.eventDelegateID).subscribe(()=>{this.event.delegates=this.event.delegates.filter(e=>e.contactID!==this.bookingCheck.contactID),this.members.filter(e=>e.contactID===this.bookingCheck.contactID).length&&this.deleteMember(this.bookingCheck.contactID),this.bookingCheck=null,localStorage.setItem("eventObject",JSON.stringify(this.event))})}onAcceptInvite(){this.updateEventDelegateStatus(2)}onDeclineInvite(){this.updateEventDelegateStatus(3)}updateEventDelegateStatus(e){this.bookingCheck.eventDelegateStatusID=e;const t={eventDelegateID:this.bookingCheck.eventDelegateID,confirmed:0,assessmentScore:0,assessmentResultID:0,eventDelegateStatusID:e,eventDelegateStatusDate:Object(i.y)(new Date,"yyyy-MM-dd HH:mm:ss","en-UK"),endDate:this.bookingCheck.delegateEndDate,projectedEndDate:"",startDate:this.bookingCheck.delegateStartDate};this.eventService.updateEventDelegate(t).subscribe(()=>{this.toastr.success("You're"+(2===e?"booked new":"declined ")+this.event.eventTitle),this.bookingCheck.eventDelegateStatusID=t.eventDelegateStatusID,localStorage.setItem("eventObject",JSON.stringify(this.event)),this.noticeNotification(2===e?8:7,this.event.eventID,this.event.scheduledbyID)})}insertEventDateDelegate(e,t,n){this.eventService.insertEventDateDelegate({eventDelegateID:e,eventDateID:t,attendanceStatusID:n}).subscribe(()=>{})}noticeNotification(e,t,n){const i=Object(h.a)(new Date,"dd MMM, yyyy"),a=`${this.user.firstName} ${this.user.surname} is attending ${this.event.eventTitle} on the ${i}`,s={notificationCategoryID:e,referenceID:t,contactID:n,description:a,createdContact:+localStorage.getItem("CoID")},r=i+"|"+this.event.eventID,o={date:i,body:a.replace("|",""),topic:a.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:s.referenceID,notificationType:at.a.eventRequest,senderId:s.createdContact,receivers:[s.contactID],uniqueId:r,discussionId:0};this.notificationService.noticeNotification(s).subscribe(()=>{this.signalRService.transferMessage("dashboard",o)})}onEditEvent(){let e;e=[1,2].includes(this.event.eventCategoryID)?this.modal.open(Ea.a,{backdrop:"static",size:"md"}):this.modal.open(ka.a,{backdrop:"static",size:4===this.event.eventCategoryID?"md":"lg"}),e.componentInstance.event=Object(h.l)(this.event),e.componentInstance.isFromAssignment=!1,e.componentInstance.portfolioModel=this.assignment,e.result.then(e=>{e&&e.eventID&&(this.event=e,this.eventService.loadEventDetail(this.event))})}onDeleteEvent(){const e=this.modal.open(dt.a,{backdrop:"static"});e.componentInstance.objectType="Event",e.result.then(e=>{"Yes"===e&&this.eventService.deleteEvent(this.event.eventID).subscribe(()=>{this.router.navigate(["/weekly-plan"])})})}getDiscussions(){this.discussionService.fetchDiscussions(0,this.event.eventID,2,0,0).subscribe(e=>{e[0]&&(this.discussion=e[0],this.unreadCount=e[0].unreadMessageCount,this.getMembers(e[0].discussionID))})}insertMember(e){const t=new Date,n=Object(i.y)(t,"yyyy-MM-dd HH:mm:ss","en-UK");this.discussionService.addMember({discussionID:this.discussion.discussionID,contactID:e,isAdmin:!0,submittedByContactID:this.contactID,hasAccepted:!0,dateAccepted:n}).subscribe(()=>{this.getMembers(this.discussion.discussionID)})}deleteMember(e){this.discussionService.deleteMember(this.discussion.discussionID,e).subscribe(()=>{this.members=this.members.filter(t=>t.contactID!==e)})}getMembers(e){this.discussionService.getAllMembers(e).subscribe(e=>{this.members=e})}launchCourse(){const e={RegistrationId:this.enrollment.scormRegistrationID,RedirectOnExitUrl:q.a.fullDomain()+this.router.url};this.launchRequest=!0,this.courseService.getScormLaunchUrl(e).subscribe(e=>{this.launchRequest=!1,location.href=e.result})}initCourse(e){this.courseService.getCoursesByCompanyId(0,e).subscribe(t=>{t[0]&&(this.course=t[0],this.courseService.setActiveCourse(this.course),2===this.course.courseClassificationID&&this.bookingCheck&&this.bookingCheck.scormRegistrationID&&this.initEnrollment(e))})}initEnrollment(e){let t;this.enrollmentService.getAllEnrollments({CompanyID:0,CourseID:e,ContactID:this.contactID,EnrollmentID:0,EnrollmentGroupID:0}).pipe(Object(V.a)(e=>{const n=this.bookingCheck.scormRegistrationID;return t=e.filter(e=>e.scormRegistrationID===n)[0],t.overdue=!1,t.remaining=!t.overdue&&t.endDate?Object(h.d)(void 0):null,t.satisfaction="",this.courseService.getScormLaunchHistory({RegistrationId:t.scormRegistrationID})})).subscribe(e=>{if(e&&e.result&&e.result.length>0){const n=e.result[e.result.length-1],i=e.result[0];t.score=100*Number(i.normalizedMeasure),t.satisfaction=i.satisfaction,t.firstAccess=n.lastUpdated,t.lastAccess=i.lastUpdated,t.enrollmentHistory=e,this.enrollment=t,this.enrollmentService.setActiveEnrollment(this.enrollment)}else this.enrollment=t,this.enrollmentService.setActiveEnrollment(this.enrollment)},()=>{this.enrollment=t,this.enrollmentService.setActiveEnrollment(this.enrollment)})}sendNotifications(){const e=this.modal.open(wa.a,{backdrop:"static",size:"md"});e.componentInstance.preSelectedcontacts=this.presenters,e.componentInstance.filteredContacts=this.presenters,e.result.then(e=>{e&&e.selectedContacts&&e.selectedContacts.length>0&&(this.modal.open(X,{size:"lg",backdrop:"static"}).componentInstance.delegates=e.selectedContacts)})}getContractAssignment(){this.contractService.getContractAssignment(0,this.event.referenceID,0,0,0,0,0).subscribe(e=>{this.assignment=e[0]})}back(){this.location.back()}onUpdateEventProfile(){const e=this.prepareDataForUpdateEvent();this.eventService.updateEvent(e).subscribe(()=>{localStorage.setItem("eventObject",JSON.stringify(this.event)),this.isEditEventProfile=!1})}prepareDataForUpdateEvent(){return{eventID:this.event.eventID,eventTitle:this.event.eventTitle,courseID:this.event.courseID,venueID:this.event.venueID,providerID:this.event.providerID,trainerID:null,publicEvent:this.event.publicEvent,eventProfile:this.event.eventProfile,minimumScore:this.event.minimumScore,maxScore:this.event.maxScore,eventCategoryID:this.event.eventCategoryID,eventSubCategoryID:this.event.eventSubCategoryID,awardCredits:this.event.awardCredits,referenceID:this.event.referenceID,eventPitch:this.event.eventPitch,venueName:this.event.venueName,eventFormatID:this.event.eventFormatID,eventInstructions:this.event.eventInstructions,googleURL:this.event.googleURL,latitude:this.event.latitude,longitude:this.event.longitude}}getTask(){this.taskLoading=!0;let e=23;this.bookingCheck&&5===this.bookingCheck.eventDelegateTypeID&&(e=24),this.taskService.getTask(0,e,this.event.eventID,this.contactID,0,0,0,0,!0).subscribe(e=>{if(e){const t=e[0];t&&(this.taskOwner=t.taskOwners.find(e=>e.contactID===this.contactID))}this.taskLoading=!1})}confirmPostSession(){if(this.taskOwner)return;const e=this.modal.open(dt.a);e.componentInstance.objectType="Confirm Session Ending",e.componentInstance.objectDetails="Would you like to submit your post session feedback now?",e.componentInstance.customConfirm=!0,e.result.then(e=>{e&&"Yes"===e&&this.postSession()})}postSession(){this.loading=!0;const e=[],t={taskTitle:"Mentoring Session Review - "+this.event.eventTitle,taskDescription:"",endDate:Object(h.a)(new Date),taskValue:0,taskCategoryID:24,referenceID:this.event.eventID,autoSignOff:!0,taskModeID:0,submittedBy:this.event.scheduledbyID,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:1,taskTypeID:0,formID:0},n={taskTitle:"Mentoring Session Review - "+this.event.eventTitle,taskDescription:"",endDate:Object(h.a)(new Date),taskValue:0,taskCategoryID:23,referenceID:this.event.eventID,autoSignOff:!0,taskModeID:0,submittedBy:this.event.scheduledbyID,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:0,taskTypeID:0,formID:0};this.event.delegates.some(e=>4===e.eventDelegateTypeID)&&e.push(this.taskService.addTask(n)),this.event.delegates.some(e=>5===e.eventDelegateTypeID)&&e.push(this.taskService.addTask(t)),Object(_.a)(e).pipe(Object(V.a)(e=>{const t=[],n=Object(h.l)(this.event.delegates);return e.forEach(e=>{1===e.taskClassificationID?n.filter(e=>5===e.eventDelegateTypeID).forEach(n=>{const i=new rt.a;i.taskID=e.inOut_TaskID,i.contactID=n.contactID,i.taskOwnerCategoryID=24,i.referenceID=n.eventDelegateID,t.push(this.taskService.addTaskOwner(i))}):n.filter(e=>4===e.eventDelegateTypeID).forEach(n=>{const i=new rt.a;i.taskID=e.inOut_TaskID,i.contactID=n.contactID,i.taskOwnerCategoryID=23,i.referenceID=n.eventDelegateID,t.push(this.taskService.addTaskOwner(i))})}),Object(_.a)(t)})).subscribe(e=>{this.toastr.success("Session is completed"),e.forEach(e=>{e.contactID===this.contactID&&(this.taskOwner=e,this.taskOwner.taskStatusID=1),this.noticeTaskOwners(e.taskID,e.contactID)}),this.loading=!1})}noticeTaskOwners(e,t){if(this.contactID===t)return;const n=new Date,a=Object(i.y)(n,"yyyy-MM-dd HH:mm:ss","en-UK"),s=`${this.user.firstName} ${this.user.surname}| has assigned Mentoring Session Review - ${this.event.eventTitle}`,r={notificationCategoryID:mt.a.activity_task_owner,referenceID:e,contactID:t,description:s,createdContact:this.contactID},o=a+"|"+e,c={date:a,body:s.replace("|",""),topic:s.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:r.referenceID,notificationType:at.a.applicantRequest,senderId:r.createdContact,receivers:[r.contactID],uniqueId:o,discussionId:0};this.notificationService.noticeNotification(r).subscribe(()=>{this.signalRService.transferMessage("dashboard",c)})}onCancelUpdateEventProfile(){this.isEditEventProfile=!1,this.event.eventInstructions=this.tmpEditEventInstructions}onEditUpdateEventProfile(){this.adminCheck&&(this.isEditEventProfile=!0)}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](Y.a),D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](N.a),D["\u0275\u0275directiveInject"](B.a),D["\u0275\u0275directiveInject"](ut.a),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](ht.a),D["\u0275\u0275directiveInject"](i.j),D["\u0275\u0275directiveInject"](Oa.a),D["\u0275\u0275directiveInject"](b.a),D["\u0275\u0275directiveInject"](gt.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-header"]],inputs:{event:"event"},decls:1,vars:2,consts:[["class","d-flex flex-column w-100",4,"ngIf"],[1,"d-flex","flex-column","w-100"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"page-header"],[1,"profile-photos"],[1,"w-100",3,"referenceID","documentCategoryID","fileTypes","canEdit"],[1,"user-photo"],["alt","logo",1,"img-fluid","profile-user",3,"src"],[1,"bottom-actions","d-flex","justify-content-end","align-items-center"],["ngbDropdown","","container","body","class","ml-auto action-dropdown mr-2 mt-3",4,"ngIf"],["class","actions",4,"ngIf"],[1,"profile-overview"],["class","meta",4,"ngIf"],[1,"mb-0"],["class","icon-list",4,"ngIf"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["class","nav-item",4,"ngIf"],[4,"ngIf"],["ngbDropdown","","container","body",1,"ml-auto","action-dropdown","mr-2","mt-3"],["ngbDropdownToggle","","type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","no-icon","icon-right","w-100"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngIf"],[1,"fas","fa-check","text-success","mr-1"],[1,"fas","fa-times","text-danger","mr-1"],["ngbDropdownItem","",3,"click"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30","mr-3","mt-3"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"meta"],[1,"icon-list"],["class","text-muted other mr-2",4,"ngIf"],[1,"text-muted","other","mr-2"],[4,"ngIf","ngIfElse"],["elseInPerson",""],[1,"fas","fa-calendar-alt","mr-1"],["class","fas fa-map-marker-alt mr-1",4,"ngIf"],[1,"fas","fa-map-marker-alt","mr-1"],["class","meta-alt","target","_blank",3,"href",4,"ngIf"],["target","_blank",1,"meta-alt",3,"href"]],template:function(e,t){1&e&&D["\u0275\u0275template"](0,ss,34,30,"div",0),2&e&&D["\u0275\u0275property"]("ngIf",t.event&&!D["\u0275\u0275pureFunction0"](1,rs).includes(t.event.eventCategoryID))},directives:[i.n,Ma.a,p.f,p.e,o.i,o.m,o.k,o.j],pipes:[oa.a,i.e,E.a],styles:[".attend-section[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:28px!important;padding:2px 10px 3px!important;line-height:22px!important}.attend-section[_ngcontent-%COMP%]   .btn.btn-attending[_ngcontent-%COMP%]{padding-right:0!important;background-image:none;color:#406fe4}.event-nav-tab[_ngcontent-%COMP%]{margin-top:10px;float:left;width:100%;border-width:2px}.event-nav-tab.learning[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{letter-spacing:-.4px;font-size:15px}.event-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-bottom:-2px}.event-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:focus{outline:none}.event-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2a2a2a;border:none;border-bottom:2px solid #ebebeb;padding:8px}.event-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .event-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .event-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{outline:none;border-color:#406fe4}.event-nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:600}.status-toggle[_ngcontent-%COMP%]{background-image:none!important}.status-toggle[_ngcontent-%COMP%]:after, .status-toggle[_ngcontent-%COMP%]:before{display:none}.menu-line-separator[_ngcontent-%COMP%]{background:#ebebeb;height:2px;width:100%;float:left}.meeting-meta[_ngcontent-%COMP%]   .meta-icon[_ngcontent-%COMP%]{top:0}.meeting-meta[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;margin-left:2px;margin-right:2px}.avatar-40[_ngcontent-%COMP%]{max-height:40px;object-fit:contain;padding:1px;height:100%;max-width:40px;width:100%}.semi-bold[_ngcontent-%COMP%]{font-weight:500}.meeting-header-container[_ngcontent-%COMP%]   .event-info[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]{background:#fff;border-radius:4px;border:1px solid #dfdfdf;width:60px;height:60px;display:flex;align-items:center;justify-content:center;z-index:2}.meeting-header-container[_ngcontent-%COMP%]   .event-info[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:2px;object-fit:contain;padding:2px}.meeting-header-container[_ngcontent-%COMP%]   .event-info[_ngcontent-%COMP%]   .company-title[_ngcontent-%COMP%]{font-size:18px;margin-bottom:2px}.meeting-header-container[_ngcontent-%COMP%]   .event-info[_ngcontent-%COMP%]   .meeting-title[_ngcontent-%COMP%]{font-size:21px}.meeting-header-container[_ngcontent-%COMP%]   .event-profile[_ngcontent-%COMP%], .meeting-header-container[_ngcontent-%COMP%]   .event-profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.meeting-header-container[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{width:20px;height:20px;padding:0;background-position:50%}.meeting-header-container[_ngcontent-%COMP%]   .session-end[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .meeting-header-container[_ngcontent-%COMP%]   .session-end[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .other[_ngcontent-%COMP%]{font-size:15px}.end-session-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:1px solid #666;border-radius:50%;cursor:pointer;color:#666}.end-session-btn[_ngcontent-%COMP%]:hover{opacity:.8}.event-navs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem!important}.none-dropdown[_ngcontent-%COMP%]{background-size:0!important}.stage-title[_ngcontent-%COMP%]{font-size:23px!important}.profile-overview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:19px;font-weight:700;margin:0}"]}),e})();const cs=function(e,t,n){return{"text-white":e,"bg-success":t,"bg-warning":n}};function ls(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"span",27),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).confirmPostSession()}),D["\u0275\u0275element"](1,"span",28),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("ngClass",D["\u0275\u0275pureFunction3"](2,cs,e.taskOwner,3===(null==e.taskOwner?null:e.taskOwner.taskStatusID),1===(null==e.taskOwner?null:e.taskOwner.taskStatusID)))("ngbTooltip",e.taskOwner?1===e.taskOwner.taskStatusID?"Pending Feedback":"Session is complete":"End Session")}}function ds(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,ls,2,6,"span",26),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.adminCheck)}}function ms(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275element"](1,"i",33),D["\u0275\u0275text"](2," Confirmed "),D["\u0275\u0275elementContainerEnd"]())}function ps(e,t){1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275element"](1,"i",34),D["\u0275\u0275text"](2," Declined "),D["\u0275\u0275elementContainerEnd"]())}function gs(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",35),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).onAcceptInvite()}),D["\u0275\u0275text"](1," Accept "),D["\u0275\u0275elementEnd"]()}}function us(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"button",35),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](3).onDeclineInvite()}),D["\u0275\u0275text"](1," Decline "),D["\u0275\u0275elementEnd"]()}}function hs(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",29),D["\u0275\u0275elementStart"](1,"button",30),D["\u0275\u0275template"](2,ms,3,0,"ng-container",11),D["\u0275\u0275template"](3,ps,3,0,"ng-container",11),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"div",31),D["\u0275\u0275template"](5,gs,2,0,"button",32),D["\u0275\u0275template"](6,us,2,0,"button",32),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",2===e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",3===e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",3===e.bookingCheck.eventDelegateStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===e.bookingCheck.eventDelegateStatusID)}}function vs(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",36),D["\u0275\u0275elementStart"](1,"button",37),D["\u0275\u0275element"](2,"span",38),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](3,"ul",39),D["\u0275\u0275elementStart"](4,"li"),D["\u0275\u0275elementStart"](5,"a",40),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onEditEvent()}),D["\u0275\u0275text"](6,"Edit"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](7,"li"),D["\u0275\u0275elementStart"](8,"a",40),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onDeleteEvent()}),D["\u0275\u0275text"](9,"Delete"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()}}function fs(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p"),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate"](e.event.eventPitch)}}function Is(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"textarea",41),D["\u0275\u0275listener"]("ngModelChange",function(t){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).event.eventProfile=t}),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](2,"div",42),D["\u0275\u0275elementStart"](3,"button",43),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onCancelUpdateEventProfile()}),D["\u0275\u0275element"](4,"img",44),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"button",45),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onUpdateEventProfile()}),D["\u0275\u0275text"](6," Update "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngModel",e.event.eventProfile)}}function Ds(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275elementStart"](1,"p",48),D["\u0275\u0275text"](2),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](e.event.eventProfile)}}function bs(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"p",50),D["\u0275\u0275text"](1," Click here to add more details "),D["\u0275\u0275elementEnd"]())}function Cs(e,t){if(1&e&&D["\u0275\u0275template"](0,bs,2,0,"p",49),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("ngIf",e.adminCheck)}}function xs(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",46),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"](2).onEditUpdateEventProfile()}),D["\u0275\u0275template"](1,Ds,3,1,"ng-container",18),D["\u0275\u0275template"](2,Cs,1,1,"ng-template",null,47,D["\u0275\u0275templateRefExtractor"]),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275reference"](3),t=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event.eventProfile)("ngIfElse",e)}}function Ss(e,t){1&e&&D["\u0275\u0275element"](0,"i",52)}function ys(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275template"](1,Ss,1,0,"i",51),D["\u0275\u0275text"](2),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.event.eventInstructions),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.event.eventInstructions," ")}}function ks(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"a",54),D["\u0275\u0275text"](1),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("href",e.event.googleURL,D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate"](e.event.venueName)}}function Es(e,t){if(1&e&&(D["\u0275\u0275elementContainerStart"](0),D["\u0275\u0275text"](1),D["\u0275\u0275elementContainerEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" ",e.event.venueName," ")}}function ws(e,t){if(1&e&&(D["\u0275\u0275element"](0,"i",52),D["\u0275\u0275template"](1,ks,2,2,"a",53),D["\u0275\u0275template"](2,Es,2,1,"ng-container",11)),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.event.googleURL),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!e.event.googleURL)}}function Os(e,t){1&e&&(D["\u0275\u0275elementStart"](0,"p",58),D["\u0275\u0275text"](1,"Click the check button above once the session is complete to trigger the feedback form"),D["\u0275\u0275elementEnd"]())}function Ms(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p",58),D["\u0275\u0275text"](1),D["\u0275\u0275pipe"](2,"date"),D["\u0275\u0275pipe"](3,"dateObject"),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275textInterpolate1"](" You've submitted your feedback at ",D["\u0275\u0275pipeBind2"](2,1,D["\u0275\u0275pipeBind1"](3,4,e.taskOwner.dateSentForSignOff),"dd MMM yyyy")," ")}}const Ps=function(e){return["/task",e]};function Ts(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"a",59),D["\u0275\u0275text"](1,"See feedback"),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](1,Ps,e.taskOwner.taskID))}}function js(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"p",58),D["\u0275\u0275text"](1,"Your feedback is pending. "),D["\u0275\u0275elementStart"](2,"a",60),D["\u0275\u0275text"](3,"Click here to submit your review"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](1,Ps,e.taskOwner.taskID))}}function _s(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",55),D["\u0275\u0275template"](1,Os,2,0,"p",56),D["\u0275\u0275template"](2,Ms,4,6,"p",56),D["\u0275\u0275template"](3,Ts,2,3,"a",57),D["\u0275\u0275template"](4,js,4,3,"p",56),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",!e.taskOwner),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner&&3===e.taskOwner.taskStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner&&3===e.taskOwner.taskStatusID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",e.taskOwner&&3!==e.taskOwner.taskStatusID)}}const As=function(e){return["/event",e,"meeting-feedback"]},Vs=function(){return{exact:!0}};function Fs(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"li",63),D["\u0275\u0275elementStart"](1,"a",64),D["\u0275\u0275text"](2," Feedback "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](3);D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](2,As,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](4,Vs))}}const Ls=function(e){return["/event",e,"minutes"]},Rs=function(e){return["/event",e,"minutes-attendees"]};function Bs(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",61),D["\u0275\u0275elementStart"](1,"ul",62),D["\u0275\u0275elementStart"](2,"li",63),D["\u0275\u0275elementStart"](3,"a",64),D["\u0275\u0275text"](4," Minutes "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"li",63),D["\u0275\u0275elementStart"](6,"a",64),D["\u0275\u0275text"](7," Attendees "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](8,Fs,3,5,"li",65),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](5,Ls,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](7,Vs)),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](8,Rs,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](10,Vs)),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",e.taskOwner&&e.bookingCheck)}}const Ns=function(e){return["/event",e]},$s=function(e){return["/event",e,"panel-members"]},Us=function(e){return["/event",e,"leaderboard"]};function Hs(e,t){if(1&e&&(D["\u0275\u0275elementStart"](0,"div",61),D["\u0275\u0275elementStart"](1,"ul",62),D["\u0275\u0275elementStart"](2,"li",63),D["\u0275\u0275elementStart"](3,"a",64),D["\u0275\u0275text"](4," Profile "),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](5,"li",63),D["\u0275\u0275elementStart"](6,"a",64),D["\u0275\u0275text"](7,"Panel members"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](8,"li",63),D["\u0275\u0275elementStart"](9,"a",64),D["\u0275\u0275text"](10,"Leaderboard"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"]()),2&e){const e=D["\u0275\u0275nextContext"](2);D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](6,Ns,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](8,Vs)),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](9,$s,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](11,Vs)),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("routerLink",D["\u0275\u0275pureFunction1"](12,Us,e.event.eventID))("routerLinkActiveOptions",D["\u0275\u0275pureFunction0"](14,Vs))}}const zs=function(){return[12,13]},qs=function(){return[3,2]},Ys=function(){return[2,12,13]};function Ks(e,t){if(1&e){const e=D["\u0275\u0275getCurrentView"]();D["\u0275\u0275elementStart"](0,"div",1),D["\u0275\u0275elementStart"](1,"div",2),D["\u0275\u0275elementStart"](2,"span",3),D["\u0275\u0275listener"]("click",function(){return D["\u0275\u0275restoreView"](e),D["\u0275\u0275nextContext"]().back()}),D["\u0275\u0275element"](3,"i",4),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](4,"h1",5),D["\u0275\u0275text"](5),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](6,"div",6),D["\u0275\u0275elementStart"](7,"span",7),D["\u0275\u0275element"](8,"img",8),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](9,"h2",9),D["\u0275\u0275text"](10),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](11,"div",10),D["\u0275\u0275template"](12,ds,2,1,"ng-container",11),D["\u0275\u0275elementContainerStart"](13),D["\u0275\u0275template"](14,hs,7,4,"div",12),D["\u0275\u0275elementContainerEnd"](),D["\u0275\u0275template"](15,vs,10,0,"div",13),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](16,"div",14),D["\u0275\u0275elementStart"](17,"p",15),D["\u0275\u0275text"](18),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](19,fs,2,1,"p",11),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](20,"div",16),D["\u0275\u0275elementStart"](21,"div",17),D["\u0275\u0275template"](22,Is,7,1,"ng-container",18),D["\u0275\u0275template"](23,xs,4,2,"ng-template",null,19,D["\u0275\u0275templateRefExtractor"]),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](25,"div",20),D["\u0275\u0275elementStart"](26,"span",21),D["\u0275\u0275element"](27,"i",22),D["\u0275\u0275text"](28),D["\u0275\u0275pipe"](29,"date"),D["\u0275\u0275pipe"](30,"dateObject"),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementStart"](31,"span",21),D["\u0275\u0275template"](32,ys,3,2,"ng-container",18),D["\u0275\u0275template"](33,ws,3,2,"ng-template",null,23,D["\u0275\u0275templateRefExtractor"]),D["\u0275\u0275elementEnd"](),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](35,_s,5,4,"div",24),D["\u0275\u0275elementEnd"](),D["\u0275\u0275template"](36,Bs,9,11,"div",25),D["\u0275\u0275template"](37,Hs,11,15,"div",25),D["\u0275\u0275elementEnd"]()}if(2&e){const e=D["\u0275\u0275reference"](24),t=D["\u0275\u0275reference"](34),n=D["\u0275\u0275nextContext"]();D["\u0275\u0275property"]("avnonLoader",n.loading||n.taskLoading),D["\u0275\u0275advance"](5),D["\u0275\u0275textInterpolate"](null==n.event?null:n.event.eventTitle),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("src",n.event.providerLogo?n.apiBlob+"256px/"+n.event.providerLogo:"assets/img/placeholder.jpg",D["\u0275\u0275sanitizeUrl"]),D["\u0275\u0275advance"](2),D["\u0275\u0275textInterpolate"](n.event.provider),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",n.event&&!D["\u0275\u0275pureFunction0"](22,zs).includes(n.event.eventCategoryID)),D["\u0275\u0275advance"](2),D["\u0275\u0275property"]("ngIf",n.bookingCheck&&D["\u0275\u0275pureFunction0"](23,qs).includes(n.bookingCheck.eventDelegateStatusID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.adminCheck),D["\u0275\u0275advance"](3),D["\u0275\u0275textInterpolate"](null==n.event?null:n.event.eventTitle),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.event.eventPitch),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",n.isEditEventProfile)("ngIfElse",e),D["\u0275\u0275advance"](6),D["\u0275\u0275textInterpolate1"](" ",D["\u0275\u0275pipeBind2"](29,17,D["\u0275\u0275pipeBind1"](30,20,n.event.startTime),"dd MMM yyyy, HH:mm")," "),D["\u0275\u0275advance"](4),D["\u0275\u0275property"]("ngIf",2===n.event.eventFormatID)("ngIfElse",t),D["\u0275\u0275advance"](3),D["\u0275\u0275property"]("ngIf",n.event&&n.event.scheduledbyID===n.contactID),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",n.event&&!D["\u0275\u0275pureFunction0"](24,Ys).includes(n.event.eventCategoryID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",2===n.event.eventCategoryID&&(!n.bookingCheck||n.bookingCheck&&3!==n.bookingCheck.eventDelegateTypeID||n.superAdmin))}}const Gs=function(){return[2,4,12,13]};let Js=(()=>{class e{constructor(e,t,n,i,a,s,r,o,c,l,d,m,p,g){this.modal=e,this.router=t,this.eventService=n,this.notificationService=i,this.toastr=a,this.courseService=s,this.enrollmentService=r,this.discussionService=o,this.userService=c,this.contractService=l,this.location=d,this.permissionService=m,this.taskService=p,this.signalRService=g,this.unsubscribe=new f.a,this.apiBlobUrl=$.a.apiBlobUrl,this.event=new F.a,this.adminCheck=!1,this.members=[],this.presenters=[],this.apiBlob=$.a.apiBlobUrl+"/",this.isEditEventInstructions=!1,this.tmpEditEventInstructions=null,this.tmpEventProfile=null,this.user=this.userService.user.getValue(),this.superAdmin=this.user.permissions.some(e=>I.b.Admin===e.permissionAreaID)}ngOnInit(){this.contactID=this.user.contactID,this.fillEventProfile(),this.getContractAssignment(),console.log("EVENT: ",this.event)}fillEventProfile(){let e;this.eventService.eventDetail.pipe(Object(V.a)(t=>(e=t,this.eventService.getEventDelegates(0,0,t.eventID,0,0,0,0,0,0))),Object(u.a)(this.unsubscribe)).subscribe(t=>{var n;e&&(e.delegates=t,this.presenters=t.filter(e=>e.eventDelegateTypeID===ot.b.APPLICANT),this.event=e,this.adminCheck=this.event.scheduledbyID===this.contactID||this.superAdmin,this.bookingCheck=null===(n=this.event.delegates)||void 0===n?void 0:n.find(e=>e.contactID===this.contactID),console.log("\ud83d\ude80 > EventMeetingComponent > .subscribe > this.bookingCheck",this.bookingCheck),this.getDiscussions(),this.event.courseID&&this.initCourse(this.event.courseID),[4,11,12].includes(this.event.eventCategoryID)&&this.getTask())})}onAttendEvent(){this.insertEventDelegateStatus(2)}insertEventDelegateStatus(e){this.eventService.insertEventDelegate({eventID:this.event.eventID,contactID:this.contactID,addedByID:this.contactID,assessmentScore:0,contractNumber:"",eventDelegateTypeID:1,eventDelegateStatusID:e,setaID:0,endDate:"",startDate:"",projectedEndDate:""}).subscribe(t=>{if(t){this.toastr.success("You're now attending "+this.event.eventTitle);const n=new ya.a;n.eventDelegateID=t.inOut_EventDelegateID,n.eventDelegateStatusID=t.eventDelegateStatusID,n.contactID=t.contactID,this.discussion&&(this.members.filter(e=>e.contactID===t.contactID).length||this.insertMember(t.contactID)),this.event.delegates.push(n),this.bookingCheck=n,this.noticeNotification(2===e?8:7,this.event.eventID,this.event.scheduledbyID),this.insertEventDateDelegate(this.bookingCheck.eventDelegateID,this.event.eventDateID,e)}this.eventService.loadEventDetail(this.event)})}onCancelEvent(){this.eventService.deleteEventDelegate(this.bookingCheck.eventDelegateID).subscribe(()=>{this.event.delegates=this.event.delegates.filter(e=>e.contactID!==this.bookingCheck.contactID),this.members.filter(e=>e.contactID===this.bookingCheck.contactID).length&&this.deleteMember(this.bookingCheck.contactID),this.bookingCheck=null,localStorage.setItem("eventObject",JSON.stringify(this.event))})}onAcceptInvite(){this.updateEventDelegateStatus(2)}onDeclineInvite(){this.updateEventDelegateStatus(3)}updateEventDelegateStatus(e){this.bookingCheck.eventDelegateStatusID=e;const t={eventDelegateID:this.bookingCheck.eventDelegateID,confirmed:0,assessmentScore:0,assessmentResultID:0,eventDelegateStatusID:e,eventDelegateStatusDate:Object(i.y)(new Date,"yyyy-MM-dd HH:mm:ss","en-UK"),endDate:this.bookingCheck.delegateEndDate,projectedEndDate:"",startDate:this.bookingCheck.delegateStartDate};this.eventService.updateEventDelegate(t).subscribe(()=>{this.toastr.success("You're"+(2===e?"booked new":"declined ")+this.event.eventTitle),this.bookingCheck.eventDelegateStatusID=t.eventDelegateStatusID,localStorage.setItem("eventObject",JSON.stringify(this.event)),this.noticeNotification(2===e?8:7,this.event.eventID,this.event.scheduledbyID)})}insertEventDateDelegate(e,t,n){this.eventService.insertEventDateDelegate({eventDelegateID:e,eventDateID:t,attendanceStatusID:n}).subscribe(()=>{})}noticeNotification(e,t,n){const i=Object(h.a)(new Date,"dd MMM, yyyy"),a=`${this.user.firstName} ${this.user.surname} is attending ${this.event.eventTitle} on the ${i}`,s={notificationCategoryID:e,referenceID:t,contactID:n,description:a,createdContact:+localStorage.getItem("CoID")},r=i+"|"+this.event.eventID,o={date:i,body:a.replace("|",""),topic:a.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:s.referenceID,notificationType:at.a.eventRequest,senderId:s.createdContact,receivers:[s.contactID],uniqueId:r,discussionId:0};this.notificationService.noticeNotification(s).subscribe(()=>{this.signalRService.transferMessage("dashboard",o)})}onEditEvent(){let e;e=[1,2].includes(this.event.eventCategoryID)?this.modal.open(Ea.a,{backdrop:"static",size:"md"}):this.modal.open(ka.a,{backdrop:"static",size:4===this.event.eventCategoryID?"md":"lg"}),e.componentInstance.event=Object(h.l)(this.event),e.componentInstance.isFromAssignment=!1,e.componentInstance.portfolioModel=this.assignment,e.result.then(e=>{e&&e.eventID&&(this.event=e,this.eventService.loadEventDetail(this.event))})}onDeleteEvent(){const e=this.modal.open(dt.a,{backdrop:"static"});e.componentInstance.objectType="Event",e.result.then(e=>{"Yes"===e&&this.eventService.deleteEvent(this.event.eventID).subscribe(()=>{this.router.navigate(["/weekly-plan"])})})}getDiscussions(){this.discussionService.fetchDiscussions(0,this.event.eventID,2,0,0).subscribe(e=>{e[0]&&(this.discussion=e[0],this.unreadCount=e[0].unreadMessageCount,this.getMembers(e[0].discussionID))})}insertMember(e){const t=new Date,n=Object(i.y)(t,"yyyy-MM-dd HH:mm:ss","en-UK");this.discussionService.addMember({discussionID:this.discussion.discussionID,contactID:e,isAdmin:!0,submittedByContactID:this.contactID,hasAccepted:!0,dateAccepted:n}).subscribe(()=>{this.getMembers(this.discussion.discussionID)})}deleteMember(e){this.discussionService.deleteMember(this.discussion.discussionID,e).subscribe(()=>{this.members=this.members.filter(t=>t.contactID!==e)})}getMembers(e){this.discussionService.getAllMembers(e).subscribe(e=>{this.members=e})}launchCourse(){const e={RegistrationId:this.enrollment.scormRegistrationID,RedirectOnExitUrl:q.a.fullDomain()+this.router.url};this.launchRequest=!0,this.courseService.getScormLaunchUrl(e).subscribe(e=>{this.launchRequest=!1,location.href=e.result})}initCourse(e){this.courseService.getCoursesByCompanyId(0,e).subscribe(t=>{t[0]&&(this.course=t[0],this.courseService.setActiveCourse(this.course),2===this.course.courseClassificationID&&this.bookingCheck&&this.bookingCheck.scormRegistrationID&&this.initEnrollment(e))})}initEnrollment(e){let t;this.enrollmentService.getAllEnrollments({CompanyID:0,CourseID:e,ContactID:this.contactID,EnrollmentID:0,EnrollmentGroupID:0}).pipe(Object(V.a)(e=>{const n=this.bookingCheck.scormRegistrationID;return t=e.filter(e=>e.scormRegistrationID===n)[0],t.overdue=!1,t.remaining=!t.overdue&&t.endDate?Object(h.d)(void 0):null,t.satisfaction="",this.courseService.getScormLaunchHistory({RegistrationId:t.scormRegistrationID})})).subscribe(e=>{if(e&&e.result&&e.result.length>0){const n=e.result[e.result.length-1],i=e.result[0];t.score=100*Number(i.normalizedMeasure),t.satisfaction=i.satisfaction,t.firstAccess=n.lastUpdated,t.lastAccess=i.lastUpdated,t.enrollmentHistory=e,this.enrollment=t,this.enrollmentService.setActiveEnrollment(this.enrollment)}else this.enrollment=t,this.enrollmentService.setActiveEnrollment(this.enrollment)},()=>{this.enrollment=t,this.enrollmentService.setActiveEnrollment(this.enrollment)})}sendNotifications(){const e=this.modal.open(wa.a,{backdrop:"static",size:"md"});e.componentInstance.preSelectedcontacts=this.presenters,e.componentInstance.filteredContacts=this.presenters,e.result.then(e=>{e&&e.selectedContacts&&e.selectedContacts.length>0&&(this.modal.open(X,{size:"lg",backdrop:"static"}).componentInstance.delegates=e.selectedContacts)})}getContractAssignment(){this.contractService.getContractAssignment(0,this.event.referenceID,0,0,0,0,0).subscribe(e=>{this.assignment=e[0],console.log("\ud83d\ude80 > EventHeaderComponent > .subscribe > this.assignment",this.assignment)})}back(){this.location.back()}onUpdateEventProfile(){const e=this.prepareDataForUpdateEvent();this.eventService.updateEvent(e).subscribe(()=>{localStorage.setItem("eventObject",JSON.stringify(this.event)),this.isEditEventProfile=!1})}prepareDataForUpdateEvent(){return{eventID:this.event.eventID,eventTitle:this.event.eventTitle,courseID:this.event.courseID,venueID:this.event.venueID,providerID:this.event.providerID,trainerID:null,publicEvent:this.event.publicEvent,eventProfile:this.event.eventProfile,minimumScore:this.event.minimumScore,maxScore:this.event.maxScore,eventCategoryID:this.event.eventCategoryID,eventSubCategoryID:this.event.eventSubCategoryID,awardCredits:this.event.awardCredits,referenceID:this.event.referenceID,eventPitch:this.event.eventPitch,venueName:this.event.venueName,eventFormatID:this.event.eventFormatID,eventInstructions:this.event.eventInstructions,googleURL:this.event.googleURL,latitude:this.event.latitude,longitude:this.event.longitude}}getTask(){this.taskLoading=!0;let e=23;this.bookingCheck&&5===this.bookingCheck.eventDelegateTypeID&&(e=24),this.taskService.getTask(0,e,this.event.eventID,this.contactID,0,0,0,0,!0).subscribe(e=>{if(e){const t=e[0];t&&(this.taskOwner=t.taskOwners.find(e=>e.contactID===this.contactID))}this.taskLoading=!1})}confirmPostSession(){if(this.taskOwner)return;const e=this.modal.open(dt.a);e.componentInstance.objectType="Confirm Session Ending",e.componentInstance.objectDetails="Would you like to submit your post session feedback now?",e.componentInstance.customConfirm=!0,e.result.then(e=>{e&&"Yes"===e&&this.postSession()})}postSession(){this.loading=!0;const e=[],t={taskTitle:"Mentoring Session Review - "+this.event.eventTitle,taskDescription:"",endDate:Object(h.a)(new Date),taskValue:0,taskCategoryID:24,referenceID:this.event.eventID,autoSignOff:!0,taskModeID:0,submittedBy:this.event.scheduledbyID,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:1,taskTypeID:0,formID:0},n={taskTitle:"Mentoring Session Review - "+this.event.eventTitle,taskDescription:"",endDate:Object(h.a)(new Date),taskValue:0,taskCategoryID:23,referenceID:this.event.eventID,autoSignOff:!0,taskModeID:0,submittedBy:this.event.scheduledbyID,parentTaskID:0,url:"",documentFolderID:0,taskReason:"",taskSignOffCondition:"",taskClassificationID:0,taskTypeID:0,formID:0};this.event.delegates.some(e=>4===e.eventDelegateTypeID)&&e.push(this.taskService.addTask(n)),this.event.delegates.some(e=>5===e.eventDelegateTypeID)&&e.push(this.taskService.addTask(t)),Object(_.a)(e).pipe(Object(V.a)(e=>{const t=[],n=Object(h.l)(this.event.delegates);return e.forEach(e=>{1===e.taskClassificationID?n.filter(e=>5===e.eventDelegateTypeID).forEach(n=>{const i=new rt.a;i.taskID=e.inOut_TaskID,i.contactID=n.contactID,i.taskOwnerCategoryID=24,i.referenceID=n.eventDelegateID,t.push(this.taskService.addTaskOwner(i))}):n.filter(e=>4===e.eventDelegateTypeID).forEach(n=>{const i=new rt.a;i.taskID=e.inOut_TaskID,i.contactID=n.contactID,i.taskOwnerCategoryID=23,i.referenceID=n.eventDelegateID,t.push(this.taskService.addTaskOwner(i))})}),Object(_.a)(t)})).subscribe(e=>{this.toastr.success("Session is completed"),e.forEach(e=>{e.contactID===this.contactID&&(this.taskOwner=e,this.taskOwner.taskStatusID=1),this.noticeTaskOwners(e.taskID,e.contactID)}),this.loading=!1})}noticeTaskOwners(e,t){if(this.contactID===t)return;const n=new Date,a=Object(i.y)(n,"yyyy-MM-dd HH:mm:ss","en-UK"),s=`${this.user.firstName} ${this.user.surname}| has assigned Mentoring Session Review - ${this.event.eventTitle}`,r={notificationCategoryID:mt.a.activity_task_owner,referenceID:e,contactID:t,description:s,createdContact:this.contactID},o=a+"|"+e,c={date:a,body:s.replace("|",""),topic:s.replace("|",""),senderFullName:"",senderPhoto:"",notificationId:Math.floor(1e3*Math.random()),channel:"dashboard",reference:r.referenceID,notificationType:at.a.applicantRequest,senderId:r.createdContact,receivers:[r.contactID],uniqueId:o,discussionId:0};this.notificationService.noticeNotification(r).subscribe(()=>{this.signalRService.transferMessage("dashboard",c)})}onCancelUpdateEventProfile(){this.isEditEventProfile=!1,this.event.eventInstructions=this.tmpEditEventInstructions}onEditUpdateEventProfile(){this.adminCheck&&(this.isEditEventProfile=!0)}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete()}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](o.p),D["\u0275\u0275directiveInject"](p.c),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](Y.a),D["\u0275\u0275directiveInject"](C.b),D["\u0275\u0275directiveInject"](N.a),D["\u0275\u0275directiveInject"](B.a),D["\u0275\u0275directiveInject"](ut.a),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](ht.a),D["\u0275\u0275directiveInject"](i.j),D["\u0275\u0275directiveInject"](Oa.a),D["\u0275\u0275directiveInject"](b.a),D["\u0275\u0275directiveInject"](gt.a))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event-meeting"]],inputs:{event:"event"},decls:1,vars:2,consts:[["class","d-flex flex-column w-100",3,"avnonLoader",4,"ngIf"],[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"entry","border-none"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48",3,"src"],[1,"mt-1"],[1,"actions","d-flex","align-items-center"],[4,"ngIf"],["ngbDropdown","","container","body","class","ml-auto action-dropdown",4,"ngIf"],["class","dropdown",4,"ngIf"],[1,"profile-overview","pb-0","pt-0","mt-0"],[1,"p-23"],[1,"event-info","d-flex","flex-column","w-100","pl-3","pr-3"],[1,"d-flex","w-100","flex-column","mb-1"],[4,"ngIf","ngIfElse"],["elseViewEventProfile",""],[1,"icon-list","pl-0"],[1,"text-muted","other","mt-2","mr-4"],[1,"fas","fa-clock","mr-1"],["elseInPerson",""],["class","session-end d-flex w-100 mt-2",4,"ngIf"],["class","tabs",4,"ngIf"],["class","end-session-btn mr-2 cursor-pointer","placement","bottom",3,"ngClass","ngbTooltip","click",4,"ngIf"],["placement","bottom",1,"end-session-btn","mr-2","cursor-pointer",3,"ngClass","ngbTooltip","click"],[1,"fas","fa-check"],["ngbDropdown","","container","body",1,"ml-auto","action-dropdown"],["ngbDropdownToggle","","type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","no-icon","icon-right","w-100"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngIf"],[1,"fas","fa-check","text-success","mr-1"],[1,"fas","fa-times","text-danger","mr-1"],["ngbDropdownItem","",3,"click"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico","dots-ico--gray"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["rows","5","name","profile",1,"form-control","textarea-event-profile","mt-2",3,"ngModel","ngModelChange"],[1,"text-right","my-2"],[1,"btn","btn-sm",3,"click"],["src","assets/img/close.svg","alt",""],[1,"ml-2","btn","btn-sm","btn-primary",3,"click"],[1,"event-profile",3,"click"],["elseNoEventProfile",""],[1,"meta","mb-2"],["class","edit-description",4,"ngIf"],[1,"edit-description"],["class","fas fa-map-marker-alt mr-1",4,"ngIf"],[1,"fas","fa-map-marker-alt","mr-1"],["class","meta-alt","target","_blank",3,"href",4,"ngIf"],["target","_blank",1,"meta-alt",3,"href"],[1,"session-end","d-flex","w-100","mt-2"],["class","mb-0",4,"ngIf"],["class","mb-0 ml-2",3,"routerLink",4,"ngIf"],[1,"mb-0"],[1,"mb-0","ml-2",3,"routerLink"],[3,"routerLink"],[1,"tabs"],[1,"nav","nav-fill","justify-content-center"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["class","nav-item",4,"ngIf"]],template:function(e,t){1&e&&D["\u0275\u0275template"](0,Ks,38,25,"div",0),2&e&&D["\u0275\u0275property"]("ngIf",t.event&&D["\u0275\u0275pureFunction0"](1,Gs).includes(t.event.eventCategoryID))},directives:[i.n,y.a,i.l,o.C,o.i,o.m,o.k,o.j,a.b,a.q,a.t,p.f,p.e],pipes:[i.e,E.a],styles:[""]}),e})();function Ws(e,t){if(1&e&&D["\u0275\u0275element"](0,"app-event-header",1),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275property"]("event",e.event)}}function Xs(e,t){if(1&e&&D["\u0275\u0275element"](0,"app-event-meeting",1),2&e){const e=D["\u0275\u0275nextContext"]();D["\u0275\u0275property"]("event",e.event)}}const Zs=function(){return[2,4,12,13]},Qs=[{path:":eventID",component:(()=>{class e{constructor(e,t,n,i){this.activatedRoute=e,this.eventService=t,this.userService=n,this.router=i,this.unsubscribe=new f.a,this.event=new F.a,this.user=this.userService.user.getValue(),this.activatedRoute.params.subscribe(e=>{this.eventID=e.eventID})}ngOnInit(){this.router.navigate(["/weekly-plan"],{queryParams:{eventID:this.eventID}})}ngOnDestroy(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.next(),null===(t=this.unsubscribe)||void 0===t||t.complete(),this.eventService.loadEventDetail(null)}}return e.\u0275fac=function(t){return new(t||e)(D["\u0275\u0275directiveInject"](p.a),D["\u0275\u0275directiveInject"](S.a),D["\u0275\u0275directiveInject"](x.a),D["\u0275\u0275directiveInject"](p.c))},e.\u0275cmp=D["\u0275\u0275defineComponent"]({type:e,selectors:[["app-event"]],decls:3,vars:4,consts:[[3,"event",4,"ngIf"],[3,"event"]],template:function(e,t){1&e&&(D["\u0275\u0275template"](0,Ws,1,1,"app-event-header",0),D["\u0275\u0275template"](1,Xs,1,1,"app-event-meeting",0),D["\u0275\u0275element"](2,"router-outlet")),2&e&&(D["\u0275\u0275property"]("ngIf",t.event&&t.event.eventID&&!D["\u0275\u0275pureFunction0"](2,Zs).includes(t.event.eventCategoryID)),D["\u0275\u0275advance"](1),D["\u0275\u0275property"]("ngIf",t.event&&t.event.eventID&&D["\u0275\u0275pureFunction0"](3,Zs).includes(t.event.eventCategoryID)))},directives:[i.n,p.h,os,Js],styles:[".content-event[_ngcontent-%COMP%]{border-left:1px solid #d5d5d5;border-right:1px solid #d5d5d5;margin-top:55px;min-height:calc(100vh - 60px)}"]}),e})(),children:[{path:"",component:pn},{path:"delegates",component:it},{path:"feedback",component:Sa},{path:"files",component:wn},{path:"financials",component:Un},{path:"assignments",component:j},{path:"feed",component:kn},{path:"panel-members",component:ra},{path:"leaderboard",component:Yn},{path:"minutes",component:ai},{path:"minutes-attendees",component:Gn},{path:"meeting-feedback",component:Yi}]}];let er=(()=>{class e{}return e.\u0275mod=D["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=D["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[p.g.forChild(Qs)],p.g]}),e})();var tr=n("j4PG");let nr=(()=>{class e{}return e.\u0275mod=D["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=D["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})(),ir=(()=>{class e{}return e.\u0275mod=D["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=D["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,tr.a,o.q,a.l,a.z,nr,o.l]]}),e})();var ar=n("vvGM"),sr=n("ZLSo"),rr=n("jD4a"),or=n("Jiv2"),cr=n("tkyS");let lr=(()=>{class e{}return e.\u0275mod=D["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=D["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,a.l,a.z,o.q,tr.a]]}),e})();var dr=n("6pDZ");let mr=(()=>{class e{}return e.\u0275mod=D["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=D["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})(),pr=(()=>{class e{}return e.\u0275mod=D["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=D["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,a.l,a.z,tr.a,o.h,o.q]]}),e})();var gr=n("ccsH"),ur=n("4Ptv"),hr=n("UWWY"),vr=n("pr+S");let fr=(()=>{class e{}return e.\u0275mod=D["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=D["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,a.l,a.z,o.r,er,s.a,c.GooglePlaceModule,l.a.forRoot({apiKey:d.a.API_KEY,libraries:["places"]}),m.b,r.a,ir,ar.a,sr.a,rr.a,s.a,or.a,cr.NewsFeedModule,lr,dr.a,mr,pr,gr.a,ur.a,hr.a,vr.a]]}),e})()}}]);