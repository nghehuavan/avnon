(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"BJ+2":function(e,t,n){"use strict";n.r(t),n.d(t,"FormModule",function(){return Ae});var i=n("ofXK"),o=n("jD4a"),r=n("PCNd"),l=n("tyNb"),m=n("FSKZ"),a=n("9122"),c=n("fXoL"),s=n("xDUJ"),d=n("kmKP"),f=n("1kSV"),p=n("Jn3s"),u=n("3Pt+");function h(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"a",14),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addForm()}),c["\u0275\u0275element"](1,"span",15),c["\u0275\u0275text"](2,"Add "),c["\u0275\u0275elementEnd"]()}}function v(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().showForm(n)}),c["\u0275\u0275elementStart"](1,"h2"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"p"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.formName),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.formDescription)}}let g=(()=>{class e{constructor(e,t,n,i,o){this.formService=e,this.router=t,this.userService=n,this.ngbModal=i,this.location=o,this.forms=[],this.filteredForms=[],this.user=this.userService.user.getValue(),this.companyID=this.user.companyID,this.permissionAccess=this.user.permissions.some(e=>[a.b.Admin,a.b.Forms].includes(e.permissionAreaID))}ngOnInit(){this.fillForms()}fillForms(){this.loading=!0,this.formService.getForms(this.companyID,0,0).subscribe(e=>{this.forms=e,this.filteredForms=this.forms.filter(e=>1===e.status),this.loading=!1})}filterForms(e){this.filteredForms=this.forms.filter(t=>t.status==e)}addForm(){this.ngbModal.open(m.a,{backdrop:"static"}).result.then(e=>{})}showForm(e){console.log(e,"form setting"),localStorage.setItem("formObject",JSON.stringify(e)),this.router.navigate(["forms/builder"])}goBack(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](l.c),c["\u0275\u0275directiveInject"](d.a),c["\u0275\u0275directiveInject"](f.p),c["\u0275\u0275directiveInject"](i.j))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-forms"]],decls:19,vars:4,consts:[[3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"w-100","d-flex","flex-column"],[1,"filter-actions","d-flex","w-100","align-items-center","pl-3","pr-3","border-bottom"],[1,"dropdown"],[1,"custom-select",3,"click"],["value","1"],["value","2"],[1,"ml-auto"],["class","cursor-pointer ml-2",3,"click",4,"ngIf"],["class","entry",3,"click",4,"ngFor","ngForOf"],[1,"cursor-pointer","ml-2",3,"click"],[1,"plus-ico-2"],[1,"entry",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"span",2),c["\u0275\u0275listener"]("click",function(){return t.goBack()}),c["\u0275\u0275element"](3,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"h1",4),c["\u0275\u0275text"](5,"Forms"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",5),c["\u0275\u0275elementStart"](7,"div",6),c["\u0275\u0275elementStart"](8,"div",7),c["\u0275\u0275elementStart"](9,"select",8),c["\u0275\u0275listener"]("click",function(e){return t.filterForms(e.target.value)}),c["\u0275\u0275elementStart"](10,"option",9),c["\u0275\u0275text"](11,"Active"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"option",10),c["\u0275\u0275text"](13,"Archived"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",11),c["\u0275\u0275elementStart"](15,"span"),c["\u0275\u0275text"](16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](17,h,3,0,"a",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](18,v,5,2,"div",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275property"]("avnonLoader",t.loading),c["\u0275\u0275advance"](16),c["\u0275\u0275textInterpolate1"]("",t.filteredForms.length," forms(s) "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.permissionAccess),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.filteredForms))},directives:[p.a,u.v,u.D,i.n,i.m],styles:[".forms-content[_ngcontent-%COMP%]{margin-top:55px;min-height:calc(100vh - 55px)}.filters[_ngcontent-%COMP%]{border-top:1px solid #dfdfdf}"]}),e})();var S=n("/6gR");let x=(()=>{class e{constructor(){this.formObject=[],this.formCategoryID=0}ngOnInit(){const e=JSON.parse(localStorage.getItem("formObject"));this.formObject=e,console.log(e,"here"),this.formFieldAnswerCategoryID=e.formFieldAnswerCategoryID,this.referenceID=e.referenceID,this.formCategoryID=e.formCategoryID,this.answerReferenceID=e.answerReferenceID,this.formID=e.formID,this.task=e.task,this.taskOwnerID=e.taskOwnerID,console.log(this.task,e,"another",this.taskOwnerID)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-player"]],decls:1,vars:7,consts:[[3,"formCategoryID","answerReferenceID","formID","formFieldAnswerCategoryID","referenceID","taskOwnerID","task"]],template:function(e,t){1&e&&c["\u0275\u0275element"](0,"app-form-playback",0),2&e&&c["\u0275\u0275property"]("formCategoryID",t.formCategoryID)("answerReferenceID",t.answerReferenceID)("formID",t.formID)("formFieldAnswerCategoryID",t.formFieldAnswerCategoryID)("referenceID",t.referenceID)("taskOwnerID",t.taskOwnerID)("task",t.task)},directives:[S.a],styles:[""]}),e})(),F=(()=>{class e{constructor(e){this.location=e}ngOnInit(){}onSubmit(){this.location.back()}back(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](i.j))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-complete"]],decls:15,vars:0,consts:[[1,"d-flex","flex-column","w-100"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"profile-overview","filter-container"],[1,"lead"],[1,"row"],[1,"form-block"],[1,"form-group","form-group-block"],[1,"action-row"],[1,"btn","btn-outline-primary",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"span",2),c["\u0275\u0275listener"]("click",function(){return t.back()}),c["\u0275\u0275element"](3,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"h1",4),c["\u0275\u0275text"](5,"Form successfully submitted!"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",5),c["\u0275\u0275elementStart"](7,"p",6),c["\u0275\u0275text"](8,"Thanks for taking the time to provide your feedback, your input has been successfully recorded. "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"div",8),c["\u0275\u0275elementStart"](11,"div",9),c["\u0275\u0275elementStart"](12,"div",10),c["\u0275\u0275elementStart"](13,"button",11),c["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),c["\u0275\u0275text"](14,"Return Home"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())},styles:[""]}),e})();var I=n("5+WD"),b=n("OzGw"),E=n("vdWK");class y{constructor(){this.formSectionID=null,this.minScore=null,this.maxScore=null,this.comment=null}}var C=n("cp0P"),w=n("eIep"),D=n("5eqV");function O(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"li",15),c["\u0275\u0275elementStart"](1,"a",16),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).toMain()}),c["\u0275\u0275text"](2,"Parent Sections"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function k(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li",17),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.activeParentSection.formSectionTitle)}}function M(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"li",15),c["\u0275\u0275elementStart"](1,"a",16),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).backToParent()}),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.activeParentSection.formSectionTitle)}}function P(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li",17),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.activeSection.formSectionTitle)}}function T(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"nav"),c["\u0275\u0275elementStart"](1,"ol",12),c["\u0275\u0275template"](2,O,3,0,"li",13),c["\u0275\u0275template"](3,k,2,1,"li",14),c["\u0275\u0275template"](4,M,3,1,"li",13),c["\u0275\u0275template"](5,P,2,1,"li",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.activeParentSection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.activeParentSection&&!e.activeSection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.activeParentSection&&e.activeSection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.activeSection)}}function R(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"li",20),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"](2).parentSectionSelect(n)}),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.formSectionTitle," ")}}function V(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ul",18),c["\u0275\u0275template"](1,R,2,1,"li",19),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.parentSections)}}function _(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",26),c["\u0275\u0275elementStart"](1,"div",27),c["\u0275\u0275elementStart"](2,"input",28),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.minScore=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",27),c["\u0275\u0275elementStart"](4,"input",28),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.maxScore=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",29),c["\u0275\u0275elementStart"](6,"textarea",30),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.comment=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"i",31),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"](2).delete(n)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("name","minScore-",n,""),c["\u0275\u0275property"]("ngModel",e.minScore)("min",0)("max",100),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("name","maxScore-",n,""),c["\u0275\u0275property"]("ngModel",e.maxScore)("min",0)("max",100),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("name","comment-",n,""),c["\u0275\u0275property"]("ngModel",e.comment)}}function q(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",21),c["\u0275\u0275elementStart"](2,"div",22),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4,"Start Range"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",22),c["\u0275\u0275elementStart"](6,"span"),c["\u0275\u0275text"](7,"End Range"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",23),c["\u0275\u0275elementStart"](9,"span"),c["\u0275\u0275text"](10,"Comment"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](11,_,8,10,"div",24),c["\u0275\u0275elementStart"](12,"div",25),c["\u0275\u0275elementStart"](13,"div",9),c["\u0275\u0275elementStart"](14,"span",16),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addReviewSection()}),c["\u0275\u0275text"](15,"Click to add"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngForOf",e.activeParentSection.sectionReview)}}function j(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3"),c["\u0275\u0275text"](1,"Sub Sections"),c["\u0275\u0275elementEnd"]())}function A(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"li",20),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().index;return c["\u0275\u0275nextContext"](2).selectSection(t)}),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.formSectionTitle," ")}}function $(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,A,2,1,"li",33),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.activeParentSection.formSectionID===e.formSectionParentID)}}function L(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ul",18),c["\u0275\u0275template"](1,$,2,1,"ng-container",32),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.form.sections)}}function N(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",36),c["\u0275\u0275elementStart"](1,"div",27),c["\u0275\u0275elementStart"](2,"input",28),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.minScore=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",27),c["\u0275\u0275elementStart"](4,"input",28),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.maxScore=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",29),c["\u0275\u0275elementStart"](6,"textarea",37),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.comment=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"i",31),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.index;return c["\u0275\u0275nextContext"](2).delete(n)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("name","minScore-",n,""),c["\u0275\u0275property"]("ngModel",e.minScore)("min",0)("max",100),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("name","maxScore-",n,""),c["\u0275\u0275property"]("ngModel",e.maxScore)("min",0)("max",100),c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("name","comment-",n,""),c["\u0275\u0275property"]("ngModel",e.comment)}}function Q(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",21),c["\u0275\u0275elementStart"](2,"div",22),c["\u0275\u0275elementStart"](3,"span"),c["\u0275\u0275text"](4,"Start Range"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",22),c["\u0275\u0275elementStart"](6,"span"),c["\u0275\u0275text"](7,"End Range"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",23),c["\u0275\u0275elementStart"](9,"span"),c["\u0275\u0275text"](10,"Comment"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](11,N,8,10,"div",34),c["\u0275\u0275elementStart"](12,"div",35),c["\u0275\u0275elementStart"](13,"div",9),c["\u0275\u0275elementStart"](14,"span",16),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().addReviewSection()}),c["\u0275\u0275text"](15,"Click to add"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngForOf",e.activeSection.sectionReview)}}function z(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"button",38),c["\u0275\u0275text"](1," Confirm "),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](),t=c["\u0275\u0275reference"](8);c["\u0275\u0275property"]("disabled",e.loading||t.invalid||!e.activeParentSection&&!e.activeSection||!(null!=e.activeParentSection&&null!=e.activeParentSection.sectionReview&&e.activeParentSection.sectionReview.length)&&!(null!=e.activeSection&&null!=e.activeSection.sectionReview&&e.activeSection.sectionReview.length))}}let Y=(()=>{class e{constructor(e,t){this.activeModal=e,this.formService=t,this.parentSections=[],this.reviewsForDelete=[]}ngOnInit(){this.form.sections=this.form.sections.map(e=>(e.sectionReview=[],e)),this.parentSections=this.form.sections.filter(e=>!e.formSectionParentID),this.parentSections=this.parentSections.map(e=>(e.sectionReview=[],e))}submit(){(this.activeSection||this.activeParentSection&&!this.activeSection)&&(this.loading=!0);const e=[];this.activeSection&&(this.activeSection.sectionReview.forEach(t=>{this.reviewsForDelete.forEach(t=>{t.formSectionID===this.activeSection.formSectionID&&e.push(this.formService.deleteSectionReview(t.formSectionReviewID))}),e.push(t.formSectionReviewID?this.formService.updateSectionReview(t):this.formService.postSectionReview(t))}),Object(C.a)(e).pipe(Object(w.a)(()=>this.formService.getSectionReview(0,this.activeSection.formSectionID))).subscribe(e=>{this.activeSection.sectionReview=e,this.reviewsForDelete=[],this.loading=!1})),!this.activeSection&&this.activeParentSection&&(this.activeParentSection.sectionReview.forEach(t=>{this.reviewsForDelete.forEach(t=>{t.formSectionID===this.activeParentSection.formSectionID&&e.push(this.formService.deleteSectionReview(t.formSectionReviewID))}),e.push(t.formSectionReviewID?this.formService.updateSectionReview(t):this.formService.postSectionReview(t))}),Object(C.a)(e).pipe(Object(w.a)(()=>this.formService.getSectionReview(0,this.activeParentSection.formSectionID))).subscribe(e=>{this.activeParentSection.sectionReview=e,this.reviewsForDelete=[],this.loading=!1}))}parentSectionSelect(e){this.activeParentSection=this.parentSections[e],this.activeParentSection.sectionReview.length||(this.loading=!0,this.formService.getSectionReview(0,this.activeParentSection.formSectionID).subscribe(e=>{this.activeParentSection.sectionReview=e,this.loading=!1}))}selectSection(e){this.activeSection=this.form.sections[e],this.activeSection.sectionReview.length||(this.loading=!0,this.formService.getSectionReview(0,this.activeSection.formSectionID).subscribe(e=>{this.activeSection.sectionReview=e,this.loading=!1}))}addReviewSection(){const e=new y;this.activeSection&&(e.formSectionID=this.activeSection.formSectionID,this.activeSection.sectionReview.push(e)),!this.activeSection&&this.activeParentSection&&(e.formSectionID=this.activeParentSection.formSectionID,this.activeParentSection.sectionReview.push(e))}toMain(){this.reviewsForDelete.forEach(e=>{e.formSectionReviewID&&(this.activeSection&&this.activeSection.formSectionID===e.formSectionID&&this.activeSection.sectionReview.push(e),this.activeParentSection.formSectionID===e.formSectionID&&this.activeParentSection.sectionReview.push(e))}),this.activeSection=null,this.activeParentSection=null}delete(e){let t=[];this.activeSection&&(t=this.activeSection.sectionReview.splice(e,1)),this.activeParentSection&&!this.activeSection&&(t=this.activeParentSection.sectionReview.splice(e,1)),t[0].formSectionReviewID&&(this.activeSection&&this.reviewsForDelete.push(t[0]),!this.activeSection&&this.activeParentSection&&this.reviewsForDelete.push(t[0]))}backToParent(){this.reviewsForDelete.forEach(e=>{e.formSectionID===this.activeSection.formSectionID&&e.formSectionReviewID&&this.activeSection.sectionReview.push(e)}),this.reviewsForDelete=[],this.activeSection=null}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](f.a),c["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-section-review"]],decls:18,vars:8,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column","scrolled",3,"avnonLoader"],[3,"submit"],["f","ngForm"],[4,"ngIf"],["class","list-group",4,"ngIf"],[1,"col-12"],[1,"form-group","text-right","mt-4"],["class","btn btn-primary",3,"disabled",4,"ngIf"],[1,"breadcrumb","bg-white"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"breadcrumb-item"],[1,"cursor-pointer","text-primary",3,"click"],[1,"breadcrumb-item","active"],[1,"list-group"],["class","list-group-item cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","cursor-pointer",3,"click"],[1,"d-flex","table-dotted-border","pb-2"],[1,"col-lg-2","col-md-2","col-sm-3","pr-0"],[1,"col-lg-8","col-md-8","col-sm-6"],["class","d-flex pt-2 pb-2 mb-2 table-dotted-border","ngModelGroup","range",4,"ngFor","ngForOf"],[1,"d-flex","mt-2","mb-4"],["ngModelGroup","range",1,"d-flex","pt-2","pb-2","mb-2","table-dotted-border"],[1,"col-lg-2","col-md-2","col-sm-3"],["type","number","required","",1,"form-control",3,"ngModel","name","min","max","ngModelChange"],[1,"col-lg-8","col-md-8","col-sm-6","d-flex"],["autosize","","required","",1,"form-control","text-area",3,"name","ngModel","ngModelChange"],[1,"fas","fa-trash-alt","text-danger","ml-2","mr-2","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],["class","list-group-item cursor-pointer",3,"click",4,"ngIf"],["class","d-flex pt-2 pb-2 mb-2 table-dotted-border",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],[1,"d-flex","pt-2","pb-2","mb-2","table-dotted-border"],["required","",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h5",1),c["\u0275\u0275text"](2," Section Comments "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",function(){return t.dismiss()}),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"form",5,6),c["\u0275\u0275listener"]("submit",function(){return t.submit()}),c["\u0275\u0275template"](9,T,6,4,"nav",7),c["\u0275\u0275template"](10,V,2,1,"ul",8),c["\u0275\u0275template"](11,q,16,1,"ng-container",7),c["\u0275\u0275elementStart"](12,"div",9),c["\u0275\u0275template"](13,j,2,0,"h3",7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](14,L,2,1,"ul",8),c["\u0275\u0275template"](15,Q,16,1,"ng-container",7),c["\u0275\u0275elementStart"](16,"div",10),c["\u0275\u0275template"](17,z,2,1,"button",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("avnonLoader",t.loading),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.activeParentSection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.activeParentSection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeParentSection&&!t.activeSection),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.activeParentSection&&!t.activeSection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeParentSection&&!t.activeSection),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.activeSection),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.activeSection||t.activeParentSection))},directives:[p.a,u.E,u.r,u.s,i.n,i.m,u.u,u.w,u.b,u.A,u.q,u.t,D.a],styles:[".table-dotted-border[_ngcontent-%COMP%]{border-bottom:1px dotted #aaa}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border:0;border-bottom:1px dotted #aaa}.scrolled[_ngcontent-%COMP%]{max-height:80vh;overflow-x:hidden;overflow-y:auto}.text-area[_ngcontent-%COMP%]{min-height:100px}"]}),e})();var G=n("Cfvw"),J=n("bOdf"),U=n("IAdc");function B(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",40),c["\u0275\u0275text"](1," You must include a Question Title. "),c["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",41),c["\u0275\u0275element"](1,"textarea",42),c["\u0275\u0275elementStart"](2,"button",43),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().helperText=!1}),c["\u0275\u0275elementStart"](3,"span",3),c["\u0275\u0275text"](4,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function X(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",40),c["\u0275\u0275text"](1," You must select Scale "),c["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275elementStart"](1,"label",7),c["\u0275\u0275text"](2,"Scale:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"select",44),c["\u0275\u0275elementStart"](4,"option",10),c["\u0275\u0275text"](5," 1"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"option",12),c["\u0275\u0275text"](7," 2"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"option",13),c["\u0275\u0275text"](9," 3"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"option",11),c["\u0275\u0275text"](11," 4"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"option",14),c["\u0275\u0275text"](13," 5"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](14,X,2,0,"div",20)),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](14),c["\u0275\u0275property"]("ngIf",e.fieldForm.controls.formFieldScale.touched&&0==e.fieldForm.controls.formFieldScale.value)}}function W(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",50),c["\u0275\u0275text"](1," Points"),c["\u0275\u0275elementEnd"]())}const Z=function(e){return{"no-show-points":e}};function ee(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",45),c["\u0275\u0275elementStart"](1,"div",46),c["\u0275\u0275text"](2," Answer options"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,W,2,0,"div",47),c["\u0275\u0275elementStart"](4,"div",48),c["\u0275\u0275text"](5," Comment"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](6,"div",49),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](2,Z,!e.showPoints)),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.showPoints)}}function te(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",60),c["\u0275\u0275text"](1," Enter the option. "),c["\u0275\u0275elementEnd"]())}function ne(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"input",61),c["\u0275\u0275listener"]("keypress",function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](2).numberOnly(t)}),c["\u0275\u0275elementEnd"]()}}function ie(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",60),c["\u0275\u0275text"](1," Enter the value point. "),c["\u0275\u0275elementEnd"]())}function oe(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",51),c["\u0275\u0275elementStart"](1,"div",46),c["\u0275\u0275element"](2,"input",52),c["\u0275\u0275element"](3,"input",53),c["\u0275\u0275template"](4,te,2,0,"div",54),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",50),c["\u0275\u0275template"](6,ne,1,0,"input",55),c["\u0275\u0275template"](7,ie,2,0,"div",54),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",48),c["\u0275\u0275elementStart"](9,"div",56),c["\u0275\u0275element"](10,"input",57),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",49),c["\u0275\u0275elementStart"](12,"button",58),c["\u0275\u0275elementStart"](13,"span",59),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,i=t.index;return c["\u0275\u0275nextContext"]().onOptionDelete(n.value.formFieldOptionID,i)}),c["\u0275\u0275text"](14,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=c["\u0275\u0275nextContext"]();let o=null;c["\u0275\u0275property"]("formGroupName",n),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",e.get("formFieldOptionText").touched&&e.get("formFieldOptionText").invalid),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",i.showPoints),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.get("formFieldOptionValue").touched&&!(null!=(o=e.get("formFieldOptionValue"))&&o.value)&&i.showPoints)}}function re(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275elementStart"](1,"div",62),c["\u0275\u0275elementStart"](2,"button",63),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onAddOption()}),c["\u0275\u0275text"](3,"Add answer option"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function le(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",68),c["\u0275\u0275element"](1,"input",69),c["\u0275\u0275elementEnd"]())}function me(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",64),c["\u0275\u0275elementStart"](2,"input",65),c["\u0275\u0275listener"]("change",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().toggleIsMaxLengthRequired()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"label",66),c["\u0275\u0275text"](4,"Maximum length"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](5,le,2,0,"div",67),c["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("checked",e.isMaxLengthRequired),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.isMaxLengthRequired)}}function ae(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",68),c["\u0275\u0275element"](1,"input",73),c["\u0275\u0275elementEnd"]())}function ce(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",70),c["\u0275\u0275elementStart"](2,"input",71),c["\u0275\u0275listener"]("change",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().toggleIsMinLengthRequired()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"label",72),c["\u0275\u0275text"](4,"Minimum length"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](5,ae,2,0,"div",67),c["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("checked",e.isMinLengthRequired),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.isMinLengthRequired)}}let se=(()=>{class e{constructor(e,t,n,i){this.formService=e,this.route=t,this.modalService=n,this.activeModal=i,this.helperText=!1,this.buttonText="Submit",this.formfieldOption=[],this.formFieldTypeID=0,this.formRequired=!1,this.validatorState=!0,this.showPoints=!1,this.optionsQuestion=!1,this.componentGuid=e.newGuid().replace("-","_")}addHelperText(){this.helperText=!this.helperText}ngOnInit(){this.initForm()}onSubmit(){}initForm(){let e="",t=0,n=0,i=new u.c([]),o=!1,r=!1,l=!1,m=0,a=0,c="";this.isEditing?(e=this.formField.formFieldTitle,t=+this.formField.formFieldTypeID,n=+this.formField.formFieldScale,o=this.formField.formFieldIsRequired,r=this.formField.formFieldIsComment,m=+this.formField.maxCharacters,a=+this.formField.minCharacters,m&&(this.isMaxLengthRequired=!0),a&&(this.isMinLengthRequired=!0),c=this.formField.formFieldDetail,l=this.formField.summaryField,this.formField.pointsQuestion&&(this.showPoints=!0),this.helperText=!!this.formField.formFieldDetail,this.formService.getOptions(this.formField.formFieldID).subscribe(e=>{if(this.formField.options=e,this.formField.options){for(let e of this.formField.options)i.push(new u.i({formFieldOptionText:new u.f(e.formFieldOptionText,u.C.required),formFieldOptionValue:new u.f(e.formFieldOptionValue),formFieldOptionID:new u.f(e.formFieldOptionID),commentRequired:new u.f(e.commentRequired)}));if(2==this.formField.formFieldTypeID||5==this.formField.formFieldTypeID||6==this.formField.formFieldTypeID){if(this.optionsQuestion=!0,0===this.fieldForm.get("formFieldOptions").length)var t=1;for(;t<=3;)this.onAddOption(),t++}}})):this.formField=new E.a,this.fieldForm=new u.i({formFieldTitle:new u.f(e,u.C.required),formFieldTypeID:new u.f(t),formFieldScale:new u.f(n),pointsQuestion:new u.f(this.showPoints),formFieldIsRequired:new u.f(o),summaryField:new u.f(l),formFieldIsComment:new u.f(r),maxCharacters:new u.f(m),minCharacters:new u.f(a),formFieldOptions:i,formFieldDetail:new u.f(c,u.C.required)})}toggleIsMaxLengthRequired(){this.isMaxLengthRequired=!this.isMaxLengthRequired,!1===this.isMaxLengthRequired&&(this.fieldForm.value.maxCharacters=0)}toggleIsMinLengthRequired(){this.isMinLengthRequired=!this.isMinLengthRequired,!1===this.isMinLengthRequired&&(this.fieldForm.value.minCharacters=0)}get controls(){return this.fieldForm.get("formFieldOptions").controls}save(e){}saveTest(e){this.mapFormValuestoFormFieldModel(),this.isEditing?(this.loading=!0,this.helperText||(this.formField.formFieldDetail=""),this.formService.updateField(this.formField).subscribe(e=>{const t=[];for(let n of this.fieldForm.value.formFieldOptions)t.push({formFieldOptionID:n.formFieldOptionID,formFieldID:this.formField.formFieldID,formFieldOptionText:n.formFieldOptionText,formFieldOptionValue:n.formFieldOptionValue,points:n.formFieldOptionValue,commentRequired:n.commentRequired,formOptionOrder:n.formOptionOrder||0}),n++;if(!t.length)return this.activeModal.close(this.formField),void(this.loading=!1);Object(G.a)(t).pipe(Object(J.a)(e=>0==e.formFieldOptionID||null==e.formFieldOptionID&&e.formFieldOptionText?this.formService.insertOption(e):e.formFieldOptionID&&e.formFieldOptionText?this.formService.updateOption(e):!e.formFieldOptionID||""!=e.formFieldOptionText&&null!=e.formFieldOptionText?void 0:this.formService.deleteOption(e.formFieldOptionID)),Object(U.a)()).subscribe(()=>{t.forEach(e=>{this.formfieldOption.push(e),this.formField.options=this.formfieldOption}),this.loading=!1,this.activeModal.close(this.formField)})})):(this.loading=!0,this.helperText||(this.formField.formFieldDetail=""),this.formService.insertField(this.formField).subscribe(e=>{this.formField.formFieldID=+e.inOut_FormFieldID,this.formFieldID=+e.inOut_FormFieldID;const t=[];let n=0;for(let i of this.fieldForm.value.formFieldOptions)t.push({formFieldID:this.formFieldID,formFieldOptionText:i.formFieldOptionText,formFieldOptionValue:i.formFieldOptionValue,points:i.formFieldOptionValue,commentRequired:i.commentRequired,formOptionOrder:n}),n++;if(!t.length)return this.loading=!1,void this.activeModal.close(this.formField);Object(G.a)(t).pipe(Object(J.a)(e=>0!=e.formFieldOptionID&&null!=e.formFieldOptionID||null==e.formFieldOptionText?this.formService.updateOption(e):this.formService.insertOption(e)),Object(U.a)()).subscribe(e=>{e.forEach((e,n)=>{if(e.hasOwnProperty("inOut_FormFieldOptionID")&&t[n]){const i=t[n];i.inOut_FormFieldOptionID=e.inOut_FormFieldOptionID,this.formfieldOption.push(i),this.formField.options=this.formfieldOption}this.loading=!1,this.activeModal.close(this.formField)})})}))}getEmbedUrl(e){try{return e.indexOf("="),e.indexOf("&")>0?e.substring(e.indexOf("=")+1,e.indexOf("&")):e.substring(e.indexOf("=")+1)}catch(t){}}onOptionDelete(e,t){this.fieldForm.get("formFieldOptions").removeAt(t),null!=e&&this.formService.deleteOption(e).subscribe(e=>{})}onCheckChanged(){this.showPoints=!this.showPoints,this.fieldForm.value.formFieldOptions.length>0&&0==this.showPoints&&this.fieldForm.value.formFieldOptions.forEach(e=>{e.formFieldOptionValue=null})}isDisabledForm(e){let t=!1,n=e.value.formFieldOptions;return null!=e.controls.formFieldTitle.value&&""!=e.controls.formFieldTitle.value||(t=!0),(null==e.controls.formFieldScale.value||0==e.controls.formFieldScale.value&&"9"===e.controls.formFieldTypeID.value)&&(t=!0),(2==e.controls.formFieldTypeID.value||"6"==e.controls.formFieldTypeID.value||"5"==e.controls.formFieldTypeID.value&&n.length>0)&&n.forEach(n=>{""==n.formFieldOptionText||null==n.formFieldOptionText||""==n.formFieldOptionValue||null==n.formFieldOptionValue&&1==e.controls.pointsQuestion.value?t=!0:(""!=n.formFieldOptionValue||null!=n.formFieldOptionValue&&1==e.controls.pointsQuestion.value)&&(t=!1)}),t}onAddOption(){this.fieldForm.get("formFieldOptions").push(new u.i({formFieldOptionText:new u.f(null,u.C.required),formFieldOptionValue:new u.f,formFieldOptionID:new u.f,commentRequired:new u.f}))}mapFormValuestoFormFieldModel(){this.formField.formSectionID=this.formSection.formSectionID,this.formField.formFieldTitle=this.fieldForm.value.formFieldTitle,this.formField.formFieldIsRequired=this.fieldForm.value.formFieldIsRequired,this.formField.formFieldValidations="",this.formField.defaultDisplay=!0,this.formField.incubatorDocumentCategoryID=0,this.formField.formFieldOrder=0,this.formField.nextFormFieldID=0,this.formField.folderPath="",this.formField.incubatorDocumentFolderID=0,this.formField.formFieldScale=+this.fieldForm.value.formFieldScale,this.formField.pointsQuestion=this.showPoints,this.formField.maxScore=+this.fieldForm.value.maxScore,this.formField.maxCharacters=+this.fieldForm.value.maxCharacters,this.formField.minCharacters=+this.fieldForm.value.minCharacters,this.formField.formFieldDetail=this.fieldForm.value.formFieldDetail,this.formField.summaryField=this.fieldForm.value.summaryField}onFormFieldTypeClick(e){if(this.formFieldTypeID=e,this.formField.formFieldTypeID=+this.formFieldTypeID,2==this.formFieldTypeID||5==this.formFieldTypeID||6==this.formFieldTypeID){if(this.optionsQuestion=!0,0===this.fieldForm.get("formFieldOptions").length)var t=1;for(;t<=3;)this.onAddOption(),t++}else this.optionsQuestion=!1,this.fieldForm.get("formFieldOptions").clear()}numberOnly(e){const t=e.which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}onCancel(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](l.a),c["\u0275\u0275directiveInject"](f.p),c["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-question-editor"]],decls:63,vars:19,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"avnonLoader"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"mb-0"],["name","question-type","formControlName","formFieldTypeID",1,"question-type","form-control",3,"change"],["value","0"],["value","1"],["value","4"],["value","2"],["value","3"],["value","5"],["value","6"],["value","9"],["value","10"],["id","q4",1,"question-group"],["type","text","placeholder","Please enter the question title","formControlName","formFieldTitle",1,"form-control"],["class","text-danger",4,"ngIf"],["id","dropdown_list_helper",1,"form-text","form-text-link","text-muted"],[1,"btn","btn-link",3,"click"],["class","collapsible-input mb-4",4,"ngIf"],[3,"ngIf"],["class","form-group form-block-floats",3,"ngClass",4,"ngIf"],["formArrayName","formFieldOptions",1,"form-group",3,"ngClass"],["class","form-group form-block-floats",3,"formGroupName",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"form-group","form-check","rh-35"],["type","checkbox","formControlName","formFieldIsRequired",1,"form-check-input"],["for","formFieldIsRequired",1,"m-0","ml-1"],["type","checkbox","formControlName","summaryField",1,"form-check-input"],["for","summaryField",1,"m-0","ml-1"],["tooltipClass","summary-tooltip","closeDelay","15000","ngbTooltip","Select if this question provides an overall summary or key data",1,"fas","fa-info-circle","text-info","cursor-pointer","ml-1"],[4,"ngIf"],["type","checkbox","formControlName","pointsQuestion",1,"form-check-input",3,"change"],["for","pointsQuestion",1,"ml-1"],[1,"text-right"],[1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[1,"collapsible-input","mb-4"],["name","formFieldDetail","id","formFieldDetail","cols","30","rows","10","formControlName","formFieldDetail","placeholder","Provide information below",1,"form-control"],["type","button","aria-label","Close",1,"close","action-close",3,"click"],["formControlName","formFieldScale",1,"form-control"],[1,"form-group","form-block-floats",3,"ngClass"],[1,"form-w","form-100-198"],["class","form-w form-96-fixed",4,"ngIf"],[1,"form-72-fixed","form-w"],[1,"form-w","form-30-fixed"],[1,"form-w","form-96-fixed"],[1,"form-group","form-block-floats",3,"formGroupName"],["type","text","formControlName","formFieldOptionText",1,"form-control"],["type","text","formControlName","formFieldOptionID",1,"form-control",2,"display","none"],["class","form-block text-danger pl-0 error-text",4,"ngIf"],["type","text","class","form-control","formControlName","formFieldOptionValue",3,"keypress",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","formControlName","commentRequired",1,"form-control"],["type","button","aria-label","Close",1,"close","action-close"],["aria-hidden","true",3,"click"],[1,"form-block","text-danger","pl-0","error-text"],["type","text","formControlName","formFieldOptionValue",1,"form-control",3,"keypress"],[1,"modal-action"],[1,"btn","btn-link","add-plus",3,"click"],[1,"form-check","d-flex","align-items-center","rh-35"],["type","checkbox","id","isMaxLengthRequired","name","isMaxLengthRequired",1,"form-check-input",3,"checked","change"],["for","isMaxLengthRequired",1,"form-check-label","font-weight-normal","ml-1"],["class","form-group w-50",4,"ngIf"],[1,"form-group","w-50"],["type","text","placeholder","5","id","maximum_length_15","formControlName","maxCharacters",1,"form-control","switch-input","rhi-35"],[1,"form-check","w-50","d-flex","align-items-center","rh-35"],["type","checkbox","id","isMinLengthRequired","name","isMinLengthRequired",1,"form-check-input",3,"checked","change"],["for","isMinLengthRequired",1,"form-check-label","font-weight-normal","ml-1"],["type","text","placeholder","5","id","minimum_length_15","formControlName","minCharacters",1,"form-control","switch-input","rhi-35"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h5",1),c["\u0275\u0275text"](2," Add Question "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",function(){return t.onCancel()}),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"form",5),c["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),c["\u0275\u0275elementStart"](8,"div",6),c["\u0275\u0275elementStart"](9,"label",7),c["\u0275\u0275text"](10,"Type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"select",8),c["\u0275\u0275listener"]("change",function(e){return t.onFormFieldTypeClick(e.target.value)}),c["\u0275\u0275elementStart"](12,"option",9),c["\u0275\u0275text"](13,"Select type"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"option",10),c["\u0275\u0275text"](15," Text Input - Single Line"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"option",11),c["\u0275\u0275text"](17," Text Input - Paragraph"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"option",12),c["\u0275\u0275text"](19," Check Box List"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"option",13),c["\u0275\u0275text"](21," Document Upload"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"option",14),c["\u0275\u0275text"](23," Drop Down List"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"option",15),c["\u0275\u0275text"](25," Radiobutton List"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"option",16),c["\u0275\u0275text"](27," Star Rating"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"option",17),c["\u0275\u0275text"](29," Video upload"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",18),c["\u0275\u0275elementStart"](31,"div",6),c["\u0275\u0275elementStart"](32,"label",7),c["\u0275\u0275text"](33,"Question *"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](34,"input",19),c["\u0275\u0275template"](35,B,2,0,"div",20),c["\u0275\u0275elementStart"](36,"small",21),c["\u0275\u0275elementStart"](37,"button",22),c["\u0275\u0275listener"]("click",function(){return t.addHelperText()}),c["\u0275\u0275text"](38,"Add helper text "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](39,K,5,0,"div",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](40,H,15,1,"ng-template",24),c["\u0275\u0275template"](41,ee,7,4,"div",25),c["\u0275\u0275elementStart"](42,"div",26),c["\u0275\u0275template"](43,oe,15,4,"div",27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](44,re,4,0,"div",28),c["\u0275\u0275elementStart"](45,"div",29),c["\u0275\u0275element"](46,"input",30),c["\u0275\u0275elementStart"](47,"label",31),c["\u0275\u0275text"](48,"Is this question required?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](49,"div",29),c["\u0275\u0275element"](50,"input",32),c["\u0275\u0275elementStart"](51,"label",33),c["\u0275\u0275text"](52," Summary question? "),c["\u0275\u0275element"](53,"i",34),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](54,me,6,2,"ng-container",35),c["\u0275\u0275template"](55,ce,6,2,"ng-container",35),c["\u0275\u0275elementStart"](56,"div",29),c["\u0275\u0275elementStart"](57,"input",36),c["\u0275\u0275listener"]("change",function(){return t.onCheckChanged()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](58,"label",37),c["\u0275\u0275text"](59,"Points Question"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](60,"div",38),c["\u0275\u0275elementStart"](61,"button",39),c["\u0275\u0275listener"]("click",function(){return t.saveTest(t.fieldForm.value)}),c["\u0275\u0275text"](62),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("avnonLoader",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("formGroup",t.fieldForm),c["\u0275\u0275advance"](24),c["\u0275\u0275classProp"]("mb-2",t.helperText),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.fieldForm.controls.formFieldTitle.hasError("required")&&t.fieldForm.controls.formFieldTitle.touched),c["\u0275\u0275advance"](1),c["\u0275\u0275classProp"]("mb-1",t.helperText),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.helperText),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",9==t.fieldForm.controls.formFieldTypeID.value),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.optionsQuestion),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](17,Z,!t.showPoints)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.controls),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.optionsQuestion),c["\u0275\u0275advance"](10),c["\u0275\u0275property"]("ngIf",1==t.fieldForm.controls.formFieldTypeID.value||4==t.fieldForm.controls.formFieldTypeID.value),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",1==t.fieldForm.controls.formFieldTypeID.value||4==t.fieldForm.controls.formFieldTypeID.value),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("disabled",t.isDisabledForm(t.fieldForm)||t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](t.buttonText))},directives:[p.a,u.E,u.r,u.j,u.B,u.q,u.h,u.v,u.D,u.b,i.n,u.d,i.l,i.m,u.a,f.C,u.k],styles:[".question-group[_ngcontent-%COMP%]{min-height:auto}.question-group[_ngcontent-%COMP%]   .form-w[_ngcontent-%COMP%]   .custom-control.custom-checkbox[_ngcontent-%COMP%]{top:0;left:0}.question-group[_ngcontent-%COMP%]   .form-w[_ngcontent-%COMP%]   .custom-control.custom-checkbox[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{max-width:45px}.question-group[_ngcontent-%COMP%]   .no-show-points[_ngcontent-%COMP%]   .form-72-fixed[_ngcontent-%COMP%]{padding-left:15px}.question-group[_ngcontent-%COMP%]   .no-show-points[_ngcontent-%COMP%]   .form-100-198[_ngcontent-%COMP%]{width:calc(100% - 110px)}.question-group[_ngcontent-%COMP%]   .custom-control-checkbox-default[_ngcontent-%COMP%]{width:24px;padding-left:0}.question-group[_ngcontent-%COMP%]   .custom-control-checkbox-default[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:16px;height:16px}  .summary-tooltip .tooltip-inner{line-height:1.3!important;font-weight:300!important}.form-row[_ngcontent-%COMP%]{min-height:35px}.form-row[_ngcontent-%COMP%], .rh-35[_ngcontent-%COMP%]{max-height:35px;margin-bottom:.7rem}.rhi-35[_ngcontent-%COMP%]{max-height:28px}.form-check-input[_ngcontent-%COMP%]{margin-top:2px!important;width:16px;height:16px}.v-collapse[_ngcontent-%COMP%]{visibility:collapse}"]}),e})();var de=n("Fjb4");let fe=(()=>{class e{constructor(e,t){this.formService=e,this.activeModal=t,this.formSection=new E.d,this.program=new de.a,this.buttonText="Add",this.submitted=!1,this.isEditing=!1}ngOnInit(){}onCancel(){this.activeModal.dismiss()}onSubmit(){this.isEditing?this.formService.updateSection(this.formSection).subscribe(e=>{this.activeModal.close(this.formSection)}):(this.formSection.formID=this.formID,this.formService.insertSection(this.formSection).subscribe(e=>{this.formSection.formSectionID=e.inOut_FormSectionID,this.activeModal.close(this.formSection)}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-section-editor"]],decls:19,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","sectionTitle"],["type","text","id","sectionTitle",1,"form-control",3,"ngModel","ngModelChange"],["for","description",1,"label-options"],["type","text","id","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","form-group-block"],[1,"action-row","text-right"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h1",1),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"button",2),c["\u0275\u0275listener"]("click",function(){return t.onCancel()}),c["\u0275\u0275elementStart"](4,"span",3),c["\u0275\u0275text"](5,"\xd7"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",4),c["\u0275\u0275elementStart"](7,"div",5),c["\u0275\u0275elementStart"](8,"label",6),c["\u0275\u0275text"](9,"Section Title"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"input",7),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.formSection.formSectionTitle=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",5),c["\u0275\u0275elementStart"](12,"label",8),c["\u0275\u0275text"](13,"Details (optional)"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"input",9),c["\u0275\u0275listener"]("ngModelChange",function(e){return t.formSection.formSectionDescription=e}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",10),c["\u0275\u0275elementStart"](16,"div",11),c["\u0275\u0275elementStart"](17,"button",12),c["\u0275\u0275listener"]("click",function(){return t.onSubmit()}),c["\u0275\u0275text"](18,"Submit "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",t.actionType," Section "),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("ngModel",t.formSection.formSectionTitle),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngModel",t.formSection.formSectionDescription))},directives:[u.b,u.q,u.t],styles:[""]}),e})();function pe(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"button",17),c["\u0275\u0275element"](2,"span",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ul",19),c["\u0275\u0275elementStart"](4,"li"),c["\u0275\u0275elementStart"](5,"a",20),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().onFormEdit()}),c["\u0275\u0275text"](6,"Edit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"li"),c["\u0275\u0275elementStart"](8,"a",20),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().deleteForm()}),c["\u0275\u0275text"](9,"Delete"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"li"),c["\u0275\u0275elementStart"](11,"a",20),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().reviewSections()}),c["\u0275\u0275text"](12,"Comments"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function ue(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"button",17),c["\u0275\u0275element"](2,"span",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ul",19),c["\u0275\u0275elementStart"](4,"li"),c["\u0275\u0275elementStart"](5,"a",20),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().editSection(t)}),c["\u0275\u0275text"](6,"Edit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"li"),c["\u0275\u0275elementStart"](8,"a",20),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().deleteSection(t)}),c["\u0275\u0275text"](9,"Delete section"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function he(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",27),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.formSectionDescription)}}function ve(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span",39),c["\u0275\u0275text"](1,"*"),c["\u0275\u0275elementEnd"]())}function ge(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"small",40),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.formFieldDetail)}}function Se(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",16),c["\u0275\u0275elementStart"](1,"button",17),c["\u0275\u0275element"](2,"span",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ul",19),c["\u0275\u0275elementStart"](4,"li"),c["\u0275\u0275elementStart"](5,"a",20),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit,n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().showQuestionEditModal(n,t)}),c["\u0275\u0275text"](6,"Edit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"li"),c["\u0275\u0275elementStart"](8,"a",20),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit,n=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().deleteQuestion(n,t)}),c["\u0275\u0275text"](9,"Delete question"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}}function xe(e,t){1&e&&c["\u0275\u0275element"](0,"input",41)}function Fe(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span",45),c["\u0275\u0275text"](1,"\u2605"),c["\u0275\u0275elementEnd"]()),2&e&&c["\u0275\u0275classProp"]("filled",100===t.fill)}function Ie(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"ngb-rating",44),c["\u0275\u0275template"](2,Fe,2,2,"ng-template"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("max",e.formFieldScale)}}function be(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span",45),c["\u0275\u0275text"](1,"\u2605"),c["\u0275\u0275elementEnd"]()),2&e&&c["\u0275\u0275classProp"]("filled",100===t.fill)}function Ee(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ngb-rating",44),c["\u0275\u0275template"](1,be,2,2,"ng-template"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275property"]("max",e.formFieldScale)}}function ye(e,t){if(1&e&&(c["\u0275\u0275template"](0,Ie,3,1,"ng-container",42),c["\u0275\u0275template"](1,Ee,2,1,"ng-template",null,43,c["\u0275\u0275templateRefExtractor"])),2&e){const e=c["\u0275\u0275reference"](2),t=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275property"]("ngIf",t.isUpdateStarRating)("ngIfElse",e)}}function Ce(e,t){1&e&&c["\u0275\u0275element"](0,"textarea",46)}function we(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.formFieldOptionText," ")}}function De(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"select",47),c["\u0275\u0275elementStart"](1,"option",48),c["\u0275\u0275text"](2,"Select"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](3,we,2,1,"option",49),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngForOf",null==e?null:e.options)}}function Oe(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",52),c["\u0275\u0275element"](1,"input",53),c["\u0275\u0275elementStart"](2,"label",54),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate1"]("id","radio_group_",e.formFieldOptionID,""),c["\u0275\u0275propertyInterpolate2"]("name","radio_group_",n.formFieldID,"_",n.formFieldOrder,""),c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate1"]("for","radio_group_",e.formFieldOptionID,""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.formFieldOptionText)}}function ke(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",50),c["\u0275\u0275template"](1,Oe,4,5,"div",51),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",null==e?null:e.options)}}function Me(e,t){1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"div",55),c["\u0275\u0275elementStart"](2,"button",56),c["\u0275\u0275text"](3,"Upload"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]())}function Pe(e,t){1&e&&c["\u0275\u0275elementContainer"](0)}function Te(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",58),c["\u0275\u0275element"](1,"input",59),c["\u0275\u0275elementStart"](2,"label",54),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2).$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate1"]("id","checkbox_group_",e.formFieldOptionID,""),c["\u0275\u0275propertyInterpolate2"]("name","checkbox_group_",n.formFieldID,"_",n.formFieldOrder,""),c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate1"]("for","checkbox_group_",e.formFieldOptionID,""),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.formFieldOptionText)}}function Re(e,t){if(1&e&&(c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275template"](1,Te,4,5,"div",57),c["\u0275\u0275elementContainerEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",null==e?null:e.options)}}function Ve(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",28),c["\u0275\u0275elementStart"](1,"div",29),c["\u0275\u0275elementStart"](2,"div",30),c["\u0275\u0275elementStart"](3,"div"),c["\u0275\u0275elementStart"](4,"label",24),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit,i=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().showQuestionEditModal(i,n)}),c["\u0275\u0275text"](5),c["\u0275\u0275template"](6,ve,2,0,"span",31),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,ge,2,1,"small",32),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",5),c["\u0275\u0275template"](9,Se,10,0,"div",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,xe,1,0,"input",33),c["\u0275\u0275template"](11,ye,3,2,"ng-template",34),c["\u0275\u0275template"](12,Ce,1,0,"textarea",35),c["\u0275\u0275template"](13,De,4,1,"select",36),c["\u0275\u0275template"](14,ke,2,1,"div",37),c["\u0275\u0275template"](15,Me,4,0,"ng-container",38),c["\u0275\u0275template"](16,Pe,1,0,"ng-container",38),c["\u0275\u0275template"](17,Re,2,1,"ng-container",38),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"]("",e.formFieldTitle," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.formFieldIsRequired),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.formFieldDetail),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",n.formAdmin),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",1===e.formFieldTypeID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",9===e.formFieldTypeID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",4===e.formFieldTypeID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",5===e.formFieldTypeID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",6===e.formFieldTypeID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",3===e.formFieldTypeID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",10===e.formFieldTypeID),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",2===e.formFieldTypeID)}}function _e(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275elementStart"](1,"div",22),c["\u0275\u0275elementStart"](2,"span",23),c["\u0275\u0275elementStart"](3,"h1",24),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().editSection(n)}),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",5),c["\u0275\u0275template"](6,ue,10,0,"div",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,he,2,1,"span",25),c["\u0275\u0275elementStart"](8,"div",11),c["\u0275\u0275listener"]("cdkDropListDropped",function(n){c["\u0275\u0275restoreView"](e);const i=t.index;return c["\u0275\u0275nextContext"]().drop(n,i)}),c["\u0275\u0275template"](9,Ve,18,12,"div",26),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",9),c["\u0275\u0275elementStart"](11,"div",13),c["\u0275\u0275elementStart"](12,"div",14),c["\u0275\u0275elementStart"](13,"button",15),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const n=t.$implicit;return c["\u0275\u0275nextContext"]().showQuestionEditModal(n)}),c["\u0275\u0275text"](14,"Add Question "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](e.formSectionTitle),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",n.formAdmin),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",null==e?null:e.formSectionDescription),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.fields)}}const qe=[{path:"",component:g,children:[{path:"player",component:x}]},{path:"builder",component:(()=>{class e{constructor(e,t,n,i,o){this.formService=e,this.router=t,this.modalService=n,this.userService=i,this.location=o,this.form=new E.c,this.user=this.userService.user.getValue(),this.superAdmin=this.user.permissions.some(e=>a.b.Admin===e.permissionAreaID)}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.form=JSON.parse(localStorage.getItem("formObject")),this.formAdmin=this.contactID===this.form.createdByID||this.superAdmin,this.loadForm()}dropSection(e){var t,n;Object(I.d)(null===(t=this.form)||void 0===t?void 0:t.sections,e.previousIndex,e.currentIndex);const i=null===(n=this.form)||void 0===n?void 0:n.sections;for(let o=0;o<i.length;o++)i[o].formSectionOrder=o;i.forEach(e=>{this.formService.updateSection(e).subscribe(e=>{})})}drop(e,t){var n,i;Object(I.d)(null===(n=this.form)||void 0===n?void 0:n.sections[t].fields,e.previousIndex,e.currentIndex);const o=null===(i=this.form)||void 0===i?void 0:i.sections[t].fields;for(let r=0;r<o.length;r++)o[r].formFieldOrder=r;o.forEach(e=>{this.formService.updateField(e).subscribe(e=>{})})}loadForm(){this.formService.getFormSections(this.form.formID).subscribe(e=>{e&&e.length>0&&e.sort((e,t)=>e.formSectionOrder<t.formSectionOrder?-1:e.formSectionOrder>t.formSectionOrder?1:0),this.form.sections=e,this.form.sections.forEach(e=>this.loadQuestions(e))})}loadQuestions(e){e&&this.formService.getFields(e.formSectionID).subscribe(t=>{t&&(e.fields=t,e.fields.forEach(e=>this.loadFieldOptions(e)))})}loadFieldOptions(e){this.formService.getOptions(e.formFieldID).subscribe(t=>{t&&t.length&&(e.options=t)})}showSectionEditor(){if(!this.formAdmin)return;const e=this.modalService.open(fe);e.componentInstance.formID=this.form.formID,e.componentInstance.pageTitle=this.referenceDescription,e.result.then(e=>{e&&this.form.sections.push(e)})}onFormEdit(){if(!this.formAdmin)return;const e=Object.assign({},this.form),t=this.modalService.open(m.a,{size:"lg"});t.componentInstance.form=e,t.result.then(e=>{Object.assign(this.form,e)})}editSection(e){if(!this.formAdmin)return;const t=Object.assign({},e),n=this.modalService.open(fe);n.componentInstance.formID=this.form.formID,n.componentInstance.formSection=t,n.componentInstance.isEditing="true",n.result.then(t=>{Object.assign(e,t)})}deleteSection(e){if(!this.formAdmin)return;const t=this.modalService.open(b.a);t.componentInstance.objectType="Form Section",t.componentInstance.objectDetails=e.formSectionTitle+" Form Section",t.result.then(t=>{t&&"Yes"===t&&this.onDeleteSection(e)})}onDeleteSection(e){this.formService.deleteSection(e.formSectionID).subscribe(()=>{const t=this.form.sections.findIndex(t=>t.formSectionID===e.formSectionID);-1!==t&&this.form.sections.splice(t,1)})}showQuestionEditModal(e,t){if(!this.formAdmin)return;let n;t||e.fields||(e.fields=[]),n=!!t;const i=this.modalService.open(se);i.componentInstance.form=this.form,i.componentInstance.formField=t,i.componentInstance.formSection=e,i.componentInstance.isEditing=n,t&&(t.isUpdateStarRating=!0),i.result.then(i=>{i&&(n?(e.fields[i.formFieldOrder-1]=i,t.isUpdateStarRating=!1):e.fields.push(i))})}deleteForm(){if(!this.formAdmin)return;const e=this.modalService.open(b.a);e.componentInstance.objectType="Form",e.componentInstance.objectDetails=this.form.formName+" Form",e.result.then(e=>{e&&"Yes"===e&&this.onDeleteForm()})}onDeleteForm(){this.formService.deleteForm(this.form.formID).subscribe(()=>{this.router.navigate(["/forms"])})}deleteQuestion(e,t){if(!this.formAdmin)return;const n=this.modalService.open(b.a);n.componentInstance.objectType="Question",n.componentInstance.objectDetails=t.formFieldTitle+" Question",n.result.then(n=>{n&&"Yes"===n&&this.onDeleteQuestion(e,t)})}onDeleteQuestion(e,t){this.formService.deleteField(t.formFieldID).subscribe(()=>{const n=this.form.sections.findIndex(t=>t.formSectionID===e.formSectionID);if(-1!==n){const e=this.form.sections[n].fields.findIndex(e=>e.formFieldID===t.formFieldID);-1!==e&&this.form.sections[n].fields.splice(e,1)}})}reviewSections(){this.modalService.open(Y,{size:"xl",backdrop:"static"}).componentInstance.form=this.form}back(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](l.c),c["\u0275\u0275directiveInject"](f.p),c["\u0275\u0275directiveInject"](d.a),c["\u0275\u0275directiveInject"](i.j))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-builder"]],decls:22,vars:4,consts:[[1,"page-title"],[1,"d-flex","justify-content-between","align-items-center"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[1,"actions"],["class","dropdown",4,"ngIf"],[1,"row","m-0","p-0"],[1,"w-100"],[1,"form-block"],[1,"lead","pt-3"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],[1,"form-group","form-group-block"],[1,"action-row"],[1,"btn","btn-outline-primary","btn-sm","ml-0",3,"click"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],["cdkDrag",""],[1,"d-flex","pl-3","pr-3","justify-content-between","align-items-center","filter-container","drag-section"],[1,"post-count"],[1,"cursor-pointer",3,"click"],["class","form-sub-title form-block",4,"ngIf"],["class","drag-box","cdkDrag","",4,"ngFor","ngForOf"],[1,"form-sub-title","form-block"],["cdkDrag","",1,"drag-box"],[1,"form-group","position-relative"],[1,"d-flex","justify-content-between","align-items-center","pb-1"],["class","text-danger",4,"ngIf"],["class","form-text text-muted mb-2 mt-0 fz14",4,"ngIf"],["type","text","class","form-control",4,"ngIf"],[3,"ngIf"],["class","form-control","rows","3",4,"ngIf"],["class","custom-select",4,"ngIf"],["class","form-group",4,"ngIf"],[4,"ngIf"],[1,"text-danger"],[1,"form-text","text-muted","mb-2","mt-0","fz14"],["type","text",1,"form-control"],[4,"ngIf","ngIfElse"],["elseIsUpdateStarRating",""],[1,"rating-input","w-100",3,"max"],[1,"star"],["rows","3",1,"form-control"],[1,"custom-select"],["selected","","value","0"],[4,"ngFor","ngForOf"],[1,"form-group"],["class","custom-control custom-radio",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio"],["type","radio",1,"custom-control-input",3,"id","name"],[1,"custom-control-label",3,"for"],[1,"action-row","action-row-sm"],[1,"btn","btn-outline-primary"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","name"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"div",0),c["\u0275\u0275elementStart"](2,"div",1),c["\u0275\u0275elementStart"](3,"div"),c["\u0275\u0275elementStart"](4,"span",2),c["\u0275\u0275listener"]("click",function(){return t.back()}),c["\u0275\u0275element"](5,"i",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"h1",4),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"div",5),c["\u0275\u0275template"](9,pe,13,0,"div",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"div",7),c["\u0275\u0275elementStart"](11,"div",8),c["\u0275\u0275elementStart"](12,"div",9),c["\u0275\u0275elementStart"](13,"p",10),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"div",11),c["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.dropSection(e)}),c["\u0275\u0275template"](16,_e,15,4,"div",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",9),c["\u0275\u0275elementStart"](18,"div",13),c["\u0275\u0275elementStart"](19,"div",14),c["\u0275\u0275elementStart"](20,"button",15),c["\u0275\u0275listener"]("click",function(){return t.showSectionEditor()}),c["\u0275\u0275text"](21,"Add Section "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](7),c["\u0275\u0275textInterpolate"](null==t.form?null:t.form.formName),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.formAdmin),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](t.form.formDescription),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",null==t.form?null:t.form.sections))},directives:[i.n,I.b,i.m,I.a,f.w,u.v,u.D],styles:[".rating-input[_ngcontent-%COMP%]:focus{outline:none}.rating-input[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:1.5rem;color:#b0c4de}.rating-input[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{color:#1e90ff}.rating-input[_ngcontent-%COMP%]   .bad[_ngcontent-%COMP%], .rating-input[_ngcontent-%COMP%]   .filled.bad[_ngcontent-%COMP%]{color:#2a2a2a}.dropdown-toggle[_ngcontent-%COMP%]:after, .dropdown-toggle[_ngcontent-%COMP%]:before{display:none}.form-dropdown[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px}.question-dropdown[_ngcontent-%COMP%]{position:absolute;right:0!important;top:0}.form-builder-content[_ngcontent-%COMP%]{margin-top:55px;min-height:calc(100vh - 55px)}.drag-section[_ngcontent-%COMP%]{cursor:move}.drag-section[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.drag-box[_ngcontent-%COMP%]{padding:.1rem 1rem;cursor:move}.drag-box[_ngcontent-%COMP%]:hover{background-color:#e4eaff}"]}),e})()},{path:"complete",component:F}];let je=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.g.forChild(qe)],l.g]}),e})(),Ae=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,je,u.z,u.l,r.a,o.a,f.r,I.c,D.b]]}),e})()},FSKZ:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("vdWK"),o=n("fXoL"),r=n("xDUJ"),l=n("1kSV"),m=n("tyNb"),a=n("kmKP"),c=n("3Pt+"),s=n("5eqV"),d=n("ofXK");const f=function(){return{standalone:!0}};function p(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",23),o["\u0275\u0275elementStart"](1,"input",24),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().isArchive=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"label",25),o["\u0275\u0275text"](3,"Archive"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("checked",e.isArchive)("ngModelOptions",o["\u0275\u0275pureFunction0"](3,f))("ngModel",e.isArchive)}}let u=(()=>{class e{constructor(e,t,n,o){this.formService=e,this.ngbActiveModal=t,this.router=n,this.userService=o,this.formCategoryID=1,this.referenceID=1,this.form=new i.c,this.isArchive=!1,this.user=this.userService.user.getValue()}ngOnInit(){this.companyID=this.user.companyID||0,this.contactID=this.user.contactID,this.form&&this.form.formID&&(this.isArchive=2===this.form.status,this.form.thankyouMessage&&(this.form.thankYouMessage=this.form.thankyouMessage)),console.log(this.form)}onCancel(){this.ngbActiveModal.close()}onSubmit(){this.form.companyID=this.companyID,this.form.formCategoryID=1,this.form.referenceID=1,this.form.createdByID=this.contactID,this.form.formID?(this.form.status=this.isArchive?2:1,this.formService.updateForm(this.form).subscribe(e=>{this.ngbActiveModal.close(this.form)})):(this.form.status=1,this.formService.insertForm(this.form).subscribe(e=>{this.form.formID=e.inOut_FormID,localStorage.setItem("formObject",JSON.stringify(this.form)),this.ngbActiveModal.close(),this.router.navigate(["forms/builder"])}))}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](r.a),o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](m.c),o["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-form-add1"]],decls:42,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-add-content",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","formName"],["type","text","id","formName","name","formName","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","formDescription"],["name","formDescription","id","formDescription","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["for","introductionMessage"],["name","introductionMessage","id","introductionMessage","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["for","thankYouMessage"],["name","thankYouMessage","id","thankYouMessage","autosize","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group form-check",4,"ngIf"],["for","formTypeID"],["name","formTypeID","id","formTypeID",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"text-right"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary","ml-2",3,"disabled"],[1,"form-group","form-check"],["type","checkbox","id","archive",1,"form-check-input",3,"checked","ngModelOptions","ngModel","ngModelChange"],["for","archive",1,"form-check-label"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h1",1),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",function(){return t.onCancel()}),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275text"](5,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"form",5,6),o["\u0275\u0275listener"]("ngSubmit",function(){return t.onSubmit()}),o["\u0275\u0275elementStart"](9,"div",7),o["\u0275\u0275elementStart"](10,"label",8),o["\u0275\u0275text"](11,"Form Name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"input",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formName=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",7),o["\u0275\u0275elementStart"](14,"label",10),o["\u0275\u0275text"](15,"Form Description"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"textarea",11),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formDescription=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",7),o["\u0275\u0275elementStart"](18,"label",12),o["\u0275\u0275text"](19,"Introduction Message"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"textarea",13),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.introductionMessage=e}),o["\u0275\u0275text"](21,"      "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",7),o["\u0275\u0275elementStart"](23,"label",14),o["\u0275\u0275text"](24,"Thank you message"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"textarea",15),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.thankYouMessage=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](26,p,4,4,"div",16),o["\u0275\u0275elementStart"](27,"div",7),o["\u0275\u0275elementStart"](28,"label",17),o["\u0275\u0275text"](29,"Form Type"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"select",18),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.formTypeID=e}),o["\u0275\u0275elementStart"](31,"option",19),o["\u0275\u0275text"](32,"Please Select"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"option",19),o["\u0275\u0275text"](34,"Standard"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"option",19),o["\u0275\u0275text"](36,"Diagnostic"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"div",20),o["\u0275\u0275elementStart"](38,"button",21),o["\u0275\u0275listener"]("click",function(){return t.onCancel()}),o["\u0275\u0275text"](39,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"button",22),o["\u0275\u0275text"](41,"Submit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](8);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.form&&t.form.formID?"Edit":"Add"," Form "),o["\u0275\u0275advance"](10),o["\u0275\u0275property"]("ngModel",t.form.formName),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.form.formDescription),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.form.introductionMessage),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.form.thankYouMessage),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.form&&t.form.formID),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.form.formTypeID),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngValue",null),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngValue",1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngValue",2),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",e.invalid)}},directives:[c.E,c.r,c.s,c.b,c.A,c.q,c.t,s.a,d.n,c.B,c.v,c.D,c.a],styles:[".form-add-content[_ngcontent-%COMP%]{max-height:86vh;overflow-x:hidden;overflow-y:auto}"]}),e})()}}]);