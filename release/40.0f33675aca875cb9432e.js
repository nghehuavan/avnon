(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{hXeK:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("ofXK"),s=n("3Pt+"),o=n("1kSV"),a=n("j4PG"),r=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,s.l,s.z,o.q,a.a]]}),e})()},wMrW:function(e,t,n){"use strict";n.r(t),n.d(t,"NotificationsModule",function(){return Zs});var i=n("ofXK"),s=n("j4PG"),o=n("tyNb"),a=n("XNiG"),r=n("cp0P"),c=n("8J6U"),d=n("1G5W"),l=n("w6ya"),u=n("fXoL"),m=n("9nlD"),p=n("kmKP"),h=n("ev4g"),f=n("6BoG"),g=n("euQB"),D=n("5eHb"),I=n("XAmU"),b=n("SVtl"),v=n("1kSV"),x=n("S2+F"),y=n("Jn3s"),C=n("oTus"),S=n("AeW6"),k=n("OkAi"),w=n("znf5"),O=n("HNxE"),E=n("LRne"),M=n("frau"),P=n("6lqT"),j=n("QF1F"),T=n("Kj3r"),F=n("/uUt"),A=n("pLZG"),V=n("eIep"),_=n("JIr8"),N=n("lJxs"),B=n("tk/3"),R=n("myoa"),$=n("AytR"),L=n("BoU9"),U=n("Wgwc"),q=n.n(U),z=n("BN3N"),H=n("4CJs");class G{constructor(){this.discussionMemberStatusID=null,this.discussionMemberTypeID=null,this.unreadMessageCount=null}}var W=function(e){return e[e.recipient=0]="recipient",e[e.taskOwner=1]="taskOwner",e[e.taskSupporter=2]="taskSupporter",e}({}),J=n("MNGV"),Q=n("p+bo"),Y=n("FddC"),X=n("Vibq");class K{constructor(){this.documentID=null,this.documentLinkCategoryID=null,this.documentLinkSubCategoryID=null,this.documentLinkReferenceID=null}}var Z=n("VgRj"),ee=n("3DXX"),te=n("OzGw"),ne=n("xJDW"),ie=n("esnG"),se=n("WhH8"),oe=n("1bi4"),ae=n("3Pt+"),re=n("CzEO"),ce=n("enax"),de=n("Kdsb"),le=n("Hu2X"),ue=n("k9EJ"),me=n("0mlJ"),pe=n("SdWN");let he=(()=>{class e{constructor(e){this.contactService=e,this.hexColors=["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#3457d4","#d64b2b","#00b107","#ed0012","#ef9100","#ffe500"]}transform(e){let t="";const n=this.contactService.colors,i=n.findIndex(t=>t.contactID===e);if(-1!==i)t=this.contactService.colors[i].color;else{const i=this.hexColors.filter(e=>!n.some(t=>t.color===e));if(i.length)t=i[Math.floor(Math.random()*i.length)]||i[0];else{const e=Math.floor(Math.random()*this.hexColors.length);t=this.hexColors[e]||this.hexColors[0]}n.push({contactID:e,color:t})}return t}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](se.a))},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"dynamicColor",type:e,pure:!0}),e})();var fe=n("CEMh"),ge=n("m+qv");function De(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",18),u["\u0275\u0275elementStart"](1,"span",19),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"date"),u["\u0275\u0275pipe"](4,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](3,1,u["\u0275\u0275pipeBind1"](4,4,e.discussion.dateCreated),"E yyyy/MM/dd"))}}function Ie(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",23),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.discussion.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function be(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",24),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.discussion.discussionCreatedByContactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.discussion.firstName.substr(0,1),"",e.discussion.surname.substr(0,1)," ")}}function ve(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275template"](1,Ie,2,3,"img",21),u["\u0275\u0275template"](2,be,3,6,"span",22),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.discussion.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.discussion.profilePhoto)}}function xe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",27),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"date"),u["\u0275\u0275pipe"](3,"dateObject"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](2,1,u["\u0275\u0275pipeBind1"](3,4,e.discussion.dateCreated),"HH:mm"))}}function ye(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1," Requested Sign Off "),u["\u0275\u0275elementContainerEnd"]())}function Ce(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1," Accepted Sign Off "),u["\u0275\u0275elementContainerEnd"]())}function Se(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1," Declined Sign Off "),u["\u0275\u0275elementContainerEnd"]())}function ke(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1," Cancelled Sign Off "),u["\u0275\u0275elementContainerEnd"]())}const we=function(){return[7,37]},Oe=function(){return[8,38]},Ee=function(){return[9,11]},Me=function(e,t,n){return{"tag-orange":e,"tag-green":t,"tag-red":n}},Pe=function(){return[9]},je=function(){return[11]};function Te(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",28),u["\u0275\u0275template"](2,ye,2,0,"ng-container",15),u["\u0275\u0275template"](3,Ce,2,0,"ng-container",15),u["\u0275\u0275template"](4,Se,2,0,"ng-container",15),u["\u0275\u0275template"](5,ke,2,0,"ng-container",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction3"](8,Me,u["\u0275\u0275pureFunction0"](5,we).includes((null==e.discussion?null:e.discussion.discussionValue)||(null==e.discussion?null:e.discussion.discussionCategoryID)),u["\u0275\u0275pureFunction0"](6,Oe).includes((null==e.discussion?null:e.discussion.discussionValue)||(null==e.discussion?null:e.discussion.discussionCategoryID)),u["\u0275\u0275pureFunction0"](7,Ee).includes((null==e.discussion?null:e.discussion.discussionValue)||(null==e.discussion?null:e.discussion.discussionCategoryID)))),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pureFunction0"](12,we).includes((null==e.discussion?null:e.discussion.discussionValue)||(null==e.discussion?null:e.discussion.discussionCategoryID))),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pureFunction0"](13,Oe).includes((null==e.discussion?null:e.discussion.discussionValue)||(null==e.discussion?null:e.discussion.discussionCategoryID))),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pureFunction0"](14,Pe).includes((null==e.discussion?null:e.discussion.discussionValue)||(null==e.discussion?null:e.discussion.discussionCategoryID))),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pureFunction0"](15,je).includes((null==e.discussion?null:e.discussion.discussionValue)||(null==e.discussion?null:e.discussion.discussionCategoryID)))}}const Fe=function(){return[7,8,9,11]},Ae=function(){return[7,8,9,11,37,38]};function Ve(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"h3",25),u["\u0275\u0275text"](1),u["\u0275\u0275template"](2,xe,4,6,"span",26),u["\u0275\u0275template"](3,Te,6,16,"ng-container",15),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.discussion.firstName," ",e.discussion.surname," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",1===e.parentDiscussion.discussionCategoryID&&!e.discussion.isSameTime),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pureFunction0"](4,Fe).includes(null==e.discussion?null:e.discussion.discussionCategoryID)||u["\u0275\u0275pureFunction0"](5,Ae).includes(null==e.discussion?null:e.discussion.discussionValue))}}function _e(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",29),u["\u0275\u0275elementStart"](1,"div",30),u["\u0275\u0275elementStart"](2,"button",31),u["\u0275\u0275element"](3,"span",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ul",33),u["\u0275\u0275elementStart"](5,"li"),u["\u0275\u0275elementStart"](6,"a",34),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"](2);return t.edit(t.discussion)}),u["\u0275\u0275text"](7,"Edit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"li"),u["\u0275\u0275elementStart"](9,"a",34),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"](2);return t.delete(t.discussion)}),u["\u0275\u0275text"](10,"Delete"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Ne(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",35),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"date"),u["\u0275\u0275pipe"](3,"dateObject"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](2,1,u["\u0275\u0275pipeBind1"](3,4,e.discussion.dateCreated),"E yyyy/MM/dd HH:mm"))}}function Be(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.last;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.me?"You":e.firstName,"",n?"":","," ")}}function Re(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",36),u["\u0275\u0275text"](1," To: "),u["\u0275\u0275elementStart"](2,"span",37),u["\u0275\u0275template"](3,Be,2,2,"ng-container",38),u["\u0275\u0275pipe"](4,"slice"),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind3"](4,2,e.members,0,3)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.members.length>3?" +"+(e.members.length-3)+" other(s)":""," ")}}function $e(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"app-image-layout",39),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("hideImageView",!0)("autoPlay",!1)("trackAudit",e.trackAudit)("images",e.galleryFiles)("files",e.nonGalleryFiles)("editable",!1)}}function Le(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",40),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onShowMentor()}),u["\u0275\u0275elementStart"](2,"span",41),u["\u0275\u0275element"](3,"img",42),u["\u0275\u0275pipe"](4,"avatar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",43),u["\u0275\u0275elementStart"](6,"h2"),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",44),u["\u0275\u0275elementStart"](9,"span"),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"p"),u["\u0275\u0275text"](12),u["\u0275\u0275pipe"](13,"ellipsis"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"p",45),u["\u0275\u0275text"](15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](4,6,e.contact.profilePhoto),u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",e.contact.firstName," ",e.contact.surname,""),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](null==e.contact?null:e.contact.city),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](13,8,null==e.contact?null:e.contact.headline,200)),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("Please let us know if you'd like to be introduced to ",e.contact.firstName,"")}}function Ue(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.company.industry)}}function qe(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",50),u["\u0275\u0275elementStart"](1,"div",51),u["\u0275\u0275elementStart"](2,"div",52),u["\u0275\u0275elementStart"](3,"div",53),u["\u0275\u0275elementStart"](4,"input",54),u["\u0275\u0275listener"]("change",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).terms=t.target.checked}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"label",55),u["\u0275\u0275text"](6,"I agree with terms"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"button",56),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).acceptTerms()}),u["\u0275\u0275text"](8,"Accept "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("checked",e.terms),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("disabled",!e.terms)}}function ze(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",50),u["\u0275\u0275elementStart"](1,"div",51),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"date"),u["\u0275\u0275pipe"](4,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" Accepted terms on ",u["\u0275\u0275pipeBind2"](3,1,u["\u0275\u0275pipeBind1"](4,4,e.contractAssignment.contractAssignmentAcceptedDate),"dd MMM yyyy")," ")}}function He(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",46),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"](2);return t.navigateToCompany(t.contractAssignment.companyID)}),u["\u0275\u0275elementStart"](2,"span",41),u["\u0275\u0275element"](3,"img",47),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",43),u["\u0275\u0275elementStart"](5,"h2"),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",44),u["\u0275\u0275template"](8,Ue,2,1,"span",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"div",48),u["\u0275\u0275elementStart"](10,"p"),u["\u0275\u0275text"](11),u["\u0275\u0275pipe"](12,"ellipsis"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"p"),u["\u0275\u0275text"](14,"The details of your mentoring assignment are outlined below:"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"ul"),u["\u0275\u0275elementStart"](16,"li"),u["\u0275\u0275text"](17),u["\u0275\u0275pipe"](18,"date"),u["\u0275\u0275pipe"](19,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"li"),u["\u0275\u0275text"](21),u["\u0275\u0275pipe"](22,"date"),u["\u0275\u0275pipe"](23,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](24,"li"),u["\u0275\u0275text"](25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"li"),u["\u0275\u0275text"](27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"li"),u["\u0275\u0275text"](29),u["\u0275\u0275pipe"](30,"number"),u["\u0275\u0275pipe"](31,"userCurrency"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](32,qe,9,2,"div",49),u["\u0275\u0275template"](33,ze,5,6,"div",49),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("src",e.company.companyLogo?e.apiBlobUrl+e.company.companyLogo:"assets/img/card-placeholder.jpg",u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.company.companyName),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.company.industry),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](12,12,e.company.companyMission,200)),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"]("Start Date - ",u["\u0275\u0275pipeBind2"](18,15,u["\u0275\u0275pipeBind1"](19,18,e.contractAssignment.assignmentStartDate),"dd MMM yyyy"),""),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"]("End Date - ",u["\u0275\u0275pipeBind2"](22,20,u["\u0275\u0275pipeBind1"](23,23,e.contractAssignment.assignmentEndDate),"dd MMM yyyy"),""),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"]("Min Hours - ",e.contractAssignment.minHours,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("Max Hours - ",e.contractAssignment.maxHours,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"]("Hourly Rate - ",u["\u0275\u0275pipeBind2"](30,25,e.contractAssignment.hourlyRate,"1.2-2"),"",u["\u0275\u0275pipeBind1"](31,28,""),""),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",!e.contractAssignment.contractAssignmentAcceptedDate&&e.contractAssignment.contactID===e.contactID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contractAssignment.contractAssignmentAcceptedDate)}}const Ge=function(e){return["/company",e]};function We(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",57),u["\u0275\u0275text"](1,"Join"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("routerLink",u["\u0275\u0275pureFunction1"](1,Ge,e.discussion.referenceID))}}function Je(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",58),u["\u0275\u0275elementStart"](1,"div",30),u["\u0275\u0275elementStart"](2,"button",31),u["\u0275\u0275element"](3,"span",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ul",33),u["\u0275\u0275elementStart"](5,"li"),u["\u0275\u0275elementStart"](6,"a",34),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"](2);return t.edit(t.discussion)}),u["\u0275\u0275text"](7,"Edit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"li"),u["\u0275\u0275elementStart"](9,"a",34),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"](2);return t.delete(t.discussion)}),u["\u0275\u0275text"](10,"Delete"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Qe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"app-image-layout",39),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("hideImageView",!0)("autoPlay",!1)("trackAudit",e.trackAudit)("images",e.galleryFiles)("files",e.nonGalleryFiles)("editable",!1)}}const Ye=function(e){return{"pb-2 mb-2 border-bottom":e}};function Xe(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",1),u["\u0275\u0275template"](1,De,5,6,"div",2),u["\u0275\u0275elementStart"](2,"div",3),u["\u0275\u0275template"](3,ve,3,2,"span",4),u["\u0275\u0275elementStart"](4,"div",5),u["\u0275\u0275elementStart"](5,"div",6),u["\u0275\u0275template"](6,Ve,4,6,"h3",7),u["\u0275\u0275template"](7,_e,11,0,"div",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,Ne,4,6,"span",9),u["\u0275\u0275template"](9,Re,6,6,"div",10),u["\u0275\u0275elementStart"](10,"div",11),u["\u0275\u0275template"](11,$e,1,6,"app-image-layout",12),u["\u0275\u0275elementStart"](12,"div",6),u["\u0275\u0275elementStart"](13,"div",13),u["\u0275\u0275element"](14,"quill-view-html",14),u["\u0275\u0275template"](15,Le,16,11,"ng-container",15),u["\u0275\u0275template"](16,He,34,30,"ng-container",15),u["\u0275\u0275template"](17,We,2,3,"span",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](18,Je,11,0,"div",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](19,Qe,1,6,"app-image-layout",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction1"](16,Ye,(null==e.discussion||null==e.discussion.childDiscussions?null:e.discussion.childDiscussions.length)>0&&e.discussion.parentDiscussionID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.discussion.isSameDate&&1===e.parentDiscussion.discussionCategoryID&&e.discussion.parentDiscussionID),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",(1!==e.parentDiscussion.discussionCategoryID||!e.discussion.isSameTime)&&(e.discussion.parentDiscussionID||117===e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",(1!==e.parentDiscussion.discussionCategoryID||!e.discussion.isSameTime)&&(e.discussion.parentDiscussionID||117===e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.discussion.discussionCreatedByContactID===e.contactID&&1!==e.parentDiscussion.discussionCategoryID&&e.discussion.parentDiscussionID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",1!==e.parentDiscussion.discussionCategoryID&&(e.discussion.parentDiscussionID||117===e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.members.length&&!e.hideRecipient),u["\u0275\u0275advance"](1),u["\u0275\u0275classProp"]("no-image",1===(null==e.parentDiscussion?null:e.parentDiscussion.discussionCategoryID)&&e.discussion.isSameTime||!e.discussion.parentDiscussionID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(e.galleryFiles.length||e.nonGalleryFiles.length)&&e.discussion&&!e.discussion.parentDiscussionID),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("content",e.discussion.discussionBody),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",23===e.discussion.discussionValue&&e.contact),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",24===e.discussion.discussionValue&&e.company&&e.contractAssignment),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",20===e.discussion.discussionValue),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.discussion.discussionCreatedByContactID===e.contactID&&1===e.parentDiscussion.discussionCategoryID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(e.galleryFiles.length||e.nonGalleryFiles.length)&&e.discussion&&e.discussion.parentDiscussionID)}}let Ke=(()=>{class e{constructor(e,t,n,i,s,o){this.documentsService=e,this.contactService=t,this.companyService=n,this.toastrService=i,this.router=s,this.contractService=o,this.onDelete=new u.EventEmitter,this.onEdit=new u.EventEmitter,this.showMentor=new u.EventEmitter,this.members=[],this.fakeId=0,this.galleryFiles=[],this.nonGalleryFiles=[],this.apiBlobUrl=$.a.apiBlobUrl+"/",this.terms=!1,this.destroy$=new a.a}set Value(e){this.company=null,this.contractAssignment=null,this.discussion=e,this.galleryFiles=[],this.nonGalleryFiles=[],this.fakeId=0,this.getDocuments(e.discussionID),23===e.discussionValue&&e.referenceID&&this.getContact(),[24,25].includes(e.discussionValue)&&e.referenceID&&this.getAssigment()}ngOnInit(){}getAssigment(){this.contractService.getContractAssignment(0,this.discussion.referenceID,0,0,0,0,0,0).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.contractAssignment=e[0]||null,this.contractAssignment&&this.getCompany()})}getContact(){this.contactService.getContactList("0",this.discussion.referenceID,0).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e[0]&&(this.contact=e[0])})}getCompany(){this.companyService.getCompanyProfile(this.contractAssignment.companyID).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.company=e})}getDocuments(e){this.documentsService.getDocumentLink(22,0,e).subscribe(e=>{var t;this.discussion.documents=e,this.galleryFiles=this.getGalleryFiles(this.discussion.documents);const n=null===(t=this.discussion)||void 0===t?void 0:t.documents.filter(e=>!R.b.isGalleryDocument(e)).map(e=>Object.assign(Object.assign({},e),{documentPath:this.apiBlobUrl+e.documentPath}));this.nonGalleryFiles=this.getNoneGalleryFiles(n)})}getGalleryFiles(e){return e?e.filter(e=>R.b.isImage(e)).map(e=>this.getFile(e)):[]}getNoneGalleryFiles(e){return e?e.filter(e=>!R.b.isImage(e)).map(e=>this.getFile(e)):[]}getFile(e){if(e.file)return e.file;const t="video/mp4"===e.documentType?{videoUrl:$.a.apiBlobUrl+"/"+e.documentPath}:{imageUrl:e.documentType.includes("image")?`${$.a.apiBlobUrl}/1024px/${e.documentPath}`:""};return Object.assign({id:e.documentID,documentPath:e.documentPath,data:Object.assign({name:e.documentTitle},t),type:e.documentType,progress:100,fakeId:this.fakeId++},e)}delete(e){this.onDelete.emit(e)}edit(e){this.onEdit.emit(e)}onShowMentor(){this.showMentor.emit(this.contact)}navigateToCompany(e){this.router.navigate(["/company",e])}acceptTerms(){this.contractAssignment.contractAssignmentAccepted=!0,this.contractAssignment.contractAssignmentAcceptedDate=q()().utc().format(z.c),this.contractService.updateContractAssignment(this.contractAssignment).subscribe(()=>{this.toastrService.success("Mentoring terms accepted")})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](ie.a),u["\u0275\u0275directiveInject"](se.a),u["\u0275\u0275directiveInject"](le.a),u["\u0275\u0275directiveInject"](D.b),u["\u0275\u0275directiveInject"](o.c),u["\u0275\u0275directiveInject"](ue.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notification-view"]],inputs:{contactID:"contactID",trackAudit:"trackAudit",members:"members",hideRecipient:"hideRecipient",parentDiscussion:"parentDiscussion",Value:["activeDiscussion","Value"]},outputs:{onDelete:"onDelete",onEdit:"onEdit",showMentor:"showMentor"},decls:1,vars:1,consts:[["class","d-flex flex-column w-100 list-item",3,"ngClass",4,"ngIf"],[1,"d-flex","flex-column","w-100","list-item",3,"ngClass"],["class","border-bottom text-center pb-1 mb-1",4,"ngIf"],[1,"recipient-list","w-100","d-flex"],["class","media avatar avatar-32 avatar-32-rounded mr-0",4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1","ml-2"],[1,"d-flex"],["class","mb-035r lh-1 fz-14 font-weight-normal mt-1",4,"ngIf"],["class","actions ml-auto",4,"ngIf"],["class","lh-1 mb-035r fz-14",4,"ngIf"],["class","d-flex lh-1 mb-2",4,"ngIf"],[1,"d-flex","flex-column","email-wrap"],["class","w-100 d-flex flex-column mt-1",3,"hideImageView","autoPlay","trackAudit","images","files","editable","click",4,"ngIf"],[1,"d-flex","flex-column","w-100"],[3,"content"],[4,"ngIf"],["class","cursor-pointer text-primary",3,"routerLink",4,"ngIf"],["class","actions ml-auto pr-2",4,"ngIf"],[1,"border-bottom","text-center","pb-1","mb-1"],[1,"fz-12"],[1,"media","avatar","avatar-32","avatar-32-rounded","mr-0"],["class","img-fluid img-32 cover","alt","Avatar",3,"src",4,"ngIf"],["class","avatar-generated",3,"background-color",4,"ngIf"],["alt","Avatar",1,"img-fluid","img-32","cover",3,"src"],[1,"avatar-generated"],[1,"mb-035r","lh-1","fz-14","font-weight-normal","mt-1"],["class","lh-1 fz-14 meta",4,"ngIf"],[1,"lh-1","fz-14","meta"],[1,"tag","ml-2","tag-overlay",3,"ngClass"],[1,"actions","ml-auto"],["ngbDropdown","","placement","bottom-right"],["type","button","ngbDropdownToggle","",1,"btn","btn-30"],[1,"ico","dots-ico"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],[1,"lh-1","mb-035r","fz-14"],[1,"d-flex","lh-1","mb-2"],[1,"meta","mb-0","ml-1"],[4,"ngFor","ngForOf"],[1,"w-100","d-flex","flex-column","mt-1",3,"hideImageView","autoPlay","trackAudit","images","files","editable","click"],[1,"entry","border-0","p-0","mt-4",3,"click"],[1,"media","avatar"],["alt","network",1,"img-fluid",3,"src"],[1,"d-flex","flex-column"],[1,"meta"],[1,"mt-4"],[1,"entry","p-0","mt-4","mb-4","border-0",3,"click"],["alt","network",1,"avatar","contain-avatar",3,"src"],[1,"entry-content","entry-content--listing","p-0"],["class","attend-section w-100 bg-light border mt-4 p-2 d-flex",4,"ngIf"],[1,"attend-section","w-100","bg-light","border","mt-4","p-2","d-flex"],[1,"w-100"],[1,"form-group","d-flex","align-items-center","m-0"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","temrs",1,"custom-control-input",3,"checked","change"],["for","temrs",1,"custom-control-label"],[1,"btn","btn-sm","btn-primary","ml-auto",3,"disabled","click"],[1,"cursor-pointer","text-primary",3,"routerLink"],[1,"actions","ml-auto","pr-2"]],template:function(e,t){1&e&&u["\u0275\u0275template"](0,Xe,20,18,"div",0),2&e&&u["\u0275\u0275property"]("ngIf",t.discussion)},directives:[i.n,i.l,re.c,v.i,v.m,v.k,i.m,ce.a,o.d],pipes:[i.e,me.a,pe.a,he,i.v,fe.a,i.f,ge.a],styles:["quill-view-html .ql-container{font-size:15px!important;height:auto}  quill-view-html .ql-editor{padding:0 0 5px;line-height:1.1}.recipient-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#88898a}.email-wrap.no-image[_ngcontent-%COMP%]{padding-left:32px}.tag[_ngcontent-%COMP%]{height:18px;font-size:12px;padding:0 8px!important;line-height:18px}.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:none}.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{margin:0!important;width:30px!important;height:18px!important;display:flex;align-items:center;justify-content:center;padding:0!important}.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:30px!important;height:18px!important;background-size:30px!important;background-position:50%}@media (max-width:1024px){.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:inline-block}}.list-item[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]{display:inline-block}.entry[_ngcontent-%COMP%]:hover{background:#fff}.entry[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:160px}@media (max-width:1024px){.entry[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px}}.contain-avatar[_ngcontent-%COMP%]{border:1px solid #dfdfdf;object-fit:contain}"]}),e})();function Ze(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",5),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.user.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function et(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",6),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.user.contactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.user.firstName.substr(0,1),"",e.user.surname.substr(0,1)," ")}}function tt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ul",45),u["\u0275\u0275elementStart"](1,"li",46),u["\u0275\u0275elementStart"](2,"div",47),u["\u0275\u0275elementStart"](3,"span",48),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"ngb-progressbar",49),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"button",50),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit,i=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](3).removeProgressFile(i,n)}),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](4);u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](e.data.name),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",e.progress)("showValue",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",100===e.progress&&n.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.loading?"Cancel":"Delete"," ")}}function nt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,tt,8,5,"ul",44),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.getFile(e))}}function it(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",42),u["\u0275\u0275template"](1,nt,2,1,"ng-container",43),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.documents)}}function st(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-image-layout",51),u["\u0275\u0275listener"]("handleRemoveImage",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).removeFile(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("images",e.getGalleryFiles(e.documents))("files",e.getNoneGalleryFiles(e.documents))("editable",!0)("hideImageView",!0)}}function ot(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",53),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).changeTaskStatus()}),u["\u0275\u0275element"](1,"i",54),u["\u0275\u0275text"](2," Mark as complete "),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275classProp"]("active",2===e.taskStatusID)}}function at(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"button",55),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](4).supporterTaskStatusID=3}),u["\u0275\u0275element"](2,"i",54),u["\u0275\u0275text"](3," Accept "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](4," | "),u["\u0275\u0275elementStart"](5,"button",56),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](4).supporterTaskStatusID=1}),u["\u0275\u0275element"](6,"i",57),u["\u0275\u0275text"](7,"Decline "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](4);u["\u0275\u0275advance"](1),u["\u0275\u0275classProp"]("active",3===e.supporterTaskStatusID),u["\u0275\u0275advance"](4),u["\u0275\u0275classProp"]("active",1===e.supporterTaskStatusID)}}function rt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,at,8,4,"ng-container",39),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.taskOwner&&2===e.taskOwner.taskStatusID)}}function ct(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,ot,3,2,"button",52),u["\u0275\u0275template"](2,rt,2,1,"ng-container",39),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.taskOwner&&e.taskOwner.contactID===e.contactID&&3!==e.taskOwner.taskStatusID&&116===e.discussion.discussionCategoryID&&!e.subDiscussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.taskSupporter&&e.subDiscussion)}}function dt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"form",7,8),u["\u0275\u0275template"](2,it,2,1,"div",9),u["\u0275\u0275template"](3,st,1,4,"app-image-layout",10),u["\u0275\u0275elementStart"](4,"div",11),u["\u0275\u0275elementStart"](5,"quill-editor",12),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().body=t})("keyup",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().typingIndicator()}),u["\u0275\u0275elementStart"](6,"div",13),u["\u0275\u0275elementStart"](7,"span",14),u["\u0275\u0275element"](8,"button",15),u["\u0275\u0275element"](9,"button",16),u["\u0275\u0275element"](10,"button",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"span",14),u["\u0275\u0275element"](12,"button",18),u["\u0275\u0275element"](13,"button",19),u["\u0275\u0275elementStart"](14,"select",20),u["\u0275\u0275element"](15,"option",21),u["\u0275\u0275element"](16,"option",22),u["\u0275\u0275element"](17,"option",23),u["\u0275\u0275element"](18,"option",24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"span",14),u["\u0275\u0275element"](20,"button",25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",26),u["\u0275\u0275elementStart"](22,"button",27),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().submit()}),u["\u0275\u0275element"](23,"i",28),u["\u0275\u0275text"](24," Send "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",29),u["\u0275\u0275elementStart"](26,"button",30),u["\u0275\u0275element"](27,"i",31),u["\u0275\u0275text"](28," Attach "),u["\u0275\u0275element"](29,"i",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](30,"div",33),u["\u0275\u0275elementStart"](31,"button",34),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().systemFileSelect()}),u["\u0275\u0275text"](32,"From Files"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"button",34),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275reference"](43).click()}),u["\u0275\u0275text"](34,"From Local Device"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"button",35),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"]();return t.toggleBar=!t.toggleBar}),u["\u0275\u0275element"](36,"i",36),u["\u0275\u0275text"](37," Editor "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](38,"button",37),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().discard()}),u["\u0275\u0275element"](39,"i",38),u["\u0275\u0275text"](40," Discard "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](41,ct,3,2,"ng-container",39),u["\u0275\u0275elementStart"](42,"input",40,41),u["\u0275\u0275listener"]("change",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onFileSelect(t)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](1),t=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("avnonLoader",t.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.loading&&t.documents.length),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.documents&&t.documents.length>0&&!t.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("toggle-bar",t.toggleBar),u["\u0275\u0275property"]("ngModel",t.body),u["\u0275\u0275advance"](17),u["\u0275\u0275property"]("disabled",e.invalid||t.loading),u["\u0275\u0275advance"](19),u["\u0275\u0275property"]("ngIf",t.task&&3===t.task.taskCategoryID)}}const lt=function(e){return{"pl-3 pr-3":e}};let ut=(()=>{class e{constructor(e,t,n,i,s,o,r){this.documentsService=e,this.toastrService=t,this.taskService=n,this.userService=i,this.modal=s,this.signalRService=o,this.discussionService=r,this.ownerDiscussionAdded=new u.EventEmitter,this.discussionAdded=new u.EventEmitter,this.discarded=new u.EventEmitter,this.ownerContactID=new u.EventEmitter,this.members=[],this.contacts=[],this.taskOwners=[],this.taskSupporters=[],this.body="",this.documents=[],this.systemFiles=[],this.fakeId=0,this.toggleBar=!1,this.unsubscribe=[],this.destroy$=new a.a,this.apiBlobUrl=$.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}ngOnInit(){this.channel="typing"+this.discussion.discussionID}submit(){this.createMessage(this.discussion.discussionID)}createMessage(e=0){this.loading=!0;let t=L.b.notificationAlternative,n=this.contacts;124===this.discussionCategoryID&&n.length>1&&(n=n.filter(e=>1===e.discussionMemberTypeID)),116===this.discussion.discussionCategoryID&&(t=L.b.taskAlternative),this.taskOwner&&37!==this.task.taskCategoryID&&(this.taskOwner.contactID===this.contactID&&(n=[],this.taskSupporters.forEach(e=>{n.push(e)}),t=6,this.taskStatusID!==this.taskOwner.taskStatusID&&(this.taskOwner.taskStatusID=this.taskStatusID,t=2===this.taskStatusID?7:11,2===this.taskStatusID&&(this.taskOwner.dateSentForSignOff=U().utc().format(z.c)))),this.taskSupporter&&37!==this.task.taskCategoryID&&(t=6,this.supporterTaskStatusID&&(t=3===this.supporterTaskStatusID?L.b.acceptSignOff:L.b.declineSignOff),this.taskOwner&&(n=[this.taskOwner],this.supporterTaskStatusID&&(this.taskStatusID=this.supporterTaskStatusID,this.taskOwner.taskStatusID=this.supporterTaskStatusID,this.taskService.updateTaskOwner(this.taskOwner).subscribe())),this.taskOwner||this.taskOwners.forEach(e=>{n.push(e)}))),this.discussionCategoryID&&(t=this.discussionCategoryID);const i={discussionTopic:"Re: "+this.discussion.discussionTopic,discussionCategoryID:t,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:this.body,parentDiscussionID:this.taskOwner&&37!==this.taskOwner.taskCategoryID?this.taskOwner.discussionID:e,referenceID:this.referenceID||this.discussion.discussionID,dateCreated:U().utc().format(z.c),replyDiscussionID:this.discussion.discussionID,discussionValue:this.discussionValue||0},s=Object.assign({},i);s.firstName=this.user.firstName,s.surname=this.user.surname,s.dateCreated=U().utc().format(z.c),s.profilePhoto=this.user.profilePhoto,s.documents=[],s.replyDiscussionID=s.replyDisussionID,this.discussionService.insertDiscussion(i).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{s.discussionID=e.discussionID,this.saveDocuments(e.discussionID,this.documents.filter(e=>!e.documentID)).pipe(Object(V.a)(e=>{s.documents=e.filter(e=>e);const t=[];return e.forEach(e=>{if(e.hasOwnProperty("documentID")){const n=new K;n.documentID=e.documentID,n.documentLinkCategoryID=22,n.documentLinkReferenceID=s.discussionID,n.documentLinkSubCategoryID=0,t.push(this.documentsService.postDocumentLink(n))}}),this.systemFiles.forEach(e=>{const n=new K;n.documentID=e.documentID,n.documentLinkCategoryID=22,n.documentLinkReferenceID=s.discussionID,n.documentLinkSubCategoryID=e.reference2ID,t.push(this.documentsService.postDocumentLink(n))}),t.length?Object(r.a)(t):Object(E.a)([])})).subscribe(t=>{this.documents=[],n.forEach(e=>{if([115,116,124].includes(s.discussionCategoryID)){const t=new G;t.contactID=e.contactID,t.discussionID=s.discussionID,t.hasAccepted=!0,t.dateAccepted=U().utc().format(z.c),t.isAdmin=!1,t.submittedByContactID=this.contactID,this.discussionService.addMember(t).subscribe()}}),s.documents=t.filter(e=>e),s.members=this.contacts;let i=`${this.user.firstName} ${this.user.surname} sent you  a message`;this.taskOwner&&this.taskOwner.contactID===this.contactID&&37!==this.task.taskCategoryID&&(i=`${this.user.firstName} ${this.user.surname} posted a status update`,3!==this.taskOwner.taskStatusID&&this.taskService.updateTaskOwner(this.taskOwner).subscribe());const o={date:U().format(z.c),body:i,topic:i,senderFullName:e.firstName+" "+e.surname,senderPhoto:e.profilePhoto,channel:"dashboard",reference:s.discussionID,notificationType:H.a.discussionNotification,senderId:this.contactID,subReferenceID:this.discussion.discussionID,taskStatusID:this.taskStatusID,receivers:n.filter(e=>e.contactID!==this.contactID).map(e=>e.contactID)};if([115,116,1].includes(s.discussionCategoryID)){const e=this.discussion.childDiscussions,t=this.discussion.childDiscussions.length;s.isSameTime=t>0&&Object(c.b)(e[t-1],s),s.isSameDate=t>0&&Object(c.f)(e[t-1],s),s.childDiscussions=[],this.discussion.childDiscussions.push(s),1===this.discussion.discussionCategoryID&&this.discussionAdded.emit(s)}else 124===s.discussionCategoryID?this.discussionAdded.emit(s):this.ownerDiscussionAdded.emit(s);this.body="",[115,116,8,9,124,1].includes(s.discussionCategoryID)?this.signalRService.transferMessage("dashboard",o):this.handleNotification(Object(c.l)(s),n),this.typingIndicator(),this.loading=!1},()=>{this.loading=!1})})}handleNotification(e,t){e.discussionCreatedByContactID=this.contactID,e.parentDiscussionID=this.discussion.discussionID,e.referenceID=this.taskOwner.taskOwnerID,e.discussionValue=this.taskOwner&&(this.chatAdmin||this.taskSupporter)?1:e.discussionCategoryID,e.replyDiscussionID=this.taskOwner&&(this.chatAdmin||this.taskSupporter)?this.discussion.discussionID:0,e.discussionCategoryID=117,this.discussionService.insertDiscussion(e).subscribe(n=>{if(e.discussionID=n.discussionID,t.forEach(t=>{const n=new G;n.contactID=t.contactID,n.discussionID=e.discussionID,n.hasAccepted=!0,n.dateAccepted=U().utc().format(z.c),n.isAdmin=!1,n.submittedByContactID=this.contactID,this.discussionService.addMember(n).subscribe()}),this.taskSupporter&&t.some(e=>e.contactID!==this.contactID)){const t=new G;t.contactID=this.contactID,t.discussionID=e.discussionID,t.hasAccepted=!0,t.dateAccepted=U().utc().format(z.c),t.isAdmin=!1,t.submittedByContactID=this.contactID,this.discussionService.addMember(t).subscribe()}let i=this.user.firstName+" posted a status update";this.taskSupporter&&(i=this.user.firstName+" sent you a message");const s={date:U().format(z.c),body:i,topic:i,senderFullName:n.firstName+" "+n.surname,senderPhoto:n.profilePhoto,channel:"dashboard",reference:e.discussionID,notificationType:H.a.discussionNotification,senderId:this.contactID,subReferenceID:this.discussion.discussionID,taskStatusID:this.taskStatusID,receivers:t.filter(e=>e.contactID!==this.contactID).map(e=>e.contactID)};this.signalRService.transferMessage("dashboard",s),this.discussionAdded.emit(e),this.loading=!1})}onFileSelect(e){const t=e.target.files;for(let n=0;n<t.length;n++){const e=t.item(n);if(e.type&&/^image\//.test(e.type)){const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{e.imageUrl=t.result}}else if(e.type&&/^video\//.test(e.type)){const t=15,n=new FileReader;n.readAsDataURL(e),n.onload=n=>{e.videoUrl=n.target.result;const i=document.createElement("video");i.setAttribute("src",n.target.result),i.addEventListener("loadedmetadata",function(){this.currentTime=i.duration<t?i.duration/2:t},!1),i.addEventListener("loadeddata",()=>{setTimeout(()=>{const t=document.createElement("canvas");t.getContext("2d").drawImage(i,0,0,i.videoWidth,i.videoHeight),e.imageUrl=t.toDataURL()},300)},!1)}}this.addFile(e)}}onPaste(e){if(e.clipboardData&&e.clipboardData.files&&e.clipboardData.files.length&&/^image\//.test(e.clipboardData.files[0].type)){const t=new FileReader,n=e.clipboardData.files[0];t.readAsDataURL(n),t.onload=()=>{n.imageUrl=t.result,this.addFile(n)}}}addFile(e){const t=new j.a;t.data=e,t.progress=0;const n=new P.a;t.fakeId=this.fakeId++,n.file=t,this.documents.push(n)}removeFile(e){const t=this.systemFiles.findIndex(t=>t.documentID===(null==e?void 0:e.documentID));-1!==t&&this.systemFiles.splice(t,1);const n=this.documents.findIndex(t=>t.file?t.file.fakeId===e.fakeId:t.documentID===e.id);this.documents.splice(n,1)}saveDocuments(e,t){return t&&0!==t.length?Object(r.a)(t.map((t,n)=>{const i=new FormData;return i.append("file",t.file.data),this.unsubscribe.push({id:t.file.fakeId,sub:new a.a}),this.documentsService.insertDocument(i,22,e,this.contactID,0,e).pipe(Object(d.a)(this.unsubscribe[n].sub),Object(N.a)(e=>{switch(e.type){case B.e.UploadProgress:t.file.progress=Math.round(100*e.loaded/e.total);break;case B.e.Response:return e.body[0]}}))})):Object(E.a)([])}getGalleryFiles(e){return e?e.filter(e=>R.b.isImage(e)).map(e=>this.getFile(e)):[]}getNoneGalleryFiles(e){return e?e.filter(e=>!R.b.isImage(e)).map(e=>this.getFile(e)):[]}getFile(e){return e.file?e.file:Object.assign({id:e.documentID,documentPath:e.documentPath,data:Object.assign({name:e.documentTitle},"video/mp4"===e.documentType?{videoUrl:$.a.apiBlobUrl+"/"+e.documentPath}:{imageUrl:`${$.a.apiBlobUrl}/1024px/${e.documentPath}`}),type:e.documentType,progress:100,fakeId:this.fakeId++},e)}removeProgressFile(e,t){this.removeFile(t);const n=this.unsubscribe.find(t=>t.id===e.file.fakeId);n&&n.sub.next()}discard(){this.documents=[],this.body="",this.discarded.emit(!0)}changeTaskStatus(){this.taskStatusID=1===this.taskStatusID?2:1}systemFileSelect(){const e=this.modal.open(X.a,{backdrop:"static",size:"lg"});e.componentInstance.documentLink=!0,e.result.then(e=>{e.type=e.documentType,e.data=e,e.progress=0,e.fakeId=this.fakeId++,e.file=e,this.documents.push(e),this.systemFiles.push(e)})}openOwner(e){this.ownerContactID.emit(e)}typingIndicator(){this.typing?(clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout(()=>{this.clearTyping()},1500)):(this.typing=!0,this.addTypingIndicator(),this.typingTimeout=setTimeout(()=>{this.clearTyping()},1500))}clearTyping(){this.typing=!1,this.signalRService.transferMessage(this.channel,{type:ne.a.typingIndicator,data:{fullName:this.user.firstName+" "+this.user.surname,typing:!1,id:this.contactID}})}addTypingIndicator(){this.signalRService.transferMessage(this.channel,{type:ne.a.typingIndicator,data:{fullName:this.user.firstName+" "+this.user.surname,typing:!0,id:this.contactID}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.unsubscribe.map(e=>{e&&e.sub&&!e.sub.closed&&(e.sub.next(),e.sub.complete())}),this.typing&&this.clearTyping(),clearTimeout(this.typingTimeout)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](ie.a),u["\u0275\u0275directiveInject"](D.b),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](v.p),u["\u0275\u0275directiveInject"](x.a),u["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-reply-notification-discussion"]],inputs:{subDiscussion:"subDiscussion",discussion:"discussion",members:"members",contacts:"contacts",task:"task",taskOwners:"taskOwners",taskOwner:"taskOwner",taskSupporters:"taskSupporters",taskSupporter:"taskSupporter",taskStatusID:"taskStatusID",supporterTaskStatusID:"supporterTaskStatusID",chatAdmin:"chatAdmin",referenceID:"referenceID",discussionValue:"discussionValue",discussionCategoryID:"discussionCategoryID",hidePadding:"hidePadding"},outputs:{ownerDiscussionAdded:"ownerDiscussionAdded",discussionAdded:"discussionAdded",discarded:"discarded",ownerContactID:"ownerContactID"},decls:5,vars:6,consts:[[1,"form-group","d-flex","flex-row","border-top",3,"ngClass"],[1,"media","avatar","avatar-32","avatar-32-rounded","mr-0","mt-3"],["class","img-fluid img-32 cover","alt","Avatar",3,"src",4,"ngIf"],["class","avatar-generated",3,"background-color",4,"ngIf"],["class","d-flex flex-column form-wrapper m-2 flex-grow-1",3,"avnonLoader",4,"ngIf"],["alt","Avatar",1,"img-fluid","img-32","cover",3,"src"],[1,"avatar-generated"],[1,"d-flex","flex-column","form-wrapper","m-2","flex-grow-1",3,"avnonLoader"],["f","ngForm"],["class","progress-holder",4,"ngIf"],["class","w-100 app-image-layout",3,"images","files","editable","hideImageView","handleRemoveImage",4,"ngIf"],["id","wrapperItem",1,"form-group","pl-1","pr-1","mb-0","wrapperItem","d-flex","flex-column"],["format","html","required","","name","emailBody","bounds","#wrapperItem","placeholder","","scrollingContainer","#wrapperItem",1,"h-100","d-flex","flex-column","flex-grow-1",3,"ngModel","ngModelChange","keyup"],["quill-editor-toolbar",""],[1,"ql-formats"],[1,"ql-bold"],[1,"ql-italic"],[1,"ql-underline"],["value","ordered",1,"ql-list"],["value","bullet",1,"ql-list"],[1,"ql-align"],["selected",""],["value","center"],["value","right"],["value","justify"],[1,"ql-link"],[1,"d-flex","w-100","border-bottom","pl-3","pr-3","header-action","align-items-center","twitter-fill"],["ngbTooltip","Send","type","button",1,"btn","btn-sm","default-action-btn",3,"disabled","click"],[1,"fas","fa-paper-plane"],["ngbDropdown","",1,"d-inline-block","ml-2"],["type","button","id","fileID","ngbDropdownToggle","",1,"btn","default-action-btn","btn-sm"],[1,"fas","fa-paperclip"],[1,"fas","fa-chevron-down"],["ngbDropdownMenu","","aria-labelledby","fileID"],["type","button","ngbDropdownItem","",3,"click"],["ngbTooltip","Formatting options","type","button",1,"btn","btn-sm","ml-2","mr-2","default-action-btn",3,"click"],[1,"fas","fa-tools"],["ngbTooltip","Discard","type","button",1,"btn","btn-sm","discard-btn","ml-2",3,"click"],[1,"fas","fa-trash-alt"],[4,"ngIf"],["type","file","multiple","","onclick","this.value = null",1,"d-none",3,"change"],["fileInput",""],[1,"progress-holder"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between"],[1,"w-100"],[1,"file-name"],["type","success","textType","white",3,"value","showValue"],["type","button",1,"btn","btn-link",3,"disabled","click"],[1,"w-100","app-image-layout",3,"images","files","editable","hideImageView","handleRemoveImage"],["ngbTooltip","Mark as complete","type","button","class","btn btn-sm supporter-btn ml-auto",3,"active","click",4,"ngIf"],["ngbTooltip","Mark as complete","type","button",1,"btn","btn-sm","supporter-btn","ml-auto",3,"click"],[1,"fas","fa-check-circle"],["ngbTooltip","Accept","type","button",1,"btn","btn-sm","supporter-btn","ml-auto","mr-2",3,"click"],["ngbTooltip","Decline","type","button",1,"btn","btn-sm","supporter-btn","ml-2",3,"click"],[1,"fas","fa-times-circle"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"span",1),u["\u0275\u0275template"](2,Ze,2,3,"img",2),u["\u0275\u0275template"](3,et,3,6,"span",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](4,dt,44,8,"form",4),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction1"](4,lt,!t.hidePadding)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.user.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.user.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",116!==t.discussion.discussionCategoryID||116===t.discussion.discussionCategoryID&&(t.chatAdmin||t.taskOwner||t.taskSupporter)))},directives:[i.l,i.n,ae.E,ae.r,ae.s,y.a,re.a,ae.A,ae.q,ae.t,ae.v,ae.D,v.C,v.i,v.m,v.k,v.j,i.m,v.u,ce.a],pipes:[pe.a,he],styles:[".add-contact[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;padding:0;min-height:30px}  quill-editor{position:relative}  quill-editor.toggle-bar .ql-toolbar{display:block!important}  quill-editor .ql-container{border:0!important;flex:1;font-size:15px!important}  quill-editor .ql-toolbar{border-left:0!important;border-right:0!important;border-bottom:0!important;border-top:1px solid #dfdfdf;width:100%;z-index:1;background:#fff;display:none;order:2}  quill-editor .ql-editor.ql-blank:before{font-style:normal!important}  quill-editor .ql-editor{min-height:120px}.recipient-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.recipient-header.has-contact[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.recipient[_ngcontent-%COMP%]{height:30px;line-height:30px}.tag-alt[_ngcontent-%COMP%]{font-size:14px!important;cursor:pointer}.tag-alt[_ngcontent-%COMP%]:hover{opacity:.8}.header-action[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.default-action-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:0}.default-action-btn[_ngcontent-%COMP%]:focus, .default-action-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:0;outline:none;box-shadow:none}.default-action-btn[_ngcontent-%COMP%]:disabled{opacity:.9}.discard-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #7c7c7c;color:#c26555}.discard-btn[_ngcontent-%COMP%]:focus, .discard-btn[_ngcontent-%COMP%]:hover{opacity:.8}.btn[_ngcontent-%COMP%]{font-size:15px!important}.form-wrapper[_ngcontent-%COMP%]{box-shadow:0 0 3px 0 #d0d0d0;border-radius:5px}.subject-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.subject-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:38px;line-height:38px}.email-wrap[_ngcontent-%COMP%]{padding-left:32px}.recipient-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#88898a}.supporter-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:1px solid #c26555}.supporter-btn[_ngcontent-%COMP%]:focus, .supporter-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:1px solid #d9d9d9;outline:none;box-shadow:none}.supporter-btn.active[_ngcontent-%COMP%]{background:#c26555;color:#fff}.sticky-form[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff}.btn[_ngcontent-%COMP%]{overflow:hidden}"]}),e})();function mt(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",38),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.user.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function pt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",39),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.user.contactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.user.firstName.substr(0,1),"",e.user.surname.substr(0,1)," ")}}function ht(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ul",43),u["\u0275\u0275elementStart"](1,"li",44),u["\u0275\u0275elementStart"](2,"div",45),u["\u0275\u0275elementStart"](3,"span",46),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"ngb-progressbar",47),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"button",48),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit,i=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](2).removeProgressFile(i,n)}),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](e.data.name),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",e.progress)("showValue",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",100===e.progress&&n.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.loading?"Cancel":"Delete"," ")}}function ft(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,ht,8,5,"ul",42),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.getFile(e))}}function gt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",40),u["\u0275\u0275template"](1,ft,2,1,"ng-container",41),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.documents)}}function Dt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-image-layout",49),u["\u0275\u0275listener"]("handleRemoveImage",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().removeFile(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("images",e.getGalleryFiles(e.documents))("files",e.getNoneGalleryFiles(e.documents))("editable",!0)("hideImageView",!0)}}let It=(()=>{class e{constructor(e,t,n,i,s,o,r){this.documentsService=e,this.toastrService=t,this.taskService=n,this.userService=i,this.modal=s,this.signalRService=o,this.discussionService=r,this.discussionUpdated=new u.EventEmitter,this.discarded=new u.EventEmitter,this.members=[],this.body="",this.documents=[],this.systemFiles=[],this.fakeId=0,this.toggleBar=!1,this.unsubscribe=[],this.documentsWillRemove=[],this.documentsLinkRemove=[],this.destroy$=new a.a,this.apiBlobUrl=$.a.apiBlobUrl+"/",this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}set Data(e){this.discussion=Object(c.l)(e),this.body=e.discussionBody,this.documents=e.documents.filter(e=>!e.documentLinkID).map(e=>(e.file=this.getFile(e),e)),this.systemFiles=e.documents.filter(e=>e.documentLinkID),this.systemFiles.forEach(e=>{e.type=e.documentType,e.data=e,e.progress=0,e.fakeId=this.fakeId++,e.file=e,this.documents.push(e)})}ngOnInit(){}submit(){this.loading=!0,this.discussion.discussionBody=this.body;const e=Object.assign(Object.assign({},this.discussion),{documents:[],childDiscussions:[],members:[]});this.discussion.documents=[],this.discussionService.updateDiscussion(e).pipe(Object(V.a)(()=>{const e=this.documentsWillRemove.map(e=>this.documentsService.deleteDocument(e)),t=e&&e.length?e:Object(E.a)([]),n=this.documentsLinkRemove.map(e=>this.documentsService.deleteDocumentLink(e)),i=n&&n.length?n:Object(E.a)([]),s=this.documents.filter(e=>!e.documentID),o=[];this.systemFiles.forEach(e=>{const t=new K;t.documentID=e.documentID,t.documentLinkCategoryID=22,t.documentLinkReferenceID=this.discussion.discussionID,t.documentLinkSubCategoryID=e.reference2ID,o.push(this.documentsService.postDocumentLink(t))});const a=o.length?o:Object(E.a)([]);return Object(r.a)([this.saveDocuments(this.discussion.discussionID,s.filter(e=>!e.documentID)),Object(r.a)(a),Object(r.a)(i),Object(r.a)(t)])}),Object(V.a)(e=>{const t=[],n=e[0];return this.discussion.documents=[...n],e[1].forEach(e=>{const t=this.systemFiles.find(t=>t.documentID===e.documentID);t&&(t.documentLinkID=e.inOut_DocumentLinkID,this.discussion.documents.push(t))}),n.forEach(e=>{const n=new K;n.documentID=e.documentID,n.documentLinkCategoryID=22,n.documentLinkReferenceID=this.discussion.discussionID,n.documentLinkSubCategoryID=0,t.push(this.documentsService.postDocumentLink(n))}),t.length?Object(r.a)(t):Object(E.a)([])})).subscribe(e=>{e.forEach(e=>{const t=this.discussion.documents.findIndex(t=>t.documentID===e.documentID);-1!==t&&(this.discussion.documents[t].documentLinkID=e.documentID)}),this.discussionUpdated.emit(this.discussion);const t={date:U().format(z.c),channel:"dashboard",reference:this.discussion.discussionID,notificationType:H.a.discussionNotificationUpdate,senderId:this.contactID,receivers:this.members.filter(e=>e.contactID!==this.contactID).map(e=>e.contactID)};this.signalRService.transferMessage("dashboard",t),this.loading=!1})}onFileSelect(e){const t=e.target.files;for(let n=0;n<t.length;n++){const e=t.item(n);if(e.type&&/^image\//.test(e.type)){const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{e.imageUrl=t.result}}else if(e.type&&/^video\//.test(e.type)){const t=15,n=new FileReader;n.readAsDataURL(e),n.onload=n=>{e.videoUrl=n.target.result;const i=document.createElement("video");i.setAttribute("src",n.target.result),i.addEventListener("loadedmetadata",function(){this.currentTime=i.duration<t?i.duration/2:t},!1),i.addEventListener("loadeddata",()=>{setTimeout(()=>{const t=document.createElement("canvas");t.getContext("2d").drawImage(i,0,0,i.videoWidth,i.videoHeight),e.imageUrl=t.toDataURL()},300)},!1)}}this.addFile(e)}}onPaste(e){if(e.clipboardData&&e.clipboardData.files&&e.clipboardData.files.length&&/^image\//.test(e.clipboardData.files[0].type)){const t=new FileReader,n=e.clipboardData.files[0];t.readAsDataURL(n),t.onload=()=>{n.imageUrl=t.result,this.addFile(n)}}}addFile(e){const t=new j.a;t.data=e,t.progress=0;const n=new P.a;t.fakeId=this.fakeId++,n.file=t,this.documents.push(n)}removeFile(e){const t=this.systemFiles.findIndex(t=>t.documentID===(null==e?void 0:e.documentID));-1!==t&&this.systemFiles.splice(t,1);const n=this.documents.findIndex(t=>t.file?t.file.fakeId===e.fakeId:t.documentID===e.id);-1!==n&&this.documents[n].documentID&&!this.documents[n].documentLinkID&&this.documentsWillRemove.push(this.documents[n].documentID),-1!==n&&this.documents[n].documentID&&this.documents[n].documentLinkID&&this.documentsLinkRemove.push(this.documents[n].documentLinkID),this.documents.splice(n,1)}saveDocuments(e,t){return t&&0!==t.length?Object(r.a)(t.map((t,n)=>{const i=new FormData;return i.append("file",t.file.data),this.unsubscribe.push({id:t.file.fakeId,sub:new a.a}),this.documentsService.insertDocument(i,22,e,this.contactID,0,e).pipe(Object(d.a)(this.unsubscribe[n].sub),Object(N.a)(e=>{switch(e.type){case B.e.UploadProgress:t.file.progress=Math.round(100*e.loaded/e.total);break;case B.e.Response:return e.body[0]}}))})):Object(E.a)([])}getGalleryFiles(e){return e?e.filter(e=>R.b.isImage(e)).map(e=>this.getFile(e)):[]}getNoneGalleryFiles(e){return e?e.filter(e=>!R.b.isImage(e)).map(e=>this.getFile(e)):[]}getFile(e){return e.file?e.file:Object.assign({id:e.documentID,documentPath:e.documentPath,data:Object.assign({name:e.documentTitle},"video/mp4"===e.documentType?{videoUrl:$.a.apiBlobUrl+"/"+e.documentPath}:{imageUrl:`${$.a.apiBlobUrl}/1024px/${e.documentPath}`}),type:e.documentType,progress:100,fakeId:this.fakeId++},e)}removeProgressFile(e,t){this.removeFile(t);const n=this.unsubscribe.find(t=>t.id===e.file.fakeId);n&&n.sub.next()}discard(){this.discarded.emit(!0)}systemFileSelect(){const e=this.modal.open(X.a,{backdrop:"static",size:"lg"});e.componentInstance.documentLink=!0,e.result.then(e=>{e.type=e.documentType,e.data=e,e.progress=0,e.fakeId=this.fakeId++,e.file=e,this.documents.push(e),this.systemFiles.push(e)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.unsubscribe.map(e=>{e&&e.sub&&!e.sub.closed&&(e.sub.next(),e.sub.complete())})}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](ie.a),u["\u0275\u0275directiveInject"](D.b),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](v.p),u["\u0275\u0275directiveInject"](x.a),u["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notification-edit"]],inputs:{Data:["editDiscussion","Data"],members:"members"},outputs:{discussionUpdated:"discussionUpdated",discarded:"discarded"},decls:47,vars:9,consts:[[1,"form-group","d-flex","flex-row","pl-3","pr-3","border-top"],[1,"media","avatar","avatar-32","avatar-32-rounded","mr-0","mt-3"],["class","img-fluid img-32 cover","alt","Avatar",3,"src",4,"ngIf"],["class","avatar-generated",3,"background-color",4,"ngIf"],[1,"d-flex","flex-column","form-wrapper","m-2","flex-grow-1",3,"avnonLoader"],["f","ngForm"],["class","progress-holder",4,"ngIf"],["class","w-100 app-image-layout",3,"images","files","editable","hideImageView","handleRemoveImage",4,"ngIf"],["id","wrapperItem",1,"form-group","pl-1","pr-1","mb-0","wrapperItem","d-flex","flex-column"],["format","html","required","","name","emailBody","bounds","#wrapperItem","placeholder","","scrollingContainer","#wrapperItem",1,"h-100","d-flex","flex-column","flex-grow-1",3,"ngModel","ngModelChange"],["quill-editor-toolbar",""],[1,"ql-formats"],[1,"ql-bold"],[1,"ql-italic"],[1,"ql-underline"],["value","ordered",1,"ql-list"],["value","bullet",1,"ql-list"],[1,"ql-align"],["selected",""],["value","center"],["value","right"],["value","justify"],[1,"ql-link"],[1,"d-flex","w-100","border-bottom","pl-3","pr-3","header-action","align-items-center","twitter-fill"],["ngbTooltip","Send","type","button",1,"btn","btn-sm","default-action-btn",3,"disabled","click"],[1,"fas","fa-paper-plane"],["ngbDropdown","",1,"d-inline-block","ml-2"],["type","button","id","fileID","ngbDropdownToggle","",1,"btn","default-action-btn","btn-sm"],[1,"fas","fa-paperclip"],[1,"fas","fa-chevron-down"],["ngbDropdownMenu","","aria-labelledby","fileID"],["type","button","ngbDropdownItem","",3,"click"],["ngbTooltip","Formatting options","type","button",1,"btn","btn-sm","ml-2","mr-2","default-action-btn",3,"click"],[1,"fas","fa-tools"],["ngbTooltip","Discard","type","button",1,"btn","btn-sm","discard-btn","ml-2",3,"click"],[1,"fas","fa-trash-alt"],["type","file","multiple","","onclick","this.value = null",1,"d-none",3,"change"],["fileInput",""],["alt","Avatar",1,"img-fluid","img-32","cover",3,"src"],[1,"avatar-generated"],[1,"progress-holder"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between"],[1,"w-100"],[1,"file-name"],["type","success","textType","white",3,"value","showValue"],["type","button",1,"btn","btn-link",3,"disabled","click"],[1,"w-100","app-image-layout",3,"images","files","editable","hideImageView","handleRemoveImage"]],template:function(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"span",1),u["\u0275\u0275template"](2,mt,2,3,"img",2),u["\u0275\u0275template"](3,pt,3,6,"span",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"form",4,5),u["\u0275\u0275template"](6,gt,2,1,"div",6),u["\u0275\u0275template"](7,Dt,1,4,"app-image-layout",7),u["\u0275\u0275elementStart"](8,"div",8),u["\u0275\u0275elementStart"](9,"quill-editor",9),u["\u0275\u0275listener"]("ngModelChange",function(e){return t.body=e}),u["\u0275\u0275elementStart"](10,"div",10),u["\u0275\u0275elementStart"](11,"span",11),u["\u0275\u0275element"](12,"button",12),u["\u0275\u0275element"](13,"button",13),u["\u0275\u0275element"](14,"button",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"span",11),u["\u0275\u0275element"](16,"button",15),u["\u0275\u0275element"](17,"button",16),u["\u0275\u0275elementStart"](18,"select",17),u["\u0275\u0275element"](19,"option",18),u["\u0275\u0275element"](20,"option",19),u["\u0275\u0275element"](21,"option",20),u["\u0275\u0275element"](22,"option",21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"span",11),u["\u0275\u0275element"](24,"button",22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",23),u["\u0275\u0275elementStart"](26,"button",24),u["\u0275\u0275listener"]("click",function(){return t.submit()}),u["\u0275\u0275element"](27,"i",25),u["\u0275\u0275text"](28," Send "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"div",26),u["\u0275\u0275elementStart"](30,"button",27),u["\u0275\u0275element"](31,"i",28),u["\u0275\u0275text"](32," Attach "),u["\u0275\u0275element"](33,"i",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",30),u["\u0275\u0275elementStart"](35,"button",31),u["\u0275\u0275listener"]("click",function(){return t.systemFileSelect()}),u["\u0275\u0275text"](36,"From Files"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"button",31),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275reference"](46).click()}),u["\u0275\u0275text"](38,"From Local Device"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"button",32),u["\u0275\u0275listener"]("click",function(){return t.toggleBar=!t.toggleBar}),u["\u0275\u0275element"](40,"i",33),u["\u0275\u0275text"](41," Editor "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](42,"button",34),u["\u0275\u0275listener"]("click",function(){return t.discard()}),u["\u0275\u0275element"](43,"i",35),u["\u0275\u0275text"](44," Discard "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](45,"input",36,37),u["\u0275\u0275listener"]("change",function(e){return t.onFileSelect(e)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](5);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.user.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.user.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("avnonLoader",t.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.loading&&t.documents.length),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.documents&&t.documents.length>0&&!t.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("toggle-bar",t.toggleBar),u["\u0275\u0275property"]("ngModel",t.body),u["\u0275\u0275advance"](17),u["\u0275\u0275property"]("disabled",e.invalid||t.loading)}},directives:[i.n,ae.E,ae.r,ae.s,y.a,re.a,ae.A,ae.q,ae.t,ae.v,ae.D,v.C,v.i,v.m,v.k,v.j,i.m,v.u,ce.a],pipes:[pe.a,he],styles:[".add-contact[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;padding:0;min-height:30px}  quill-editor{position:relative}  quill-editor.toggle-bar .ql-toolbar{display:block!important}  quill-editor .ql-container{border:0!important;flex:1;font-size:15px!important}  quill-editor .ql-toolbar{border-left:0!important;border-right:0!important;border-bottom:0!important;border-top:1px solid #dfdfdf;width:100%;z-index:1;background:#fff;display:none;order:2}  quill-editor .ql-editor.ql-blank:before{font-style:normal!important}  quill-editor .ql-editor{min-height:120px}.recipient-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.recipient-header.has-contact[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.recipient[_ngcontent-%COMP%]{height:30px;line-height:30px}.tag-alt[_ngcontent-%COMP%]{font-size:14px!important;cursor:pointer}.tag-alt[_ngcontent-%COMP%]:hover{opacity:.8}.header-action[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.default-action-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:0}.default-action-btn[_ngcontent-%COMP%]:focus, .default-action-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:0;outline:none;box-shadow:none}.default-action-btn[_ngcontent-%COMP%]:disabled{opacity:.9}.discard-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #7c7c7c;color:#c26555}.discard-btn[_ngcontent-%COMP%]:focus, .discard-btn[_ngcontent-%COMP%]:hover{opacity:.8}.btn[_ngcontent-%COMP%]{font-size:15px!important}.form-wrapper[_ngcontent-%COMP%]{box-shadow:0 0 3px 0 #d0d0d0;border-radius:5px}.subject-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.subject-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:38px;line-height:38px}.email-wrap[_ngcontent-%COMP%]{padding-left:32px}.recipient-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#88898a}.supporter-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:1px solid #c26555}.supporter-btn[_ngcontent-%COMP%]:focus, .supporter-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:1px solid #d9d9d9;outline:none;box-shadow:none}.supporter-btn.active[_ngcontent-%COMP%]{background:#c26555;color:#fff}.sticky-form[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff}.btn[_ngcontent-%COMP%]{overflow:hidden}"]}),e})();function bt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ul",33),u["\u0275\u0275elementStart"](1,"li",34),u["\u0275\u0275elementStart"](2,"div",35),u["\u0275\u0275elementStart"](3,"span",36),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"ngb-progressbar",37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"button",38),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit,i=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](2).removeProgressFile(i,n)}),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](e.data.name),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("value",e.progress)("showValue",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("disabled",100===e.progress&&n.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.loading?"Cancel":"Delete"," ")}}function vt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,bt,8,5,"ul",32),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.getFile(e))}}function xt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",30),u["\u0275\u0275template"](1,vt,2,1,"ng-container",31),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.documents)}}function yt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"span",39),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275text"](1),u["\u0275\u0275elementStart"](2,"i",40),u["\u0275\u0275listener"]("click",function(n){u["\u0275\u0275restoreView"](e);const i=t.index,s=u["\u0275\u0275nextContext"]();return n.stopPropagation(),s.removeContact(i)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," ")}}function Ct(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"span",39),u["\u0275\u0275listener"]("click",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().recipientSelect(),t.stopPropagation()}),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" + ",e.contacts.length-5," other(s) ")}}function St(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span"),u["\u0275\u0275element"](1,"i",47),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().result;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.city," ")}}function kt(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",48),u["\u0275\u0275text"](2," Email address not available "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function wt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"p"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().result;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.headline)}}function Ot(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",41),u["\u0275\u0275elementStart"](1,"span",42),u["\u0275\u0275element"](2,"img",43),u["\u0275\u0275pipe"](3,"avatar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",44),u["\u0275\u0275element"](5,"ngb-highlight",45),u["\u0275\u0275elementStart"](6,"span",46),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,St,3,1,"span",29),u["\u0275\u0275template"](9,kt,3,0,"ng-container",29),u["\u0275\u0275template"](10,wt,2,1,"p",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.result,n=t.term,i=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](3,8,e.profilePhoto),u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("result",e.firstName+" "+e.surname)("term",n),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"]("",e.designation||e.department||"Designation",", ",e.companyName,""),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.city),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",i.isEnterprise&&!e.contactEmailAddress),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.headline)}}function Et(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",49),u["\u0275\u0275elementStart"](1,"input",50),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().subject=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngModel",e.subject)("placeholder",0===e.actionType?"Subject":"Task Title")}}function Mt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",51),u["\u0275\u0275elementStart"](1,"div",52),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275reference"](4).toggle()}),u["\u0275\u0275element"](2,"i",53),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"input",54,55),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().endDate=t})("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275reference"](4).toggle()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngModel",e.endDate)}}function Pt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",56),u["\u0275\u0275elementStart"](1,"span",57),u["\u0275\u0275text"](2,"Sign Off required?"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"button",58),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().signOffSwitch(!0)}),u["\u0275\u0275text"](4,"Yes "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"button",58),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().signOffSwitch(!1)}),u["\u0275\u0275text"](6,"No "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("active",e.supporterRequired),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("active",!1===e.supporterRequired)}}function jt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"span",39),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275text"](1),u["\u0275\u0275elementStart"](2,"i",40),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.index;return u["\u0275\u0275nextContext"](2).removeSupport(n)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," ")}}function Tt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span"),u["\u0275\u0275element"](1,"i",47),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().result;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.city," ")}}function Ft(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"span",48),u["\u0275\u0275text"](2," Email address not available "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}function At(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"p"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().result;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.headline)}}function Vt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",41),u["\u0275\u0275elementStart"](1,"span",42),u["\u0275\u0275element"](2,"img",43),u["\u0275\u0275pipe"](3,"avatar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",44),u["\u0275\u0275element"](5,"ngb-highlight",45),u["\u0275\u0275elementStart"](6,"span",46),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,Tt,3,1,"span",29),u["\u0275\u0275template"](9,Ft,3,0,"ng-container",29),u["\u0275\u0275template"](10,At,2,1,"p",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.result,n=t.term,i=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](3,8,e.profilePhoto),u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("result",e.firstName+" "+e.surname)("term",n),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"]("",e.designation||e.department||"Designation",", ",e.companyName,""),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.city),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",i.isEnterprise&&!e.contactEmailAddress),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.headline)}}function _t(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",17),u["\u0275\u0275elementStart"](1,"button",18),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().selectSupporters()}),u["\u0275\u0275text"](2," Supporters "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",59),u["\u0275\u0275template"](4,jt,3,2,"span",20),u["\u0275\u0275elementStart"](5,"div",22),u["\u0275\u0275template"](6,Vt,11,10,"ng-template",null,60,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementStart"](8,"input",24),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().supporter=t})("ngModelChange",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onSupporterSelect()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](7),t=u["\u0275\u0275nextContext"]();u["\u0275\u0275classProp"]("has-contact",t.supporters.length),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",t.supporters),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("placeholder","Search for contacts")("ngModel",t.supporter)("ngbTypeahead",t.contactSearch)("resultTemplate",e)("inputFormatter",t.contactFormatter)}}function Nt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-image-layout",82),u["\u0275\u0275listener"]("handleRemoveImage",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).removeFile(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("images",e.getGalleryFiles(e.documents))("files",e.getNoneGalleryFiles(e.documents))("hideImageView",!0)("editable",!0)}}function Bt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Nt,1,4,"app-image-layout",61),u["\u0275\u0275elementStart"](2,"div",62),u["\u0275\u0275elementStart"](3,"quill-editor",63),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().body=t}),u["\u0275\u0275elementStart"](4,"div",64),u["\u0275\u0275elementStart"](5,"span",65),u["\u0275\u0275element"](6,"button",66),u["\u0275\u0275element"](7,"button",67),u["\u0275\u0275element"](8,"button",68),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"span",65),u["\u0275\u0275element"](10,"button",69),u["\u0275\u0275element"](11,"button",70),u["\u0275\u0275elementStart"](12,"select",71),u["\u0275\u0275element"](13,"option",72),u["\u0275\u0275element"](14,"option",73),u["\u0275\u0275element"](15,"option",74),u["\u0275\u0275element"](16,"option",75),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"span",65),u["\u0275\u0275element"](18,"button",76),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",3),u["\u0275\u0275elementStart"](20,"button",77),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().submit()}),u["\u0275\u0275element"](21,"i",5),u["\u0275\u0275text"](22," Send "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"button",78),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onClose()}),u["\u0275\u0275element"](24,"i",79),u["\u0275\u0275text"](25," Discard "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"button",80),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"]();return t.toggleBar=!t.toggleBar}),u["\u0275\u0275element"](27,"i",81),u["\u0275\u0275text"](28," Editor "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](),t=u["\u0275\u0275reference"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.documents&&e.documents.length>0&&!e.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("toggle-bar",e.toggleBar),u["\u0275\u0275property"]("ngModel",e.body)("placeholder",0===e.actionType?"":"Type the instructions here"),u["\u0275\u0275advance"](17),u["\u0275\u0275property"]("disabled",t.invalid||e.loading||!e.contacts.length||1===e.actionType&&e.supporterRequired&&!e.supporters.length)}}function Rt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",89),u["\u0275\u0275elementStart"](1,"div",90),u["\u0275\u0275elementStart"](2,"div",91),u["\u0275\u0275elementStart"](3,"div",92),u["\u0275\u0275element"](4,"img",93),u["\u0275\u0275pipe"](5,"avatar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",94),u["\u0275\u0275elementStart"](7,"h2"),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"span",95),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](5,5,null==e.contacts[0]?null:e.contacts[0].profilePhoto),u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",null==e.contacts[0]?null:e.contacts[0].firstName," ",null==e.contacts[0]?null:e.contacts[0].surname,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"]("@",null==e.contacts[0]?null:e.contacts[0].firstName," ",null==e.contacts[0]?null:e.contacts[0].surname,"")}}const $t=function(e,t){return{"border-bottom pb-2 mb-2":e,"pb-1":t}},Lt=function(){return[]};function Ut(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",98),u["\u0275\u0275elementStart"](1,"app-notification-view",99),u["\u0275\u0275listener"]("onEdit",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).editDiscussion=t})("onDelete",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).onDeleteDiscussion(t)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction2"](6,$t,1!==n.discussion.discussionCategoryID,1===n.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("activeDiscussion",e)("hideRecipient",!0)("parentDiscussion",n.discussion)("members",u["\u0275\u0275pureFunction0"](9,Lt))("contactID",n.contactID)}}function qt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",96),u["\u0275\u0275template"](1,Ut,2,10,"div",97),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.discussion.childDiscussions)}}function zt(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",102),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.fullName," is typing ")}}function Ht(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",100),u["\u0275\u0275template"](1,zt,2,1,"span",101),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.typingIndicator)}}function Gt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-reply-notification-discussion",103),u["\u0275\u0275listener"]("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onDiscussionAdded(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("discussion",e.discussion)("contacts",e.members)}}function Wt(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-edit",104),u["\u0275\u0275listener"]("discussionUpdated",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).discussionUpdated(t)})("discarded",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).editDiscussion=null}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("editDiscussion",e.editDiscussion)("members",e.members)}}const Jt=function(){return[124,123]};function Qt(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"perfect-scrollbar",83),u["\u0275\u0275template"](2,Rt,11,7,"div",84),u["\u0275\u0275template"](3,qt,2,1,"div",85),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](4,Ht,2,1,"div",86),u["\u0275\u0275template"](5,Gt,1,2,"app-reply-notification-discussion",87),u["\u0275\u0275template"](6,Wt,1,2,"app-notification-edit",88),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("config",e.config),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contacts[0]&&1===(null==e.discussion?null:e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==e.discussion||null==e.discussion.childDiscussions?null:e.discussion.childDiscussions.length)>0&&!u["\u0275\u0275pureFunction0"](6,Jt).includes(null==e.discussion?null:e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.typingIndicator.length>0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.editDiscussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.editDiscussion)}}const Yt=function(){return[1,2]};let Xt=(()=>{class e{constructor(e,t,n,i,s,o,r,c,d,l){this.modal=e,this.discussionService=t,this.documentsService=n,this.notificationService=i,this.signalRService=s,this.toastrService=o,this.taskService=r,this.contactService=c,this.distributionService=d,this.userService=l,this.closed=new u.EventEmitter,this.discussionAdded=new u.EventEmitter,this.discussionDeleted=new u.EventEmitter,this.discussionUpdate=new u.EventEmitter,this.showDM=new u.EventEmitter,this.discussions=[],this.config={},this.typingIndicator=[],this.contacts=[],this.contact=new O.a,this.supporter=new O.a,this.body="",this.subject="",this.activeFilter="team",this.documents=[],this.systemFiles=[],this.fakeId=0,this.toggleBar=!1,this.actionType=0,this.supporterRequired=null,this.supporters=[],this.members=[],this.unsubscribe=[],this.destroy$=new a.a,this.contactFormatter=e=>e.firstName?e.firstName+" "+e.surname+" - "+(e.designation||""):"",this.contactSearch=e=>e.pipe(Object(T.a)(300),Object(F.a)(),Object(A.a)(e=>e.length>=1),Object(V.a)(e=>{let t=[];return 4092===this.companyID?t=JSON.parse(localStorage.getItem("myDepartment"))||[]:0!==this.companyID&&(t=JSON.parse(localStorage.getItem("myTeam"))||[]),t=e.length>0?t.filter(t=>`${t.firstName||""} ${t.surname||""} ${t.designation||""} ${t.companyName||""}`.toLocaleLowerCase().includes(e.toLocaleLowerCase())):[],t.length?Object(E.a)(t):(this.isEnterprise?this.contactService.getCompanyContactEnterprise(0,this.companyID,0,0,e):this.contactService.getContactList(e,0,this.companyID)).pipe(Object(_.a)(()=>Object(E.a)([])))})),this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID,this.isEnterprise=4092===this.user.companyID}ngOnInit(){}recipientSelect(){const e=this.modal.open(M.a,{size:"lg",backdrop:"static"});e.componentInstance.showFilters=!0,e.componentInstance.activeFilter=this.activeFilter,e.componentInstance.selectedContacts=Object(c.l)(this.contacts),e.result.then(e=>{e.forEach(e=>{this.contacts.some(t=>e.contactID===t.contactID)||this.contacts.push(e)}),this.checkExistingDM()})}checkExistingDM(){if(1===this.contacts.length&&0===this.actionType){const e=this.discussions.find(e=>e.targetContactID===this.contacts[0].contactID&&1===e.discussionCategoryID);if(e)return this.discussion=e,this.members=[this.contacts[0]],this.channel="typing"+this.discussion.discussionID,this.signalRService.joinChannel(this.channel),this.initSignalHub(),void this.getDmDiscussions()}else this.discussion=null,this.members=[],this.editDiscussion=null,this.signalRService.leaveChannel(this.channel),this.typingIndicator=[]}removeContact(e){this.contacts.splice(e,1),this.checkExistingDM()}selectSupporters(){const e=this.modal.open(M.a,{size:"lg",backdrop:"static"});e.componentInstance.showFilters=!0,e.componentInstance.activeFilter=this.activeFilter,e.componentInstance.selectedContacts=Object(c.l)(this.supporters),e.result.then(e=>{e.forEach(e=>{this.supporters.some(t=>e.contactID===t.contactID)||this.supporters.push(e)})})}removeSupport(e){this.supporters.splice(e,1)}submit(){this.createMessage()}onTypeSwitch(e){this.actionType=e,2===this.actionType&&(this.body='<p><span style=\\"color: rgb(34, 34, 34);\\">Dear {firstname}</span></p><p><br></p><p><span style=\\"color: rgb(34, 34, 34);\\">It gives us great pleasure to announce the launch of the Qualifications Repository Process, an initiative aimed at determining the current qualifications that the organisation has and to spot any qualification gaps.</span></p><p><br></p><p><span style=\\"color: rgb(34, 34, 34);\\">This information is essential for the following purpose:</span></p><p><br></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 It determines whether the organisation can meet its goals.</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Without this information, the organisation does not know where to improve.</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Learning and development will be better targeted.</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Draft personal development plans for individual employees</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Recruiting needs are better - defined and more likely to result in the most appropriate candidate.</span></p><p><br></p><p><span style=\\"color: rgb(34, 34, 34);\\">Whats in it for me (WIIFM)?</span></p><p><br></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Without this information, you do not know where to improve.</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 With this information your training and development will be better planned and more focused.</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Personal development plans will be specific for individual employee development needs</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Recruiting needs are better - defined and more likely to result in the most appropriate candidate.</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Placement decisions are easier with knowledge of current competence levels.</span></p><p><span style=\\"color: rgb(34, 34, 34);\\">\u2022 Career pathing and succession planning is assisted with accurate information on individuals.</span></p><p><br></p><p><span style=\\"color: rgb(34, 34, 34);\\">By clicking on the link you agree to the terms and conditions attached.</span></p><p><br></p><p><strong style=\\"color: rgb(34, 34, 34);\\">Ready to get started?</strong></p><p><br></p><p><a href="#" target=\\"_blank\\" style=\\"color: rgb(17, 85, 204);\\"><u>Click here to begin the process!</u></a></p>')}createMessage(e=0){let t=0;const n=this.contacts.some(e=>e.contactID===this.contactID)||this.supporters.some(e=>e.contactID===this.contactID)?1:0;let i=this.subject,s=[1,2].includes(this.actionType)?L.b.taskAlternative:L.b.notificationAlternative;0===this.actionType&&1===this.contacts.length&&(t=this.contacts[0].contactID,s=1,i="Direct Message"),this.loading=!0;const o={discussionTopic:i,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:this.body,discussionCategoryID:s,parentDiscussionID:e,referenceID:t,dateCreated:U().utc().format(z.c),replyDiscussionID:0,discussionValue:n},a=Object.assign({},o);a.firstName=this.user.firstName,a.surname=this.user.surname,a.dateCreated=U().utc().format(z.c),a.profilePhoto=this.user.profilePhoto,a.documents=[],a.replyDiscussionID=a.replyDisussionID,this.discussionService.insertDiscussion(o).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{a.discussionID=e.discussionID,this.saveDocuments(e.discussionID,this.documents.filter(e=>!e.documentID)).pipe(Object(V.a)(e=>{a.documents=e.filter(e=>e);const t=[];return e.forEach(e=>{if(e.hasOwnProperty("documentID")){const n=new K;n.documentID=e.documentID,n.documentLinkCategoryID=22,n.documentLinkReferenceID=a.discussionID,n.documentLinkSubCategoryID=0,t.push(this.documentsService.postDocumentLink(n))}}),this.systemFiles.forEach(e=>{const n=new K;n.documentID=e.documentID,n.documentLinkCategoryID=22,n.documentLinkReferenceID=a.discussionID,n.documentLinkSubCategoryID=e.reference2ID,t.push(this.documentsService.postDocumentLink(n))}),t.length?Object(r.a)(t):Object(E.a)([])})).subscribe(t=>{if(this.documents=[],this.contacts.forEach(e=>{const t=new G;t.contactID=e.contactID,t.discussionID=a.discussionID,t.hasAccepted=!0,t.dateAccepted=U().utc().format(z.c),t.isAdmin=this.supporters.some(t=>t.contactID===e.contactID),t.submittedByContactID=this.contactID,t.discussionMemberStatusID=1===this.actionType?1:0,t.discussionMemberTypeID=1===this.actionType?W.taskOwner:W.recipient,this.discussionService.addMember(t).subscribe()}),1===a.discussionCategoryID&&!this.contacts.filter(e=>e.contactID===this.contactID).length){const e=new G;e.contactID=this.contactID,e.discussionID=a.discussionID,e.hasAccepted=!0,e.dateAccepted=U().utc().format(z.c),e.isAdmin=!0,e.submittedByContactID=this.contactID,e.discussionMemberStatusID=1===this.actionType?1:0,e.discussionMemberTypeID=1===this.actionType?W.taskOwner:W.recipient,this.discussionService.addMember(e).subscribe()}this.supporters.forEach(e=>{const t=new G;t.contactID=e.contactID,t.discussionID=a.discussionID,t.hasAccepted=!0,t.dateAccepted=U().utc().format(z.c),t.isAdmin=!0,t.submittedByContactID=this.contactID,t.discussionMemberTypeID=W.taskSupporter,t.discussionMemberStatusID=0,this.discussionService.addMember(t).subscribe()}),a.documents.length||(a.documents=[]),this.systemFiles.forEach(e=>{a.documents.push(e)}),a.members=this.contacts;let n=`${this.user.firstName} ${this.user.surname} sent you  a message`;1===this.actionType&&(n=`${this.user.firstName} ${this.user.surname} assigned you a task`),2===this.actionType&&(n=`${this.user.firstName} ${this.user.surname} has assigned you a Qualification Repository`);const i={date:U().format(z.c),body:n,topic:n,senderFullName:e.firstName+" "+e.surname,senderPhoto:e.profilePhoto,channel:"dashboard",reference:a.discussionID,notificationType:H.a.discussionNotification,senderId:this.companyID,receivers:this.contacts.filter(e=>e.contactID!==this.contactID).map(e=>e.contactID)};if(a.latestMessagePosted=a.dateCreated,0===this.actionType){const e=this.contacts[0];1===a.discussionCategoryID&&(a.targetContactID=e.contactID,a.firstName=e.firstName,a.surname=e.surname,a.profilePhoto=e.profilePhoto,a.discussionTopic=`${e.firstName} ${e.surname}`,a.latestMessage=a.discussionBody),this.toastrService.success("Message has been created!"),this.discussionAdded.emit(a),this.signalRService.transferMessage("dashboard",i),this.loading=!1,this.onClose()}else this.createTask(a,i)},()=>{this.loading=!1})})}onFileSelect(e){const t=e.target.files;for(let n=0;n<t.length;n++){const e=t.item(n);if(e.type&&/^image\//.test(e.type)){const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{e.imageUrl=t.result}}else if(e.type&&/^video\//.test(e.type)){const t=15,n=new FileReader;n.readAsDataURL(e),n.onload=n=>{e.videoUrl=n.target.result;const i=document.createElement("video");i.setAttribute("src",n.target.result),i.addEventListener("loadedmetadata",function(){this.currentTime=i.duration<t?i.duration/2:t},!1),i.addEventListener("loadeddata",()=>{setTimeout(()=>{const t=document.createElement("canvas");t.getContext("2d").drawImage(i,0,0,i.videoWidth,i.videoHeight),e.imageUrl=t.toDataURL()},300)},!1)}}this.addFile(e)}}onPaste(e){if(e.clipboardData&&e.clipboardData.files&&e.clipboardData.files.length&&/^image\//.test(e.clipboardData.files[0].type)){const t=new FileReader,n=e.clipboardData.files[0];t.readAsDataURL(n),t.onload=()=>{n.imageUrl=t.result,this.addFile(n)}}}addFile(e){const t=new j.a;t.data=e,t.progress=0;const n=new P.a;t.fakeId=this.fakeId++,n.file=t,this.documents.push(n)}removeFile(e){const t=this.systemFiles.findIndex(t=>t.documentID===(null==e?void 0:e.documentID));-1!==t&&this.systemFiles.splice(t,1);const n=this.documents.findIndex(t=>t.file?t.file.fakeId===e.fakeId:t.documentID===e.id);this.documents.splice(n,1)}saveDocuments(e,t,n=22){return t&&0!==t.length?Object(r.a)(t.map((t,i)=>{var s,o,r,c,l,u;let m=!1;((null===(r=null===(o=null===(s=t.file)||void 0===s?void 0:s.data)||void 0===o?void 0:o.type)||void 0===r?void 0:r.includes("video"))||(null===(u=null===(l=null===(c=t.file)||void 0===c?void 0:c.data)||void 0===l?void 0:l.type)||void 0===u?void 0:u.includes("application/octet-stream"))&&1===this.actionType)&&(m=!0);const p=new FormData;return p.append("file",t.file.data),this.unsubscribe.push({id:t.file.fakeId,sub:new a.a}),this.documentsService.insertDocument(p,n,e,this.contactID,0,e,m).pipe(Object(d.a)(this.unsubscribe[i].sub),Object(N.a)(e=>{switch(e.type){case B.e.UploadProgress:t.file.progress=Math.round(100*e.loaded/e.total);break;case B.e.Response:return e.body[0]}}))})):Object(E.a)([])}getGalleryFiles(e){return e?e.filter(e=>R.b.isImage(e)).map(e=>this.getFile(e)):[]}getNoneGalleryFiles(e){return e?e.filter(e=>!R.b.isImage(e)).map(e=>this.getFile(e)):[]}removeProgressFile(e,t){this.removeFile(t);const n=this.unsubscribe.find(t=>t.id===e.file.fakeId);n&&n.sub.next()}getFile(e){return e.file?e.file:Object.assign({id:e.documentID,documentPath:e.documentPath,data:Object.assign({name:e.documentTitle},"video/mp4"===e.documentType?{videoUrl:$.a.apiBlobUrl+"/"+e.documentPath}:{imageUrl:`${$.a.apiBlobUrl}/1024px/${e.documentPath}`}),type:e.documentType,progress:100,fakeId:this.fakeId++},e)}onClose(){this.closed.next(!0)}signOffSwitch(e){this.supporters=[],this.supporterRequired=e}createTask(e,t){var n;let i=null;(null===(n=this.endDate)||void 0===n?void 0:n.year)&&(i=Object(c.a)(new Date(this.endDate.year,this.endDate.month-1,this.endDate.day)));const s=new J.a;s.referenceID=e.discussionID,s.taskTitle=this.subject,s.taskDescription=this.body,s.taskCategoryID=2===this.actionType?37:3,s.submittedBy=this.contactID,s.formID=0,s.endDate=i,s.companyID=this.companyID,this.taskService.addTask(s).pipe(Object(V.a)(e=>{s.taskID=e.inOut_TaskID;const t=[];return this.contacts.forEach(e=>{const n=new Q.a;n.taskID=s.taskID,n.contactID=e.contactID,n.deadline=s.endDate,n.endDate=s.endDate,n.companyID=e.companyID,n.taskOwnerCategoryID=2===this.actionType?37:3,t.push(this.taskService.addTaskOwner(n))}),this.supporters.forEach(e=>{const n=new Y.a;n.contactID=e.contactID,n.taskID=s.taskID,t.push(this.taskService.addTaskSupporter(n))}),Object(r.a)(t)}),Object(V.a)(t=>{const n=[];return t.forEach(t=>{t.hasOwnProperty("taskOwnerID")&&n.push(this.discussionService.insertDiscussion({discussionTopic:s.taskTitle,discussionCategoryID:6,referenceID:t.taskOwnerID,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:s.taskDescription,parentDiscussionID:e.discussionID}))}),n.length?Object(r.a)(n):Object(E.a)([])})).subscribe(()=>{this.toastrService.success("Task has been created!"),this.discussionAdded.emit(e),this.onClose(),this.signalRService.transferMessage("dashboard",t),2===this.actionType&&this.contacts.forEach(e=>{const t=Z.a.fullDomain()+"/home?discussionID="+s.referenceID+"&contactID="+e.contactID,n={distributionTitle:"Onboarding Task",distributionCategoryID:20,referenceID:s.taskID,distributionDate:null,userID:this.user.contactID,emailBody:ee.a.onBoarding(e,t,this.user),subjectLine:"Onboarding Task",senderEmail:"info@incubatorportal.com",senderName:this.user.firstName,replyTo:null,contacts:[e.contactID]};this.distributionService.create(n).subscribe()}),this.loading=!1})}systemFileSelect(){const e=this.modal.open(X.a,{backdrop:"static",size:"lg"});e.componentInstance.documentLink=!0,e.result.then(e=>{e.type=e.documentType,e.data=e,e.progress=0,e.fakeId=this.fakeId++,e.file=e,this.documents.push(e),this.systemFiles.push(e)})}onContactSelect(){var e;(null===(e=this.contact)||void 0===e?void 0:e.contactID)&&(this.contacts.some(e=>e.contactID===this.contact.contactID)||this.contacts.push(this.contact),this.contact=new O.a,this.checkExistingDM())}onSupporterSelect(){var e;(null===(e=this.supporter)||void 0===e?void 0:e.contactID)&&(this.supporters.some(e=>e.contactID===this.supporter.contactID)||this.supporters.push(this.supporter),this.supporter=new O.a)}getDmDiscussions(){this.loading=!0,this.discussionService.fetchDiscussions(0,0,0,this.discussion.discussionID,0,0).subscribe(e=>{let t=e.reverse();t=t.map((e,n)=>(e.isSameTime=n>0&&Object(c.b)(t[n-1],e),e.isSameDate=n>0&&Object(c.f)(t[n-1],e),e)),this.discussion.childDiscussions=t,this.loading=!1})}onDeleteDiscussion(e){const t=this.modal.open(te.a);t.componentInstance.objectType="Message",t.result.then(t=>{"Yes"===t&&this.discussionService.deleteDiscussion(e.discussionID).subscribe(()=>{const t=this.discussion.childDiscussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&this.discussion.childDiscussions.splice(t,1),this.discussionDeleted.emit(e);const n={date:U().format(z.c),channel:"dashboard",reference:e.discussionID,notificationType:H.a.discussionNotificationDelete,senderId:this.contactID,receivers:this.members.filter(e=>e.contactID!==this.contactID).map(e=>e.contactID)};this.signalRService.transferMessage("dashboard",n)})})}onDiscussionAdded(e){this.discussionAdded.emit(e)}discussionUpdated(e){this.editDiscussion=null,this.discussion.discussionID===e.discussionID&&(e.childDiscussions=this.discussion.childDiscussions||[],this.discussion=Object(c.l)(e));const t=this.discussion.childDiscussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&(e.childDiscussions=this.discussion.childDiscussions[t].childDiscussions||[],this.discussion.childDiscussions[t]=Object(c.l)(e)),this.discussionUpdate.emit(e)}initSignalHub(){this.signalRService.transferMessageEvent.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{if(this.channel===e.channel){const t=e.message;if(t.type===ne.a.typingIndicator){const e=t.data,n=this.typingIndicator.findIndex(t=>t.id===e.id);-1!==n?e.typing||this.typingIndicator.splice(n,1):e.typing&&this.typingIndicator.push(e)}}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.unsubscribe.map(e=>{e&&e.sub&&!e.sub.closed&&(e.sub.next(),e.sub.complete())}),this.signalRService.leaveChannel(this.channel)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](v.p),u["\u0275\u0275directiveInject"](I.a),u["\u0275\u0275directiveInject"](ie.a),u["\u0275\u0275directiveInject"](m.a),u["\u0275\u0275directiveInject"](x.a),u["\u0275\u0275directiveInject"](D.b),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](se.a),u["\u0275\u0275directiveInject"](oe.a),u["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-add-notification"]],inputs:{discussions:"discussions"},outputs:{closed:"closed",discussionAdded:"discussionAdded",discussionDeleted:"discussionDeleted",discussionUpdate:"discussionUpdate",showDM:"showDM"},decls:48,vars:26,consts:[[1,"d-flex","flex-column","task-right-panel"],[1,"d-flex","flex-column","flex-grow-1","h-100",3,"avnonLoader"],["f","ngForm"],[1,"d-flex","w-100","border-bottom","pl-3","pr-3","header-action","align-items-center","twitter-fill"],["type","button",1,"btn","btn-sm","default-action-btn",3,"disabled","click"],[1,"fas","fa-paper-plane"],["ngbDropdown","",1,"d-inline-block","ml-2"],["type","button","id","fileID","ngbDropdownToggle","",1,"btn","default-action-btn","btn-sm"],[1,"fas","fa-paperclip"],[1,"fas","fa-chevron-down"],["ngbDropdownMenu","","aria-labelledby","fileID"],["type","button","ngbDropdownItem","",3,"click"],["type","button","id","typeD","ngbDropdownToggle","",1,"btn","default-action-btn","btn-sm"],["ngbDropdownMenu","","aria-labelledby","typeD"],["type","file","multiple","","onclick","this.value = null",1,"d-none",3,"change"],["fileInput",""],["class","progress-holder",4,"ngIf"],[1,"d-flex","w-100","border-bottom","pl-3","pr-3","recipient-header"],["type","button",1,"btn","btn-sm","add-contact","mt-1","mb-1","mr-2",3,"click"],[1,"d-flex","flex-wrap","mr-2","pt-1","pb-1","flex-grow-1","position-relative"],["class","tag tag-alt mr-2 mb-1 mt-1",3,"click",4,"ngFor","ngForOf"],["class","tag tag-alt mr-2 mb-1 mt-1",3,"click",4,"ngIf"],[1,"type-ahead-container","flex-grow-1"],["contactResult",""],["type","text","name","panelMember","popupClass","contactSearch",1,"form-control","form-control-material",3,"placeholder","ngModel","ngbTypeahead","resultTemplate","inputFormatter","ngModelChange"],["class","form-group pt-1 mb-1",4,"ngIf"],["class","form-group mb-1 position-relative",4,"ngIf"],["class","form-group mb-0 pl-3 pr-3 d-flex align-items-center pb-2 border-bottom",4,"ngIf"],["class","d-flex w-100 border-bottom pl-3 pr-3 recipient-header",3,"has-contact",4,"ngIf"],[4,"ngIf"],[1,"progress-holder"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between"],[1,"w-100"],[1,"file-name"],["type","success","textType","white",3,"value","showValue"],["type","button",1,"btn","btn-link",3,"disabled","click"],[1,"tag","tag-alt","mr-2","mb-1","mt-1",3,"click"],[1,"fas","fa-times",3,"click"],[1,"d-flex"],[1,"avatar","avatar-32"],["alt","",1,"",3,"src"],[1,"d-flex","flex-column"],[3,"result","term"],[1,"meta"],[1,"fas","fa-map-marker-alt"],[1,"text-danger"],[1,"form-group","pt-1","mb-1"],["type","text","name","subject","required","",1,"form-control","subject-input",3,"ngModel","placeholder","ngModelChange"],[1,"form-group","mb-1","position-relative"],[1,"icon-append","d-flex","align-items-center","justify-content-center","cursor-pointer",3,"click"],[1,"far","fa-clock"],["placeholder","Deadline (optional)","name","endDate","ngbDatepicker","","autocomplete","off","container","body",1,"form-control","date-input",3,"ngModel","ngModelChange","click"],["picker","ngbDatepicker"],[1,"form-group","mb-0","pl-3","pr-3","d-flex","align-items-center","pb-2","border-bottom"],[1,"supporter-label"],["type","button",1,"btn","btn-sm","supporter-btn","ml-2",3,"click"],[1,"d-flex","flex-wrap","mr-2","pt-1","pb-1","flex-grow-1"],["supporterResult",""],["class","w-100 app-image-layout",3,"images","files","hideImageView","editable","handleRemoveImage",4,"ngIf"],["id","wrapperItem",1,"form-group","pl-1","pr-1","flex-grow-1","mb-0","wrapperItem"],["format","html","required","","name","emailBody","bounds","#wrapperItem","scrollingContainer","#wrapperItem",1,"d-flex","flex-column","email-body","flex-grow-1","h-100",3,"ngModel","placeholder","ngModelChange"],["quill-editor-toolbar",""],[1,"ql-formats"],[1,"ql-bold"],[1,"ql-italic"],[1,"ql-underline"],["value","ordered",1,"ql-list"],["value","bullet",1,"ql-list"],[1,"ql-align"],["selected",""],["value","center"],["value","right"],["value","justify"],[1,"ql-link"],["type","button",1,"btn","btn-sm","discard-btn",3,"disabled","click"],["type","button",1,"btn","btn-sm","discard-btn","ml-2",3,"click"],[1,"fas","fa-trash-alt"],["ngbTooltip","Formatting options","type","button",1,"btn","btn-sm","default-action-btn","ml-2",3,"click"],[1,"fas","fa-tools"],[1,"w-100","app-image-layout",3,"images","files","hideImageView","editable","handleRemoveImage"],[2,"max-width","100%","max-height","100%",3,"config"],["class","page-header new-page-header pt-3",4,"ngIf"],["style","max-width: 100%; max-height: 100%;","class","d-flex flex-column inner-chat-scroll flex-grow-1",4,"ngIf"],["class","typing-indicator px-2",4,"ngIf"],["class","sticky-form mt-auto",3,"discussion","contacts","discussionAdded",4,"ngIf"],["class","sticky-form mt-auto",3,"editDiscussion","members","discussionUpdated","discarded",4,"ngIf"],[1,"page-header","new-page-header","pt-3"],[1,"profile-photos","d-flex","pl-3","pr-3"],[1,"photo-group","d-flex"],[1,"user-photo"],["alt","logo",1,"img-fluid","profile-user","cover",3,"src"],[1,"profile-info","d-flex","flex-column","ml-3","mt-auto","mb-auto"],[1,"meta","mb-2"],[1,"d-flex","flex-column","inner-chat-scroll","flex-grow-1",2,"max-width","100%","max-height","100%"],["class","d-flex flex-column pl-3 pr-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","pl-3","pr-3",3,"ngClass"],[1,"w-100",3,"activeDiscussion","hideRecipient","parentDiscussion","members","contactID","onEdit","onDelete"],[1,"typing-indicator","px-2"],["class","typing-item",4,"ngFor","ngForOf"],[1,"typing-item"],[1,"sticky-form","mt-auto",3,"discussion","contacts","discussionAdded"],[1,"sticky-form","mt-auto",3,"editDiscussion","members","discussionUpdated","discarded"]],template:function(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"form",1,2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"button",4),u["\u0275\u0275listener"]("click",function(){return t.submit()}),u["\u0275\u0275element"](5,"i",5),u["\u0275\u0275text"](6," Send "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",6),u["\u0275\u0275elementStart"](8,"button",7),u["\u0275\u0275element"](9,"i",8),u["\u0275\u0275text"](10," Attach "),u["\u0275\u0275element"](11,"i",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",10),u["\u0275\u0275elementStart"](13,"button",11),u["\u0275\u0275listener"]("click",function(){return t.systemFileSelect()}),u["\u0275\u0275text"](14,"From Files"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"button",11),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275reference"](29).click()}),u["\u0275\u0275text"](16,"From Local Device"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",6),u["\u0275\u0275elementStart"](18,"button",12),u["\u0275\u0275text"](19),u["\u0275\u0275element"](20,"i",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",13),u["\u0275\u0275elementStart"](22,"button",11),u["\u0275\u0275listener"]("click",function(){return t.onTypeSwitch(0)}),u["\u0275\u0275text"](23,"Message"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](24,"button",11),u["\u0275\u0275listener"]("click",function(){return t.onTypeSwitch(1)}),u["\u0275\u0275text"](25,"Task"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"button",11),u["\u0275\u0275listener"]("click",function(){return t.onTypeSwitch(2)}),u["\u0275\u0275text"](27,"Onboarding Task"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"input",14,15),u["\u0275\u0275listener"]("change",function(e){return t.onFileSelect(e)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](30,xt,2,1,"div",16),u["\u0275\u0275elementStart"](31,"div",17),u["\u0275\u0275elementStart"](32,"button",18),u["\u0275\u0275listener"]("click",function(){return t.recipientSelect()}),u["\u0275\u0275text"](33," To "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",19),u["\u0275\u0275template"](35,yt,3,2,"span",20),u["\u0275\u0275pipe"](36,"slice"),u["\u0275\u0275template"](37,Ct,2,1,"span",21),u["\u0275\u0275elementStart"](38,"div",22),u["\u0275\u0275template"](39,Ot,11,10,"ng-template",null,23,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275elementStart"](41,"input",24),u["\u0275\u0275listener"]("ngModelChange",function(e){return t.contact=e})("ngModelChange",function(){return t.onContactSelect()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](42,Et,2,2,"div",25),u["\u0275\u0275template"](43,Mt,5,1,"div",26),u["\u0275\u0275template"](44,Pt,7,4,"div",27),u["\u0275\u0275template"](45,_t,9,8,"div",28),u["\u0275\u0275template"](46,Bt,29,6,"ng-container",29),u["\u0275\u0275template"](47,Qt,7,7,"ng-container",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](2),n=u["\u0275\u0275reference"](40);u["\u0275\u0275classProp"]("hide-scrolls",0===t.actionType&&1===(null==t.contacts?null:t.contacts.length)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("avnonLoader",t.loading),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("disabled",e.invalid||t.loading||!t.contacts.length||1===t.actionType&&t.supporterRequired&&!t.supporters.length),u["\u0275\u0275advance"](15),u["\u0275\u0275textInterpolate1"](" ",0===t.actionType?"Message":1===t.actionType?"Task":"Onboading Task"," "),u["\u0275\u0275advance"](11),u["\u0275\u0275property"]("ngIf",t.loading&&t.documents.length),u["\u0275\u0275advance"](1),u["\u0275\u0275classProp"]("has-contact",t.contacts.length),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind3"](36,21,t.contacts,0,5)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.contacts.length>5),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("placeholder","Search for contacts")("ngModel",t.contact)("ngbTypeahead",t.contactSearch)("resultTemplate",n)("inputFormatter",t.contactFormatter),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.contacts.length>1||0===t.contacts.length||0!==t.actionType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pureFunction0"](25,Yt).includes(t.actionType)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",1===t.actionType),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.supporterRequired),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.discussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.discussion&&t.contacts.length)}},directives:[ae.E,ae.r,ae.s,y.a,v.i,v.m,v.k,v.j,i.n,i.m,ae.b,v.E,ae.q,ae.t,v.u,v.n,ae.A,v.o,re.a,ae.v,ae.D,v.C,ce.a,de.b,i.l,Ke,ut,It],pipes:[i.v,pe.a],styles:[".add-contact[_ngcontent-%COMP%]{min-width:30px;height:30px;display:flex;align-items:center;justify-content:center;padding:0 4px;min-height:30px;background:rgba(52,87,212,.1);color:#3457d4}.add-contact[_ngcontent-%COMP%]:focus, .add-contact[_ngcontent-%COMP%]:hover{background:rgba(52,87,212,.5)}.date-input[_ngcontent-%COMP%], .subject-input[_ngcontent-%COMP%]{border:0;border-bottom:1px solid #dfdfdf;border-radius:0;line-height:44px;height:44px;padding:0 1rem}.date-input.ng-invalid.ng-touched[_ngcontent-%COMP%], .subject-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{box-shadow:none!important;border-bottom:1px solid #dc3545}.date-input[_ngcontent-%COMP%]:focus, .subject-input[_ngcontent-%COMP%]:focus{border:0;border-bottom:1px solid #d64b2b;box-shadow:none;outline:0}.date-input[_ngcontent-%COMP%]{padding-left:44px}  quill-editor{position:relative}  quill-editor.toggle-bar .ql-toolbar{display:block!important}  quill-editor .ql-container{border:0!important;flex:1;font-size:15px!important}  quill-editor .ql-toolbar{border-left:0!important;border-right:0!important;border-bottom:0!important;border-top:1px solid #dfdfdf;width:100%;z-index:1;background:#fff;display:none;order:2}  quill-editor .ql-editor.ql-blank:before{font-style:normal!important}  quill-editor .ql-editor{min-height:150px}.recipient-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.recipient-header.has-contact[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.recipient-header[_ngcontent-%COMP%]   .tag-alt[_ngcontent-%COMP%]{height:24px;padding:0 .75rem;line-height:24px}.recipient-header[_ngcontent-%COMP%]   .type-ahead-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:0;padding:0;height:30px;line-height:30px;border-radius:0;min-width:200px}.recipient-header[_ngcontent-%COMP%]   .type-ahead-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none;border:0}.recipient[_ngcontent-%COMP%]{height:30px;line-height:30px}.tag-alt[_ngcontent-%COMP%]{font-size:14px!important;cursor:pointer}.tag-alt[_ngcontent-%COMP%]:hover{opacity:.8}.header-action[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.discard-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #7c7c7c;color:#c26555}.discard-btn[_ngcontent-%COMP%]:focus, .discard-btn[_ngcontent-%COMP%]:hover{opacity:.8}.btn[_ngcontent-%COMP%]{font-size:15px!important}.default-action-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:0}.default-action-btn[_ngcontent-%COMP%]:focus, .default-action-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:0;outline:none;box-shadow:none}.default-action-btn[_ngcontent-%COMP%]:disabled{opacity:.9}.supporter-label[_ngcontent-%COMP%]{color:#495057}.supporter-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:1px solid #c26555}.supporter-btn[_ngcontent-%COMP%]:focus, .supporter-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:1px solid #d9d9d9;outline:none;box-shadow:none}.supporter-btn.active[_ngcontent-%COMP%]{background:#c26555;color:#fff}.icon-append[_ngcontent-%COMP%]{position:absolute;left:0;top:0;background:#fff;width:42px;height:42px}.icon-append[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#495057}  ngb-typeahead-window.contactSearch{max-height:400px;overflow:auto;width:100%;max-width:100%;transform:translate(0)!important;top:100%!important}  ngb-typeahead-window.contactSearch .dropdown-item.active{background:#f0f3ff;color:#212529}.btn[_ngcontent-%COMP%]{overflow:hidden;min-height:30px}.sticky-form[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff}.new-page-header[_ngcontent-%COMP%]   .user-photo[_ngcontent-%COMP%]{position:relative!important;top:0;left:0;right:0;bottom:0}.new-page-header[_ngcontent-%COMP%]   .user-photo[_ngcontent-%COMP%], .new-page-header[_ngcontent-%COMP%]   .user-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:70px;height:70px}"]}),e})();var Kt=n("itXk"),Zt=n("Np2A");let en=(()=>{class e{transform(e){return e<60?e+" seconds":e<3600?Math.round(e/60*100)/100+" minutes":e>=3600?Math.round(e/3600*100)/100+" hours":void 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"duration",type:e,pure:!0}),e})();var tn=n("Ousv");function nn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1," Task Owners "),u["\u0275\u0275elementContainerEnd"]())}function sn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.taskOwner.firstName," ",e.taskOwner.surname,"'s status updates ")}}function on(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",18),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function an(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",19),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.contactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.firstName.substr(0,1),"",e.surname.substr(0,1)," ")}}function rn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"Underway"),u["\u0275\u0275elementContainerEnd"]())}function cn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"Pending Sign Off"),u["\u0275\u0275elementContainerEnd"]())}function dn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1,"Completed"),u["\u0275\u0275elementContainerEnd"]())}function ln(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span"),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"duration"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" Total time: ",u["\u0275\u0275pipeBind1"](2,1,e.totalSeconds)," ")}}function un(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",20),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"date"),u["\u0275\u0275pipe"](3,"dateObject"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](2,1,u["\u0275\u0275pipeBind1"](3,4,e.dateSentForSignOff),"dd MMM")," ")}}const mn=function(e,t,n){return{"tag-blue":e,"tag-orange":t,"tag-green":n}};function pn(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",7),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"](2).viewTaskOwner(n)}),u["\u0275\u0275elementStart"](1,"span",8),u["\u0275\u0275template"](2,on,2,3,"img",9),u["\u0275\u0275template"](3,an,3,6,"span",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",11),u["\u0275\u0275elementStart"](5,"div",12),u["\u0275\u0275elementStart"](6,"h3",13),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"span",14),u["\u0275\u0275template"](9,rn,2,0,"ng-container",2),u["\u0275\u0275template"](10,cn,2,0,"ng-container",2),u["\u0275\u0275template"](11,dn,2,0,"ng-container",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",15),u["\u0275\u0275elementStart"](13,"div",16),u["\u0275\u0275template"](14,ln,3,3,"span",2),u["\u0275\u0275template"](15,un,4,6,"span",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.profilePhoto),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("font-weight-normal",!e.unreadMessageCount),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction3"](12,mn,1===e.taskStatusID,2===e.taskStatusID,3===e.taskStatusID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",1===e.taskStatusID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",2===e.taskStatusID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",3===e.taskStatusID),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",e.totalSeconds),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.dateSentForSignOff)}}function hn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,pn,16,16,"div",6),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.taskOwners)}}function fn(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",18),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function gn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",19),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.discussionCreatedByContactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.firstName.substr(0,1),"",e.surname.substr(0,1)," ")}}const Dn=function(e){return{"main-blue-color font-weight-bold":e}};function In(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",22),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"](2).viewDiscussion(n)}),u["\u0275\u0275elementStart"](1,"span",8),u["\u0275\u0275template"](2,fn,2,3,"img",9),u["\u0275\u0275template"](3,gn,3,6,"span",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",23),u["\u0275\u0275elementStart"](5,"div",24),u["\u0275\u0275elementStart"](6,"h3",13),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"div",15),u["\u0275\u0275elementStart"](9,"div",25),u["\u0275\u0275element"](10,"span",26),u["\u0275\u0275pipe"](11,"safeHtml"),u["\u0275\u0275elementStart"](12,"span",27),u["\u0275\u0275text"](13),u["\u0275\u0275pipe"](14,"date"),u["\u0275\u0275pipe"](15,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](16,"div",28),u["\u0275\u0275pipe"](17,"safeHtml"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275classProp"]("unread-fill",e.unreadMessageCount>0),u["\u0275\u0275property"]("avnonLoader",e.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.profilePhoto),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("font-weight-normal",!e.unreadMessageCount),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.firstName," ",e.surname," "),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](11,15,e.discussionTopic),u["\u0275\u0275sanitizeHtml"])("ngClass",u["\u0275\u0275pureFunction1"](24,Dn,e.unreadMessageCount>0)),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("main-blue-color",e.unreadMessageCount>0),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind2"](14,17,u["\u0275\u0275pipeBind1"](15,20,e.dateCreated),"dd MMM")," "),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](17,22,e.discussionBody),u["\u0275\u0275sanitizeHtml"])}}function bn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,In,18,26,"div",21),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.discussions)}}function vn(e,t){1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"p",29),u["\u0275\u0275text"](2,"No updates posted"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]())}let xn=(()=>{class e{constructor(e,t,n,i){this.activeModal=e,this.discussionService=t,this.auditService=n,this.modal=i,this.taskOwners=[],this.discussions=[],this.documents=[]}ngOnInit(){if(this.taskOwner)this.getDiscussions();else{const e=this.documents.find(e=>e.ampLink);e&&this.getAudit(e.documentID)}}getAudit(e){this.loading=!0;const t=[];this.taskOwners.forEach(n=>{t.push(this.auditService.getAuditSummary(2,e,n.contactID))}),Object(Kt.b)(t).subscribe(e=>{e.forEach((e,t)=>{var n;this.taskOwners[t]&&(this.taskOwners[t].totalSeconds=(null===(n=e[0])||void 0===n?void 0:n.totalTime)||0)}),this.loading=!1})}getDiscussions(){this.loading=!0,this.discussionService.fetchDiscussions(0,0,0,this.taskOwner.discussionID,0,0).subscribe(e=>{this.discussions=Object(c.j)(e,"discussionID"),this.loading=!1})}viewTaskOwner(t){if(37===t.taskCategoryID)return void this.activeModal.close(t);const n=this.modal.open(e,{size:"lg",backdrop:"static"});n.componentInstance.taskOwner=t,n.result.then(e=>{this.activeModal.close(e)})}viewDiscussion(e){this.loading=!0,this.discussionService.fetchDiscussions(0,0,0,0,e.parentDiscussionID).subscribe(e=>{e[0]&&this.activeModal.close(e[0]),this.loading=!1})}dismiss(){this.activeModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](I.a),u["\u0275\u0275directiveInject"](Zt.a),u["\u0275\u0275directiveInject"](v.p))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-members-list"]],decls:11,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column","pl-0","pr-0","pt-2","pb-2",3,"avnonLoader"],["class","entry d-flex pt-3 pb-3",3,"click",4,"ngFor","ngForOf"],[1,"entry","d-flex","pt-3","pb-3",3,"click"],[1,"media","avatar","avatar-32","avatar-32-rounded","mr-0"],["class","img-fluid img-32 cover","alt","Avatar",3,"src",4,"ngIf"],["class","avatar-generated",3,"background-color",4,"ngIf"],[1,"d-flex","flex-column","ml-2","flex-grow-1"],[1,"d-flex","align-items-center","mb-0"],[1,"p-0","mb-0","author","lh-1"],[1,"tag","tag-filled","ml-auto",3,"ngClass"],[1,"mb-0","d-flex","flex-column"],[1,"d-flex","pr-4","fz-14","mb-035r","align-items-center"],["class","lh-1 meta",4,"ngIf"],["alt","Avatar",1,"img-fluid","img-32","cover",3,"src"],[1,"avatar-generated"],[1,"lh-1","meta"],["class","entry d-flex pt-3 pb-3",3,"unread-fill","avnonLoader","click",4,"ngFor","ngForOf"],[1,"entry","d-flex","pt-3","pb-3",3,"avnonLoader","click"],[1,"d-flex","flex-column","ml-2","flex-grow-1","content-max-w"],[1,"d-flex","align-items-center","mb-035r"],[1,"d-flex","pr-4","fz-14","mb-035r"],[1,"lh-1","subject",3,"innerHTML","ngClass"],[1,"ml-auto","mr-2","lh-1"],[1,"meta","notification-text",3,"innerHTML"],[1,"text-danger"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"h1",1),u["\u0275\u0275template"](2,nn,2,0,"ng-container",2),u["\u0275\u0275template"](3,sn,2,2,"ng-container",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"button",3),u["\u0275\u0275listener"]("click",function(){return t.dismiss()}),u["\u0275\u0275elementStart"](5,"span",4),u["\u0275\u0275text"](6,"\xd7"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",5),u["\u0275\u0275template"](8,hn,2,1,"ng-container",2),u["\u0275\u0275template"](9,bn,2,1,"ng-container",2),u["\u0275\u0275template"](10,vn,3,0,"ng-container",2),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.taskOwners.length),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.taskOwner),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("avnonLoader",t.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.taskOwners.length),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.discussions.length),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.taskOwner&&!t.discussions.length&&!t.loading))},directives:[i.n,y.a,i.m,i.l],pipes:[pe.a,he,en,i.e,me.a,tn.a],styles:[".modal-body[_ngcontent-%COMP%]{max-height:80vh;min-height:60vh;overflow-x:hidden;overflow-y:auto}.notification-text[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;margin:0!important;line-height:1!important;font-weight:400!important}.author[_ngcontent-%COMP%]{font-size:14px!important;line-height:1}.entry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#88898a!important;margin:0!important;line-height:1.1!important;font-weight:400!important}.content-max-w[_ngcontent-%COMP%]{max-width:calc(100% - 40px)}  .subject{overflow:hidden;min-height:15px;white-space:nowrap;margin-right:20px;text-overflow:ellipsis}  .notification-text p{color:#88898a!important;margin:0!important;line-height:1.1!important;font-weight:400!important}.notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%],   .notification-text p b,   .notification-text p strong{font-weight:400!important}.notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#88898a!important;margin:0!important;line-height:1.1!important}.notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:400!important}"]}),e})();var yn=n("WZWj"),Cn=n("p0ro"),Sn=n("SCsZ"),kn=n("5eqV");let wn=(()=>{class e{transform(e,t){return e.filter(e=>e.referenceID===t&&124===e.discussionValue)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"sentimentDiscussion",type:e,pure:!0}),e})();function On(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",21),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.sentiment.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function En(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",22),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.sentiment.contactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.sentiment.firstname.substr(0,1),"",e.sentiment.surname.substr(0,1)," ")}}function Mn(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",23),u["\u0275\u0275elementStart"](1,"div",24),u["\u0275\u0275elementStart"](2,"button",25),u["\u0275\u0275element"](3,"span",26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ul",27),u["\u0275\u0275elementStart"](5,"li"),u["\u0275\u0275elementStart"](6,"a",28),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().edit()}),u["\u0275\u0275text"](7,"Edit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Pn(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"p",29),u["\u0275\u0275text"](2," Please outline the main topics you discussed and any decisions made "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](3,"ngb-rating",14),u["\u0275\u0275element"](4,"quill-view-html",15),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("rate",e.sentiment.riskRating)("max",5)("readonly",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("content",e.sentiment.riskComment)}}const jn=function(){return[]};function Tn(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-view",30),u["\u0275\u0275listener"]("onEdit",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"]().editD(n)})("onDelete",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"]().delete(n)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("contactID",n.contactID)("members",u["\u0275\u0275pureFunction0"](4,jn))("activeDiscussion",e)("parentDiscussion",n.discussion)}}function Fn(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"span",31),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().reply=!0}),u["\u0275\u0275text"](1," Reply "),u["\u0275\u0275elementEnd"]()}}function An(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-reply-notification-discussion",32),u["\u0275\u0275listener"]("discarded",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().reply=!1})("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onDiscussionAdd(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("discussion",e.discussion)("contacts",e.contacts.length?e.contacts:e.members)("discussionValue",124)("referenceID",e.sentiment.sentimentID)("discussionCategoryID",124)("hidePadding",!0)}}function Vn(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-edit",33),u["\u0275\u0275listener"]("discussionUpdated",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().discussionUpdated(t)})("discarded",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().editDiscussion=null}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("editDiscussion",e.editDiscussion)("members",e.members)}}let _n=(()=>{class e{constructor(e){this.userService=e,this.onDelete=new u.EventEmitter,this.discussionUpdate=new u.EventEmitter,this.discussionAdded=new u.EventEmitter,this.edited=new u.EventEmitter,this.members=[],this.contacts=[],this.user=this.userService.user.getValue()}ngOnInit(){this.sentiment.contactID!==this.contactID&&(this.contacts=[this.sentiment])}edit(){this.edited.emit(!0)}onDiscussionAdd(e){this.discussionAdded.emit(e),this.reply=!1}delete(e){this.onDelete.emit(e)}editD(e){this.editDiscussion=e}discussionUpdated(e){this.editDiscussion=null,this.discussionUpdate.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notification-sentiment-item"]],inputs:{sentiment:"sentiment",contactID:"contactID",i:"i",networkAdmin:"networkAdmin",discussion:"discussion",members:"members"},outputs:{onDelete:"onDelete",discussionUpdate:"discussionUpdate",discussionAdded:"discussionAdded",edited:"edited"},decls:29,vars:24,consts:[[1,"d-flex","flex-column","w-100","list-item","pb-2","mb-2"],[1,"recipient-list","w-100","d-flex"],[1,"media","avatar","avatar-32","avatar-32-rounded","mr-0"],["class","img-fluid img-32 cover","alt","Avatar",3,"src",4,"ngIf"],["class","avatar-generated",3,"background-color",4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1","ml-2"],[1,"d-flex"],[1,"mb-035r","lh-1","fz-14"],[1,"font-weight-normal"],[1,"ml-1"],["class","actions ml-auto",4,"ngIf"],[1,"lh-1","mb-035r","fz-14","meta"],[1,"d-flex","flex-column","email-wrap","ml-2","border-bottom"],[1,"mb-0","mt-2"],[1,"fz-14",3,"rate","max","readonly"],[3,"content"],[4,"ngIf"],["class","mt-2",3,"contactID","members","activeDiscussion","parentDiscussion","onEdit","onDelete",4,"ngFor","ngForOf"],["class","cursor-pointer reply-link text-primary mt-1 mr-auto",3,"click",4,"ngIf"],["class","sticky-form",3,"discussion","contacts","discussionValue","referenceID","discussionCategoryID","hidePadding","discarded","discussionAdded",4,"ngIf"],["class","sticky-form",3,"editDiscussion","members","discussionUpdated","discarded",4,"ngIf"],["alt","Avatar",1,"img-fluid","img-32","cover",3,"src"],[1,"avatar-generated"],[1,"actions","ml-auto"],["ngbDropdown","","placement","bottom-right"],["type","button","ngbDropdownToggle","",1,"btn","btn-30"],[1,"ico","dots-ico"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],[1,"mb-0","mt-4"],[1,"mt-2",3,"contactID","members","activeDiscussion","parentDiscussion","onEdit","onDelete"],[1,"cursor-pointer","reply-link","text-primary","mt-1","mr-auto",3,"click"],[1,"sticky-form",3,"discussion","contacts","discussionValue","referenceID","discussionCategoryID","hidePadding","discarded","discussionAdded"],[1,"sticky-form",3,"editDiscussion","members","discussionUpdated","discarded"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"span",2),u["\u0275\u0275template"](3,On,2,3,"img",3),u["\u0275\u0275template"](4,En,3,6,"span",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",5),u["\u0275\u0275elementStart"](6,"div",6),u["\u0275\u0275elementStart"](7,"h3",7),u["\u0275\u0275text"](8),u["\u0275\u0275elementStart"](9,"span",8),u["\u0275\u0275text"](10,"posted a review"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"span",9),u["\u0275\u0275text"](12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](13,Mn,8,0,"div",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"span",11),u["\u0275\u0275text"](15),u["\u0275\u0275pipe"](16,"date"),u["\u0275\u0275pipe"](17,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"div",12),u["\u0275\u0275elementStart"](19,"p",13),u["\u0275\u0275text"](20," How productive was the session? "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](21,"ngb-rating",14),u["\u0275\u0275element"](22,"quill-view-html",15),u["\u0275\u0275template"](23,Pn,5,4,"ng-container",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](24,Tn,1,5,"app-notification-view",17),u["\u0275\u0275pipe"](25,"sentimentDiscussion"),u["\u0275\u0275template"](26,Fn,2,0,"span",18),u["\u0275\u0275template"](27,An,1,6,"app-reply-notification-discussion",19),u["\u0275\u0275template"](28,Vn,1,2,"app-notification-edit",20),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",t.sentiment.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.sentiment.profilePhoto),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"](" ",t.sentiment.firstname," ",t.sentiment.surname," "),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](t.sentiment.sentimentDetail),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.sentiment.contactID===t.contactID),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](16,16,u["\u0275\u0275pipeBind1"](17,19,t.sentiment.datePosted),"E yyyy/MM/dd HH:mm")),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("rate",t.sentiment.sentimentRatingID)("max",5)("readonly",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("content",t.sentiment.comment),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.sentiment.riskRating&&t.sentiment.riskComment),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind2"](25,21,t.discussion.childDiscussions,t.sentiment.sentimentID)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",(t.networkAdmin||t.discussion.childDiscussions.length>0)&&!t.reply&&!t.editDiscussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.reply&&!t.editDiscussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.editDiscussion))},directives:[i.n,v.w,re.c,i.m,v.i,v.m,v.k,Ke,ut,It],pipes:[i.e,me.a,wn,pe.a,he],styles:["quill-view-html .ql-container{font-size:15px!important;height:auto}  quill-view-html .ql-editor{padding:0 0 5px}.recipient-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#88898a}.email-wrap[_ngcontent-%COMP%]{padding-left:32px}.tag[_ngcontent-%COMP%]{height:18px;font-size:12px;padding:0 8px!important;line-height:18px}.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:none}.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{margin:0!important;width:30px!important;height:18px!important;display:flex;align-items:center;justify-content:center;padding:0!important}.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{width:30px!important;height:18px!important;background-size:30px!important;background-position:50%}@media (max-width:1024px){.list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:inline-block}}.list-item[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]{display:inline-block}.entry[_ngcontent-%COMP%]:hover{background:#fff}.entry[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:160px}@media (max-width:1024px){.entry[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px}}.contain-avatar[_ngcontent-%COMP%]{border:1px solid #dfdfdf;object-fit:contain}.reply-link[_ngcontent-%COMP%]{margin-left:40px}.sticky-form[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff}"]}),e})(),Nn=(()=>{class e{constructor(e,t,n,i,s,o,r){this.discussionService=e,this.signalRService=t,this.contactService=n,this.toastrService=i,this.networkService=s,this.activeModal=o,this.userService=r,this.contacts=[],this.body="",this.notify=!1,this.destroy$=new a.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID,this.isEnterprise=4092===this.companyID}ngOnInit(){this.initContacts()}initContacts(){this.contacts=JSON.parse(localStorage.getItem("myTeam"))||[],this.isEnterprise&&(this.contacts=JSON.parse(localStorage.getItem("myDepartment"))||[]),this.contacts.length||(this.loading=!0,this.isEnterprise?this.contactService.getCompanyContactEnterprise(0,this.companyID,0,this.user.departmentID||0,"0").pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.contacts=e,this.loading=!1}):this.contactService.getContacts(this.companyID).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.contacts=e,this.loading=!1}))}accept(){const e={networkMemberID:this.networkMember.networkMemberID,nEtworkMemberStatusID:2,networkID:this.networkMember.networkID};this.loading=!0,this.networkService.updateNetworkMember(e).subscribe(()=>{this.networkMember.networkMemberStatusID=2,this.toastrService.success("Accepted to mentor network"),this.notify?this.send():(this.loading=!1,this.activeModal.close(null))})}send(){const e=[];this.contacts.forEach(t=>{e.includes(t.contactID)||this.contactID===t.contactID||e.push(t.contactID)});let t,n=0;this.discussionService.insertDiscussion({discussionTopic:"New Mentor Joined",discussionCategoryID:115,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:`We've added ${this.contact.firstName}, a new mentor to our network`,referenceID:this.contact.contactID,discussionValue:23}).pipe(Object(V.a)(i=>{i.discussionID=i.inOut_DiscussionID,n=i.inOut_DiscussionID,t=i,t.firstName=this.user.firstName,t.surname=this.user.surname,t.profilePhoto=this.user.profilePhoto,t.dateCreated=U().utc().format(z.c);const s=[];return e.forEach(e=>{s.push(this.discussionService.addMember({discussionID:i.discussionID,contactID:e,isAdmin:!0}))}),s.length?Object(r.a)(s):Object(E.a)([])})).subscribe(()=>{const i={date:U().format(z.c),body:`We've added ${this.contact.firstName}, a new mentor to our network`,topic:`We've added ${this.contact.firstName}, a new mentor to our network`,senderFullName:this.user.firstName+" "+this.user.surname,channel:"dashboard",reference:n,notificationType:H.a.discussionNotification,senderId:this.companyID,receivers:e};this.signalRService.transferMessage("dashboard",i),this.loading=!1,this.activeModal.close(t)})}dismiss(){this.activeModal.dismiss()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](I.a),u["\u0275\u0275directiveInject"](x.a),u["\u0275\u0275directiveInject"](se.a),u["\u0275\u0275directiveInject"](D.b),u["\u0275\u0275directiveInject"](b.a),u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notify-mentor-ecosystem"]],decls:20,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","d-flex","flex-column",3,"avnonLoader"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","customCheck1",1,"custom-control-input",3,"checked","change"],["for","customCheck1",1,"custom-control-label"],[1,"text-right","pt-3","mt-auto"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"h5",1),u["\u0275\u0275text"](2," Confirm Mentor Network Acceptance "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"button",2),u["\u0275\u0275listener"]("click",function(){return t.dismiss()}),u["\u0275\u0275elementStart"](4,"span",3),u["\u0275\u0275text"](5,"\xd7"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",4),u["\u0275\u0275elementStart"](7,"p"),u["\u0275\u0275text"](8," You're accepting "),u["\u0275\u0275elementStart"](9,"b"),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](11," onto your Mentor Network "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",5),u["\u0275\u0275elementStart"](13,"div",6),u["\u0275\u0275elementStart"](14,"input",7),u["\u0275\u0275listener"]("change",function(e){return t.notify=e.target.checked}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"label",8),u["\u0275\u0275text"](16,"Notify Ecosystem"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",9),u["\u0275\u0275elementStart"](18,"button",10),u["\u0275\u0275listener"]("click",function(){return t.accept()}),u["\u0275\u0275text"](19," Accept "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("avnonLoader",t.loading),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",t.contact.firstName," ",t.contact.surname,""),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("checked",t.notify))},directives:[y.a],styles:[".modal-body[_ngcontent-%COMP%]{min-height:30vh}"]}),e})();var Bn=n("9122"),Rn=n("f/iK"),$n=n("FvYy"),Ln=n("f3yp"),Un=n("G5wN"),qn=n("rHmi"),zn=n("3ue2"),Hn=n("7QSv"),Gn=n("L7Ou"),Wn=n("sYmb");const Jn=["fileInput"];function Qn(e,t){1&e&&u["\u0275\u0275element"](0,"i",33)}function Yn(e,t){1&e&&u["\u0275\u0275element"](0,"app-spinner")}function Xn(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"span",31),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](),u["\u0275\u0275reference"](9).click()}),u["\u0275\u0275template"](1,Qn,1,0,"i",32),u["\u0275\u0275template"](2,Yn,1,0,"app-spinner",6),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275classProp"]("disabled",e.profileProcessing),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.profileProcessing),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.profileProcessing)}}function Kn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",34),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",(null==e.contact?null:e.contact.designation)||"Designation",", ",e.contact.department||"Department"," ")}}function Zn(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",34),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"]("@",null==e.contact?null:e.contact.firstName," ",null==e.contact?null:e.contact.surname,"")}}function ei(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",35),u["\u0275\u0275element"](1,"i",36),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",null==e.contact?null:e.contact.city," ")}}function ti(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",38),u["\u0275\u0275elementStart"](1,"div",39),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"button",40),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).notifyEcosystem()}),u["\u0275\u0275text"](4," Accept "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"button",41),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).decline()}),u["\u0275\u0275text"](6," Decline "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.contact.firstName," would like to join your Mentor Network ")}}function ni(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",38),u["\u0275\u0275elementStart"](1,"div",39),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"date"),u["\u0275\u0275pipe"](4,"dateObject"),u["\u0275\u0275element"](5,"br"),u["\u0275\u0275elementStart"](6,"span",42),u["\u0275\u0275text"](7,"Request a session"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" Mentor Network member since ",u["\u0275\u0275pipeBind2"](3,1,u["\u0275\u0275pipeBind1"](4,4,e.networkMember.dateAdded),"dd MMM yyyy")," ")}}function ii(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,ti,7,1,"div",37),u["\u0275\u0275template"](2,ni,8,6,"div",37),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.networkMember&&2!==e.networkMember.networkMemberStatusID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.networkMember&&2===e.networkMember.networkMemberStatusID)}}function si(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-contact-personal",43),u["\u0275\u0275listener"]("contactUpdated",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).contactUpdated(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("contact",e.contact)}}function oi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-contact-work-history",44),u["\u0275\u0275listener"]("workAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onWorkAdded(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("contact",e.contact)}}function ai(e,t){if(1&e&&u["\u0275\u0275element"](0,"app-contact-skills",45),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("contact",e.contact)}}function ri(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-contact-qualification-component",46),u["\u0275\u0275listener"]("qualificationAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onQualificationAdd(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("contact",e.contact)}}function ci(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-contact-affiliation",47),u["\u0275\u0275listener"]("affiliationAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onAffiliationAdd(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("contact",e.contact)}}function di(e,t){1&e&&u["\u0275\u0275element"](0,"i",53)}function li(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"p",51),u["\u0275\u0275template"](1,di,1,0,"i",52),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.boardTaskStatus),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" Your profile is ",e.boardTaskStatus?"complete, please click Done":"incomplete",". ")}}function ui(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",54),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).boardTaskVerification()}),u["\u0275\u0275text"](1,"Done "),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275property"]("disabled",!e.boardTaskStatus||e.loading)}}function mi(e,t){1&e&&u["\u0275\u0275element"](0,"i",53)}function pi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"p",51),u["\u0275\u0275template"](2,mi,1,0,"i",52),u["\u0275\u0275text"](3),u["\u0275\u0275pipe"](4,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"button",55),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).boardTaskComplete()}),u["\u0275\u0275text"](6),u["\u0275\u0275pipe"](7,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.boardTaskStatus),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](4,4,"PEOPLE.CONFIRMING-INFO-CORRECT")," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",e.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](7,6,"COMMON.VERIFIED")," ")}}function hi(e,t){1&e&&u["\u0275\u0275element"](0,"i",53)}function fi(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"p"),u["\u0275\u0275template"](2,hi,1,0,"i",52),u["\u0275\u0275text"](3," Profile completed. "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.boardTaskStatus)}}function gi(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",48),u["\u0275\u0275template"](1,li,3,2,"p",49),u["\u0275\u0275template"](2,ui,2,1,"button",50),u["\u0275\u0275template"](3,pi,8,8,"ng-container",6),u["\u0275\u0275template"](4,fi,4,1,"ng-container",6),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.taskOwner&&e.taskOwner.contactID===e.contactID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.taskOwner&&e.taskOwner.contactID===e.contactID&&e.contactID===e.user.contactID&&1===e.taskOwner.taskStatusID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.taskOwner&&2===e.taskOwner.taskStatusID&&(e.task.submittedBy===e.contactID||(null==e.supporter?null:e.supporter.contactID)===e.contactID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.taskOwner&&3===e.taskOwner.taskStatusID)}}const Di=function(){return["image/*"]};function Ii(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"div",7),u["\u0275\u0275elementStart"](2,"div",8),u["\u0275\u0275element"](3,"app-banner",9),u["\u0275\u0275elementStart"](4,"div",10),u["\u0275\u0275element"](5,"img",11),u["\u0275\u0275pipe"](6,"avatar"),u["\u0275\u0275template"](7,Xn,3,4,"span",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"input",13,14),u["\u0275\u0275listener"]("change",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().fileChangeEvent(t)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",15),u["\u0275\u0275elementStart"](11,"button",16),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().message()}),u["\u0275\u0275text"](12," Message "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",17),u["\u0275\u0275elementStart"](14,"h2"),u["\u0275\u0275text"](15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](16,Kn,2,2,"span",18),u["\u0275\u0275template"](17,Zn,2,2,"span",18),u["\u0275\u0275elementStart"](18,"p",19),u["\u0275\u0275text"](19),u["\u0275\u0275pipe"](20,"ellipsis"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",20),u["\u0275\u0275template"](22,ei,3,1,"span",21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"div",22),u["\u0275\u0275elementStart"](24,"div",23),u["\u0275\u0275elementStart"](25,"p",24),u["\u0275\u0275text"](26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](27,ii,3,2,"ng-container",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](28,si,1,1,"app-contact-personal",25),u["\u0275\u0275template"](29,oi,1,1,"app-contact-work-history",26),u["\u0275\u0275template"](30,ai,1,1,"app-contact-skills",27),u["\u0275\u0275template"](31,ri,1,1,"app-contact-qualification-component",28),u["\u0275\u0275template"](32,ci,1,1,"app-contact-affiliation",29),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](33,gi,5,4,"div",30),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("referenceID",e.paramContactID)("documentCategoryID",32)("fileTypes",u["\u0275\u0275pureFunction0"](26,Di))("canEdit",(null==e.contact?null:e.contact.contactID)===e.contactID),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](6,21,null==e.contact?null:e.contact.profilePhoto),u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.contactID===e.paramContactID),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate2"]("",null==e.contact?null:e.contact.firstName," ",null==e.contact?null:e.contact.surname,""),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contact&&4092===e.contact.companyID||e.isEnviro),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contact&&4092!==e.contact.companyID&&!e.isEnviro),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](20,23,null==e.contact?null:e.contact.headline,150)),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",null==e.contact?null:e.contact.city),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("avnonLoader",e.loading),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](null==e.contact?null:e.contact.personalProfile),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.task),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contact&&(e.isEnviro||4092===e.user.companyID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contact&&e.contact.contactID&&!e.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contact&&e.contact.contactID&&!e.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contact&&e.contact.contactID&&!e.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.contact&&e.contact.contactID&&!e.loading&&4092===e.user.companyID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.task)}}let bi=(()=>{class e{constructor(e,t,n,i,s,o,r,c,d,l,m){this.contactService=e,this.discussionService=t,this.networkService=n,this.toastrService=i,this.signalRService=s,this.modal=o,this.documentsService=r,this.taskService=c,this.permissionService=d,this.distributionService=l,this.userService=m,this.discussionAdded=new u.EventEmitter,this.showDM=new u.EventEmitter,this.close=new u.EventEmitter,this.discussions=[],this.workExperiences=[],this.userQualifications=[],this.affiliations=[],this.isEnviro=window.location.hostname.toString().includes("enviroserv"),this.destroy$=new a.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.companyID}set Data(e){e&&(this.boardTaskStatus=null,this.paramContactID=e,this.contact=null,this.network=null,this.networkMember=null,this.canAccept=!1,this.workExperiences=[],this.userQualifications=[],this.affiliations=[],this.profileProcessing=!1,this.profileFile=null,this.getData(),this.checkNetwork())}ngOnInit(){this.contact&&(this.paramContactID=this.contact.contactID,this.checkNetwork())}getData(){this.loading=!0,this.contactService.getContactList("0",this.paramContactID,0).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e[0]&&(this.contact=e[0],this.checkIDBook(),this.checkBoardStatus()),this.loading=!1})}checkNetwork(){this.networkChecking=!0,this.networkService.getNetwork(0,0,0,0,this.companyID,0,2).pipe(Object(V.a)(e=>(this.network=e[0]||null,e.length?this.networkService.getNetworkMentorGlobal(this.network.networkID,1,0,0,0,0):Object(E.a)([]))),Object(V.a)(e=>(this.networkMember=e.find(e=>e.contactID===this.paramContactID)||null,this.network?this.permissionService.getPermission(Bn.b.Mentor_Network,0,0,this.network.companyID):Object(E.a)([]))),Object(d.a)(this.destroy$)).subscribe(e=>{var t;this.canAccept=e.some(e=>e.contactID===this.companyID)||(null===(t=this.network)||void 0===t?void 0:t.companyID)===this.companyID,this.networkChecking=!1})}decline(){this.loading=!0,this.networkService.deleteNetworkMember(this.networkMember.networkMemberID).subscribe(()=>{this.loading=!1,this.networkMember=null,this.sendNotification("declined"),this.toastrService.success("Removed from mentor network")})}notifyEcosystem(){const e=this.modal.open(Nn,{backdrop:"static"});e.componentInstance.contact=this.contact,e.componentInstance.networkMember=this.networkMember,e.result.then(e=>{e&&e.discussionID&&this.discussionAdded.emit(e),this.sendNotification()})}sendNotification(e="accepted"){let t,n=0;this.discussionService.insertDiscussion({discussionTopic:"Mentor Network Status",discussionCategoryID:115,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:`${this.user.firstName} has ${e} your Mentor Network connection request`,referenceID:this.companyID,discussionValue:0}).pipe(Object(V.a)(e=>(e.discussionID=e.inOut_DiscussionID,n=e.inOut_DiscussionID,t=e,t.firstName=this.user.firstName,t.surname=this.user.surname,t.profilePhoto=this.user.profilePhoto,t.dateCreated=U().utc().format(z.c),this.discussionService.addMember({discussionID:e.discussionID,contactID:this.contact.contactID,isAdmin:!0})))).subscribe(()=>{const i={date:U().format(z.c),body:`${this.user.firstName} has ${e} your Mentor Network connection request`,topic:`${this.user.firstName} has ${e} your Mentor Network connection request`,senderFullName:this.user.firstName+" "+this.user.surname,channel:"dashboard",reference:n,notificationType:H.a.discussionNotification,senderId:this.companyID,receivers:[this.contact.contactID]};this.signalRService.transferMessage("dashboard",i),this.discussionAdded.emit(t)})}onClose(){this.close.emit(!0)}message(){const e=this.discussions.find(e=>1===e.discussionCategoryID&&e.targetContactID===this.paramContactID);e&&this.showDM.emit(e)}boardTaskVerification(){this.loading=!0;const e=Object(c.l)(this.taskOwner);e.taskStatusID=2,e.dateSentForSignOff=Object(c.a)(new Date),this.taskService.updateTaskOwner(e).subscribe(()=>{this.loading=!1,this.taskOwner.taskStatusID=2,this.toastrService.success("Thanks, your profile has been submitted for verification"),this.notifyAdmin()})}notifyAdmin(){const e=`${this.taskOwner.firstName} ${this.taskOwner.surname} has completed their profile and it's ready for verification`,t=Z.a.fullDomain()+"/home?discussionID="+this.discussion.discussionID+"&contactID="+this.contactID,n=`\n\t\t\t<p>Hi ${this.supporter.firstName}</p>\n\t\t\t<p>${e.replace("|","")}</p>\n\t\t\t<br>\n\t\t\t<p><span class="btn btn-primary" style="margin: 0; padding: 0"><a href="${t}">See Details</a></span></p>\n\t\t\t<br>\n\t\t`,i={distributionTitle:"Task Status Update",distributionCategoryID:null,referenceID:null,distributionDate:null,userID:this.contactID,emailBody:ee.a.template(n),subjectLine:"Task Status Update",senderEmail:"info@incubatorportal.com",senderName:`${this.user.firstName} ${this.user.surname}`,replyTo:null,contacts:[this.supporter.contactID]};this.distributionService.create(i).subscribe(),this.sendAdminNotification()}sendAdminNotification(){let e,t=0;this.discussionService.insertDiscussion({discussionTopic:"Requested Sign Off",discussionCategoryID:116,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:"Profile completed and ready for verification",referenceID:this.taskOwner.contactID,discussionValue:37,parentDiscussionID:this.discussion.discussionID}).pipe(Object(V.a)(n=>(n.discussionID=n.inOut_DiscussionID,t=n.inOut_DiscussionID,e=n,e.firstName=this.user.firstName,e.surname=this.user.surname,e.profilePhoto=this.user.profilePhoto,e.dateCreated=U().utc().format(z.c),this.discussionService.addMember({discussionID:n.discussionID,contactID:this.supporter.contactID,isAdmin:!0})))).subscribe(()=>{const n={date:U().format(z.c),body:`${this.taskOwner.firstName} ${this.taskOwner.surname} has completed their profile and it's ready for verification`,topic:`${this.taskOwner.firstName} ${this.taskOwner.surname} has completed their profile and it's ready for verification`,senderFullName:this.user.firstName+" "+this.user.surname,channel:"dashboard",reference:t,notificationType:H.a.discussionNotification,senderId:this.companyID,receivers:[this.supporter.contactID]};this.signalRService.transferMessage("dashboard",n),this.discussionAdded.emit(e)})}sendOwnerNotification(){let e,t=0;this.discussionService.insertDiscussion({discussionTopic:"Accepted Sign Off",discussionCategoryID:116,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:`${this.taskOwner.firstName} ${this.taskOwner.surname}'s profile verified`,referenceID:this.taskOwner.contactID,discussionValue:38,parentDiscussionID:this.discussion.discussionID}).pipe(Object(V.a)(n=>(n.discussionID=n.inOut_DiscussionID,t=n.inOut_DiscussionID,e=n,e.firstName=this.user.firstName,e.surname=this.user.surname,e.profilePhoto=this.user.profilePhoto,e.dateCreated=U().utc().format(z.c),this.discussionService.addMember({discussionID:n.discussionID,contactID:this.taskOwner.contactID,isAdmin:!0})))).subscribe(()=>{const n={date:U().format(z.c),body:`${this.user.firstName} ${this.user.surname} has verified your profile`,topic:`${this.user.firstName} ${this.user.surname} has verified your profile`,senderFullName:this.user.firstName+" "+this.user.surname,channel:"dashboard",reference:t,notificationType:H.a.discussionNotification,senderId:this.companyID,receivers:[this.taskOwner.contactID]};this.signalRService.transferMessage("dashboard",n),this.discussionAdded.emit(e)})}boardTaskComplete(){this.taskOwner.taskStatusID=3,this.taskService.updateTaskOwner(this.taskOwner).subscribe(()=>{this.taskOwner.taskStatusID=3}),this.sendOwnerNotification()}onWorkAdded(e){this.workExperiences=e,this.checkBoardStatus()}onQualificationAdd(e){this.userQualifications=e,this.checkBoardStatus()}onAffiliationAdd(e){this.affiliations=e,this.checkBoardStatus()}checkBoardStatus(){var e,t,n;if((null===(e=this.contact)||void 0===e?void 0:e.countryID)&&(null===(t=this.contact)||void 0===t?void 0:t.city)&&(null===(n=this.contact)||void 0===n?void 0:n.profilePhoto)&&this.workExperiences.length)if(this.userQualifications.filter(e=>0===e.qualificationCategoryID).length){if(this.isEnviro||4092===this.user.companyID){if(!this.contact.idBook)return void(this.boardTaskStatus=!1);if(!this.contact.idNumber)return void(this.boardTaskStatus=!1)}this.boardTaskStatus=!0}else this.boardTaskStatus=!1;else this.boardTaskStatus=!1}fileChangeEvent(e){e.target.files[0]&&(this.profileFile=e.target.files[0],this.insertDocument())}insertDocument(){this.profileProcessing=!0;const e=new FormData;e.append("image",this.profileFile,this.profileFile.name),this.documentsService.insertDocument(e,3,this.contact.contactID,this.companyID,1,0).subscribe(e=>{if(e.type===B.e.Response){const t=e.body[0];t.documentID&&(this.contact.profilePhoto=t.documentPath,this.contactService.loadContactDetail(this.contact),this.user.profilePhoto=t.documentPath,this.userService.user.next(this.user),this.profileProcessing=!1,this.fileInput.nativeElement.value="")}},()=>{this.fileInput.nativeElement.value="",this.toastrService.warning("Cannot update profile photo"),this.profileProcessing=!1})}checkIDBook(){this.documentsService.getDocument(this.contact.contactID,133,0,0,1).subscribe(e=>{e[0]&&(this.contact.idBook=e[0],this.checkBoardStatus())})}contactUpdated(e){this.contact=e,this.checkBoardStatus()}ngOnDestroy(){this.destroy$.complete(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](se.a),u["\u0275\u0275directiveInject"](I.a),u["\u0275\u0275directiveInject"](b.a),u["\u0275\u0275directiveInject"](D.b),u["\u0275\u0275directiveInject"](x.a),u["\u0275\u0275directiveInject"](v.p),u["\u0275\u0275directiveInject"](ie.a),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](Rn.a),u["\u0275\u0275directiveInject"](oe.a),u["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notification-mentor-profile"]],viewQuery:function(e,t){if(1&e&&u["\u0275\u0275viewQuery"](Jn,!0),2&e){let e;u["\u0275\u0275queryRefresh"](e=u["\u0275\u0275loadQuery"]())&&(t.fileInput=e.first)}},inputs:{Data:["mentorContactID","Data"],fullScreen:"fullScreen",discussions:"discussions",discussion:"discussion",contact:"contact",task:"task",taskOwner:"taskOwner",supporter:"supporter"},outputs:{discussionAdded:"discussionAdded",showDM:"showDM",close:"close"},decls:8,vars:4,consts:[[1,"d-flex"],[1,"task-right-panel","d-flex","flex-column"],[1,"d-flex","w-100","flex-column","flex-grow-1",3,"avnonLoader"],[1,"d-flex","pl-3","pr-3","subject-header","border-bottom","align-items-center"],[1,"mb-0","mt-1","mr-auto"],[1,"fas","fa-times","ml-2",3,"click"],[4,"ngIf"],[1,"page-header","border-bottom"],[1,"profile-photos","img-bottom-border"],[1,"w-100",3,"referenceID","documentCategoryID","fileTypes","canEdit"],[1,"user-photo"],["alt","logo",1,"img-fluid","profile-user","cover",3,"src"],["class","upload-photo-icon",3,"disabled","click",4,"ngIf"],["type","file","accept","image/*","hidden","",1,"d-none",3,"change"],["fileInput",""],[1,"bottom-actions","d-flex","justify-content-end","align-items-center"],[1,"btn","btn-sm","btn-outline-primary","mr-3","mt-3",3,"click"],[1,"profile-overview"],["class","meta mb-2",4,"ngIf"],[1,"mb-0"],[1,"icon-list"],["class","text-muted other mt-2 mr-4",4,"ngIf"],[1,"d-flex","flex-column","w-100",3,"avnonLoader"],[1,"section","section-alt","filter-container"],[1,"pre-wrap","mb-1"],[3,"contact","contactUpdated",4,"ngIf"],[3,"contact","workAdded",4,"ngIf"],[3,"contact",4,"ngIf"],[3,"contact","qualificationAdded",4,"ngIf"],[3,"contact","affiliationAdded",4,"ngIf"],["class","d-flex w-100 pl-3 pr-3 twitter-fill pt-2 pb-2 bottom-sticky border-top",4,"ngIf"],[1,"upload-photo-icon",3,"click"],["class","fas fa-camera",4,"ngIf"],[1,"fas","fa-camera"],[1,"meta","mb-2"],[1,"text-muted","other","mt-2","mr-4"],[1,"fas","fa-map-marker-alt"],["class","d-flex align-items-center p-2 m-2 bg-light border",4,"ngIf"],[1,"d-flex","align-items-center","p-2","m-2","bg-light","border"],[1,"mr-auto"],[1,"btn-primary","btn-sm","btn","mr-2",3,"click"],[1,"btn-outline-primary","btn","btn-sm",3,"click"],[1,"cursor-pointer","text-primary"],[3,"contact","contactUpdated"],[3,"contact","workAdded"],[3,"contact"],[3,"contact","qualificationAdded"],[3,"contact","affiliationAdded"],[1,"d-flex","w-100","pl-3","pr-3","twitter-fill","pt-2","pb-2","bottom-sticky","border-top"],["class","mr-2 mb-0",4,"ngIf"],["class","btn btn-primary ml-auto",3,"disabled","click",4,"ngIf"],[1,"mr-2","mb-0"],["class","fas fa-check-circle text-success mr-1 profile-complete",4,"ngIf"],[1,"fas","fa-check-circle","text-success","mr-1","profile-complete"],[1,"btn","btn-primary","ml-auto",3,"disabled","click"],[1,"ml-auto","btn-primary","btn-sm","btn","mr-2",3,"disabled","click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"h3",4),u["\u0275\u0275text"](5," Profile "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"i",5),u["\u0275\u0275listener"]("click",function(){return t.onClose()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](7,Ii,34,27,"ng-container",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275classProp"]("overlay-fullscreen",t.fullScreen),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("avnonLoader",t.loading||t.networkChecking),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",t.contact))},directives:[y.a,i.n,$n.a,Ln.a,Un.a,qn.a,zn.a,Hn.a,Gn.a],pipes:[pe.a,fe.a,i.e,me.a,Wn.c],styles:[".overlay-fullscreen[_ngcontent-%COMP%]{top:0;left:0;position:fixed;z-index:1022;width:100%;height:100vh;background:rgba(0,0,0,.5)}.overlay-fullscreen[_ngcontent-%COMP%]   .task-right-panel[_ngcontent-%COMP%]{right:0!important;min-height:calc(100vh - 14px);max-height:calc(100vh - 14px);height:100%;top:7px}@media (max-width:1500px){.overlay-fullscreen[_ngcontent-%COMP%]   .task-right-panel[_ngcontent-%COMP%]{width:calc(100% - 594px)}}.subject-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.subject-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:38px;line-height:38px}.personal-info[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.25rem 1rem .25rem 0}.personal-info[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:180px}"]}),e})();const vi=["chatContainer"],xi=["perfectScroll"];function yi(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"span"),u["\u0275\u0275text"](1," - Task"),u["\u0275\u0275elementEnd"]())}function Ci(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"a",15),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).edit()}),u["\u0275\u0275text"](1,"Edit"),u["\u0275\u0275elementEnd"]()}}function Si(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",9),u["\u0275\u0275elementStart"](1,"div",10),u["\u0275\u0275elementStart"](2,"button",11),u["\u0275\u0275element"](3,"span",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ul",13),u["\u0275\u0275elementStart"](5,"li"),u["\u0275\u0275template"](6,Ci,2,0,"a",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"li"),u["\u0275\u0275elementStart"](8,"a",15),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().delete()}),u["\u0275\u0275text"](9,"Delete"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",e.discussion&&1!==e.discussion.discussionCategoryID)}}function ki(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",26),u["\u0275\u0275elementStart"](1,"div",27),u["\u0275\u0275elementStart"](2,"div",28),u["\u0275\u0275elementStart"](3,"div",29),u["\u0275\u0275element"](4,"img",30),u["\u0275\u0275pipe"](5,"avatar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",31),u["\u0275\u0275elementStart"](7,"h2"),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"span",32),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](5,5,null==e.member?null:e.member.profilePhoto),u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",null==e.member?null:e.member.firstName," ",null==e.member?null:e.member.surname,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"]("@",null==e.member?null:e.member.firstName," ",null==e.member?null:e.member.surname,"")}}function wi(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",43),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.discussion.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function Oi(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",44),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.discussion.discussionCreatedByContactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.discussion.firstName.substr(0,1),"",e.discussion.surname.substr(0,1)," ")}}function Ei(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.last;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.me?"You":e.firstName,"",n?"":","," ")}}function Mi(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",48),u["\u0275\u0275template"](1,Ei,2,2,"ng-container",49),u["\u0275\u0275pipe"](2,"slice"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](4);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind3"](2,2,e.taskOwners,0,3)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.taskOwners.length>3?" +"+(e.taskOwners.length-3)+" other(s)":""," ")}}function Pi(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275text"](1),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=t.last;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.me?"You":e.firstName,"",n?"":","," ")}}function ji(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",48),u["\u0275\u0275template"](1,Pi,2,2,"ng-container",49),u["\u0275\u0275pipe"](2,"slice"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](4);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind3"](2,2,e.members,0,3)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.members.length>3?" +"+(e.members.length-3)+" other(s)":""," ")}}function Ti(e,t){1&e&&u["\u0275\u0275element"](0,"i",50)}function Fi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",45),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).openMembers()}),u["\u0275\u0275text"](1," To: "),u["\u0275\u0275template"](2,Mi,4,6,"span",46),u["\u0275\u0275template"](3,ji,4,6,"span",46),u["\u0275\u0275template"](4,Ti,1,0,"i",47),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275classProp"]("cursor-pointer",116===e.discussion.discussionCategoryID),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",116===e.discussion.discussionCategoryID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",115===e.discussion.discussionCategoryID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",116===e.discussion.discussionCategoryID)}}function Ai(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",33),u["\u0275\u0275elementStart"](1,"div",34),u["\u0275\u0275elementStart"](2,"span",35),u["\u0275\u0275template"](3,wi,2,3,"img",36),u["\u0275\u0275template"](4,Oi,3,6,"span",37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",38),u["\u0275\u0275elementStart"](6,"h3",39),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"span",40),u["\u0275\u0275text"](9),u["\u0275\u0275pipe"](10,"date"),u["\u0275\u0275pipe"](11,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](12,Fi,5,5,"div",41),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"app-notification-view",42),u["\u0275\u0275listener"]("onEdit",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).editDiscussion=t})("onDelete",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onDeleteDiscussion(t)})("showMentor",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onShowMentor(t)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",e.discussion.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.discussion.profilePhoto),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate2"](" ",e.discussion.firstName," ",e.discussion.surname," "),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](10,10,u["\u0275\u0275pipeBind1"](11,13,e.discussion.dateCreated),"E yyyy/MM/dd HH:mm")),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",e.chatAdmin||e.taskSupporter&&e.taskSupporter.contactID===e.contactID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("contactID",e.contactID)("parentDiscussion",e.discussion)("trackAudit",e.taskOwner&&e.taskOwner.contactID===e.contactID)("activeDiscussion",e.discussion)}}function Vi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"form",52,53),u["\u0275\u0275listener"]("submit",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).submitMentee()}),u["\u0275\u0275elementStart"](2,"p"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"p"),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"p"),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"date"),u["\u0275\u0275pipe"](9,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",54),u["\u0275\u0275elementStart"](11,"label",55),u["\u0275\u0275text"](12,"How productive was the session?"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"ngb-rating",56),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).menteeSentiment.sentimentRatingID=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",57),u["\u0275\u0275elementStart"](15,"textarea",58),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).menteeSentiment.comment=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",59),u["\u0275\u0275elementStart"](17,"button",60),u["\u0275\u0275text"](18,"Submit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](1),t=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("Hi ",t.meetingOwner.firstName,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"]("You recently attended a mentoring session with ",null==t.mentee?null:t.mentee.assigneeFirstName," ",null==t.mentee?null:t.mentee.assigneeSurname," and we'd like to find out how sessions went. "),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("Please can you complete the form by ",u["\u0275\u0275pipeBind2"](8,8,u["\u0275\u0275pipeBind1"](9,11,t.deadLine),"dd MMM yyyy"),""),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("max",5)("ngModel",t.menteeSentiment.sentimentRatingID),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngModel",t.menteeSentiment.comment),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",e.invalid)}}function _i(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"form",52,61),u["\u0275\u0275listener"]("submit",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).submitMentor()}),u["\u0275\u0275elementStart"](2,"p"),u["\u0275\u0275text"](3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"p"),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"p"),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"date"),u["\u0275\u0275pipe"](9,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",54),u["\u0275\u0275elementStart"](11,"label",55),u["\u0275\u0275text"](12,"How productive was the session?"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"ngb-rating",62),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).mentorSentiment.sentimentRatingID=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"div",57),u["\u0275\u0275elementStart"](15,"textarea",63),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).mentorSentiment.comment=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",54),u["\u0275\u0275elementStart"](17,"label",64),u["\u0275\u0275text"](18,"Please outline the main topics you discussed and any decisions made"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"ngb-rating",65),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).riskSentiment.sentimentRatingID=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"div",57),u["\u0275\u0275elementStart"](21,"textarea",66),u["\u0275\u0275listener"]("ngModelChange",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).riskSentiment.comment=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](22,"div",59),u["\u0275\u0275elementStart"](23,"button",60),u["\u0275\u0275text"](24,"Submit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275reference"](1),t=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"]("Hi ",t.meetingOwner.firstName,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("You recently conducted a mentoring session with ",null==t.mentee?null:t.mentee.companyName," and we'd like to find out how the sessions went."),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("Please can you complete the form by ",u["\u0275\u0275pipeBind2"](8,10,u["\u0275\u0275pipeBind1"](9,13,t.deadLine),"dd MMM yyyy"),""),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("max",5)("ngModel",t.mentorSentiment.sentimentRatingID),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngModel",t.mentorSentiment.comment),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("max",5)("ngModel",t.riskSentiment.sentimentRatingID),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngModel",t.riskSentiment.comment),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",e.invalid)}}function Ni(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-sentiment-item",68),u["\u0275\u0275listener"]("onDelete",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](5).onDeleteDiscussion(t)})("discussionUpdate",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](5).discussionUpdated(t)})("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](5).onDiscussionAdded(t)})("edited",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](5).onSentimentEdit()}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](),t=e.$implicit,n=e.index,i=u["\u0275\u0275nextContext"](4);u["\u0275\u0275property"]("sentiment",t)("contactID",i.contactID)("networkAdmin",i.mentorNetworkAdmin)("discussion",i.discussion)("members",i.members)("i",n)}}function Bi(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Ni,1,6,"app-notification-sentiment-item",67),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](4);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",7!==e.sentimentCategoryID&&(e.contactID===n.contactID||(null==n.mentorNetworkAdmin?null:n.mentorNetworkAdmin.contactID)===n.contactID))}}function Ri(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Bi,2,1,"ng-container",49),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.meetingSentiments)}}function $i(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Vi,19,13,"form",51),u["\u0275\u0275template"](2,_i,25,15,"form",51),u["\u0275\u0275template"](3,Ri,2,1,"ng-container",5),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.meetingOwner&&3!==e.meetingOwner.taskStatusID&&24===e.meetingOwner.taskOwnerCategoryID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.meetingOwner&&3!==e.meetingOwner.taskStatusID&&23===e.meetingOwner.taskOwnerCategoryID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.meetingOwner||3===(null==e.meetingOwner?null:e.meetingOwner.taskStatusID))}}const Li=function(e,t){return{"border-bottom pb-2 mb-2":e,"pb-1":t}},Ui=function(){return[]};function qi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",70),u["\u0275\u0275elementStart"](1,"app-notification-view",71),u["\u0275\u0275listener"]("onEdit",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).editDiscussion=t})("onDelete",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).onDeleteDiscussion(t)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction2"](7,Li,1!==n.discussion.discussionCategoryID,1===n.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("trackAudit",n.taskOwner&&n.taskOwner.contactID===n.contactID)("activeDiscussion",e)("hideRecipient",!0)("parentDiscussion",n.discussion)("members",116===(null==n.discussion?null:n.discussion.discussionCategoryID)?n.taskSupporter||n.chatAdmin?n.taskOwners:u["\u0275\u0275pureFunction0"](10,Ui):(null==e?null:e.discussionCreatedByContactID)===n.contactID?n.members:u["\u0275\u0275pureFunction0"](11,Ui))("contactID",n.contactID)}}function zi(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,qi,2,12,"div",69),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.discussion.childDiscussions)}}function Hi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",73),u["\u0275\u0275elementStart"](1,"app-notification-view",74),u["\u0275\u0275listener"]("onDelete",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).onDeleteDiscussion(t)})("onEdit",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](3).editDiscussion=t}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("trackAudit",n.taskOwner&&n.taskOwner.contactID===n.contactID)("activeDiscussion",e)("members",n.taskSupporters)("parentDiscussion",n.discussion)("hideRecipient",!0)("contactID",n.contactID)}}function Gi(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Hi,2,6,"div",72),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.ownerDiscussions)}}function Wi(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",77),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.fullName," is typing ")}}function Ji(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",75),u["\u0275\u0275template"](1,Wi,2,1,"span",76),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.typingIndicator)}}function Qi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-reply-notification-discussion",78),u["\u0275\u0275listener"]("ownerContactID",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onOwnerSelect(t)})("ownerDiscussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).ownerDiscussionAdded(t)})("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).onDiscussionAdded(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("members",e.members)("discussion",e.discussion)("subDiscussion",e.subDiscussion)("taskOwner",e.taskOwner)("taskSupporter",e.taskSupporter)("task",e.task)("chatAdmin",e.chatAdmin)("contacts",e.contacts)("supporterTaskStatusID",e.supporterTaskStatusID)("taskOwners",e.taskOwners)("taskStatusID",e.taskStatusID)("taskSupporters",e.taskSupporters)}}function Yi(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-edit",79),u["\u0275\u0275listener"]("discussionUpdated",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).discussionUpdated(t)})("discarded",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).editDiscussion=null}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("editDiscussion",e.editDiscussion)("members",e.members)}}const Xi=function(){return[1,124,123]},Ki=function(){return[124,123]},Zi=function(){return[123,124]};function es(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"perfect-scrollbar",16,17),u["\u0275\u0275elementStart"](3,"div",18,19),u["\u0275\u0275listener"]("scroll",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onScrollChat(t)}),u["\u0275\u0275template"](5,ki,11,7,"div",20),u["\u0275\u0275elementStart"](6,"div",21),u["\u0275\u0275template"](7,Ai,14,15,"div",22),u["\u0275\u0275template"](8,$i,4,3,"ng-container",5),u["\u0275\u0275template"](9,zi,2,1,"ng-container",5),u["\u0275\u0275template"](10,Gi,2,1,"ng-container",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](11,Ji,2,1,"div",23),u["\u0275\u0275template"](12,Qi,1,12,"app-reply-notification-discussion",24),u["\u0275\u0275template"](13,Yi,1,2,"app-notification-edit",25),u["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",e.member&&1===(null==e.discussion?null:e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",!u["\u0275\u0275pureFunction0"](8,Xi).includes(e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pureFunction0"](9,Ki).includes(e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==e.discussion||null==e.discussion.childDiscussions?null:e.discussion.childDiscussions.length)>0&&!u["\u0275\u0275pureFunction0"](10,Ki).includes(null==e.discussion?null:e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==e.ownerDiscussions?null:e.ownerDiscussions.length)>0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.typingIndicator.length>0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.editDiscussion&&!u["\u0275\u0275pureFunction0"](11,Zi).includes(e.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.editDiscussion)}}function ts(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-mentor-profile",80),u["\u0275\u0275listener"]("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onDiscussionAdded(t)})("close",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onOwnerDeselect()}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("fullScreen",!0)("task",e.task)("discussion",e.discussion)("taskOwner",e.targetOwner)("supporter",e.taskSupporter)("mentorContactID",e.ownerContactID)}}let ns=(()=>{class e{constructor(e,t,n,i,s,o,r,c){this.discussionService=e,this.signalRService=t,this.userService=n,this.modal=i,this.contractService=s,this.sentimentService=o,this.eventService=r,this.taskService=c,this.closed=new u.EventEmitter,this.discussionAdded=new u.EventEmitter,this.discussionUpdate=new u.EventEmitter,this.discussionDeleted=new u.EventEmitter,this.readDiscussion=new u.EventEmitter,this.showMentor=new u.EventEmitter,this.discussions=[],this.config={},this.pageSize=1,this.typingIndicator=[],this.members=[],this.mentorNetworkAdmins=[],this.contacts=[],this.taskOwners=[],this.taskSupporters=[],this.ownerDiscussions=[],this.meetingSentiments=[],this.menteeSentiment=new yn.a,this.mentorSentiment=new yn.a,this.riskSentiment=new yn.a,this.destroy$=new a.a,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID,this.companyID=this.user.contactID}set Data(e){if((null==e?void 0:e.discussionID)&&![37,38].includes(e.discussionValue))!this.taskOwner||this.taskOwner.taskOwnerID!==e.referenceID&&this.taskOwner.discussionID!==e.parentDiscussionID||this.ownerDiscussions.some(t=>t.discussionID===e.discussionID)||(this.ownerDiscussions.push(e),7===e.discussionValue&&(this.taskOwner.taskStatusID=2),([9,11].includes(e.discussionValue)||9===e.discussionCategoryID)&&(this.taskOwner.taskStatusID=1),8!==e.discussionValue&&8!==e.discussionCategoryID||(this.taskOwner.taskStatusID=3),this.taskStatusID=this.taskOwner.taskStatusID,this.taskSupporter&&(this.supporterTaskStatusID=this.taskStatusID));else{const t=this.taskOwners.findIndex(t=>t.contactID===e.referenceID);-1!==t&&(this.taskOwners[t].taskStatusID=38===e.discussionValue?3:2,this.taskOwner=this.taskOwners.find(e=>e.contactID===this.contactID),this.ownerContactID&&(this.taskOwner=this.taskOwners.find(e=>e.contactID===this.ownerContactID)),this.taskStatusID=this.taskOwner.taskStatusID)}}set Value(e){if(this.discussion&&this.discussion.discussionID===e.discussionID)this.discussion=e;else{if(this.pageSize=1,this.pageLoading=!1,this.typingIndicator=[],this.channel&&this.signalRService.leaveChannel(this.channel),this.channel="typing"+e.discussionID,this.signalRService.joinChannel(this.channel),this.initSignalHub(),this.member=null,this.members=[],this.editDiscussion=null,this.taskOwners=[],this.taskOwner=null,this.targetOwner=null,this.taskSupporters=[],this.taskSupporter=null,this.taskStatusID=null,this.supporterTaskStatusID=null,this.ownerDiscussions=[],this.task=null,this.subDiscussion=null,[6,7,8,9,11,117].includes(e.discussionCategoryID))return this.subDiscussion=e,void this.handleOwnerDiscussion(e);this.chatAdmin=e.discussionCreatedByContactID===this.contactID,this.discussion=e,[123,124].includes(this.discussion.discussionCategoryID)&&(this.handleMeetingData(),this.handleSentiments()),1===this.discussion.discussionCategoryID&&this.getDmDiscussions(),this.getMembers(),116===this.discussion.discussionCategoryID&&this.getTask(),this.scrollToBottom()}}ngOnInit(){this.discussionService.refreshSentiment.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{var t;(null===(t=this.discussion)||void 0===t?void 0:t.discussionID)&&this.sentimentService.getSentiments(e,0,0,0,0,this.discussion.discussionID,0,0,0).subscribe(e=>{e.filter(e=>[5,6,7].includes(e.sentimentCategoryID)).sort((e,t)=>e.sentimentRatingID=t.sentimentRatingID).map(t=>(t.riskComment=null,t.riskRating=0,5===t.sentimentCategoryID&&(t.riskComment=e.find(e=>7===e.sentimentCategoryID&&e.createdByContactID===t.createdByContactID).comment,t.riskRating=e.find(e=>7===e.sentimentCategoryID&&e.createdByContactID===t.createdByContactID).sentimentRatingID),t)).forEach(e=>{const t=this.meetingSentiments.findIndex(t=>t.sentimentID===e.sentimentID);-1!==t?this.meetingSentiments[t]=e:this.meetingSentiments.push(e)})})})}handleMeetingData(){this.loading=!0,this.taskService.getTask(this.discussion.referenceID,0,0,0,0,0,0,0,!1).pipe(Object(V.a)(e=>e.length?this.taskService.getTaskOwners(e[0].taskID,0,0,0,0):Object(E.a)([])),Object(V.a)(e=>{var t;return this.meetingOwner=e.find(e=>e.contactID===this.contactID),this.meetingOwner&&(this.deadLine=U(this.meetingOwner.endDate).add(2,"d").toDate()),(null===(t=this.meetingOwner)||void 0===t?void 0:t.referenceID)?this.eventService.selectEvent(0,this.meetingOwner.referenceID):Object(E.a)([])}),Object(V.a)(e=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.referenceID)?this.contractService.getContractAssignment(0,e[0].referenceID,0,0,0,0,0,0):Object(E.a)([])})).subscribe(e=>{this.mentee=e[0]||null,this.loading=!1})}handleSentiments(){this.sentimentLoading=!0,this.sentimentService.getSentiments(0,0,0,0,0,this.discussion.discussionID,0,0,0).subscribe(e=>{this.meetingSentiments=e.filter(e=>[5,6,7].includes(e.sentimentCategoryID)).sort((e,t)=>e.sentimentRatingID=t.sentimentRatingID).map(t=>(t.riskComment=null,t.riskRating=0,5===t.sentimentCategoryID&&(t.riskComment=e.find(e=>7===e.sentimentCategoryID&&e.createdByContactID===t.createdByContactID).comment,t.riskRating=e.find(e=>7===e.sentimentCategoryID&&e.createdByContactID===t.createdByContactID).sentimentRatingID),t)),this.sentimentLoading=!1})}handleOwnerDiscussion(e){this.loading=!0,this.taskService.getTaskOwners(0,0,0,0,e.referenceID).pipe(Object(V.a)(e=>(this.taskOwner=e[0],this.taskOwners=e,this.taskService.getTask(e[0].taskID,0,0,0,0,0,0,0,!1))),Object(V.a)(e=>(this.task=e[0],this.discussionService.fetchDiscussions(0,0,0,0,this.taskOwner.discussionID))),Object(V.a)(e=>this.discussionService.fetchDiscussions(0,0,0,0,e[0].parentDiscussionID))).subscribe(e=>{37!==this.task.taskCategoryID&&(this.discussion=e[0],this.chatAdmin=this.discussion.discussionCreatedByContactID===this.contactID),this.taskStatusID=this.taskOwner.taskStatusID,this.task.taskOwners=this.taskOwners,37!==this.task.taskCategoryID&&this.getOwnerDiscussions(),this.getSupporters()})}getSupporters(){this.taskService.getTaskSupporters(this.taskOwner.taskID).subscribe(e=>{this.taskSupporters=e,this.taskSupporters.length||(this.discussion.contactID=this.discussion.discussionCreatedByContactID,this.taskSupporters.push(this.discussion)),this.taskSupporters=this.taskSupporters.map(e=>(e.me=this.contactID===e.contactID,e)),this.taskSupporter=e.find(e=>e.contactID===this.contactID),this.task.taskSupporters=this.taskSupporters,this.loading=!1})}getTask(){this.taskLoading=!0,this.taskService.getTask(0,0,this.discussion.discussionID,0,0,0,0,0,!1).pipe(Object(V.a)(e=>{const t=[];return e[0]&&(this.task=e[0],t.push(this.taskService.getTaskOwners(this.task.taskID)),t.push(this.taskService.getTaskSupporters(this.task.taskID))),t.length?Object(r.a)(t):Object(E.a)([])})).subscribe(e=>{var t;if(this.taskOwners=Object(c.j)(e[0]||[],"taskOwnerID"),this.taskOwners=this.taskOwners.map(e=>(e.me=this.contactID===e.contactID,e)),this.taskOwner=this.taskOwners.find(e=>e.contactID===this.contactID)||null,this.taskSupporter=this.taskSupporters.find(e=>e.contactID===this.contactID)||null,this.taskSupporters=e[1]||[],this.taskSupporters.length||(this.discussion.contactID=this.discussion.discussionCreatedByContactID,this.taskSupporters.push(this.discussion),this.taskSupporter=this.taskSupporters[0]),this.taskSupporters=this.taskSupporters.map(e=>(e.me=this.contactID===e.contactID,e)),this.taskOwner&&(this.taskStatusID=this.taskOwner.taskStatusID,this.taskOwner.discussionID&&this.getOwnerDiscussions()),37===(null===(t=this.task)||void 0===t?void 0:t.taskCategoryID)&&this.discussion.discussionBody.includes('href="#"')&&this.taskOwner&&this.taskOwner.contactID===this.contactID){const e=Z.a.fullDomain()+`/explore/people/${this.contactID}?taskID=${this.task.taskID}`;this.discussion.discussionBody=this.discussion.discussionBody.replace('href="#"',`href="${e}"`)}this.taskLoading=!1})}getOwnerDiscussions(){this.discussionsLoading=!0,this.discussionService.fetchDiscussions(0,0,0,this.taskOwner.discussionID).subscribe(e=>{this.ownerDiscussions=e.reverse(),this.discussionsLoading=!1,this.scrollToBottom()})}getMembers(){this.discussionService.getAllMembers(this.discussion.discussionID).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.member=e.find(e=>e.contactID!==this.contactID),this.member||(this.member=this.discussion),this.members=e.map(e=>(e.me=e.contactID===this.contactID,e));const t=this.members.findIndex(e=>e.contactID===this.contactID);if(-1!==t&&this.members.unshift(this.members.splice(t,1)[0]),e.forEach(e=>{this.contacts.push(e)}),this.contacts.some(e=>e.contactID!==this.discussion.discussionCreatedByContactID)){const e=this.discussion;e.contactID=this.discussion.discussionCreatedByContactID,this.contacts.push(e)}this.mentorNetworkAdmins=this.members.filter(e=>1===e.discussionMemberTypeID),this.mentorNetworkAdmin=this.members.find(e=>1===e.discussionMemberTypeID&&e.contactID===this.contactID),this.lastSeenFeature()})}onClose(){this.closed.emit(!0)}openMembers(){if(116===this.discussion.discussionCategoryID){const e=this.modal.open(xn,{backdrop:"static",size:"lg"});e.componentInstance.taskOwners=this.taskOwners,e.componentInstance.documents=this.discussion.documents,e.result.then(e=>{this.task&&37===this.task.taskCategoryID?(this.ownerContactID=e.contactID,this.targetOwner=this.taskOwners.find(t=>t.contactID===e.contactID)):this.readDiscussion.emit(e)})}}onDiscussionAdded(e){this.discussionAdded.emit(e)}ownerDiscussionAdded(e){this.ownerDiscussions.push(e)}edit(){if(116!==this.discussion.discussionCategoryID)this.editDiscussion=this.discussion;else{const e=this.modal.open(Cn.a,{backdrop:"static",size:"lg",keyboard:!1});e.componentInstance.taskOwners=[],e.componentInstance.taskSupporters=[],e.componentInstance.task=Object(c.l)(this.task)}}delete(){this.task?this.deleteTask():this.onDeleteDiscussion(this.discussion)}deleteTask(){}onDeleteDiscussion(e){const t=this.modal.open(te.a);t.componentInstance.objectType="Message",t.result.then(t=>{"Yes"===t&&this.discussionService.deleteDiscussion(e.discussionID).subscribe(()=>{const t=this.discussion.childDiscussions.findIndex(t=>t.discussionID===e.discussionID),n=this.ownerDiscussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&(this.discussion.childDiscussions.splice(t,1),124===e.discussionCategoryID&&(this.discussion.childDiscussions=Object(c.l)(this.discussion.childDiscussions))),-1!==n&&this.ownerDiscussions.splice(n,1),this.discussionDeleted.emit(e);const i={date:U().format(z.c),channel:"dashboard",reference:e.discussionID,notificationType:H.a.discussionNotificationDelete,senderId:this.contactID,receivers:this.members.filter(e=>e.contactID!==this.contactID).map(e=>e.contactID)};this.signalRService.transferMessage("dashboard",i)})})}discussionUpdated(e){this.editDiscussion=null,this.discussion.discussionID===e.discussionID&&(e.childDiscussions=this.discussion.childDiscussions||[],this.discussion=Object(c.l)(e));const t=this.discussion.childDiscussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&(e.childDiscussions=this.discussion.childDiscussions[t].childDiscussions||[],this.discussion.childDiscussions[t]=Object(c.l)(e)),this.discussionUpdate.emit(e)}getDmDiscussions(){this.loading=!0,this.discussionService.fetchDiscussions(0,0,0,this.discussion.discussionID,0,0).subscribe(e=>{let t=e.reverse();t=t.map((e,n)=>(e.isSameTime=n>0&&Object(c.b)(t[n-1],e),e.isSameDate=n>0&&Object(c.f)(t[n-1],e),e)),this.discussion.childDiscussions=t,this.scrollToBottom(),this.loading=!1})}onShowMentor(e){this.showMentor.emit(e)}submitMentor(){this.loading=!0,this.riskSentiment.sentimentID&&this.mentorSentiment.sentimentID?(this.mentorSentiment.riskComment=this.riskSentiment.comment,this.mentorSentiment.riskRating=this.riskSentiment.sentimentRatingID,this.mentorSentiment.sentimentDetail="of "+this.mentee.companyName,this.meetingOwner.taskStatusID=3,this.meetingOwner.dateSentForSignOff=U().utc().format(z.c),this.taskService.updateTaskOwner(this.meetingOwner).subscribe(),this.sentimentService.updateSentiment(this.riskSentiment).subscribe(),this.sentimentService.updateSentiment(this.mentorSentiment).subscribe(),this.updateSentimentDiscussion(this.riskSentiment.comment,this.riskSentiment.sentimentID),this.loading=!1):(this.riskSentiment.contactID=this.contactID,this.riskSentiment.createdByContactID=this.contactID,this.riskSentiment.referenceID=this.discussion.discussionID,this.riskSentiment.createdByCompanyID=this.mentee.companyID,this.riskSentiment.sentimentCategoryID=7,this.riskSentiment.datePosted=U().utc().format(z.c),this.riskSentiment.firstname=this.user.firstName,this.riskSentiment.surname=this.user.surname,this.riskSentiment.profilePhoto=this.user.profilePhoto,this.mentorSentiment.contactID=this.contactID,this.mentorSentiment.createdByContactID=this.contactID,this.mentorSentiment.referenceID=this.discussion.discussionID,this.mentorSentiment.createdByCompanyID=this.mentee.companyID,this.mentorSentiment.sentimentCategoryID=5,this.mentorSentiment.datePosted=U().utc().format(z.c),this.mentorSentiment.firstname=this.user.firstName,this.mentorSentiment.surname=this.user.surname,this.mentorSentiment.profilePhoto=this.user.profilePhoto,this.mentorSentiment.riskComment=this.riskSentiment.comment,this.mentorSentiment.riskRating=this.riskSentiment.sentimentRatingID,this.mentorSentiment.sentimentDetail="of "+this.mentee.companyName,Object(Kt.b)(this.sentimentService.addSentiment(this.riskSentiment),this.sentimentService.addSentiment(this.mentorSentiment)).subscribe(e=>{this.riskSentiment.sentimentID=e[0].inOut_SentimentID,this.mentorSentiment.sentimentID=e[1].inOut_SentimentID,this.meetingSentiments.push(this.riskSentiment),this.meetingSentiments.push(this.mentorSentiment),this.meetingOwner.taskStatusID=3,this.meetingOwner.dateSentForSignOff=U().utc().format(z.c),this.taskService.updateTaskOwner(this.meetingOwner).subscribe(),this.postSentimentDiscussions(this.riskSentiment.comment,this.riskSentiment.sentimentID),this.loading=!1}))}submitMentee(){this.loading=!0,this.menteeSentiment.sentimentID?(this.meetingOwner.taskStatusID=3,this.meetingOwner.dateSentForSignOff=U().utc().format(z.c),this.menteeSentiment.sentimentDetail=`of ${this.mentee.assigneeFirstName} ${this.mentee.assigneeSurname}`,this.taskService.updateTaskOwner(this.meetingOwner).subscribe(),this.sentimentService.updateSentiment(this.menteeSentiment).subscribe(),this.updateSentimentDiscussion(this.menteeSentiment.comment,this.menteeSentiment.sentimentID),this.loading=!1):(this.menteeSentiment.contactID=this.contactID,this.menteeSentiment.createdByContactID=this.mentee.contactID,this.menteeSentiment.referenceID=this.discussion.discussionID,this.menteeSentiment.createdByCompanyID=this.companyID,this.menteeSentiment.sentimentCategoryID=6,this.menteeSentiment.datePosted=U().utc().format(z.c),this.menteeSentiment.firstname=this.user.firstName,this.menteeSentiment.surname=this.user.surname,this.menteeSentiment.profilePhoto=this.user.profilePhoto,this.menteeSentiment.sentimentDetail=`of ${this.mentee.assigneeFirstName} ${this.mentee.assigneeSurname}`,this.sentimentService.addSentiment(this.menteeSentiment).subscribe(e=>{this.menteeSentiment.sentimentID=e.inOut_SentimentID,this.meetingSentiments.push(this.menteeSentiment),this.meetingOwner.taskStatusID=3,this.meetingOwner.dateSentForSignOff=U().utc().format(z.c),this.taskService.updateTaskOwner(this.meetingOwner).subscribe(),this.postSentimentDiscussions(this.menteeSentiment.comment,this.menteeSentiment.sentimentID),this.loading=!1}))}onSentimentEdit(){this.meetingOwner.taskStatusID=2,this.riskSentiment=this.meetingSentiments.find(e=>7===e.sentimentCategoryID&&e.contactID===this.contactID),this.menteeSentiment=this.meetingSentiments.find(e=>6===e.sentimentCategoryID&&e.contactID===this.contactID),this.mentorSentiment=this.meetingSentiments.find(e=>5===e.sentimentCategoryID&&e.contactID===this.contactID)}updateSentimentDiscussion(e,t){const n=this.discussion.childDiscussions.find(e=>e.referenceID===t&&e.discussionCreatedByContactID===this.contactID&&0===e.discussionValue);n&&(n.discussionBody=e.substr(0,30)+"...",this.discussionService.updateDiscussion(n).subscribe(()=>{const e={date:U().format(z.c),reference:n.discussionID,senderId:this.contactID,channel:"dashboard",notificationType:H.a.discussionNotificationUpdate,receivers:this.mentorNetworkAdmins.map(e=>e.contactID)};this.signalRService.transferMessage("dashboard",e)}))}postSentimentDiscussions(e,t){const n={discussionTopic:"Re: "+this.discussion.discussionTopic,discussionCategoryID:124,isDirectMessage:!0,discussionCreatedByContactID:this.contactID,discussionBody:e.substr(0,30)+"...",referenceID:t,discussionValue:0,parentDiscussionID:this.discussion.discussionID};this.discussionService.insertDiscussion(n).subscribe(e=>{e.discussionID=e.inOut_DiscussionID,e.contactID=this.user.contactID,e.firstName=this.user.firstName,e.surname=this.user.surname,e.profilePhoto=this.user.profilePhoto,e.dateCreated=U().format(z.c),this.discussionAdded.emit(e),this.discussion.childDiscussions?this.discussion.childDiscussions.push(e):this.discussion.childDiscussions=[e],this.mentorNetworkAdmins.forEach(t=>{if(t.contactID!==this.contactID){const n=new G;n.contactID=t.contactID,n.discussionID=e.discussionID,n.hasAccepted=!0,n.dateAccepted=U().utc().format(z.c),n.isAdmin=!1,n.submittedByContactID=this.contactID,this.discussionService.addMember(n).subscribe()}});const t={date:U().format(z.c),body:this.user.firstName+" posted a session review",topic:this.user.firstName+" posted a session review",senderFullName:this.user.firstName+" "+this.user.surname,channel:"dashboard",reference:e.discussionID,notificationType:H.a.discussionNotification,senderId:this.companyID,receivers:this.mentorNetworkAdmins.map(e=>e.contactID)};this.signalRService.transferMessage("dashboard",t),this.loading=!1})}onOwnerSelect(e){this.targetOwner=this.taskOwners.find(t=>t.contactID===e),this.ownerContactID=e}onOwnerDeselect(){this.ownerContactID=null,this.targetOwner=null}lastSeenFeature(){const e=this.members.find(e=>e.contactID===this.contactID);e&&(e.lastReadDate=U().utc().format(z.c),this.discussionService.updateMember(e).subscribe())}initSignalHub(){this.signalRService.transferMessageEvent.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{if(this.channel===e.channel){const t=e.message;if(t.type===ne.a.typingIndicator){const e=t.data,n=this.typingIndicator.findIndex(t=>t.id===e.id);-1!==n?e.typing||this.typingIndicator.splice(n,1):e.typing&&this.typingIndicator.push(e)}}})}scrollToBottom(){setTimeout(()=>{var e,t;this.chatContainer&&this.perfectScroll.directiveRef.scrollToTop(null===(t=null===(e=this.chatContainer)||void 0===e?void 0:e.nativeElement)||void 0===t?void 0:t.scrollHeight,10)},0)}scrollToLatest(){this.isScrollUp||this.scrollToBottom()}onScrollChat(e){const t=e.target||e.srcElement;this.isScrollUp=t.scrollHeight-t.scrollTop-t.offsetHeight>100,0!==t.scrollTop||this.pageLoading||this.loadMore()}loadMore(){this.pageSize++,this.pageLoading=!0,this.discussionService.fetchDiscussions(0,0,0,this.discussion.discussionID,0,0,this.pageSize).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e.length>0?(this.discussion.childDiscussions=[...this.discussion.childDiscussions,...e.reverse()],this.discussion.childDiscussions.forEach((e,t)=>this.consumeDiscussion(e,t))):this.pageSize--,this.pageLoading=!1},()=>{this.pageLoading=!1,this.pageSize--})}consumeDiscussion(e,t){e.isSameTime=t>0&&Object(c.b)(this.discussion.childDiscussions[t-1],e),e.isSameDate=t>0&&Object(c.f)(this.discussion.childDiscussions[t-1],e),e.replyDiscussionID&&(e.repliedDiscussion=this.discussion.childDiscussions.find(t=>t.discussionID===e.replyDiscussionID))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.lastSeenFeature(),this.signalRService.leaveChannel(this.channel)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](I.a),u["\u0275\u0275directiveInject"](x.a),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](v.p),u["\u0275\u0275directiveInject"](ue.a),u["\u0275\u0275directiveInject"](Sn.a),u["\u0275\u0275directiveInject"](f.a),u["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notification-discussion"]],viewQuery:function(e,t){if(1&e&&(u["\u0275\u0275viewQuery"](vi,!0),u["\u0275\u0275viewQuery"](xi,!0)),2&e){let e;u["\u0275\u0275queryRefresh"](e=u["\u0275\u0275loadQuery"]())&&(t.chatContainer=e.first),u["\u0275\u0275queryRefresh"](e=u["\u0275\u0275loadQuery"]())&&(t.perfectScroll=e.first)}},inputs:{Data:["taskDiscussion","Data"],Value:["activeDiscussion","Value"],discussions:"discussions"},outputs:{closed:"closed",discussionAdded:"discussionAdded",discussionUpdate:"discussionUpdate",discussionDeleted:"discussionDeleted",readDiscussion:"readDiscussion",showMentor:"showMentor"},decls:11,vars:7,consts:[[1,"task-right-panel","d-flex","flex-column"],[1,"d-flex","w-100","flex-column","flex-grow-1","h-100",3,"avnonLoader"],[1,"d-flex","flex-column","w-100","docked"],[1,"d-flex","pl-3","pr-3","subject-header","border-bottom","align-items-center"],[1,"mb-0","mt-1","mr-auto"],[4,"ngIf"],["class","actions ml-2",4,"ngIf"],[1,"fas","fa-times","ml-2",3,"click"],[3,"fullScreen","task","discussion","taskOwner","supporter","mentorContactID","discussionAdded","close",4,"ngIf"],[1,"actions","ml-2"],["ngbDropdown","","placement","bottom-right"],["type","button","ngbDropdownToggle","",1,"btn","btn-30"],[1,"ico","dots-ico"],["ngbDropdownMenu",""],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],[2,"max-height","100%"],["perfectScroll",""],[1,"d-flex","flex-column",3,"scroll"],["chatContainer",""],["class","page-header new-page-header pt-3",4,"ngIf"],[1,"form-group","pl-3","pr-3","pt-3","flex-grow-1"],["class","d-flex flex-column mb-2 pb-2 border-bottom",4,"ngIf"],["class","typing-indicator px-2",4,"ngIf"],["class","sticky-form",3,"members","discussion","subDiscussion","taskOwner","taskSupporter","task","chatAdmin","contacts","supporterTaskStatusID","taskOwners","taskStatusID","taskSupporters","ownerContactID","ownerDiscussionAdded","discussionAdded",4,"ngIf"],["class","sticky-form",3,"editDiscussion","members","discussionUpdated","discarded",4,"ngIf"],[1,"page-header","new-page-header","pt-3"],[1,"profile-photos","d-flex","pl-3","pr-3"],[1,"photo-group","d-flex"],[1,"user-photo"],["alt","logo",1,"img-fluid","profile-user","cover",3,"src"],[1,"profile-info","d-flex","flex-column","ml-3","mt-auto","mb-auto"],[1,"meta","mb-2"],[1,"d-flex","flex-column","mb-2","pb-2","border-bottom"],[1,"recipient-list","w-100","d-flex"],[1,"media","avatar","avatar-32","avatar-32-rounded","mr-0"],["class","img-fluid img-32 cover","alt","Avatar",3,"src",4,"ngIf"],["class","avatar-generated",3,"background-color",4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1","ml-2"],[1,"mb-035r","lh-1","fz-14","font-weight-normal"],[1,"lh-1","mb-035r","fz-14"],["class","d-flex lh-1 mb-2",3,"cursor-pointer","click",4,"ngIf"],[1,"w-100",3,"contactID","parentDiscussion","trackAudit","activeDiscussion","onEdit","onDelete","showMentor"],["alt","Avatar",1,"img-fluid","img-32","cover",3,"src"],[1,"avatar-generated"],[1,"d-flex","lh-1","mb-2",3,"click"],["class","meta mb-0 ml-1",4,"ngIf"],["class","fas fa-chevron-down ml-1 mb-0",4,"ngIf"],[1,"meta","mb-0","ml-1"],[4,"ngFor","ngForOf"],[1,"fas","fa-chevron-down","ml-1","mb-0"],["class","d-flex flex-column flex-grow-1 pl-2 pr-2",3,"submit",4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1","pl-2","pr-2",3,"submit"],["menteeForm","ngForm"],[1,"form-group","mt-4","d-flex","flex-column"],["for","mentorComment",1,"font-weight-bold"],["name","menteeRating","required","",1,"fz-19",3,"max","ngModel","ngModelChange"],[1,"comment-input"],["required","","id","menteeComment","placeholder","Outline main topics","name","menteeComment","autosize","","rows","2",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mt-auto","text-right","pt-2"],[1,"btn","btn-primary",3,"disabled"],["mentorForm","ngForm"],["name","mentorRating","required","",1,"fz-19",3,"max","ngModel","ngModelChange"],["required","","id","mentorComment","placeholder","Your overall impression of the company","name","mentorComment","autosize","","rows","2",1,"form-control",3,"ngModel","ngModelChange"],["for","riskComment",1,"font-weight-bold"],["name","riskRating","required","",1,"fz-19",3,"max","ngModel","ngModelChange"],["required","","id","riskComment","placeholder","Provide a brief summary of how the company is doing overall and any areas of concern / risks you've identified","name","riskComment","autosize","","rows","2",1,"form-control",3,"ngModel","ngModelChange"],[3,"sentiment","contactID","networkAdmin","discussion","members","i","onDelete","discussionUpdate","discussionAdded","edited",4,"ngIf"],[3,"sentiment","contactID","networkAdmin","discussion","members","i","onDelete","discussionUpdate","discussionAdded","edited"],["class","d-flex flex-column",3,"ngClass",4,"ngFor","ngForOf"],[1,"d-flex","flex-column",3,"ngClass"],[1,"w-100",3,"trackAudit","activeDiscussion","hideRecipient","parentDiscussion","members","contactID","onEdit","onDelete"],["class","d-flex flex-column mt-1 border-bottom pb-2 mb-2",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","mt-1","border-bottom","pb-2","mb-2"],[1,"w-100",3,"trackAudit","activeDiscussion","members","parentDiscussion","hideRecipient","contactID","onDelete","onEdit"],[1,"typing-indicator","px-2"],["class","typing-item",4,"ngFor","ngForOf"],[1,"typing-item"],[1,"sticky-form",3,"members","discussion","subDiscussion","taskOwner","taskSupporter","task","chatAdmin","contacts","supporterTaskStatusID","taskOwners","taskStatusID","taskSupporters","ownerContactID","ownerDiscussionAdded","discussionAdded"],[1,"sticky-form",3,"editDiscussion","members","discussionUpdated","discarded"],[3,"fullScreen","task","discussion","taskOwner","supporter","mentorContactID","discussionAdded","close"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"h3",4),u["\u0275\u0275text"](5),u["\u0275\u0275template"](6,yi,2,0,"span",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](7,Si,10,1,"div",6),u["\u0275\u0275elementStart"](8,"i",7),u["\u0275\u0275listener"]("click",function(){return t.onClose()}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](9,es,14,12,"ng-container",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](10,ts,1,6,"app-notification-mentor-profile",8)),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("avnonLoader",t.loading||t.taskLoading||t.sentimentLoading||t.discussionsLoading),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"](" ",null==t.discussion?null:t.discussion.discussionTopic," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",116===(null==t.discussion?null:t.discussion.discussionCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",(null==t.discussion?null:t.discussion.discussionCreatedByContactID)===t.contactID&&!u["\u0275\u0275pureFunction0"](6,Zi).includes(null==t.discussion?null:t.discussion.discussionCategoryID)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.discussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.ownerContactID))},directives:[y.a,i.n,v.i,v.m,v.k,de.b,Ke,i.m,ae.E,ae.r,ae.s,v.w,ae.A,ae.q,ae.t,ae.b,kn.a,_n,i.l,ut,It,bi],pipes:[pe.a,i.e,me.a,he,i.v],styles:["quill-view-html .ql-container{font-size:15px!important;height:auto}  quill-view-html .ql-editor{padding-left:0;padding-right:0}.add-contact[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;padding:0;min-height:30px}.subject-input[_ngcontent-%COMP%]{border:0;border-bottom:1px solid #dfdfdf;border-radius:0;line-height:44px;height:44px;padding:0 1rem}.subject-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{box-shadow:none!important;border-bottom:1px solid #dc3545}.subject-input[_ngcontent-%COMP%]:focus{border:0;border-bottom:1px solid #d64b2b;box-shadow:none;outline:0}.recipient-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.recipient-header.has-contact[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.recipient[_ngcontent-%COMP%]{height:30px;line-height:30px}.tag-alt[_ngcontent-%COMP%]{font-size:14px!important;cursor:pointer}.tag-alt[_ngcontent-%COMP%]:hover{opacity:.8}.header-action[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.default-action-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:0}.default-action-btn[_ngcontent-%COMP%]:focus, .default-action-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:0;outline:none;box-shadow:none}.default-action-btn[_ngcontent-%COMP%]:disabled{opacity:.9}.discard-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #7c7c7c;color:#c26555}.discard-btn[_ngcontent-%COMP%]:focus, .discard-btn[_ngcontent-%COMP%]:hover{opacity:.8}.btn[_ngcontent-%COMP%]{font-size:15px!important}.form-wrapper[_ngcontent-%COMP%]{box-shadow:0 0 3px 0 #d0d0d0;border-radius:5px}.subject-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.subject-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:38px;line-height:38px}.docked[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:1}.email-wrap[_ngcontent-%COMP%]{padding-left:32px}.recipient-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#88898a}.supporter-btn[_ngcontent-%COMP%]{color:#c26555;background:none;border:1px solid #c26555}.supporter-btn[_ngcontent-%COMP%]:focus, .supporter-btn[_ngcontent-%COMP%]:hover{background:#d9d9d9;border:1px solid #d9d9d9;outline:none;box-shadow:none}.supporter-btn.active[_ngcontent-%COMP%]{background:#c26555;color:#fff}.sticky-form[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff}"]}),e})(),is=(()=>{class e{constructor(e){this.userService=e,this.user=this.userService.user.getValue(),this.contactID=this.user.contactID}transform(e,t=1,n=!1){return e=1===t?e.filter(e=>e.discussionCreatedByContactID!==this.contactID||117!==e.discussionCategoryID&&e.discussionValue||e.unreadMessageCount>0||1===e.discussionCategoryID||[123,123,124].includes(e.discussionCategoryID)):2===t?e.filter(e=>e.discussionCreatedByContactID===this.contactID):[],n?e.reduce((e,t)=>e+Number(t.unreadMessageCount),0):e.map(e=>{var t,n,i,s,o,a,r;if(e.childDiscussions=e.childDiscussions.sort((e,t)=>new Date(e.dateCreated).getTime()-new Date(t.dateCreated).getTime()),1===e.discussionCategoryID){e.dateCreated=e.latestMessagePosted||e.dateCreated,e.contactFullName=e.discussionTopic;const s=(null===(t=e.contactFullName)||void 0===t?void 0:t.split(" "))||[],o=(null===(n=s[0])||void 0===n?void 0:n.substr(0,1))||"N",a=(null===(i=s[s.length-1])||void 0===i?void 0:i.substr(0,1))||"N";e.contactInitial=`${o}${a}`}else if(e.latestMessagePosted=e.dateCreated,e.latestMessage=e.discussionBody,e.contactFullName=`${e.firstName} ${e.surname}`,e.contactInitial=`${null===(s=e.firstName)||void 0===s?void 0:s.substr(0,1)}${null===(o=e.surname)||void 0===o?void 0:o.substr(0,1)}`,e.targetContactID=e.discussionCreatedByContactID,e.discussionBody.includes("{firstname}")&&(e.discussionBody=e.discussionBody.replace("{firstname}",this.user.firstName)),e.childDiscussions.length){const t=e.childDiscussions.slice(-1)[0];e.latestMessagePosted=t.dateCreated,e.latestMessage=t.discussionBody,e.contactFullName=`${t.firstName} ${t.surname}`,e.contactInitial=`${null===(a=t.firstName)||void 0===a?void 0:a.substr(0,1)}${null===(r=t.surname)||void 0===r?void 0:r.substr(0,1)}`,e.profilePhoto=t.profilePhoto,e.targetContactID=e.contactID}return e}).sort((e,t)=>t.unreadMessageCount>0?t.unreadMessageCount-e.unreadMessageCount:new Date(t.latestMessagePosted).getTime()-new Date(e.latestMessagePosted).getTime())}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](p.a))},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"boxFilter",type:e,pure:!0}),e})();var ss=n("8ZIy");function os(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",25),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"boxFilter"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind3"](2,1,e.discussions,1,!0))}}function as(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",25),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](e.unreadCount)}}function rs(e,t){1&e&&u["\u0275\u0275element"](0,"span",42)}function cs(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",43),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function ds(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",44),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,3,e.targetContactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.contactInitial," ")}}function ls(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",45),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275elementStart"](1,"div",46),u["\u0275\u0275elementStart"](2,"button",47),u["\u0275\u0275element"](3,"span",48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ul",49),u["\u0275\u0275elementStart"](5,"li"),u["\u0275\u0275elementStart"](6,"a",50),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](2).removeDiscussion(t)}),u["\u0275\u0275text"](7,"Remove"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275classProp"]("disabled",e.deleting)}}const us=function(e){return{"main-blue-color font-weight-bold":e}};function ms(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"tr"),u["\u0275\u0275elementStart"](1,"td",27),u["\u0275\u0275elementStart"](2,"div",28),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"](2).viewDiscussion(n)}),u["\u0275\u0275template"](3,rs,1,0,"span",29),u["\u0275\u0275elementStart"](4,"span",30),u["\u0275\u0275template"](5,cs,2,3,"img",31),u["\u0275\u0275template"](6,ds,3,5,"span",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",33),u["\u0275\u0275elementStart"](8,"div",34),u["\u0275\u0275elementStart"](9,"h3",35),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](11,ls,8,2,"div",36),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",37),u["\u0275\u0275elementStart"](13,"div",38),u["\u0275\u0275element"](14,"span",39),u["\u0275\u0275pipe"](15,"safeHtml"),u["\u0275\u0275elementStart"](16,"span",40),u["\u0275\u0275text"](17),u["\u0275\u0275pipe"](18,"dayAgo"),u["\u0275\u0275pipe"](19,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](20,"div",41),u["\u0275\u0275pipe"](21,"safeHtml"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("unread-fill",e.unreadMessageCount>0)("list-active-fill",e.discussionID===(null==n.activeDiscussion?null:n.activeDiscussion.discussionID)||22===e.discussionValue&&n.mentorContactID===e.discussionCreatedByContactID&&n.activeDiscussionID===e.discussionID),u["\u0275\u0275property"]("avnonLoader",e.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.targetContactID&&1===e.discussionCategoryID&&n.onlineIndicator.includes(e.targetContactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.profilePhoto),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("font-weight-normal",!e.unreadMessageCount),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.contactFullName," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!(null!=e&&e.deleting)&&n.showToggle),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](15,18,1===e.discussionCategoryID?"Direct Message":e.discussionTopic),u["\u0275\u0275sanitizeHtml"])("ngClass",u["\u0275\u0275pureFunction1"](29,us,e.unreadMessageCount>0)),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("main-blue-color",e.unreadMessageCount>0),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind4"](18,20,u["\u0275\u0275pipeBind1"](19,25,e.latestMessagePosted),!1,!1,!0)," "),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](21,27,e.latestMessage),u["\u0275\u0275sanitizeHtml"])}}function ps(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,ms,22,31,"tr",26),u["\u0275\u0275pipe"](2,"boxFilter"),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind2"](2,1,e.discussions,1))}}function hs(e,t){1&e&&u["\u0275\u0275element"](0,"span",53)}function fs(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",43),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function gs(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",44),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,3,e.discussionCreatedByContactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.contactInitial," ")}}function Ds(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",45),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275elementStart"](1,"div",46),u["\u0275\u0275elementStart"](2,"button",47),u["\u0275\u0275element"](3,"span",48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ul",49),u["\u0275\u0275elementStart"](5,"li"),u["\u0275\u0275elementStart"](6,"a",50),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](2).removeDiscussion(t)}),u["\u0275\u0275text"](7,"Remove"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275classProp"]("disabled",e.deleting)}}function Is(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"tr"),u["\u0275\u0275elementStart"](1,"td",27),u["\u0275\u0275elementStart"](2,"div",28),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"](2).viewDiscussion(n)}),u["\u0275\u0275template"](3,hs,1,0,"span",51),u["\u0275\u0275elementStart"](4,"span",30),u["\u0275\u0275template"](5,fs,2,3,"img",31),u["\u0275\u0275template"](6,gs,3,5,"span",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",33),u["\u0275\u0275elementStart"](8,"div",34),u["\u0275\u0275elementStart"](9,"h3",35),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](11,Ds,8,2,"div",36),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",37),u["\u0275\u0275elementStart"](13,"div",38),u["\u0275\u0275element"](14,"span",39),u["\u0275\u0275pipe"](15,"safeHtml"),u["\u0275\u0275elementStart"](16,"span",52),u["\u0275\u0275text"](17),u["\u0275\u0275pipe"](18,"dayAgo"),u["\u0275\u0275pipe"](19,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](20,"div",41),u["\u0275\u0275pipe"](21,"safeHtml"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("unread-fill",e.unreadMessageCount>0)("list-active-fill",e.discussionID===(null==n.activeDiscussion?null:n.activeDiscussion.discussionID)),u["\u0275\u0275property"]("avnonLoader",e.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.targetContactID&&1===e.discussionCategoryID&&n.onlineIndicator.includes(e.targetContactID)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.profilePhoto),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("font-weight-normal",!e.unreadMessageCount),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.contactFullName," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!(null!=e&&e.deleting)&&n.showToggle),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](15,18,1===e.discussionCategoryID?"Direct Message":e.discussionTopic),u["\u0275\u0275sanitizeHtml"])("ngClass",u["\u0275\u0275pureFunction1"](29,us,e.unreadMessageCount>0)),u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("main-blue-color",e.unreadMessageCount>0),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind4"](18,20,u["\u0275\u0275pipeBind1"](19,25,e.latestMessagePosted),!1,!1,!0)," "),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("innerHTML",u["\u0275\u0275pipeBind1"](21,27,e.latestMessage),u["\u0275\u0275sanitizeHtml"])}}function bs(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Is,22,31,"tr",26),u["\u0275\u0275pipe"](2,"boxFilter"),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind2"](2,1,e.discussions,2))}}function vs(e,t){if(1&e&&(u["\u0275\u0275element"](0,"img",43),u["\u0275\u0275pipe"](1,"avatar")),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](1,1,e.notification.profilePhoto),u["\u0275\u0275sanitizeUrl"])}}function xs(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"span",44),u["\u0275\u0275pipe"](1,"dynamicColor"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275styleProp"]("background-color",u["\u0275\u0275pipeBind1"](1,4,e.notification.createdContact)),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",e.notification.firstNameCreatedContact.substr(0,1),"",e.notification.surnameCreatedContact.substr(0,1)," ")}}function ys(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",45),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275elementStart"](1,"div",46),u["\u0275\u0275elementStart"](2,"button",47),u["\u0275\u0275element"](3,"span",48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ul",49),u["\u0275\u0275elementStart"](5,"li"),u["\u0275\u0275elementStart"](6,"a",50),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"]().$implicit;return u["\u0275\u0275nextContext"](2).removeNotification(t.notification)}),u["\u0275\u0275text"](7,"Remove"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275classProp"]("disabled",e.notification.deleting)}}function Cs(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"tr"),u["\u0275\u0275elementStart"](1,"td",27),u["\u0275\u0275elementStart"](2,"div",28),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](e);const n=t.index;return u["\u0275\u0275nextContext"](2).onNotificationClick(n)}),u["\u0275\u0275elementStart"](3,"span",30),u["\u0275\u0275template"](4,vs,2,3,"img",31),u["\u0275\u0275template"](5,xs,3,6,"span",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",54),u["\u0275\u0275elementStart"](7,"div",34),u["\u0275\u0275elementStart"](8,"h3",35),u["\u0275\u0275text"](9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](10,ys,8,2,"div",36),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"div",37),u["\u0275\u0275elementStart"](12,"div",38),u["\u0275\u0275elementStart"](13,"span",55),u["\u0275\u0275text"](14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"span",52),u["\u0275\u0275text"](16),u["\u0275\u0275pipe"](17,"dayAgo"),u["\u0275\u0275pipe"](18,"dateObject"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",56),u["\u0275\u0275elementStart"](20,"p",57),u["\u0275\u0275text"](21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275classProp"]("unread-fill",!e.notification.notificationRead)("list-active-fill",e.notification.active||(null==e.notification?null:e.notification.referenceID)===((null==n.activeApplicant?null:n.activeApplicant.companyProgramInstanceStageID)||(null==n.activeTask?null:n.activeTask.taskID)||(null==n.activeEvent?null:n.activeEvent.eventID)||(null==n.formTaskOwner?null:n.formTaskOwner.taskOwnerID))),u["\u0275\u0275property"]("avnonLoader",e.notification.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",e.notification.profilePhoto),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.notification.profilePhoto),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("font-weight-normal",e.notification.notificationRead),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" ",e.notification.firstNameCreatedContact," ",e.notification.surnameCreatedContact," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!(null!=e&&e.notification.deleting)&&n.showToggle),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngClass",u["\u0275\u0275pureFunction1"](25,us,!e.notification.notificationRead)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.notification.notificationCategory||"Category"," "),u["\u0275\u0275advance"](1),u["\u0275\u0275classProp"]("main-blue-color",!e.notification.notificationRead),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind4"](17,18,u["\u0275\u0275pipeBind1"](18,23,e.notification.createdDate),!1,!1,!0)," "),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](e.notification.description)}}function Ss(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,Cs,22,27,"tr",26),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",e.notifications)}}function ks(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-event-rhp",58),u["\u0275\u0275listener"]("closed",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().activeEvent=null}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("activeEvent",e.activeEvent)}}function ws(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-event-minutes-rhp",58),u["\u0275\u0275listener"]("closed",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().activeEvent=null}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("activeEvent",e.activeEvent)}}function Os(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-admin-enrollment-stage-profile",59),u["\u0275\u0275listener"]("rhpClose",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().activeApplicant=null}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("activeApplicant",e.activeApplicant)("rhp",!0)}}function Es(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-form-report",60),u["\u0275\u0275listener"]("closeForm",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().formTaskOwner=null}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("taskOwnerID",e.formTaskOwner.taskOwnerID)("formID",e.formTaskOwner.formID)("formFieldAnswerCategoryID",1)("answerReferenceID",e.formTaskOwner.taskOwnerID)("rhp",!0)("formCategoryID",8)("activeTaskOwner",e.formTaskOwner)}}function Ms(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-add-notification",61),u["\u0275\u0275listener"]("discussionDeleted",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().discussionDelete(t)})("discussionUpdate",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().discussionUpdated(t)})("closed",function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().addDiscussion=!1})("showDM",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().showDM(t)})("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onDiscussionAdd(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("discussions",e.discussions)}}function Ps(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-discussion",62),u["\u0275\u0275listener"]("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onDiscussionAdd(t)})("discussionUpdate",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().discussionUpdated(t)})("discussionDeleted",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().discussionDelete(t)})("showMentor",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().mentor=t})("closed",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"]();return t.activeDiscussion=null,t.taskDiscussion=null})("readDiscussion",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().activeDiscussion=t}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("discussions",e.discussions)("taskDiscussion",e.taskDiscussion)("activeDiscussion",e.activeDiscussion)}}function js(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"app-notification-mentor-profile",63),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("showDM",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().showDM(t)})("close",function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275nextContext"]();return t.mentor=null,t.mentorContactID=null})("discussionAdded",function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onDiscussionAdd(t)}),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("contact",e.mentor)("fullScreen",!!e.mentor)("discussions",e.discussions)("mentorContactID",e.mentorContactID)}}const Ts=function(){return[4,12,13]},Fs=[{path:"",component:(()=>{class e{constructor(e,t,n,i,s,o,r,c,d,l,u,m,p){this.notificationService=e,this.cdr=t,this.userService=n,this.taskService=i,this.eventService=s,this.portfolioService=o,this.toastrService=r,this.discussionService=c,this.networkService=d,this.modal=l,this.router=u,this.signalRService=m,this.activatedRoute=p,this.discussions=[],this.receivedIDs=[],this.notifications=[],this.view=0,this.destroy$=new a.a,this.user=this.userService.user.getValue()}ngOnInit(){var e;this.contactID=this.user.contactID,this.discussionParamID=+(null===(e=this.activatedRoute.snapshot.queryParams)||void 0===e?void 0:e.discussionID),this.getNotifications(),this.handleSignalRNotification(),this.taskEvents(),this.getDiscussions(),this.userService.filterToggle.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.toggleFilter=!this.toggleFilter&&e})}getDiscussions(){const e={ContactID:this.contactID};this.discussionsLoading=!0,Object(r.a)(this.discussionService.fetchDiscussions(this.contactID,0,116,0,0,0),this.discussionService.fetchDiscussions(this.contactID,0,115,0,0,0),this.discussionService.fetchDiscussions(this.contactID,0,117),this.discussionService.getMasterDiscussions(e),this.discussionService.fetchDiscussions(this.contactID,0,124)).subscribe(e=>{let t=[...e[0],...e[1],...e[4]];const n=Object(c.k)(e[2],["discussionCreatedByContactID","parentDiscussionID"]);let i=e[3];if(i=i.filter(e=>1===e.discussionCategoryID&&e.targetContactID).map(e=>(e.unreadMessageCount=Number(e.unreadMessageCount),e)),t=[...t,...n,...i],t=t.map(e=>(e.childDiscussions=Object(c.j)(t.filter(t=>t.parentDiscussionID===e.discussionID),"discussionID"),e)),this.discussions=Object(c.j)(t,"discussionID").filter(e=>!e.parentDiscussionID||117===e.discussionCategoryID),this.discussionParamID){const e=this.discussions.find(e=>e.discussionID===this.discussionParamID);e&&this.viewDiscussion(e)}this.discussionsLoading=!1})}getNotifications(e=!0){e&&(this.loading=!0),this.notificationService.getAllNotifications(this.contactID,0,1e3).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e.length&&(this.notifications=e,this.cdr.detectChanges()),this.loading=!1})}get unreadCount(){return this.notifications.filter(e=>!e.notification.notificationRead).length}removeNotification(e){e.deleting=!0,this.notificationService.deleteNotification(e.notificationID).subscribe(()=>{this.notifications=this.notifications.filter(t=>t.notification.notificationID!==e.notificationID);const t=Object(c.l)(this.notifications);this.notificationService.notificationCount.next(t.filter(e=>!e.notification.notificationRead).length)},()=>{e.deleting=!1})}handleSignalRNotification(){this.notificationService.onNotificationReceived().pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e&&setTimeout(()=>{this.getNotifications()},100)}),this.notificationService.inboxReceived.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.receivedIDs.includes(e.reference)||(this.receivedIDs.push(e.reference),setTimeout(()=>{this.discussionService.fetchDiscussions(0,0,0,0,e.reference,0).subscribe(e=>{if(e[0]){const t=e[0];if(t.unreadMessageCount=1,t.childDiscussions=[],t.parentDiscussionID||117===t.discussionCategoryID){const e=this.discussions.findIndex(e=>e.discussionID===t.parentDiscussionID);if(-1!==e&&117!==t.discussionCategoryID){if(this.discussions[e].childDiscussions){const n=this.discussions[e].childDiscussions,i=this.discussions[e].childDiscussions.length;t.isSameTime=i>0&&Object(c.b)(n[i-1],t),t.isSameDate=i>0&&Object(c.f)(n[i-1],t),t.childDiscussions=[],this.discussions[e].latestMessage=t.discussionBody,this.discussions[e].childDiscussions.push(t),124===t.discussionCategoryID&&t.referenceID&&!t.discussionValue&&this.discussionService.refreshSentiment.next(t.discussionCreatedByContactID),[37,38].includes(t.discussionValue)&&(this.taskDiscussion=Object(c.l)(t))}else this.discussions[e].childDiscussions=[t],124===t.discussionCategoryID&&t.referenceID&&!t.discussionValue&&this.discussionService.refreshSentiment.next(t.discussionCreatedByContactID);124===t.discussionCategoryID&&this.activeDiscussion&&this.activeDiscussion.discussionID===t.parentDiscussionID&&(this.activeDiscussion.childDiscussions=Object(c.l)(this.discussions[e].childDiscussions)),this.discussions[e].unreadMessageCount+=1}const n=this.discussions.findIndex(e=>117===e.discussionCategoryID&&e.referenceID===t.referenceID&&e.discussionCreatedByContactID===t.discussionCreatedByContactID);-1!==n?(this.discussions[n]=t,this.taskDiscussion=Object(c.l)(t)):-1===n&&117===t.discussionCategoryID&&(this.discussions.unshift(t),this.taskDiscussion=Object(c.l)(t))}else{if(1===t.discussionCategoryID)return t.targetContactID=t.discussionCreatedByContactID,t.discussionTopic=`${t.firstName} ${t.surname}`,t.targetContactID=t.discussionCreatedByContactID,t.latestMessage=t.discussionBody,this.discussions.unshift(t),void(this.discussions=Object(c.l)(this.discussions));this.discussions.unshift(t)}if([8,9].includes(t.discussionCategoryID)){const e=this.discussions.findIndex(e=>e.discussionID===t.referenceID);-1!==e&&(this.discussions[e].unreadMessageCount+=1),this.taskDiscussion=Object(c.l)(t)}this.discussions=Object(c.l)(this.discussions)}})},100))}),this.notificationService.inboxDeleted.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{var t,n;const i=this.discussions.findIndex(t=>t.discussionID===e.reference);-1!==i&&this.discussions.splice(i,1);const s=this.discussions.findIndex(t=>t.childDiscussions.some(t=>t.discussionID===e.reference));if(-1!==s){const n=this.discussions[s].childDiscussions.findIndex(t=>t.discussionID===e.reference);-1!==n&&(this.discussions[s].childDiscussions.splice(n,1),(null===(t=this.activeDiscussion)||void 0===t?void 0:t.discussionID)===this.discussions[s].discussionID&&this.activeDiscussion.childDiscussions.splice(s,1))}if((null===(n=this.activeDiscussion)||void 0===n?void 0:n.discussionID)===e.reference&&(this.activeDiscussion=null),this.activeDiscussion&&124===this.activeDiscussion.discussionCategoryID){const e=this.discussions.findIndex(e=>e.discussionID===this.activeDiscussion.discussionID);-1!==e&&(this.activeDiscussion.childDiscussions=Object(c.l)(this.discussions[e].childDiscussions))}this.discussions=Object(c.l)(this.discussions)}),this.notificationService.inboxUpdated.pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.discussionService.fetchDiscussions(0,0,0,0,e.reference).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{var t;const n=e[0];if(n){const e=this.discussions.findIndex(e=>e.discussionID===n.discussionID);-1!==e&&(n.childDiscussions=this.discussions[e].childDiscussions,this.discussions[e]=Object(c.l)(n),(null===(t=this.activeDiscussion)||void 0===t?void 0:t.discussionID)===n.discussionID&&(this.activeDiscussion=Object(c.l)(n)));const i=this.discussions.findIndex(e=>e.childDiscussions.some(e=>e.discussionID===n.discussionID));if(-1!==i){const e=this.discussions[i].childDiscussions.findIndex(e=>e.discussionID===n.discussionID);-1!==e&&(n.isSameTime=this.discussions[i].childDiscussions[e].isSameTime,n.isSameDate=this.discussions[i].childDiscussions[e].isSameDate,this.discussions[i].childDiscussions[e]=n)}if(124===n.discussionCategoryID&&n.referenceID&&!n.discussionValue&&this.discussionService.refreshSentiment.next(n.discussionCreatedByContactID),this.activeDiscussion&&124===this.activeDiscussion.discussionCategoryID){const e=this.discussions.findIndex(e=>e.discussionID===this.activeDiscussion.discussionID);-1!==e&&(this.activeDiscussion.childDiscussions=Object(c.l)(this.discussions[e].childDiscussions))}this.discussions=Object(c.l)(this.discussions)}})})}onNotificationClick(e){const t=this.notifications[e].notification;t.referenceID&&[44,45].includes(t.notificationCategoryID)&&this.previewFormReport(e,t.referenceID),t.referenceID&&[12,23,24,46,47,3,4,14,25,26,38,39,40,42,43].includes(t.notificationCategoryID)&&this.previewTask(e,t.referenceID),t.referenceID&&[5,l.a.mention_discussion_item].includes(t.notificationCategoryID)&&this.showDiscussion(e,t.referenceID),t.referenceID&&[l.a.file_shared_document,l.a.folder_shared_document_folder].includes(t.notificationCategoryID),[9,8,7].includes(t.notificationCategoryID)&&t.referenceID&&this.previewEvent(e,t.referenceID),[55,54,17,13].includes(t.notificationCategoryID)&&this.explorePeople(e,t.createdContact),[27,30].includes(t.notificationCategoryID)&&t.referenceID?this.goToNetworkMember(e,t.referenceID):([51,52].includes(t.notificationCategoryID)&&t.referenceID&&this.previewApplicant(e,t.referenceID),t.referenceID&&50===t.notificationCategoryID&&this.router.navigate(["/apply",t.referenceID]),[35,36].includes(t.notificationCategoryID)&&this.router.navigate(["/enrollment/programs"]),t.notificationRead||(t.notificationRead=Object(c.a)(new Date),this.notificationService.updateNotification({notificationID:t.notificationID,notificationRead:!0,contactID:this.contactID}).subscribe()))}previewTask(e,t){const n=this.notifications[e].notification;n.loading=!0,this.taskService.getTask(t,0,0,0,0,0,0,0,!1).subscribe(t=>{if(t[0]){const n=t[0];if([23,24].includes(n.taskCategoryID)&&n.referenceID&&this.previewEvent(e,n.referenceID),18===n.taskCategoryID&&n.referenceID)return void this.previewEvent(e,n.referenceID);if(15===n.taskCategoryID&&n.referenceID)return void this.router.navigate(["review/stage",n.referenceID]);if([4,32,38].includes(n.taskCategoryID))return void this.router.navigate(["/task",n.taskID]);this.taskService.storeActiveTaskRx(n)}else this.toastrService.error("Task Not Found");n.loading=!1},()=>{n.loading=!1,this.toastrService.error("Task Not Found")})}previewEvent(e,t){this.addDiscussion=null,this.activeDiscussion=null;const n=this.notifications[e].notification;n.loading=!0,this.eventService.selectEvent(0,t).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e[0]?this.activeEvent=e[0]:this.toastrService.error("Event Not Found"),n.loading=!1},()=>{this.toastrService.error("Event Not Found"),n.loading=!1})}previewApplicant(e,t){const n=this.notifications[e].notification;n.loading=!0,this.portfolioService.getCompanyRoadmapStages(0,0,t,0,0,0).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{e[0]?this.activeApplicant=e[0]:this.toastrService.error("Applicant Not Found!"),n.loading=!1},()=>{this.toastrService.error("Applicant Not Found!"),n.loading=!1})}previewFormReport(e,t){const n=this.notifications[e].notification;n.loading=!0,this.taskService.getTaskOwners(0,0,0,0,t).pipe(Object(d.a)(this.destroy$)).subscribe(e=>{const t=e[0]||null;t?this.formTaskOwner=t:this.toastrService.error("Reference Not Fount"),n.loading=!1},()=>{this.toastrService.error("Reference Not Fount"),n.loading=!1})}taskEvents(){this.taskService.getActiveTaskRx().pipe(Object(d.a)(this.destroy$)).subscribe(e=>{this.activeTask=e})}exploreCompany(e,t){}explorePeople(e,t){}goToNetworkMember(e,t){}companyBaselineReport(e,t){}showDiscussion(e,t){}removeDiscussion(e){const t=this.discussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&(this.discussions.splice(t,1),this.discussions=Object(c.l)(this.discussions)),this.activeDiscussion&&this.activeDiscussion.discussionID===e.discussionID&&(this.activeDiscussion=null),e.discussionCreatedByContactID===this.contactID?this.discussionService.deleteDiscussion(e.discussionID).subscribe():this.discussionService.getAllMembers(e.discussionID).subscribe(e=>{const t=e.find(e=>e.contactID===this.contactID);t&&this.discussionService.deleteMember(t.discussionID,t.contactID).subscribe()})}onDiscussionAdd(e){if(this.mentorContactID=null,this.mentor=null,e.childDiscussions=[],e.unreadMessageCount=0,117===e.discussionCategoryID){const t=this.discussions.findIndex(t=>117===t.discussionCategoryID&&t.referenceID===e.referenceID&&t.discussionCreatedByContactID===e.discussionCreatedByContactID);-1!==t?this.discussions[t]=e:this.discussions.unshift(e)}else if(124===e.discussionCategoryID){const t=this.discussions.findIndex(t=>t.discussionID===e.parentDiscussionID);-1!==t&&(this.discussions[t].childDiscussions.push(e),this.activeDiscussion&&this.activeDiscussion.discussionID===e.parentDiscussionID&&(this.activeDiscussion.childDiscussions=Object(c.l)(this.discussions[t].childDiscussions)))}else if(116===e.discussionCategoryID&&e.parentDiscussionID){const t=this.discussions.findIndex(t=>t.discussionID===e.parentDiscussionID);-1!==t&&this.discussions[t].childDiscussions.push(e)}else this.discussions.unshift(e);const t=this.discussions.findIndex(t=>t.discussionID===e.parentDiscussionID);-1!==t&&1===this.discussions[t].discussionCategoryID&&(this.discussions[t].latestMessagePosted=e.dateCreated,this.discussions[t].latestMessage=e.discussionBody),this.discussions=Object(c.l)(this.discussions)}showDM(e){this.mentorContactID=null,this.mentor=null;const t=this.discussions.findIndex(t=>t.discussionID===e.discussionID);this.viewDiscussion(this.discussions[t])}viewDiscussion(e){if(this.addDiscussion=!1,this.mentorContactID=null,this.mentor=null,22===e.discussionValue)return this.mentorContactID=e.discussionCreatedByContactID,void(this.activeDiscussionID=e.discussionID);this.activeDiscussion=e,this.activeDiscussion.unreadMessageCount=0,e.unreadMessageCount=0;const t=this.discussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&(this.discussions[t].unreadMessageCount=0,this.discussions=Object(c.l)(this.discussions))}onAddDiscussion(){this.activeDiscussion=null,this.addDiscussion=!0,this.mentorContactID=null,this.mentor=null}onFilterClick(e){this.view=e,this.toggleFilter=!1}discussionUpdated(e){const t=this.discussions.findIndex(t=>t.discussionID===e.discussionID||t.childDiscussions.some(t=>t.discussionID===e.discussionID));if(-1!==t){const n=this.discussions[t];n.discussionID===e&&(this.discussions[t]=e);const i=n.childDiscussions.findIndex(t=>t.discussionID===e.discussionID);-1!==i&&(this.discussions[t].childDiscussions[i]=e,this.activeDiscussion&&124===this.activeDiscussion.discussionCategoryID&&(this.activeDiscussion.childDiscussions=Object(c.l)(this.discussions[t].childDiscussions)))}}discussionDelete(e){this.activeDiscussion.discussionID===e.discussionID&&(this.activeDiscussion=null);const t=this.discussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&this.discussions.splice(t,1);const n=this.discussions.findIndex(e=>e.childDiscussions.some(t=>t.parentDiscussionID===e.discussionID));if(-1!==n){const t=this.discussions[n].childDiscussions.findIndex(t=>t.discussionID===e.discussionID);-1!==t&&(this.discussions[n].childDiscussions.splice(t,1),this.activeDiscussion&&this.activeDiscussion.discussionID===e.parentDiscussionID&&124===e.discussionCategoryID&&(this.activeDiscussion.childDiscussions=Object(c.l)(this.discussions[n].childDiscussions)))}this.discussions=Object(c.l)(this.discussions)}get onlineIndicator(){return this.signalRService.getClientsByChannel("dashboard").map(e=>Number(e.contactId))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.taskService.storeActiveTaskRx(null)}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](m.a),u["\u0275\u0275directiveInject"](u.ChangeDetectorRef),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](f.a),u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](D.b),u["\u0275\u0275directiveInject"](I.a),u["\u0275\u0275directiveInject"](b.a),u["\u0275\u0275directiveInject"](v.p),u["\u0275\u0275directiveInject"](o.c),u["\u0275\u0275directiveInject"](x.a),u["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notifications"]],decls:51,vars:35,consts:[[1,"d-flex",3,"avnonLoader"],[1,"left-hand-filter","d-flex","flex-column","pt-4","pl-2","pr-2",3,"click"],[1,"d-flex","flex-column","w-100","inner-container",3,"click"],[1,"pl-3","pr-3","mt-4"],[1,"nav","flex-column","filter-menu"],[1,"nav-item"],[1,"nav-link","cursor-pointer",3,"click"],["class","count",4,"ngIf"],[1,"p-0","bg-white","float-left","w-100","min-full-height","inbox-list",3,"avnonLoader"],[1,"table"],[1,"border-bottom"],[1,"p-0","sticky-action"],[1,"d-flex","align-items-center"],[1,"tabs","flex-grow-1","mr-3"],[1,"nav"],[1,"nav-link","active"],[1,"cursor-pointer","ml-auto","text-nowrap","mr-3",3,"click"],[1,"plus-ico-2"],[4,"ngIf"],[3,"activeEvent","closed",4,"ngIf"],[3,"activeApplicant","rhp","rhpClose",4,"ngIf"],[3,"taskOwnerID","formID","formFieldAnswerCategoryID","answerReferenceID","rhp","formCategoryID","activeTaskOwner","closeForm",4,"ngIf"],[3,"discussions","discussionDeleted","discussionUpdate","closed","showDM","discussionAdded",4,"ngIf"],[3,"discussions","taskDiscussion","activeDiscussion","discussionAdded","discussionUpdate","discussionDeleted","showMentor","closed","readDiscussion",4,"ngIf"],[3,"contact","fullScreen","discussions","mentorContactID","click","showDM","close","discussionAdded",4,"ngIf"],[1,"count"],[4,"ngFor","ngForOf"],[1,"p-0","border-0"],[1,"entry","d-flex","pt-2","pb-2",3,"avnonLoader","click"],["class","user-online","ngbTooltip","Online","container","body",4,"ngIf"],[1,"media","avatar","avatar-32","avatar-32-rounded","mr-0"],["class","img-fluid img-32 cover","alt","Avatar",3,"src",4,"ngIf"],["class","avatar-generated",3,"background-color",4,"ngIf"],[1,"d-flex","flex-column","ml-2","flex-grow-1","content-max-w"],[1,"d-flex","align-items-center","mb-035r"],[1,"p-0","mb-0","author","lh-1"],["class","actions",3,"disabled","click",4,"ngIf"],[1,"mb-0","d-flex","flex-column"],[1,"d-flex","fz-14","mb-035r"],[1,"lh-1","subject",3,"innerHTML","ngClass"],[1,"ml-auto","mr-2","lh-1","text-nowrap","fz-12"],[1,"meta","notification-text",3,"innerHTML"],["ngbTooltip","Online","container","body",1,"user-online"],["alt","Avatar",1,"img-fluid","img-32","cover",3,"src"],[1,"avatar-generated"],[1,"actions",3,"click"],["ngbDropdown","","placement","bottom-right"],["type","button","ngbDropdownToggle","",1,"btn","btn-30"],[1,"ico","dots-ico"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],["class","user-online","ngbTooltip","User is online",4,"ngIf"],[1,"ml-auto","mr-2","lh-1","fz-12"],["ngbTooltip","User is online",1,"user-online"],[1,"d-flex","flex-column","ml-2","flex-grow-1"],[1,"lh-1",3,"ngClass"],[1,"meta","notification-text"],[1,"m-0"],[3,"activeEvent","closed"],[3,"activeApplicant","rhp","rhpClose"],[3,"taskOwnerID","formID","formFieldAnswerCategoryID","answerReferenceID","rhp","formCategoryID","activeTaskOwner","closeForm"],[3,"discussions","discussionDeleted","discussionUpdate","closed","showDM","discussionAdded"],[3,"discussions","taskDiscussion","activeDiscussion","discussionAdded","discussionUpdate","discussionDeleted","showMentor","closed","readDiscussion"],[3,"contact","fullScreen","discussions","mentorContactID","click","showDM","close","discussionAdded"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275listener"]("click",function(){return t.toggleFilter=!1}),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),u["\u0275\u0275elementStart"](3,"h3",3),u["\u0275\u0275text"](4,"Folders"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"ul",4),u["\u0275\u0275elementStart"](6,"li",5),u["\u0275\u0275elementStart"](7,"a",6),u["\u0275\u0275listener"]("click",function(){return t.onFilterClick(0)}),u["\u0275\u0275text"](8," Inbox "),u["\u0275\u0275template"](9,os,3,5,"span",7),u["\u0275\u0275pipe"](10,"boxFilter"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"li",5),u["\u0275\u0275elementStart"](12,"a",6),u["\u0275\u0275listener"]("click",function(){return t.onFilterClick(1)}),u["\u0275\u0275text"](13," Sent "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"li",5),u["\u0275\u0275elementStart"](15,"a",6),u["\u0275\u0275listener"]("click",function(){return t.onFilterClick(2)}),u["\u0275\u0275text"](16," Favorites "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"li",5),u["\u0275\u0275elementStart"](18,"a",6),u["\u0275\u0275listener"]("click",function(){return t.onFilterClick(3)}),u["\u0275\u0275text"](19," Drafts "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"li",5),u["\u0275\u0275elementStart"](21,"a",6),u["\u0275\u0275listener"]("click",function(){return t.onFilterClick(4)}),u["\u0275\u0275text"](22," Deleted "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"li",5),u["\u0275\u0275elementStart"](24,"a",6),u["\u0275\u0275listener"]("click",function(){return t.onFilterClick(5)}),u["\u0275\u0275text"](25," System "),u["\u0275\u0275template"](26,as,2,1,"span",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"div",8),u["\u0275\u0275elementStart"](28,"table",9),u["\u0275\u0275elementStart"](29,"tbody"),u["\u0275\u0275elementStart"](30,"tr",10),u["\u0275\u0275elementStart"](31,"td",11),u["\u0275\u0275elementStart"](32,"div",12),u["\u0275\u0275elementStart"](33,"div",13),u["\u0275\u0275elementStart"](34,"ul",14),u["\u0275\u0275elementStart"](35,"li",5),u["\u0275\u0275elementStart"](36,"a",15),u["\u0275\u0275text"](37),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](38,"a",16),u["\u0275\u0275listener"]("click",function(){return t.onAddDiscussion()}),u["\u0275\u0275element"](39,"span",17),u["\u0275\u0275text"](40,"Add "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](41,ps,3,4,"ng-container",18),u["\u0275\u0275template"](42,bs,3,4,"ng-container",18),u["\u0275\u0275template"](43,Ss,2,1,"ng-container",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](44,ks,1,1,"app-event-rhp",19),u["\u0275\u0275template"](45,ws,1,1,"app-event-minutes-rhp",19),u["\u0275\u0275template"](46,Os,1,2,"app-admin-enrollment-stage-profile",20),u["\u0275\u0275template"](47,Es,1,7,"app-form-report",21),u["\u0275\u0275template"](48,Ms,1,1,"app-add-notification",22),u["\u0275\u0275template"](49,Ps,1,3,"app-notification-discussion",23),u["\u0275\u0275template"](50,js,1,4,"app-notification-mentor-profile",24)),2&e&&(u["\u0275\u0275property"]("avnonLoader",t.loading||t.discussionsLoading),u["\u0275\u0275advance"](1),u["\u0275\u0275classProp"]("toggled",t.toggleFilter),u["\u0275\u0275advance"](6),u["\u0275\u0275classProp"]("active",0===t.view),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",u["\u0275\u0275pipeBind3"](10,29,t.discussions,1,!0)),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("active",1===t.view),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("active",2===t.view),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("active",3===t.view),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("active",4===t.view),u["\u0275\u0275advance"](3),u["\u0275\u0275classProp"]("active",5===t.view),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.unreadCount>0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("avnonLoader",t.loading),u["\u0275\u0275advance"](10),u["\u0275\u0275textInterpolate1"](" ",0===t.view?"Inbox":1===t.view?"Sent":2===t.view?"Favorites":3===t.view?"Drafts":4===t.view?"Deleted":"System"," "),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",0===t.view),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",1===t.view),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",5===t.view),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.activeEvent&&!u["\u0275\u0275pureFunction0"](33,Ts).includes(t.activeEvent.eventCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.activeEvent&&u["\u0275\u0275pureFunction0"](34,Ts).includes(t.activeEvent.eventCategoryID)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.activeApplicant),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.formTaskOwner&&t.formTaskOwner.taskOwnerID&&t.formTaskOwner.formID),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.addDiscussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.activeDiscussion),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.mentorContactID||t.mentor))},directives:[y.a,i.n,i.m,i.l,v.C,v.i,v.m,v.k,C.a,S.a,k.a,w.a,Xt,ns,bi],pipes:[is,tn.a,ss.a,me.a,pe.a,he],styles:[".notification-text[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;margin:0!important;line-height:1!important;font-weight:400!important}.tabs[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{border:0!important;margin-top:0!important}.tabs[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:400;padding-left:1rem;padding-right:1rem}.tabs[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#54606a;background:#fff}.tabs[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{font-weight:700;color:#54606a;border-bottom:3px solid #d64b2b}.author[_ngcontent-%COMP%]{font-size:14px!important;line-height:1}.entry[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#88898a!important;margin:0!important;line-height:1.1!important;font-weight:400!important}  .subject{overflow:hidden;min-height:15px;max-height:15px;margin-right:20px;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;line-height:1!important;font-weight:400!important}  .notification-text p{color:#88898a!important;margin:0!important;line-height:1.1!important;font-weight:400!important}.notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%],   .notification-text p b,   .notification-text p strong{font-weight:400!important}.notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#88898a!important;margin:0!important;line-height:1.1!important}.badge-light[_ngcontent-%COMP%], .notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .notification-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:400!important}.badge-light[_ngcontent-%COMP%]{background:#c8c6c4;font-size:12px!important}.inbox-list[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;max-height:calc(100vh - 64px)}@media (max-width:1024px){.inbox-list[_ngcontent-%COMP%]{max-height:calc(100vh - 110px)}}.sticky-action[_ngcontent-%COMP%]{background:#fff;z-index:1;position:sticky;top:0}.entry[_ngcontent-%COMP%]{max-width:500px}@media (max-width:1024px){.entry[_ngcontent-%COMP%]{max-width:100vw}}.content-max-w[_ngcontent-%COMP%]{max-width:calc(100% - 32px)}.user-online[_ngcontent-%COMP%]{width:8px;height:8px;display:flex;border-radius:50%;background:#00b107;left:8px;top:8px;position:absolute}"]}),e})()}];let As=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(Fs)],o.g]}),e})();var Vs=n("ZLSo");let _s=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})(),Ns=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,ae.l,ae.z,s.a,Vs.a,v.q,v.h]]}),e})();var Bs=n("Grqx"),Rs=n("GKkB"),$s=n("pr+S"),Ls=n("hXeK"),Us=n("OZbp"),qs=n("6gVs"),zs=n("5JBz"),Hs=n("PCNd"),Gs=n("6U5Y"),Ws=n("X0Jz"),Js=n("GTGJ"),Qs=n("+kYu"),Ys=n("N8qd"),Xs=n("Ws3k"),Ks=n("rwqn");let Zs=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,As,ae.z,ae.l,s.a,Vs.a,_s,Ns,v.q,Bs.a,Rs.a,$s.a,Ls.a,Us.a,qs.EnrollmentModule,zs.FormReportModule,ae.l,ae.z,re.b.forRoot(),Hs.a,v.v,Gs.a,v.D,v.l,v.h,Ws.DocumentsModule,v.F,Js.a,Qs.a,Ys.a,kn.b,v.x,Xs.PlannerModule,Wn.b,de.c,Ks.a]]}),e})()}}]);