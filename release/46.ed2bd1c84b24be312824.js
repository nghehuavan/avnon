(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{N5Gn:function(e,t,n){"use strict";n.r(t),n.d(t,"PermissionModule",function(){return O});var i=n("ofXK"),r=n("3Pt+"),s=n("j4PG"),o=n("pr+S"),a=n("GKkB"),c=n("1kSV"),l=n("tyNb"),m=n("9122"),d=n("cxbk"),p=n("OzGw"),h=n("8J6U"),u=n("cp0P"),f=n("frau"),v=n("fXoL"),g=n("SVtl"),w=n("kmKP"),I=n("f/iK"),k=n("Jn3s"),S=n("SdWN"),y=n("0mlJ");function x(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"h1",9),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",e.network.network," Network Permissions")}}function D(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"h1",9),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",e.title," Permissions")}}function E(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",10),v["\u0275\u0275elementStart"](1,"span",11),v["\u0275\u0275element"](2,"img",12),v["\u0275\u0275pipe"](3,"avatar"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",13),v["\u0275\u0275elementStart"](5,"h2"),v["\u0275\u0275text"](6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",14),v["\u0275\u0275elementStart"](8,"div",15),v["\u0275\u0275elementStart"](9,"button",16),v["\u0275\u0275element"](10,"span",17),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"ul",18),v["\u0275\u0275elementStart"](12,"li"),v["\u0275\u0275elementStart"](13,"a",19),v["\u0275\u0275listener"]("click",function(){v["\u0275\u0275restoreView"](e);const n=t.index;return v["\u0275\u0275nextContext"]().deletePermission(n)}),v["\u0275\u0275text"](14,"Delete"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](15,"div",20),v["\u0275\u0275elementStart"](16,"span"),v["\u0275\u0275text"](17),v["\u0275\u0275pipe"](18,"date"),v["\u0275\u0275pipe"](19,"dateObject"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("src",v["\u0275\u0275pipeBind1"](3,4,e.profilePhoto),v["\u0275\u0275sanitizeUrl"]),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate2"]("",e.firstName," ",e.surname,""),v["\u0275\u0275advance"](11),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](18,6,v["\u0275\u0275pipeBind1"](19,9,e.dateGranted),"dd MMM, yyyy"))}}let b=(()=>{class e{constructor(e,t,n,i,r,s){this.networkService=e,this.userService=t,this.activatedRoute=n,this.modal=i,this.router=r,this.permissionService=s,this.permissions=[],this.blobUrl=d.a.apiBlobUrl+"/",this.title="",this.user=this.userService.user.getValue(),this.companyID=this.user.companyID||0,this.contactID=this.user.contactID}ngOnInit(){if(this.areaID=+this.activatedRoute.snapshot.params.id,[8,10].includes(this.areaID))this.getNetwork();else{const e=m.a.find(e=>e.permissionAreaID===this.areaID);this.title=e.permissionArea,this.getPermissions()}}getNetwork(){this.networkLoading=!0,this.networkService.getNetwork(0,0,0,0,this.companyID,0,8===this.areaID?2:1).subscribe(e=>{this.network=e[0],this.network&&this.getPermissions(),this.networkLoading=!1})}getPermissions(){let e=this.companyID;this.network&&(e=this.network.networkID),this.loading=!0,this.permissionService.getPermission(this.areaID,e,0,this.companyID).subscribe(e=>{this.permissions=e,this.loading=!1})}postPermissions(){const e=this.modal.open(f.a);e.componentInstance.selectedContacts=Object(h.l)(this.permissions),e.componentInstance.title="Contacts for granting permissions",e.result.then(e=>{const t=e.filter(e=>0===this.permissions.filter(t=>t.contactID===e.contactID).length),n=[];let i=this.companyID;this.network&&(i=this.network.networkID),t.forEach(e=>{const t={permissionAreaID:this.areaID,permissionTypeID:0,referenceID:i,contactID:e.contactID,companyID:this.companyID,grantedByContactID:this.contactID,dateGranted:Object(h.a)(new Date)};n.push(this.permissionService.create(t))}),n.length&&(this.loading=!0,Object(u.a)(n).subscribe(t=>{t.forEach(t=>{const n=e.find(e=>e.contactID===t.contactID);t.permissionID=t.inOut_PermissionID,t.firstName=n.firstName,t.surname=n.surname,t.profilePhoto=n.profilePhoto,this.permissions.push(t)}),this.loading=!1}))})}deletePermission(e){const t=this.permissions[e],n=this.modal.open(p.a);n.componentInstance.objectType="Permission",n.componentInstance.objectDetails=`${t.firstName} ${t.surname}`,n.result.then(n=>{"Yes"===n&&this.permissionService.delete(t.permissionID).subscribe(()=>{this.permissions.splice(e,1)})})}back(){this.router.navigate(["/permissions"])}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](w.a),v["\u0275\u0275directiveInject"](l.a),v["\u0275\u0275directiveInject"](c.p),v["\u0275\u0275directiveInject"](l.c),v["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-permission-detail"]],decls:13,vars:5,consts:[[3,"avnonLoader"],[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],["class","display-inline",4,"ngIf"],[1,"filter-container","d-flex","w-100","align-items-center","border-bottom"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"plus-ico-2"],["class","entry",4,"ngFor","ngForOf"],[1,"display-inline"],[1,"entry"],[1,"media","avatar","avatar-48","avatar-48-square"],["alt","Avatar",1,"img-fluid","img-48","cover",3,"src"],[1,"d-flex"],[1,"actions"],[1,"dropdown"],["type","button","id","dd1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-30"],[1,"ico","dots-ico"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"meta"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"span",2),v["\u0275\u0275listener"]("click",function(){return t.back()}),v["\u0275\u0275element"](3,"i",3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](4,x,2,1,"h1",4),v["\u0275\u0275template"](5,D,2,1,"h1",4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",5),v["\u0275\u0275elementStart"](7,"span"),v["\u0275\u0275text"](8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"a",6),v["\u0275\u0275listener"]("click",function(){return t.postPermissions()}),v["\u0275\u0275element"](10,"span",7),v["\u0275\u0275text"](11,"Manage Permissions "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](12,E,20,11,"div",8),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275property"]("avnonLoader",t.loading||t.networkLoading),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf",t.network),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!t.network),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("",t.permissions.length," contacts"),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngForOf",t.permissions))},directives:[k.a,i.n,i.m],pipes:[S.a,i.e,y.a],styles:[".permission-content[_ngcontent-%COMP%]{margin-top:55px;min-height:calc(100vh - 55px)}"]}),e})();function P(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",6),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().navigateToPermission(8)}),v["\u0275\u0275elementStart"](1,"h2"),v["\u0275\u0275text"](2,"Mentor Network"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"p"),v["\u0275\u0275text"](4,"Define who can review and and accept or decline requests join to your mentor network"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}}function j(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",6),v["\u0275\u0275listener"]("click",function(){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().navigateToPermission(10)}),v["\u0275\u0275elementStart"](1,"h2"),v["\u0275\u0275text"](2,"Startup Network"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"p"),v["\u0275\u0275text"](4,"Define who can review and and accept or decline requests join to your startup network"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}}const N=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.userService=e,this.networkService=t,this.location=n,this.router=i,this.user=this.userService.user.getValue(),this.companyID=this.user.companyID}ngOnInit(){this.getNetworks()}getNetworks(){this.loading=!0,this.networkService.getNetwork(0,0,0,0,this.companyID,0,0).subscribe(e=>{this.startupNetwork=e.find(e=>1===e.networkTypeClassificationID),this.mentorNetwork=e.find(e=>2===e.networkTypeClassificationID),this.loading=!1})}navigateToPermission(e){this.router.navigate(["/permissions",e])}back(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](w.a),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](i.j),v["\u0275\u0275directiveInject"](l.c))},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["app-permissions"]],decls:28,vars:3,consts:[[1,"page-title"],[1,"cursor-pointer","text-primary","display-inline","mr-2",3,"click"],[1,"fas","fa-long-arrow-alt-left"],[1,"display-inline"],[3,"avnonLoader"],["class","entry",3,"click",4,"ngIf"],[1,"entry",3,"click"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"span",1),v["\u0275\u0275listener"]("click",function(){return t.back()}),v["\u0275\u0275element"](2,"i",2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"h1",3),v["\u0275\u0275text"](4,"Permissions"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"div",4),v["\u0275\u0275template"](6,P,5,0,"div",5),v["\u0275\u0275template"](7,j,5,0,"div",5),v["\u0275\u0275elementStart"](8,"div",6),v["\u0275\u0275listener"]("click",function(){return t.navigateToPermission(14)}),v["\u0275\u0275elementStart"](9,"h2"),v["\u0275\u0275text"](10,"Forms"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"p"),v["\u0275\u0275text"](12,"Define who can manage forms"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"div",6),v["\u0275\u0275listener"]("click",function(){return t.navigateToPermission(4)}),v["\u0275\u0275elementStart"](14,"h2"),v["\u0275\u0275text"](15,"Programs"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"p"),v["\u0275\u0275text"](17,"Define who can manage programs"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](18,"div",6),v["\u0275\u0275listener"]("click",function(){return t.navigateToPermission(15)}),v["\u0275\u0275elementStart"](19,"h2"),v["\u0275\u0275text"](20,"Training Coordinator"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](21,"p"),v["\u0275\u0275text"](22,"Define who can manage training events"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](23,"div",6),v["\u0275\u0275listener"]("click",function(){return t.navigateToPermission(16)}),v["\u0275\u0275elementStart"](24,"h2"),v["\u0275\u0275text"](25,"Admin"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](26,"p"),v["\u0275\u0275text"](27,"System Admin"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("avnonLoader",t.loading),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.mentorNetwork),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.mentorNetwork))},directives:[k.a,i.n],styles:[".area-content[_ngcontent-%COMP%]{border-left:1px solid #d5d5d5;border-right:1px solid #d5d5d5;margin-top:55px;min-height:calc(100vh - 60px)}"]}),e})()},{path:":id",component:b}];let C=(()=>{class e{}return e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.g.forChild(N)],l.g]}),e})(),O=(()=>{class e{}return e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,r.l,r.z,C,s.a,c.q,c.l,o.a,a.a]]}),e})()}}]);